<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>èµ„æº&amp;ç½‘ç«™&amp;å·¥å…·æ”¶é›†</title>
      <link href="/p/1473860796.html"/>
      <url>/p/1473860796.html</url>
      
        <content type="html"><![CDATA[<h1 id="AIç±»"><a href="#AIç±»" class="headerlink" title="AIç±»"></a>AIç±»</h1><h2 id="AIå¯¼èˆªç½‘ç«™"><a href="#AIå¯¼èˆªç½‘ç«™" class="headerlink" title="AIå¯¼èˆªç½‘ç«™"></a>AIå¯¼èˆªç½‘ç«™</h2><p>ğŸ§AiToolBoxï¼š<a href="http://aitoolbox.cn/" target="_blank" rel="noopener">http://aitoolbox.cn/</a></p><p>ğŸ»â€â„ï¸AIå·¥å…·é›†ï¼š<a href="https://ai-bot.cn" target="_blank" rel="noopener">https://ai-bot.cn</a></p><p>ğŸ¦AiNavï¼š<a href="https://www.ainavpro.com" target="_blank" rel="noopener">https://www.ainavpro.com</a></p><p>ğŸ¦Šæ–°æ¦œAIï¼š<a href="https://ai.newrank.cn/navigation" target="_blank" rel="noopener">https://ai.newrank.cn/navigation</a></p><p>ğŸ¤ä¸€èµ·ç”¨AIï¼š<a href="https://17yongai.com" target="_blank" rel="noopener">https://17yongai.com</a></p><p>ğŸ»AIå¯¼èˆªç½‘ï¼š<a href="https://www.ainav.cn" target="_blank" rel="noopener">https://www.ainav.cn</a></p><h2 id="AIå·¥å…·"><a href="#AIå·¥å…·" class="headerlink" title="AIå·¥å…·"></a>AIå·¥å…·</h2><ul><li>VectorizerAI â€“ AI ä½å›¾è½¬çŸ¢é‡</li></ul><p>é“¾æ¥ï¼š<a href="https://vectorizer.ai/" target="_blank" rel="noopener">https://vectorizer.ai/</a></p><p>åˆ©ç”¨äººå·¥æ™ºèƒ½å°† JPGã€PNG ç­‰ä½å›¾è½¬æˆçŸ¢é‡ SVG æ ¼å¼ã€‚å…ˆç”¨ MidJourney ç”Ÿæˆæ’å›¾ï¼Œå†ç”¨è¿™ä¸ªå·¥å…·è½¬æˆçŸ¢é‡ç•¥åŠ ä¿®æ”¹ï¼Œå²‚ä¸ç¾å“‰ã€‚</p><ul><li>Meta SAMå›¾åƒåˆ†å‰²demo</li></ul><p>é“¾æ¥ï¼š<a href="https://segment-anything.com/demo" target="_blank" rel="noopener">https://segment-anything.com/demo</a></p><p>åˆ†å‰²ä¸€åˆ‡</p><ul><li>Poe</li></ul><p>é“¾æ¥ï¼š<a href="https://poe.com/" target="_blank" rel="noopener">https://poe.com/</a></p><p>AIå¯¹è¯ï¼Œèƒ½å¤Ÿç”¨ä¸ŠChatGPT3.5ï¼Œåªéœ€ç§‘å­¦å³å¯</p><ul><li>AIæ£€æµ‹å™¨</li></ul><p>é“¾æ¥ï¼š<a href="https://learningprompt.wiki/docs/midjourney-learning-path" target="_blank" rel="noopener">https://learningprompt.wiki/docs/midjourney-learning-path</a></p><p>å·ç§°ä¸–ç•Œæ’åç¬¬ä¸€çš„ AI æ£€æµ‹å™¨,é€ƒé¿ç”¨ AI å†™æ–‡ç« å¯èƒ½è¢«æŠ“åˆ°çš„å·¥å…·ã€‚</p><p>å·¥ä½œåŸç†ï¼šå®ƒä¼šæ‰°ä¹±æ¯ä¸ªå¥å­ï¼Œå¹¶å®Œå…¨æ©ç›–äº†ä»»ä½•æ–‡æœ¬ï¼ˆæœ€å¤š 5000 ä¸ªå•è¯ï¼‰ï¼ŒåŒæ—¶ä¿ç•™åŸæ„ï¼Œç›´åˆ°æ‰€æœ‰ LLM çš„ç—•è¿¹éƒ½æ¶ˆå¤±ã€‚</p><p>å®ƒç»“åˆä½¿ç”¨äº† NLP æŠ€æœ¯ï¼ŒåŒ…æ‹¬ä½¿ç”¨ GPT4 è¿›è¡Œé‡Šä¹‰å’Œè°·æ­Œ T5 æ¨¡å‹çš„å¾®è°ƒç‰ˆæœ¬ã€‚</p><ul><li>è®¾è®¡å¸ˆAIå·¥å…·é›†åˆ</li></ul><p>é“¾æ¥ï¼š<a href="https://designtools.ai/" target="_blank" rel="noopener">https://designtools.ai/</a></p><p>ä¸“é—¨æ”¶é›†è®¾è®¡å¸ˆéœ€è¦ä½¿ç”¨çš„aiå·¥å…·çš„ç½‘ç«™ï¼Œå·¥å…·æ˜¯å¦æ”¶è´¹å·²æ ‡æ˜ã€‚</p><h2 id="AIæ•™ç¨‹"><a href="#AIæ•™ç¨‹" class="headerlink" title="AIæ•™ç¨‹"></a>AIæ•™ç¨‹</h2><ul><li>Midjourneyæ•™ç¨‹</li></ul><p>é“¾æ¥ï¼š<a href="https://learningprompt.wiki/docs/midjourney-learning-path" target="_blank" rel="noopener">https://learningprompt.wiki/docs/midjourney-learning-path</a></p><h2 id="chatgpt"><a href="#chatgpt" class="headerlink" title="chatgpt"></a>chatgpt</h2><ul><li>æœ€æ–°å…è´¹å¯ç”¨ç«™ç‚¹ï¼ˆå¯èƒ½æ— æ•ˆï¼‰</li></ul><p><a href="https://theb.ai/" target="_blank" rel="noopener">https://theb.ai/</a></p><p><a href="http://newb.site/" target="_blank" rel="noopener">http://newb.site/</a></p><p><a href="https://qachat.cn/" target="_blank" rel="noopener">https://qachat.cn/</a></p><p><a href="https://freegpt.one/" target="_blank" rel="noopener">https://freegpt.one/</a></p><p><a href="https://chat2.xeasy.me/" target="_blank" rel="noopener">https://chat2.xeasy.me/</a></p><p><a href="https://dev.yqcloud.top/" target="_blank" rel="noopener">https://dev.yqcloud.top/</a></p><p><a href="https://chat.forchange.cn/" target="_blank" rel="noopener">https://chat.forchange.cn/</a></p><p><a href="https://chater.lanyun1103.top/" target="_blank" rel="noopener">https://chater.lanyun1103.top/</a></p><ul><li>ChatGPT æç¤ºè¯­å¤§å…¨</li></ul><p>åœ°å€ï¼š<a href="https://prompts.fresns.cn/" target="_blank" rel="noopener">https://prompts.fresns.cn/</a></p><ul><li>å®ç”¨ChatGPT æç¤ºåˆ›å»ºåˆ†äº«</li></ul><p>åœ°å€ï¼š<a href="https://openprompt.co/" target="_blank" rel="noopener">https://openprompt.co/</a></p><ul><li>ChatGPTæç¤ºè¯Prompt</li></ul><p>ChatGPT Shortcutï¼š<a href="https://newzone.top/chatgpt/cn/" target="_blank" rel="noopener">https://newzone.top/chatgpt/cn/</a></p><ul><li>ChatGPTè¿›é˜¶ç©æ³•</li></ul><p>è§’è‰²æ‰®æ¼”åœ°å€ï¼š <a href="http://www.tdchat1.com/playing.html" target="_blank" rel="noopener">http://www.tdchat1.com/playing.html</a></p><ul><li>ChatGPTèµ„æ–™æ±‡æ€»</li></ul><p>åœ°å€ï¼š<a href="https://github.com/dalinvip/Awesome-ChatGPT" target="_blank" rel="noopener">https://github.com/dalinvip/Awesome-ChatGPT</a></p><ul><li>ChatGPTçŸ¥è¯†åº“ç½‘ç«™</li></ul><p>åœ°å€ï¼š<a href="https://chatgpt.moyucm.xyz/" target="_blank" rel="noopener">https://chatgpt.moyucm.xyz/</a></p><h1 id="ç”µå­ä¹¦ç±»"><a href="#ç”µå­ä¹¦ç±»" class="headerlink" title="ç”µå­ä¹¦ç±»"></a>ç”µå­ä¹¦ç±»</h1><p>16 ä¸ª z-library é•œåƒç½‘ç«™ï¼š</p><p><a href="https://zlib.cydiar.com/" target="_blank" rel="noopener">https://zlib.cydiar.com/</a></p><p><a href="https://zbook.lol/" target="_blank" rel="noopener">https://zbook.lol/</a></p><p><a href="https://zlib.knat.network/" target="_blank" rel="noopener">https://zlib.knat.network/</a></p><p><a href="https://zlib.9farm.com/" target="_blank" rel="noopener">https://zlib.9farm.com/</a></p><p><a href="https://zlib.qtoh.xyz/" target="_blank" rel="noopener">https://zlib.qtoh.xyz/</a></p><p><a href="https://zlib.awesc.com/" target="_blank" rel="noopener">https://zlib.awesc.com/</a></p><p><a href="https://book.vergedx.me/" target="_blank" rel="noopener">https://book.vergedx.me/</a></p><p><a href="https://zlib.pseudoyu.com/" target="_blank" rel="noopener">https://zlib.pseudoyu.com/</a></p><p><a href="https://read.liugezhou.online/" target="_blank" rel="noopener">https://read.liugezhou.online/</a></p><p><a href="https://book-searcher.eu.org/" target="_blank" rel="noopener">https://book-searcher.eu.org/</a></p><p><a href="https://zlib.zwt.one/" target="_blank" rel="noopener">https://zlib.zwt.one/</a></p><p><a href="https://zlib.missuo.me/" target="_blank" rel="noopener">https://zlib.missuo.me/</a></p><p><a href="https://zlibrary.shuziyimin.org/" target="_blank" rel="noopener">https://zlibrary.shuziyimin.org/</a></p><p><a href="https://bk.hallowlib.org/" target="_blank" rel="noopener">https://bk.hallowlib.org/</a></p><p><a href="https://1lib.ink/" target="_blank" rel="noopener">https://1lib.ink/</a></p><p><a href="https://annas-archive.org/" target="_blank" rel="noopener">https://annas-archive.org/</a>  </p><h1 id="å‰åç«¯ç±»"><a href="#å‰åç«¯ç±»" class="headerlink" title="å‰åç«¯ç±»"></a>å‰åç«¯ç±»</h1><h2 id="å‰ç«¯"><a href="#å‰ç«¯" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h2><ul><li>é™æ€èµ„æºJSã€CSSå¼€æºåº“</li></ul><p>é“¾æ¥ï¼š<a href="https://cdn.baomitu.com/" target="_blank" rel="noopener">https://cdn.baomitu.com/</a></p><p>æå¥½ç”¨çš„CDN</p><ul><li>æŸCDN</li></ul><p>é“¾æ¥ï¼š<a href="https://unpkg.com/" target="_blank" rel="noopener">https://unpkg.com/</a></p><p>å…·ä½“æ˜¯å¹²ä»€ä¹ˆçš„å¯ä»¥è‡ªè¡Œå»äº†è§£ï¼Œæˆ‘æ²¡æœ‰åšè¯¦ç»†è°ƒæŸ¥ä¸ä½¿ç”¨</p><h1 id="è½¯ä»¶ç±»"><a href="#è½¯ä»¶ç±»" class="headerlink" title="è½¯ä»¶ç±»"></a>è½¯ä»¶ç±»</h1><h2 id="ç¼–è¾‘ç±»"><a href="#ç¼–è¾‘ç±»" class="headerlink" title="ç¼–è¾‘ç±»"></a>ç¼–è¾‘ç±»</h2><ul><li>Typora 1.5.10</li></ul><p>é“¾æ¥ï¼š<a href="https://wwwi.lanzouo.com/iUwQI0srx55e" target="_blank" rel="noopener">https://wwwi.lanzouo.com/iUwQI0srx55e</a></p><ul><li>Sublime Text</li></ul><p>é“¾æ¥ï¼š<a href="https://wwwi.lanzouo.com/i3qJ50hbrz1c" target="_blank" rel="noopener">https://wwwi.lanzouo.com/i3qJ50hbrz1c</a></p><h1 id="é­”æ³•ç±»"><a href="#é­”æ³•ç±»" class="headerlink" title="é­”æ³•ç±»"></a>é­”æ³•ç±»</h1><h2 id="1-å¤‡ç”¨free"><a href="#1-å¤‡ç”¨free" class="headerlink" title="1. å¤‡ç”¨free"></a>1. å¤‡ç”¨free</h2><ul><li>[æ°¸ä¹…è®¢é˜…](<a href="https://suc.bihai.cf/sub?target=clash&amp;url=https%3A%2F%2Fraw.githubusercontent.com%2Fwentao883%2Fwentao883%2Fmain%2FREADME.md&amp;insert=" target="_blank" rel="noopener">https://suc.bihai.cf/sub?target=clash&amp;url=https%3A%2F%2Fraw.githubusercontent.com%2Fwentao883%2Fwentao883%2Fmain%2FREADME.md&amp;insert=</a> false&amp;config=https%3A%2F%2Fraw.githubusercontent.com%2FACL4SSR%2FACL4SSR%2Fmaster%2FClash%2Fconfig%2FACL4SSR_Online.ini&amp;emoji=true&amp;list=false&amp;udp=false&amp;tfo=false&amp;expand=true&amp;scv=false&amp;fdn=false&amp;new_name=true) åº”è¯¥æ˜¯ç™½å«–çš„</li><li><a href="https://web.henet.uk/#/login" target="_blank" rel="noopener">https://web.henet.uk/#/login</a> é™æ—¶å…è´¹100G</li><li><a href="https://airport.xiaoheizis.xyz/#/dashboard" target="_blank" rel="noopener">https://airport.xiaoheizis.xyz/#/dashboard</a> ç½‘ç»œåŠ é€Ÿï¼Œ10Gé•¿æœŸ</li><li><a href="https://xn--z4q48lcvpeyd.com/#/dashboard" target="_blank" rel="noopener">https://xn--z4q48lcvpeyd.com/#/dashboard</a> æ¬¡å…ƒï¼Œ10GçŸ­æœŸ</li><li><a href="https://sub.danhu.ml/clash?token=FProxies230419ASWaxAijdLuSWwlN" target="_blank" rel="noopener">è›‹é»„é…±</a> é™å…</li></ul>]]></content>
      
      
      <categories>
          
          <category> èµ„æº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> èµ„æº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>matplotlibç”»å›¾</title>
      <link href="/p/3804173379.html"/>
      <url>/p/3804173379.html</url>
      
        <content type="html"><![CDATA[<h1 id="matplotlib-pyplot"><a href="#matplotlib-pyplot" class="headerlink" title="matplotlib.pyplot"></a>matplotlib.pyplot</h1><h1 id="æŠ˜çº¿å›¾ç»˜åˆ¶"><a href="#æŠ˜çº¿å›¾ç»˜åˆ¶" class="headerlink" title="æŠ˜çº¿å›¾ç»˜åˆ¶"></a>æŠ˜çº¿å›¾ç»˜åˆ¶</h1><h1 id="å­å›¾æ“ä½œ"><a href="#å­å›¾æ“ä½œ" class="headerlink" title="å­å›¾æ“ä½œ"></a>å­å›¾æ“ä½œ</h1><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltfig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># fig = plt.figure(figsize=(4, 3)) ç”»çš„å›¾å¤§å°å®½4é«˜3</span><span class="token comment" spellcheck="true"># åœ¨ 2 * 2 å›¾åƒä¸­æ˜¾ç¤ºåœ¨ç¬¬1,2,4ä¸ªä½ç½®(ä»1å¼€å§‹)</span>ax1 <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>ax2 <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>ax3 <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹å­å›¾åˆ†åˆ«è¿›è¡Œæ“ä½œ</p><pre class="line-numbers language-python"><code class="language-python">ax1<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token punctuation">)</span>ax2<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> äººå·¥æ™ºèƒ½ </category>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> ç”»å›¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pandasæ•°æ®å¤„ç†</title>
      <link href="/p/2946568862.html"/>
      <url>/p/2946568862.html</url>
      
        <content type="html"><![CDATA[<h1 id="Pandas"><a href="#Pandas" class="headerlink" title="Pandas"></a>Pandas</h1><h1 id="è¯»å–æ•°æ®"><a href="#è¯»å–æ•°æ®" class="headerlink" title="è¯»å–æ•°æ®"></a>è¯»å–æ•°æ®</h1><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pddf <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># pathä¸ºè¯»å–æ•°æ®çš„è·¯å¾„</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h1 id="æŸ¥çœ‹æ•°æ®"><a href="#æŸ¥çœ‹æ•°æ®" class="headerlink" title="æŸ¥çœ‹æ•°æ®"></a>æŸ¥çœ‹æ•°æ®</h1><pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token operator">>></span><span class="token operator">></span> mport pandas <span class="token keyword">as</span> pddf <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'lisa'</span><span class="token punctuation">,</span><span class="token string">'f'</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'joy'</span><span class="token punctuation">,</span><span class="token string">'f'</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'tom'</span><span class="token punctuation">,</span><span class="token string">'m'</span><span class="token punctuation">,</span><span class="token string">'21'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                  index <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                  columns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'sex'</span><span class="token punctuation">,</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># æµ‹è¯•æ•°æ®ã€‚</span><span class="token operator">>></span><span class="token operator">></span> df   name sex age<span class="token number">1</span>  lisa   f  <span class="token number">22</span><span class="token number">2</span>   joy   f  <span class="token number">22</span><span class="token number">3</span>   tom   m  <span class="token number">21</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="1-headå’Œtail"><a href="#1-headå’Œtail" class="headerlink" title="1 headå’Œtail"></a>1 headå’Œtail</h2><pre class="line-numbers language-python"><code class="language-python">df<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># æ‰“å°æ•°æ®çš„å‰5è¡Œ</span>df<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># æ‰“å°æ•°æ®çš„å‰10è¡Œ</span>df<span class="token punctuation">.</span>tail<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># æ‰“å°æ•°æ®çš„å5è¡Œ</span>df<span class="token punctuation">.</span>tail<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># æ‰“å°æ•°æ®çš„å10è¡Œ</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true"># æ‰“å°id = 8çš„è¿™ä¸€è¡Œ loc[]ä¸‹æ ‡ä»0å¼€å§‹ï¼Œæ•…æ˜¯æ‰“å°ç¬¬9è¡Œæ•°æ®ï¼ˆæ’é™¤é¦–è¡Œçš„å±æ€§åï¼‰</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>range<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true"># æ‰“å°id=1å’Œ2çš„è¿™ä¸¤è¡Œ</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true"># æ‰“å°id=1ï¼Œ3çš„è¿™ä¸¤è¡Œ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-df-â€˜column-nameâ€™"><a href="#2-df-â€˜column-nameâ€™" class="headerlink" title="2 df[â€˜column_nameâ€™]"></a>2 df[â€˜column_nameâ€™]</h2><pre class="line-numbers language-python"><code class="language-python">df<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span>df<span class="token punctuation">[</span><span class="token string">'gender'</span><span class="token punctuation">]</span>df<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'gender'</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">#é€‰å–å¤šåˆ—ï¼Œå¤šåˆ—åå­—è¦æ”¾åœ¨listé‡Œ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="3-df-row-start-index-row-end-index"><a href="#3-df-row-start-index-row-end-index" class="headerlink" title="3 df[row_start_index, row_end_index]"></a>3 df[row_start_index, row_end_index]</h2><pre class="line-numbers language-python"><code class="language-python">df<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token comment" spellcheck="true">#ç¬¬0è¡ŒåŠä¹‹åçš„è¡Œï¼Œç›¸å½“äºdfçš„å…¨éƒ¨æ•°æ®ï¼Œæ³¨æ„å†’å·æ˜¯å¿…é¡»çš„</span>df<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>    <span class="token comment" spellcheck="true">#ç¬¬2è¡Œä¹‹å‰çš„æ•°æ®ï¼ˆä¸å«ç¬¬2è¡Œï¼‰</span>df<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token comment" spellcheck="true">#ç¬¬0è¡Œ</span>df<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">#ç¬¬1è¡Œåˆ°ç¬¬2è¡Œï¼ˆä¸å«ç¬¬3è¡Œï¼‰</span>df<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">#æœ€åä¸€è¡Œ</span>df<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">#å€’æ•°ç¬¬3è¡Œåˆ°å€’æ•°ç¬¬1è¡Œï¼ˆä¸åŒ…å«æœ€å1è¡Œå³å€’æ•°ç¬¬1è¡Œï¼Œè¿™é‡Œæœ‰ç‚¹çƒ¦èºï¼Œå› ä¸ºä»å‰æ•°æ—¶ä»ç¬¬0è¡Œå¼€å§‹ï¼Œä»åæ•°å°±æ˜¯-1è¡Œå¼€å§‹ï¼Œæ¯•ç«Ÿæ²¡æœ‰-0ï¼‰</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-df-loc-index-column"><a href="#4-df-loc-index-column" class="headerlink" title="4 df.loc[index,column]"></a>4 df.loc[index,column]</h2><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># df.loc[index, column_name],é€‰å–æŒ‡å®šè¡Œå’Œåˆ—çš„æ•°æ®</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">]</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true"># é€‰å–ç¬¬0è¡Œåˆ°ç¬¬2è¡Œï¼Œnameåˆ—å’Œageåˆ—çš„æ•°æ®, æ³¨æ„è¿™é‡Œçš„è¡Œé€‰å–æ˜¯åŒ…å«ä¸‹æ ‡çš„ã€‚</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true"># é€‰å–æŒ‡å®šçš„ç¬¬2è¡Œå’Œç¬¬3è¡Œï¼Œnameå’Œageåˆ—çš„æ•°æ®</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df<span class="token punctuation">[</span><span class="token string">'gender'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'M'</span><span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true"># é€‰å–genderåˆ—æ˜¯Mï¼Œnameåˆ—çš„æ•°æ®</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df<span class="token punctuation">[</span><span class="token string">'gender'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'M'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true"># é€‰å–genderåˆ—æ˜¯Mï¼Œnameå’Œageåˆ—çš„æ•°æ®</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-iloc-row-index-column-index"><a href="#5-iloc-row-index-column-index" class="headerlink" title="5 iloc[row_index, column_index]"></a>5 iloc[row_index, column_index]</h2><pre class="line-numbers language-python"><code class="language-python">df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span>        <span class="token comment" spellcheck="true">#ç¬¬0è¡Œç¬¬0åˆ—çš„æ•°æ®</span>df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span>        <span class="token comment" spellcheck="true">#ç¬¬1è¡Œç¬¬2åˆ—çš„æ•°æ®ï¼Œ32</span>df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>    <span class="token comment" spellcheck="true">#ç¬¬1è¡Œå’Œç¬¬3è¡Œï¼Œä»ç¬¬0åˆ—åˆ°ç¬¬2åˆ—ï¼ˆä¸åŒ…å«ç¬¬2åˆ—ï¼‰çš„æ•°æ®</span>df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span>    <span class="token comment" spellcheck="true">#ç¬¬1è¡Œåˆ°ç¬¬3è¡Œï¼ˆä¸åŒ…å«ç¬¬3è¡Œï¼‰ï¼Œç¬¬1åˆ—å’Œç¬¬2åˆ—çš„æ•°æ®</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h1 id="æ·»åŠ æ•°æ®"><a href="#æ·»åŠ æ•°æ®" class="headerlink" title="æ·»åŠ æ•°æ®"></a>æ·»åŠ æ•°æ®</h1><h2 id="1-æŒ‰åˆ—æ·»åŠ "><a href="#1-æŒ‰åˆ—æ·»åŠ " class="headerlink" title="1 æŒ‰åˆ—æ·»åŠ "></a>1 æŒ‰åˆ—æ·»åŠ </h2><pre class="line-numbers language-python"><code class="language-python">citys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'ny'</span><span class="token punctuation">,</span><span class="token string">'zz'</span><span class="token punctuation">,</span><span class="token string">'xy'</span><span class="token punctuation">]</span>df<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'city'</span><span class="token punctuation">,</span>citys<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#åœ¨ç¬¬0åˆ—ï¼ŒåŠ ä¸Šcolumnåç§°ä¸ºcityï¼Œå€¼ä¸ºcitysçš„æ•°å€¼ã€‚</span>jobs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'student'</span><span class="token punctuation">,</span><span class="token string">'AI'</span><span class="token punctuation">,</span><span class="token string">'teacher'</span><span class="token punctuation">]</span>df<span class="token punctuation">[</span><span class="token string">'job'</span><span class="token punctuation">]</span> <span class="token operator">=</span> jobs <span class="token comment" spellcheck="true">#é»˜è®¤åœ¨dfæœ€åä¸€åˆ—åŠ ä¸Šcolumnåç§°ä¸ºjobï¼Œå€¼ä¸ºjobsçš„æ•°æ®ã€‚</span>df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token string">'salary'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'1k'</span><span class="token punctuation">,</span><span class="token string">'2k'</span><span class="token punctuation">,</span><span class="token string">'2k'</span><span class="token punctuation">,</span><span class="token string">'2k'</span><span class="token punctuation">,</span><span class="token string">'3k'</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">#åœ¨dfæœ€åä¸€åˆ—åŠ ä¸Šcolumnåç§°ä¸ºsalaryï¼Œå€¼ä¸ºç­‰å·å³è¾¹æ•°æ®ã€‚</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-æŒ‰è¡Œæ·»åŠ "><a href="#2-æŒ‰è¡Œæ·»åŠ " class="headerlink" title="2 æŒ‰è¡Œæ·»åŠ "></a>2 æŒ‰è¡Œæ·»åŠ </h2><pre class="line-numbers language-python"><code class="language-python">df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'zz'</span><span class="token punctuation">,</span><span class="token string">'mason'</span><span class="token punctuation">,</span><span class="token string">'m'</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span>'engineerâ€™<span class="token punctuation">]</span><span class="token comment" spellcheck="true">#è‹¥dfä¸­æ²¡æœ‰indexä¸ºâ€œ4â€çš„è¿™ä¸€è¡Œçš„è¯ï¼Œè¯¥è¡Œä»£ç ä½œç”¨æ˜¯å¾€dfä¸­åŠ ä¸€è¡Œindexä¸ºâ€œ4â€ï¼Œå€¼ä¸ºç­‰å·å³è¾¹å€¼çš„æ•°æ®ã€‚è‹¥dfä¸­å·²ç»æœ‰indexä¸ºâ€œ4â€çš„è¿™ä¸€è¡Œï¼Œåˆ™è¯¥è¡Œä»£ç ä½œç”¨æ˜¯æŠŠdfä¸­indexä¸ºâ€œ4â€çš„è¿™ä¸€è¡Œä¿®æ”¹ä¸ºç­‰å·å³è¾¹æ•°æ®ã€‚</span>df_insert <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'mason'</span><span class="token punctuation">,</span><span class="token string">'mario'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'sex'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'m'</span><span class="token punctuation">,</span><span class="token string">'f'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'age'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>index <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>ndf <span class="token operator">=</span> df<span class="token punctuation">.</span>append<span class="token punctuation">(</span>df_insert<span class="token punctuation">,</span>ignore_index <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#è¿”å›æ·»åŠ åçš„å€¼ï¼Œå¹¶ä¸ä¼šä¿®æ”¹dfçš„å€¼ã€‚ignore_indexé»˜è®¤ä¸ºFalseï¼Œæ„æ€æ˜¯ä¸å¿½ç•¥indexå€¼ï¼Œå³ç”Ÿæˆçš„æ–°çš„ndfçš„indexé‡‡ç”¨df_insertä¸­çš„indexå€¼ã€‚è‹¥ä¸ºTrueï¼Œåˆ™æ–°çš„ndfçš„indexå€¼ä¸ä½¿ç”¨df_insertä¸­çš„indexå€¼ï¼Œè€Œæ˜¯è‡ªå·±é»˜è®¤ç”Ÿæˆã€‚</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h1 id="ä¿®æ”¹æ•°æ®"><a href="#ä¿®æ”¹æ•°æ®" class="headerlink" title="ä¿®æ”¹æ•°æ®"></a>ä¿®æ”¹æ•°æ®</h1><h2 id="1-loc"><a href="#1-loc" class="headerlink" title="1 loc"></a>1 loc</h2><pre class="line-numbers language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'aa'</span> <span class="token comment" spellcheck="true">#ä¿®æ”¹indexä¸ºâ€˜1â€™ï¼Œcolumnä¸ºâ€˜nameâ€™çš„é‚£ä¸€ä¸ªå€¼ä¸ºaaã€‚</span><span class="token operator">>></span><span class="token operator">></span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'bb'</span><span class="token punctuation">,</span><span class="token string">'ff'</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">#ä¿®æ”¹indexä¸ºâ€˜1â€™çš„é‚£ä¸€è¡Œçš„æ‰€æœ‰å€¼ã€‚</span><span class="token operator">>></span><span class="token operator">></span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'bb'</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">]</span>    <span class="token comment" spellcheck="true">#ä¿®æ”¹indexä¸ºâ€˜1â€™ï¼Œcolumnä¸ºâ€˜nameâ€™çš„é‚£ä¸€ä¸ªå€¼ä¸ºbbï¼Œageåˆ—çš„å€¼ä¸º11ã€‚</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="2-iloc-row-index-column-index"><a href="#2-iloc-row-index-column-index" class="headerlink" title="2 iloc[row_index, column_index]"></a>2 iloc[row_index, column_index]</h2><pre class="line-numbers language-python"><code class="language-python">df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">12</span> <span class="token comment" spellcheck="true"># å°†3è¡Œ2åˆ—çš„æ•°æ®æ›´æ–°ä¸º12</span>df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">#ä¿®æ”¹ä¸€æ•´åˆ—</span>df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'lily'</span><span class="token punctuation">,</span> <span class="token string">'F'</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">#ä¿®æ”¹ä¸€æ•´è¡Œ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h1 id="åˆ é™¤æ•°æ®"><a href="#åˆ é™¤æ•°æ®" class="headerlink" title="åˆ é™¤æ•°æ®"></a>åˆ é™¤æ•°æ®</h1><h2 id="1-åˆ é™¤è¡Œ"><a href="#1-åˆ é™¤è¡Œ" class="headerlink" title="1 åˆ é™¤è¡Œ"></a>1 åˆ é™¤è¡Œ</h2><pre class="line-numbers language-python"><code class="language-python">df<span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>axis <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>inplace <span class="token operator">=</span> <span class="token boolean">False</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#åˆ é™¤indexå€¼ä¸º1å’Œ3çš„ä¸¤è¡Œï¼Œ</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="2-åˆ é™¤åˆ—"><a href="#2-åˆ é™¤åˆ—" class="headerlink" title="2 åˆ é™¤åˆ—"></a>2 åˆ é™¤åˆ—</h2><pre class="line-numbers language-python"><code class="language-python">df<span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>axis <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>inplace <span class="token operator">=</span> <span class="token boolean">False</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># åˆ é™¤nameåˆ—ã€‚</span><span class="token keyword">del</span> df<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true"># åˆ é™¤nameåˆ—ã€‚</span>ndf <span class="token operator">=</span> df<span class="token punctuation">.</span>pop<span class="token punctuation">(</span>'ageâ€™<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># åˆ é™¤ageåˆ—ï¼Œæ“ä½œåï¼Œdféƒ½ä¸¢æ‰äº†ageåˆ—,ageåˆ—è¿”å›ç»™äº†ndfã€‚</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h1 id="æ•°æ®åˆ†æ"><a href="#æ•°æ®åˆ†æ" class="headerlink" title="æ•°æ®åˆ†æ"></a>æ•°æ®åˆ†æ</h1><h1 id="ä¸numpyçš„è½¬æ¢"><a href="#ä¸numpyçš„è½¬æ¢" class="headerlink" title="ä¸numpyçš„è½¬æ¢"></a>ä¸numpyçš„è½¬æ¢</h1><ul><li><code>dataframe</code>è½¬åŒ–ä¸º<code>array</code>ï¼š</li></ul><p><code>df.to_numpy()</code>è¿”å›çš„æ˜¯ä¸€ä¸ª array ç±»å‹ï¼š</p><pre class="line-numbers language-python"><code class="language-python">df<span class="token punctuation">.</span>to_numpy<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><code>array</code>è½¬æ¢ä¸º<code>dataframe</code> ï¼š</li></ul><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pddf <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>array<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> äººå·¥æ™ºèƒ½ </category>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pandas </tag>
            
            <tag> æ•°æ®å¤„ç† </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++11 å¤šçº¿ç¨‹</title>
      <link href="/p/2668140628.html"/>
      <url>/p/2668140628.html</url>
      
        <content type="html"><![CDATA[<h1 id="C-11-å¤šçº¿ç¨‹"><a href="#C-11-å¤šçº¿ç¨‹" class="headerlink" title="C++11 å¤šçº¿ç¨‹"></a>C++11 å¤šçº¿ç¨‹</h1><blockquote><p>å‚è€ƒï¼š</p><p>C++11 threadå¤šçº¿ç¨‹ï¼š<a href="https://blog.csdn.net/sjc_0910/article/details/118861539" target="_blank" rel="noopener">https://blog.csdn.net/sjc_0910/article/details/118861539</a></p><p>C++11 å·¦å³å€¼å¼•ç”¨ï¼š<a href="https://blog.csdn.net/Jacky_Feng/article/details/120742414" target="_blank" rel="noopener">https://blog.csdn.net/Jacky_Feng/article/details/120742414</a></p><p>C++11 ç§»åŠ¨æ„é€ å‡½æ•°ï¼š<a href="https://zhuanlan.zhihu.com/p/365412262" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/365412262</a></p></blockquote><h1 id="C-11-std-thread"><a href="#C-11-std-thread" class="headerlink" title="C++11 std::thread"></a>C++11 std::thread</h1><p>åœ¨Cä¸­å·²ç»æœ‰ä¸€ä¸ªå«åš<code>pthread</code>çš„ä¸œè¥¿æ¥è¿›è¡Œå¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œä½†æ˜¯å¹¶ä¸å¥½ç”¨ ï¼Œæ‰€ä»¥c++11æ ‡å‡†åº“ä¸­å‡ºç°äº†ä¸€ä¸ªå«ä½œ<code>std::thread</code>çš„ä¸œè¥¿ã€‚</p><h2 id="1-æˆå‘˜å‡½æ•°"><a href="#1-æˆå‘˜å‡½æ•°" class="headerlink" title="1 æˆå‘˜å‡½æ•°"></a>1 æˆå‘˜å‡½æ•°</h2><p>æ„é€ å‡½æ•°å’Œææ„å‡½æ•°</p><table><thead><tr><th>å‡½æ•°</th><th>ç±»åˆ«</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>thread() noexcept</code></td><td>é»˜è®¤æ„é€ å‡½æ•°</td><td>åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œ ä»€ä¹ˆä¹Ÿä¸åš</td></tr><tr><td><code>template &lt;class Fn, classâ€¦ Args&gt; explicit thread(Fn&amp;&amp; fn, Args&amp;&amp;â€¦ args)</code></td><td>åˆå§‹åŒ–æ„é€ å‡½æ•°</td><td>åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œ ä»¥<code>args</code>ä¸ºå‚æ•° æ‰§è¡Œ<code>fn</code>å‡½æ•°</td></tr><tr><td><code>thread(const thread&amp;) = delete</code></td><td>å¤åˆ¶æ„é€ å‡½æ•°</td><td>ï¼ˆå·²åˆ é™¤ï¼‰</td></tr><tr><td><code>thread(thread&amp;&amp; x) noexcept</code></td><td>ç§»åŠ¨æ„é€ å‡½æ•°</td><td>æ„é€ ä¸€ä¸ªä¸<code>x</code> ç›¸åŒçš„å¯¹è±¡,ä¼šç ´å<code>x</code>å¯¹è±¡</td></tr><tr><td><code>~thread()</code></td><td>ææ„å‡½æ•°</td><td>ææ„å¯¹è±¡</td></tr></tbody></table><p>æˆå‘˜å‡½æ•°</p><table><thead><tr><th align="center">å‡½æ•°</th><th align="center">ä½œç”¨</th></tr></thead><tbody><tr><td align="center"><code>void join()</code></td><td align="center">ç­‰å¾…å­çº¿ç¨‹ç»“æŸå¹¶æ¸…ç†èµ„æºï¼ˆä¼šé˜»å¡ï¼‰</td></tr><tr><td align="center"><code>bool joinable()</code></td><td align="center">è¿”å›çº¿ç¨‹æ˜¯å¦å¯ä»¥æ‰§è¡Œjoinå‡½æ•°</td></tr><tr><td align="center"><code>void detach()</code></td><td align="center">å°†çº¿ç¨‹ä¸è°ƒç”¨å…¶çš„çº¿ç¨‹åˆ†ç¦»ï¼Œå½¼æ­¤ç‹¬ç«‹æ‰§è¡Œï¼ˆæ­¤å‡½æ•°å¿…é¡»åœ¨çº¿ç¨‹åˆ›å»ºæ—¶ç«‹å³è°ƒç”¨ï¼Œä¸”è°ƒç”¨æ­¤å‡½æ•°ä¼šä½¿å…¶ä¸èƒ½è¢«joinï¼‰</td></tr><tr><td align="center"><code>std::thread::id get_id()</code></td><td align="center">è·å–çº¿ç¨‹id</td></tr><tr><td align="center"><code>thread&amp; operator=(thread &amp;&amp;rhs)</code></td><td align="center">è§ç§»åŠ¨æ„é€ å‡½æ•°ï¼ˆå¦‚æœå¯¹è±¡æ˜¯joinableçš„ï¼Œé‚£ä¹ˆä¼šè°ƒç”¨<code>std::terminate()</code>ç»“æœç¨‹åºï¼‰</td></tr></tbody></table><h2 id="2-ç¤ºä¾‹"><a href="#2-ç¤ºä¾‹" class="headerlink" title="2 ç¤ºä¾‹"></a>2 ç¤ºä¾‹</h2><ul><li><code>lambda</code>è¡¨è¾¾å¼ä¼ å‚</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;thread></span></span><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"HiHiHi"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    std<span class="token operator">::</span>thread <span class="token function">td1</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Hello,"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">td2</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"World!"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">td3</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">;</span>    td1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    td2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    td3<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¤šçº¿ç¨‹è¿è¡Œæ—¶æ˜¯ä»¥å¼‚æ­¥æ–¹å¼æ‰§è¡Œçš„ï¼Œå¼‚æ­¥æ–¹å¼å¯ä»¥åŒæ—¶æ‰§è¡Œå¤šæ¡è¯­å¥ã€‚</p><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†3ä¸ªthreadï¼Œè¿™3ä¸ªthreadåœ¨æ‰§è¡Œæ—¶å¹¶ä¸ä¼šæŒ‰ç…§ä¸€å®šçš„é¡ºåºã€‚</p><p>è¾“å‡ºå¯èƒ½ä»¥ä»»æ„ä¸€ä¸ªé¡ºåºè¾“å‡ºã€‚</p><ul><li>ä¼ å…¥çš„å‡½æ•°å¸¦å‚æ•°</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;thread></span></span><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Answer: "</span> <span class="token operator">&lt;&lt;</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    std<span class="token operator">::</span>thread <span class="token function">td3</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    td3<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ‰§è¡Œå¸¦å¼•ç”¨å‚æ•°çš„å‡½æ•°</li></ul><p>æ³¨æ„è§‚å¯Ÿæ„é€ å‡½æ•°ï¼š<code>Args&amp;&amp;... args</code></p><p>å¾ˆæ˜æ˜¾çš„å³å€¼å¼•ç”¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯¥å¦‚ä½•ä¼ é€’ä¸€ä¸ªå·¦å€¼å‘¢ï¼Ÿ<code>std::ref</code>å’Œ<code>std::cref</code>å¾ˆå¥½åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p><p><code>std::ref</code> å¯ä»¥åŒ…è£…æŒ‰å¼•ç”¨ä¼ é€’çš„å€¼ã€‚</p><p><code>std::cref</code> å¯ä»¥åŒ…è£…æŒ‰<code>const</code>å¼•ç”¨ä¼ é€’çš„å€¼ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;thread></span></span><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span><span class="token keyword">void</span> <span class="token function">changeValue</span><span class="token punctuation">(</span>T<span class="token operator">&amp;</span> x<span class="token punctuation">,</span> T val<span class="token punctuation">)</span> <span class="token punctuation">{</span>    x <span class="token operator">=</span> val<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    std<span class="token operator">::</span>thread t<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> nums<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// è°ƒç”¨æ„é€ å‡½æ•°</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        t<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> std<span class="token operator">::</span><span class="token function">thread</span><span class="token punctuation">(</span>changeValue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">,</span> std<span class="token operator">::</span><span class="token function">ref</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        t<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-æ³¨æ„"><a href="#3-æ³¨æ„" class="headerlink" title="3 æ³¨æ„"></a>3 æ³¨æ„</h2><ul><li>çº¿ç¨‹æ˜¯åœ¨threadå¯¹è±¡è¢«å®šä¹‰çš„æ—¶å€™å¼€å§‹æ‰§è¡Œçš„ï¼Œè€Œä¸æ˜¯åœ¨è°ƒç”¨joinå‡½æ•°æ—¶æ‰æ‰§è¡Œçš„ï¼Œè°ƒç”¨joinå‡½æ•°åªæ˜¯é˜»å¡ç­‰å¾…çº¿ç¨‹ç»“æŸå¹¶å›æ”¶èµ„æºã€‚</li></ul><blockquote><p><code>join</code>å‡½æ•°æ˜¯ç­‰å¾…å­çº¿ç¨‹å®Œæˆï¼Œç„¶åä¸»çº¿ç¨‹å†ç»§ç»­æ‰§è¡Œ</p></blockquote><ul><li>åˆ†ç¦»çš„çº¿ç¨‹ï¼ˆæ‰§è¡Œè¿‡detachçš„çº¿ç¨‹ï¼‰ä¼šåœ¨è°ƒç”¨å®ƒçš„çº¿ç¨‹ç»“æŸæˆ–è‡ªå·±ç»“æŸæ—¶é‡Šæ”¾èµ„æºã€‚</li><li>çº¿ç¨‹ä¼šåœ¨å‡½æ•°è¿è¡Œå®Œæ¯•åè‡ªåŠ¨é‡Šæ”¾ï¼Œä¸æ¨èåˆ©ç”¨å…¶ä»–æ–¹æ³•å¼ºåˆ¶ç»“æŸçº¿ç¨‹ï¼Œå¯èƒ½ä¼šå› èµ„æºæœªé‡Šæ”¾è€Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</li><li><strong>æ²¡æœ‰æ‰§è¡Œ<code>join</code>æˆ–<code>detach</code>çš„çº¿ç¨‹åœ¨ç¨‹åºç»“æŸæ—¶ä¼šå¼•å‘å¼‚å¸¸</strong></li></ul><h1 id="C-11-std-mutexä¸std-atomic"><a href="#C-11-std-mutexä¸std-atomic" class="headerlink" title="C++11 std::mutexä¸std::atomic"></a>C++11 std::mutexä¸std::atomic</h1><h2 id="1-std-mutex"><a href="#1-std-mutex" class="headerlink" title="1 std::mutex"></a>1 std::mutex</h2><p>å¤šçº¿ç¨‹æ“ä½œåŒä¸€å˜é‡</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;thread></span></span><span class="token keyword">int</span> val <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">increase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">100000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        val<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    std<span class="token operator">::</span>thread t<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        t<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> std<span class="token operator">::</span><span class="token function">thread</span><span class="token punctuation">(</span>increase<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        t<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> val <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥å‘ç°æ­¤ä»£ç è¾“å‡ºå¹¶ä¸æ˜¯æ­£å¸¸æƒ…å†µä¸‹çš„<code>2000000</code>ï¼ŒåŸå› å°±æ˜¯å¤šçº¿ç¨‹è®¿é—®å¹¶ä¿®æ”¹ä¸€ä¸ªå˜é‡æ—¶é€ æˆäº†å†²çªï¼Œæ‰€ä»¥mutexæ´¾ä¸Šç”¨åœº</p><table><thead><tr><th align="center">å‡½æ•°</th><th align="center">ä½œç”¨</th></tr></thead><tbody><tr><td align="center"><code>void lock()</code></td><td align="center">å°†mutexä¸Šé”ã€‚ <br>å¦‚æœmutexå·²ç»è¢«å…¶å®ƒçº¿ç¨‹ä¸Šé”ï¼Œ é‚£ä¹ˆä¼šé˜»å¡ï¼Œç›´åˆ°è§£é”ï¼›<br> å¦‚æœmutexå·²ç»è¢«åŒä¸€ä¸ªçº¿ç¨‹é”ä½ï¼Œ é‚£ä¹ˆä¼šäº§ç”Ÿæ­»é”ã€‚</td></tr><tr><td align="center"><code>void unlock()</code></td><td align="center">è§£é”mutexï¼Œé‡Šæ”¾å…¶æ‰€æœ‰æƒã€‚ å¦‚æœæœ‰çº¿ç¨‹å› ä¸ºè°ƒç”¨lock()ä¸èƒ½ä¸Šé”è€Œè¢«é˜»å¡ï¼Œåˆ™è°ƒç”¨æ­¤å‡½æ•°ä¼šå°†mutexçš„ä¸»åŠ¨æƒéšæœºäº¤ç»™å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹ï¼› å¦‚æœmutexä¸æ˜¯è¢«æ­¤çº¿ç¨‹ä¸Šé”ï¼Œé‚£ä¹ˆä¼šå¼•å‘æœªå®šä¹‰çš„å¼‚å¸¸ã€‚</td></tr><tr><td align="center"><code>bool try_lock()</code></td><td align="center">å°è¯•å°†mutexä¸Šé”ã€‚ å¦‚æœmutexæœªè¢«ä¸Šé”ï¼Œåˆ™å°†å…¶ä¸Šé”å¹¶è¿”å›trueï¼› <br>å¦‚æœmutexå·²è¢«é”åˆ™è¿”å›falseã€‚</td></tr></tbody></table><p>å¯ä»¥åˆ©ç”¨mutexè¿›è¡Œæ”¹è¿›ï¼š</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;thread></span></span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;mutex></span></span>std<span class="token operator">::</span>mutex mtx<span class="token punctuation">;</span><span class="token keyword">int</span> val <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">increase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">100000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        mtx<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        val<span class="token operator">++</span><span class="token punctuation">;</span>        mtx<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    std<span class="token operator">::</span>thread t<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        t<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> std<span class="token operator">::</span><span class="token function">thread</span><span class="token punctuation">(</span>increase<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        t<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> val <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-std-atomic"><a href="#2-std-atomic" class="headerlink" title="2 std::atomic"></a>2 std::atomic</h2><p>mutexæ¯æ¬¡å¾ªç¯éƒ½è¦åŠ é”è§£é”ï¼Œæ¯”è¾ƒæ…¢ï¼Œè€Œatomicæ¯”è¾ƒå¿«ã€‚å°†ä¸Šè¿°ä»£ç æ”¹æˆä¸‹é¢ä»£ç åŒæ ·ä¹Ÿå¯ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;thread></span></span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;atomic></span></span>std<span class="token operator">::</span>atomic_int val <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">increase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">100000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        val<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    std<span class="token operator">::</span>thread t<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        t<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> std<span class="token operator">::</span><span class="token function">thread</span><span class="token punctuation">(</span>increase<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        t<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> val <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>std::atomic_int</code>åªæ˜¯<code>std::atomic&lt;int&gt;</code>çš„åˆ«åã€‚</p><p>å³ä½¿æ˜¯å¤šçº¿ç¨‹ï¼Œä¹Ÿè¦åƒåŒæ­¥è¿›è¡Œä¸€æ ·<strong>åŒæ­¥æ“ä½œ</strong>atomicå¯¹è±¡ï¼Œä»è€Œçœå»äº†mutexä¸Šé”ã€è§£é”çš„æ—¶é—´æ¶ˆè€—ã€‚</p><table><thead><tr><th align="center">æ„é€ å‡½æ•°</th><th align="center">ç±»å‹</th><th align="center">ä½œç”¨</th></tr></thead><tbody><tr><td align="center"><code>atomic() noexcept = default</code></td><td align="center">é»˜è®¤æ„é€ å‡½æ•°</td><td align="center">æ„é€ ä¸€ä¸ªatomicå¯¹è±¡ï¼ˆæœªåˆå§‹åŒ–ï¼Œå¯é€šè¿‡atomic_initè¿›è¡Œåˆå§‹åŒ–ï¼‰</td></tr><tr><td align="center"><code>constexpr atomic(T val) noexcept</code></td><td align="center">åˆå§‹åŒ–æ„é€ å‡½æ•°</td><td align="center">æ„é€ ä¸€ä¸ªatomicå¯¹è±¡ï¼Œç”¨<code>val</code>çš„å€¼æ¥åˆå§‹åŒ–</td></tr></tbody></table><h1 id="C-11-std-async"><a href="#C-11-std-async" class="headerlink" title="C++11 std::async"></a>C++11 std::async</h1><h2 id="1-async"><a href="#1-async" class="headerlink" title="1 async"></a>1 async</h2><blockquote><p>å¤´æ–‡ä»¶<code>&lt;future&gt;</code></p></blockquote><p><strong>å¤§å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨asyncè€Œä¸ç”¨thread</strong></p><ul><li>threadå¯ä»¥å¿«é€Ÿã€æ–¹ä¾¿åœ°åˆ›å»ºçº¿ç¨‹ï¼Œä½†åœ¨asyncé¢å‰ï¼Œå°±æ˜¯å°å·«è§å¤§å·«äº†ã€‚</li><li>asyncå¯ä»¥æ ¹æ®æƒ…å†µé€‰æ‹©åŒæ­¥æ‰§è¡Œæˆ–åˆ›å»ºæ–°çº¿ç¨‹æ¥å¼‚æ­¥æ‰§è¡Œï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ‰‹åŠ¨é€‰æ‹©ã€‚å¯¹äºasyncçš„è¿”å›å€¼æ“ä½œä¹Ÿæ¯”threadæ›´åŠ æ–¹ä¾¿ã€‚</li></ul><p><strong>std::asyncå‚æ•°ï¼š</strong></p><p>ä¸åŒäºthreadï¼Œasyncæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥æ²¡æœ‰æˆå‘˜å‡½æ•°ã€‚</p><table><thead><tr><th>é‡è½½ç‰ˆæœ¬</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>template &lt;class Fn, classâ€¦ Args&gt; <br>future&lt;typename result_of&lt;Fn(Argsâ€¦)&gt;::type&gt;  <br><code>async (Fn&amp;&amp; fn, Args&amp;&amp;â€¦ args)</code></td><td>å¼‚æ­¥æˆ–åŒæ­¥ï¼ˆæ ¹æ®æ“ä½œç³»ç»Ÿè€Œå®šï¼‰ä»¥argsä¸ºå‚æ•°æ‰§è¡Œfn<br>åŒæ ·åœ°ï¼Œä¼ é€’å¼•ç”¨å‚æ•°éœ€è¦<code>std::ref</code>æˆ–<code>std::cref</code></td></tr><tr><td>template &lt;class Fn, classâ€¦ Args&gt;<br> future&lt;typename result_of&lt;Fn(Argsâ€¦)&gt;::type&gt;<br>  <code>async (launch policy, Fn&amp;&amp; fn, Args&amp;&amp;â€¦ args);</code></td><td>å¼‚æ­¥æˆ–åŒæ­¥ï¼ˆæ ¹æ®<code>policy</code>å‚æ•°è€Œå®šï¼ˆè§ä¸‹æ–‡ï¼‰ï¼‰ä»¥argsä¸ºå‚æ•°æ‰§è¡Œfnï¼Œå¼•ç”¨å‚æ•°åŒä¸Š</td></tr></tbody></table><h2 id="2-std-launchå¼ºæšä¸¾ç±»ï¼ˆenum-classï¼‰"><a href="#2-std-launchå¼ºæšä¸¾ç±»ï¼ˆenum-classï¼‰" class="headerlink" title="2 std::launchå¼ºæšä¸¾ç±»ï¼ˆenum classï¼‰"></a>2 std::launchå¼ºæšä¸¾ç±»ï¼ˆenum classï¼‰</h2><p>std::launchæœ‰2ä¸ªæšä¸¾å€¼å’Œ1ä¸ªç‰¹æ®Šå€¼ï¼š</p><table><thead><tr><th>æ ‡è¯†ç¬¦</th><th>å®é™…å€¼</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>æšä¸¾å€¼ï¼šlaunch::async</td><td>0x1ï¼ˆ1ï¼‰</td><td>å¼‚æ­¥å¯åŠ¨</td></tr><tr><td>æšä¸¾å€¼ï¼šlaunch::deferred</td><td>0x2ï¼ˆ2ï¼‰</td><td>åœ¨è°ƒç”¨<code>future::get</code>ã€<code>future::wait</code>æ—¶åŒæ­¥å¯åŠ¨ï¼ˆstd::futureè§åæ–‡ï¼‰</td></tr><tr><td>ç‰¹æ®Šå€¼ï¼šlaunch::async | launch::deferred</td><td>0x3ï¼ˆ3ï¼‰</td><td>åŒæ­¥æˆ–å¼‚æ­¥ï¼Œæ ¹æ®æ“ä½œç³»ç»Ÿè€Œå®š</td></tr></tbody></table><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;thread></span></span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;future></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    std<span class="token operator">::</span><span class="token function">async</span><span class="token punctuation">(</span>std<span class="token operator">::</span>launch<span class="token operator">::</span>async<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>        std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> message<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"Hello, "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"World\n"</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¼–è¯‘å™¨å¯èƒ½ä¼šæœ‰è­¦å‘Šï¼Œå› ä¸ºç¼–è¯‘å™¨ä¸æƒ³è®©ä½ ä¸¢å¼ƒasyncçš„è¿”å›å€¼std::futureï¼Œä¸è¿‡åœ¨è¿™ä¸ªä¾‹å­ä¸­ä¸éœ€è¦å®ƒï¼Œå¿½ç•¥è¿™ä¸ªè­¦å‘Šå°±è¡Œäº†ã€‚</p><h2 id="3-std-future"><a href="#3-std-future" class="headerlink" title="3 std::future"></a>3 std::future</h2><p>ä½¿ç”¨å®ƒè·å–å‡½æ•°è¿”å›å€¼</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;thread></span></span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;future></span></span><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Args<span class="token operator">></span><span class="token keyword">decltype</span><span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token punctuation">)</span> <span class="token function">sum</span><span class="token punctuation">(</span>Args<span class="token operator">&amp;&amp;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">+</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token operator">+</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    std<span class="token operator">::</span>future<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> val <span class="token operator">=</span> std<span class="token operator">::</span><span class="token function">async</span><span class="token punctuation">(</span>std<span class="token operator">::</span>launch<span class="token operator">::</span>async<span class="token punctuation">,</span> sum<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> val<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¾“å‡º</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token number">6</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="é¡¹ç›®ç»ƒä¹ "><a href="#é¡¹ç›®ç»ƒä¹ " class="headerlink" title="é¡¹ç›®ç»ƒä¹ "></a>é¡¹ç›®ç»ƒä¹ </h1><p>é™„ä¸Šæˆ‘ä»¥æ­¤ä¸ºåŸºçš„å­¦ä¹ é¡¹ç›®ï¼š</p><p>åŸºäºC++17çš„çº¿ç¨‹æ± ï¼š<a href="https://github.com/anda522/ThreadPool" target="_blank" rel="noopener">https://github.com/anda522/ThreadPool</a></p>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Latexè¯­æ³•</title>
      <link href="/p/917541138.html"/>
      <url>/p/917541138.html</url>
      
        <content type="html"><![CDATA[<h1 id="Latexè¯­æ³•"><a href="#Latexè¯­æ³•" class="headerlink" title="Latexè¯­æ³•"></a>Latexè¯­æ³•</h1><p>åœ¨<code>begin{document}</code>å’Œ<code>end{document}</code>ä¹‹é—´çš„å°±æ˜¯æ­£æ–‡åŒºï¼Œè€Œåœ¨è¿™ä¹‹å‰çš„å°±æ˜¯å¯¼è¨€åŒºã€‚</p><h2 id="1-å®åŒ…å¯¼å…¥"><a href="#1-å®åŒ…å¯¼å…¥" class="headerlink" title="1 å®åŒ…å¯¼å…¥"></a>1 å®åŒ…å¯¼å…¥</h2><pre class="line-numbers language-latex"><code class="language-latex"><span class="token function selector">\usepackage</span><span class="token punctuation">{</span><span class="token keyword">å®åŒ…1, å®åŒ…2</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="2-ä¸­æ–‡æ”¯æŒ"><a href="#2-ä¸­æ–‡æ”¯æŒ" class="headerlink" title="2 ä¸­æ–‡æ”¯æŒ"></a>2 ä¸­æ–‡æ”¯æŒ</h2><p>æ— è®ºæ˜¯åœ¨çº¿å·¥å…·è¿˜æ˜¯æœ¬åœ°å·¥å…·ï¼ŒLaTeXé»˜è®¤éƒ½æ˜¯ä¸æ”¯æŒä¸­æ–‡çš„ï¼Œå› æ­¤éœ€è¦åœ¨æºä»£ç å’Œé…ç½®ä¸Šç¨ä½œä¿®æ”¹æ‰å¯ä»¥è®©LaTeXæ”¯æŒä¸­æ–‡ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>ç¼–è¯‘å™¨é…ç½®ï¼š<code>XeLaTeX</code></li><li><code>tex</code>æ–‡ä»¶ç¼–ç ï¼š<code>utf-8</code></li><li>ä»£ç å¼€å¤´æ·»åŠ </li></ol><p>æ–¹å¼ä¸€ï¼šæ·»åŠ å®åŒ…</p><pre class="line-numbers language-latex"><code class="language-latex"><span class="token comment" spellcheck="true">% -- coding: UTF-8 --</span><span class="token function selector">\documentclass</span><span class="token punctuation">{</span><span class="token keyword">article</span><span class="token punctuation">}</span> <span class="token comment" spellcheck="true">% åœ¨æ–‡ä»¶ç±»å‹ä¸‹é¢æ·»åŠ å®åŒ…</span><span class="token function selector">\usepackage</span><span class="token punctuation">[</span>UTF8<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token keyword">ctex</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ–¹å¼äºŒï¼šè®¾ç½®æ–‡æ¡£ç±»å‹</p><pre class="line-numbers language-latex"><code class="language-latex"><span class="token comment" spellcheck="true">% -- coding: UTF-8 --</span><span class="token function selector">\documentclass</span><span class="token punctuation">[</span>UTF8<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token keyword">ctexart</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="3-æ³¨é‡Š"><a href="#3-æ³¨é‡Š" class="headerlink" title="3 æ³¨é‡Š"></a>3 æ³¨é‡Š</h2><ul><li>å•è¡Œæ³¨é‡Š</li></ul><pre class="line-numbers language-latex"><code class="language-latex"><span class="token comment" spellcheck="true">% è¿™æ˜¯ä¸€ä¸ªæ³¨é‡Š</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><p>å¤šè¡Œæ³¨é‡Š</p><ul><li><p>æ–¹å¼ä¸€ï¼ˆæ¨èï¼‰</p><pre class="line-numbers language-latex"><code class="language-latex"><span class="token function selector">\iffalse</span>æ³¨é‡Šå†…å®¹<span class="token function selector">\fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>æ–¹å¼äºŒ</p></li></ul><p>ä½¿ç”¨<code>\usepackage{verbatim}</code>å®åŒ…</p><pre class="line-numbers language-latex"><code class="language-latex"><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">comment</span><span class="token punctuation">}</span>æ³¨é‡Šå†…å®¹<span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">comment</span><span class="token punctuation">}</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ul><h2 id="4-è½¬ä¹‰å­—ç¬¦"><a href="#4-è½¬ä¹‰å­—ç¬¦" class="headerlink" title="4 è½¬ä¹‰å­—ç¬¦"></a>4 è½¬ä¹‰å­—ç¬¦</h2><p>å¯ä»¥ä½¿ç”¨<code>\</code>æ¥è½¬ä¹‰ä¸€äº›ç‰¹æ®Šå­—ç¬¦ï¼Œå¦‚<code>\%</code>ï¼Œ<code>\_</code></p><h1 id="æ’ç‰ˆ"><a href="#æ’ç‰ˆ" class="headerlink" title="æ’ç‰ˆ"></a>æ’ç‰ˆ</h1><h2 id="1-é¦–è¡Œç¼©è¿›"><a href="#1-é¦–è¡Œç¼©è¿›" class="headerlink" title="1 é¦–è¡Œç¼©è¿›"></a>1 é¦–è¡Œç¼©è¿›</h2><ul><li>ç¼©è¿›</li></ul><p>è¿›è¡Œç¼©è¿›è‹¥LaTeXé»˜è®¤æ²¡æœ‰æ®µé¦–ç¼©è¿›ï¼Œå› æ­¤è¦é¦–è¡Œç¼©è¿›éœ€è¦è¿›è¡Œä¿®æ”¹ã€‚åœ¨å¯¼è¨€åŒºåŠ å…¥å¦‚ä¸‹ä»£ç ï¼ˆè·ç¦»å•ä½ä¸€èˆ¬ä¸º<code>pt</code>æˆ–<code>em</code>ï¼Œ<code>pt</code>æ˜¯ç»å¯¹å•ä½ï¼›<code>em</code>æ˜¯ç›¸å¯¹å•ä½ï¼Œè¡¨ç¤º1ä¸ªä¸­æ–‡å­—ç¬¦å®½åº¦ï¼‰</p><pre class="line-numbers language-latex"><code class="language-latex"><span class="token comment" spellcheck="true">% ä½¿ç”¨indentfirstå®åŒ…</span><span class="token function selector">\usepackage</span><span class="token punctuation">{</span><span class="token keyword">indentfirst</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">% è®¾ç½®é¦–è¡Œç¼©è¿›è·ç¦»</span><span class="token function selector">\setlength</span><span class="token punctuation">{</span><span class="token function selector">\parindent</span><span class="token punctuation">}</span><span class="token punctuation">{</span>2em<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ä¸è¿›è¡Œç¼©è¿›</li></ul><ol><li>æ–¹å¼1ï¼ˆæ¨èï¼‰ï¼š å•æ®µå–æ¶ˆç¼©è¿›ï¼Œæ”¾åœ¨æ®µé¦–å³å¯ã€‚</li></ol><pre class="line-numbers language-latex"><code class="language-latex"><span class="token function selector">\noindent</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="2"><li>æ–¹å¼2ï¼š å…¨å±€å–æ¶ˆç¼©è¿›ï¼Œåœ¨æƒ³ç¼©è¿›çš„æ®µè½å†è¿›è¡Œç¼©è¿›ã€‚</li></ol><p>æ”¾åœ¨å¯¼è¨€åŒºï¼š</p><pre class="line-numbers language-latex"><code class="language-latex"><span class="token function selector">\setlength</span><span class="token punctuation">{</span><span class="token function selector">\parindent</span><span class="token punctuation">}</span><span class="token punctuation">{</span>0pt<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ”¾åœ¨æƒ³è¦ç¼©è¿›çš„æ®µè½ï¼š</p><pre class="line-numbers language-latex"><code class="language-latex"><span class="token function selector">\hspace*</span><span class="token punctuation">{</span>2em<span class="token punctuation">}</span>æ®µè½<span class="token function selector">\\</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="2-æ¢è¡Œ"><a href="#2-æ¢è¡Œ" class="headerlink" title="2 æ¢è¡Œ"></a>2 æ¢è¡Œ</h2><table><thead><tr><th align="center">æºç </th><th align="center">è§£é‡Š</th></tr></thead><tbody><tr><td align="center"><code>\\</code></td><td align="center">ä¸€èˆ¬åœ¨ä¸€è¡Œçš„æœ€åä¸€è¡Œå†™</td></tr><tr><td align="center"><code>\\[offset]</code></td><td align="center">æ¢è¡Œï¼Œå¹¶ä¸”ä¸ä¸‹ä¸€è¡Œçš„è¡Œé—´è·ä¸ºåŸæ¥è¡Œé—´è·+offsetï¼Œoffsetå•ä½ä¸€èˆ¬æ˜¯<code>em</code>æˆ–<code>pt</code></td></tr></tbody></table><h2 id="3-æ›´æ¢æ®µè½"><a href="#3-æ›´æ¢æ®µè½" class="headerlink" title="3 æ›´æ¢æ®µè½"></a>3 æ›´æ¢æ®µè½</h2><table><thead><tr><th align="center">æºç </th><th align="center">è§£é‡Š</th></tr></thead><tbody><tr><td align="center">æ— </td><td align="center">æºä»£ç ç©ºä¸€è¡Œå³å¯è¿›è¡Œæ¢æ®µ</td></tr><tr><td align="center"><code>\par</code></td><td align="center">ä¸€èˆ¬åœ¨ä¸€æ®µçš„æœ€åå†™</td></tr></tbody></table><h2 id="4-é¡µé¢æ›´æ¢"><a href="#4-é¡µé¢æ›´æ¢" class="headerlink" title="4 é¡µé¢æ›´æ¢"></a>4 é¡µé¢æ›´æ¢</h2><p><code>\newpage</code>è¿›è¡Œæ¢é¡µ</p><h2 id="5-çº¸å¼ è®¾ç½®"><a href="#5-çº¸å¼ è®¾ç½®" class="headerlink" title="5 çº¸å¼ è®¾ç½®"></a>5 çº¸å¼ è®¾ç½®</h2><pre class="line-numbers language-latex"><code class="language-latex"><span class="token comment" spellcheck="true">% è®¾ç½®é¡µé¢çš„ç¯å¢ƒ,a4çº¸å¼ å¤§å°ï¼Œå·¦å³ä¸Šä¸‹è¾¹è·ä¿¡æ¯</span><span class="token function selector">\usepackage</span><span class="token punctuation">[</span>a4paper,left=30mm,right=25mm,top=25mm,bottom=25mm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token keyword">geometry</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="6-æ ‡é¢˜åˆ†çº§"><a href="#6-æ ‡é¢˜åˆ†çº§" class="headerlink" title="6 æ ‡é¢˜åˆ†çº§"></a>6 æ ‡é¢˜åˆ†çº§</h2><pre class="line-numbers language-latex"><code class="language-latex"><span class="token function selector">\section</span><span class="token punctuation">{</span><span class="token headline class-name">ä¸€çº§æ ‡é¢˜</span><span class="token punctuation">}</span><span class="token function selector">\subsection</span><span class="token punctuation">{</span><span class="token headline class-name">äºŒçº§æ ‡é¢˜</span><span class="token punctuation">}</span> <span class="token function selector">\subsubsection</span><span class="token punctuation">{</span><span class="token headline class-name">äºŒçº§æ ‡é¢˜</span><span class="token punctuation">}</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="7-ä½¿ç”¨æ¨¡æ¿"><a href="#7-ä½¿ç”¨æ¨¡æ¿" class="headerlink" title="7 ä½¿ç”¨æ¨¡æ¿"></a>7 ä½¿ç”¨æ¨¡æ¿</h2><h2 id="8-å•åŒæ æ¨¡å¼"><a href="#8-å•åŒæ æ¨¡å¼" class="headerlink" title="8 å•åŒæ æ¨¡å¼"></a>8 å•åŒæ æ¨¡å¼</h2><ul><li>å•æ </li></ul><pre class="line-numbers language-latex"><code class="language-latex"><span class="token function selector">\documentclass</span><span class="token punctuation">[</span>onecolumn<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token keyword">article</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>åŒæ </li></ul><pre class="line-numbers language-latex"><code class="language-latex"><span class="token function selector">\documentclass</span><span class="token punctuation">[</span>twocolumn<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token keyword">article</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="æ˜¾ç¤º"><a href="#æ˜¾ç¤º" class="headerlink" title="æ˜¾ç¤º"></a>æ˜¾ç¤º</h1><h2 id="1-ç©ºæ ¼"><a href="#1-ç©ºæ ¼" class="headerlink" title="1 ç©ºæ ¼"></a>1 ç©ºæ ¼</h2><p>æºç ï¼š<code>a \quad b</code>ï¼Œæ˜¾ç¤ºï¼š<code>a b</code>ï¼Œå®½åº¦ä¸º1ä¸ªä¸­æ–‡å­—ç¬¦å®½åº¦</p><p>æºç ï¼š<code>a \qquad b</code>ï¼Œæ˜¾ç¤ºï¼š<code>a  b</code>ï¼Œå®½åº¦ä¸º2ä¸ªä¸­æ–‡å­—ç¬¦å®½åº¦</p><p>æºç ï¼š<code>a\ b</code>ï¼Œæ˜¾ç¤ºï¼š<code>a b</code>ï¼Œå®½åº¦ä¸º$\frac{1}{3}$ä¸ªå­—ç¬¦å®½åº¦</p><h2 id="2-æ ‡é¢˜ã€ä½œè€…ä¸æ—¥æœŸ"><a href="#2-æ ‡é¢˜ã€ä½œè€…ä¸æ—¥æœŸ" class="headerlink" title="2 æ ‡é¢˜ã€ä½œè€…ä¸æ—¥æœŸ"></a>2 æ ‡é¢˜ã€ä½œè€…ä¸æ—¥æœŸ</h2><pre class="line-numbers language-latex"><code class="language-latex"><span class="token function selector">\documentclass</span><span class="token punctuation">{</span><span class="token keyword">article</span><span class="token punctuation">}</span> <span class="token comment" spellcheck="true">% article æ–‡æ¡£</span><span class="token function selector">\usepackage</span><span class="token punctuation">[</span>UTF8<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token keyword">ctex</span><span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">% ä½¿ç”¨å®åŒ…(ä¸ºäº†èƒ½å¤Ÿæ˜¾ç¤ºæ±‰å­—)</span><span class="token comment" spellcheck="true">% è®¾ç½®é¡µé¢çš„ç¯å¢ƒ,a4çº¸å¼ å¤§å°ï¼Œå·¦å³ä¸Šä¸‹è¾¹è·ä¿¡æ¯</span><span class="token function selector">\usepackage</span><span class="token punctuation">[</span>a4paper,left=30mm,right=25mm,top=25mm,bottom=25mm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token keyword">geometry</span><span class="token punctuation">}</span><span class="token function selector">\title</span><span class="token punctuation">{</span>è¡Œç æ£‹çš„æ–‡ç« <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">% æ–‡ç« æ ‡é¢˜</span><span class="token function selector">\author</span><span class="token punctuation">{</span>è¡Œç æ£‹<span class="token punctuation">}</span>   <span class="token comment" spellcheck="true">% ä½œè€…çš„åç§°</span><span class="token function selector">\date</span><span class="token punctuation">{</span><span class="token function selector">\today</span><span class="token punctuation">}</span>       <span class="token comment" spellcheck="true">% å½“å¤©æ—¥æœŸ</span><span class="token comment" spellcheck="true">% æ­£æ–‡å¼€å§‹</span><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">document</span><span class="token punctuation">}</span><span class="token function selector">\maketitle</span>          <span class="token comment" spellcheck="true">% æ·»åŠ è¿™ä¸€å¥æ‰èƒ½å¤Ÿæ˜¾ç¤ºæ ‡é¢˜ç­‰ä¿¡æ¯</span><span class="token comment" spellcheck="true">% æ­£æ–‡ç»“æŸ</span><span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">document</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-æ‘˜è¦"><a href="#3-æ‘˜è¦" class="headerlink" title="3 æ‘˜è¦"></a>3 æ‘˜è¦</h2><p>åœ¨<code>\maketitle</code>ä¸‹æ·»åŠ å†…å®¹</p><pre class="line-numbers language-latex"><code class="language-latex"><span class="token function selector">\maketitle</span>          <span class="token comment" spellcheck="true">%æ·»åŠ è¿™ä¸€å¥æ‰èƒ½å¤Ÿæ˜¾ç¤ºæ ‡é¢˜ç­‰ä¿¡æ¯</span><span class="token comment" spellcheck="true">%æ‘˜è¦å¼€å§‹éƒ¨åˆ†</span><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">abstract</span><span class="token punctuation">}</span>è¯¥éƒ¨åˆ†å†…å®¹æ˜¯æ”¾ç½®æ‘˜è¦ä¿¡æ¯çš„ã€‚è¯¥éƒ¨åˆ†å†…å®¹æ˜¯æ”¾ç½®æ‘˜è¦ä¿¡æ¯çš„ã€‚è¯¥éƒ¨åˆ†å†…å®¹æ˜¯æ”¾ç½®æ‘˜è¦ä¿¡æ¯çš„ã€‚è¯¥éƒ¨åˆ†å†…å®¹æ˜¯æ”¾ç½®æ‘˜è¦ä¿¡æ¯çš„ã€‚è¯¥éƒ¨åˆ†å†…å®¹æ˜¯æ”¾ç½®æ‘˜è¦ä¿¡æ¯çš„ã€‚<span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">abstract</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-å¼•ç”¨ã€è„šæ³¨"><a href="#4-å¼•ç”¨ã€è„šæ³¨" class="headerlink" title="4 å¼•ç”¨ã€è„šæ³¨"></a>4 å¼•ç”¨ã€è„šæ³¨</h2><ul><li>å¼•ç”¨ï¼šå†™åœ¨<code>\begin{quote}</code>å’Œ<code>\end{quote}</code>ä¹‹é—´</li></ul><h3 id="4-1-å…¬å¼å¼•ç”¨"><a href="#4-1-å…¬å¼å¼•ç”¨" class="headerlink" title="4.1 å…¬å¼å¼•ç”¨"></a>4.1 å…¬å¼å¼•ç”¨</h3><p>éœ€å¯¼å…¥<code>amsmath</code>å®åŒ…ï¼Œä»£ç ä¸º<code>\usepackage{amsmath}</code></p><p>å…¬å¼ï¼š</p><pre class="line-numbers language-latex"><code class="language-latex"><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">equation</span><span class="token punctuation">}</span><span class="token equation string">z = x + y<span class="token equation-command regex">\label</span>{eq1}</span><span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">equation</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å…¬å¼å¼•ç”¨ï¼š</p><p>å¼•ç”¨æ—¶åªæ˜¾ç¤ºæ•°å­—</p><pre class="line-numbers language-latex"><code class="language-latex">Eq. (<span class="token function selector">\ref</span><span class="token punctuation">{</span><span class="token keyword">eq1</span><span class="token punctuation">}</span>)<span class="token comment" spellcheck="true">% æˆ–å¯¼å…¥amsmathå®åŒ…ï¼Œä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼ˆæ¨èï¼‰ï¼š</span>Eq. <span class="token function selector">\eqref</span><span class="token punctuation">{</span>eq1<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="4-2-å›¾ç‰‡å¼•ç”¨"><a href="#4-2-å›¾ç‰‡å¼•ç”¨" class="headerlink" title="4.2 å›¾ç‰‡å¼•ç”¨"></a>4.2 å›¾ç‰‡å¼•ç”¨</h3><p>å›¾ç‰‡æ˜¾ç¤ºï¼š</p><pre class="line-numbers language-latex"><code class="language-latex"><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">figure</span><span class="token punctuation">}</span><span class="token punctuation">[</span>htbp<span class="token punctuation">]</span> <span class="token comment" spellcheck="true">% htbpä»£è¡¨å›¾ç‰‡æ’å…¥ä½ç½®çš„è®¾ç½®</span><span class="token function selector">\centering</span> <span class="token comment" spellcheck="true">%å›¾ç‰‡å±…ä¸­</span><span class="token function selector">\includegraphics</span><span class="token punctuation">[</span>width=6cm<span class="token punctuation">]</span><span class="token punctuation">{</span>1.jpg<span class="token punctuation">}</span><span class="token function selector">\caption</span><span class="token punctuation">{</span>è¿™æ˜¯ä¸€ä¸ªå›¾ç‰‡æ ‡é¢˜<span class="token punctuation">}</span> <span class="token comment" spellcheck="true">% å›¾ç‰‡æ ‡é¢˜</span><span class="token function selector">\label</span><span class="token punctuation">{</span><span class="token keyword">pic</span><span class="token punctuation">}</span> <span class="token comment" spellcheck="true">% å›¾ç‰‡æ ‡ç­¾</span><span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">figure</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¼•ç”¨ï¼š<code>pic</code>æ˜¯å›¾ç‰‡çš„label</p><p>å¼•ç”¨æ—¶åªæ˜¾ç¤ºæ•°å­—</p><pre class="line-numbers language-latex"><code class="language-latex"><span class="token function selector">\ref</span><span class="token punctuation">{</span><span class="token keyword">pic</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="4-3-å‚è€ƒæ–‡çŒ®å¼•ç”¨"><a href="#4-3-å‚è€ƒæ–‡çŒ®å¼•ç”¨" class="headerlink" title="4.3 å‚è€ƒæ–‡çŒ®å¼•ç”¨"></a>4.3 å‚è€ƒæ–‡çŒ®å¼•ç”¨</h3><p>ä¸‹é¢çš„ä»£ç åœ¨æ–‡ä¸­ä½¿ç”¨ï¼Œç”¨äºæ ‡æ³¨å¼•ç”¨äº†å“ªç¯‡æ–‡çŒ®</p><pre class="line-numbers language-latex"><code class="language-latex"><span class="token function selector">\cite</span><span class="token punctuation">{</span><span class="token keyword">b1</span><span class="token punctuation">}</span><span class="token function selector">\cite</span><span class="token punctuation">{</span><span class="token keyword">b2</span><span class="token punctuation">}</span><span class="token function selector">\cite</span><span class="token punctuation">{</span><span class="token keyword">b3</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä¸‹é¢ä»£ç ä¸€èˆ¬åœ¨æ–‡æœ«ä½¿ç”¨ï¼Œä¼šåˆ—ä¸¾è‡ªå·±ä½¿ç”¨çš„å‚è€ƒæ–‡çŒ®</p><pre class="line-numbers language-latex"><code class="language-latex"><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">thebibliography</span><span class="token punctuation">}</span><span class="token punctuation">{</span>00<span class="token punctuation">}</span><span class="token function selector">\bibitem</span><span class="token punctuation">{</span>b1<span class="token punctuation">}</span> Ben-Othman J, Yahya B. Energy efficient and QoS based routing protocol for wireless sensor networks. J Parallel Distrib Comput 2010;2010(70):849â€“57.<span class="token function selector">\bibitem</span><span class="token punctuation">{</span>b2<span class="token punctuation">}</span> Younis M, Youssef M, Arisha K. Energy-aware routing in cluster-based sensor networks. In: Proceedings of the IEEE 20th international symposium on modeling, analysis and simulation of computer and telecommunication systems; 2012. p. 0129. https://doi.org/10.1109/MASCOT.2002.1167069.<span class="token function selector">\bibitem</span><span class="token punctuation">{</span>b3<span class="token punctuation">}</span> Al-Karaki JN, Kamal AE. Routing techniques in wireless sensor networks: a survey. IEEE J Wirel Commun 2004;11(6):6â€“28. 2004.<span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">thebibliography</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-4-è„šæ³¨"><a href="#4-4-è„šæ³¨" class="headerlink" title="4.4 è„šæ³¨"></a>4.4 è„šæ³¨</h3><p>è„šæ³¨ï¼šåœ¨éœ€è¦æ·»åŠ è„šæ³¨çš„æ–‡å­—åæ·»åŠ <code>\footnote{è„šæ³¨å†…å®¹}</code>å³å¯ï¼Œä¼šè‡ªåŠ¨æ ‡åºå·ï¼Œå¹¶å°†<code>è„šæ³¨å†…å®¹</code>å¡«ä¸Šå»</p><h2 id="5-ç›®å½•"><a href="#5-ç›®å½•" class="headerlink" title="5 ç›®å½•"></a>5 ç›®å½•</h2><p>åœ¨<code>\begin{document}</code>å†…å®¹ä¸­æ·»åŠ ï¼š<code>\tableofcontents</code></p><pre class="line-numbers language-latex"><code class="language-latex"><span class="token comment" spellcheck="true">% ç”Ÿæˆç›®å½•è®¾ç½®</span><span class="token function selector">\renewcommand</span><span class="token punctuation">{</span><span class="token function selector">\contentsname</span><span class="token punctuation">}</span><span class="token punctuation">{</span>ç›®å½•<span class="token punctuation">}</span> <span class="token comment" spellcheck="true">%å°†contentè½¬ä¸ºç›®å½•,ç”Ÿæˆç›®å½•äºŒå­—</span><span class="token function selector">\tableofcontents</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="6-å­—ä½“ã€å¤§å°ä¸é¢œè‰²"><a href="#6-å­—ä½“ã€å¤§å°ä¸é¢œè‰²" class="headerlink" title="6 å­—ä½“ã€å¤§å°ä¸é¢œè‰²"></a>6 å­—ä½“ã€å¤§å°ä¸é¢œè‰²</h2><ul><li>å­—ä½“</li></ul><p>ä½¿ç”¨<code>{\å­—ä½“ å†…å®¹}</code>ï¼ˆæ¨èæ­¤ç§ï¼‰ï¼Œä¹Ÿå¯ä½¿ç”¨<code>\å­—ä½“ {å†…å®¹}</code></p><p>ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-latex"><code class="language-latex"><span class="token punctuation">{</span><span class="token function selector">\songti</span> å®‹ä½“<span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token function selector">\heiti</span> é»‘ä½“<span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token function selector">\fangsong</span> ä»¿å®‹<span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token function selector">\kaishu</span> æ¥·ä¹¦<span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token function selector">\bf</span> ç²—ä½“<span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token function selector">\it</span> æ–œä½“<span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token function selector">\sl</span> æ–œä½“<span class="token punctuation">}</span><span class="token function selector">\textbf</span><span class="token punctuation">{</span>ç²—ä½“<span class="token punctuation">}</span><span class="token function selector">\textit</span><span class="token punctuation">{</span>æ–œä½“<span class="token punctuation">}</span><span class="token function selector">\textsl</span><span class="token punctuation">{</span>æ–œä½“<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å¤§å°</li></ul><pre class="line-numbers language-latex"><code class="language-latex"><span class="token punctuation">{</span><span class="token function selector">\tiny</span> Hello<span class="token punctuation">}</span> <span class="token function selector">\\</span><span class="token punctuation">{</span><span class="token function selector">\scriptsize</span> Hello<span class="token punctuation">}</span> <span class="token function selector">\\</span><span class="token punctuation">{</span><span class="token function selector">\footnotesize</span> Hello<span class="token punctuation">}</span> <span class="token function selector">\\</span><span class="token punctuation">{</span><span class="token function selector">\small</span> Hello<span class="token punctuation">}</span> <span class="token function selector">\\</span><span class="token punctuation">{</span><span class="token function selector">\normalsize</span> Hello<span class="token punctuation">}</span> <span class="token function selector">\\</span><span class="token punctuation">{</span><span class="token function selector">\large</span> Hello<span class="token punctuation">}</span> <span class="token function selector">\\</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>é¢œè‰²</li></ul><p>éœ€è¦å¯¼å…¥å®åŒ…<code>\usepackage{xcolor}</code></p><pre class="line-numbers language-latex"><code class="language-latex"><span class="token function selector">\documentclass</span><span class="token punctuation">{</span><span class="token keyword">article</span><span class="token punctuation">}</span><span class="token function selector">\usepackage</span><span class="token punctuation">[</span>UTF8<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token keyword">ctex</span><span class="token punctuation">}</span><span class="token function selector">\usepackage</span><span class="token punctuation">{</span><span class="token keyword">color,xcolor</span><span class="token punctuation">}</span><span class="token function selector">\setlength</span><span class="token punctuation">{</span><span class="token function selector">\parindent</span><span class="token punctuation">}</span><span class="token punctuation">{</span>0pt<span class="token punctuation">}</span><span class="token comment" spellcheck="true">% é¢„å…ˆå®šä¹‰å¥½çš„é¢œè‰²ï¼š red, green, blue, white, black, yellow, gray, darkgray, lightgray, brown, cyan, lime, magenta, olive, orange, pink, purple, teal, violet.</span><span class="token comment" spellcheck="true">% å®šä¹‰é¢œè‰²çš„5ç§æ–¹å¼</span><span class="token function selector">\definecolor</span><span class="token punctuation">{</span>light-gray<span class="token punctuation">}</span><span class="token punctuation">{</span>gray<span class="token punctuation">}</span><span class="token punctuation">{</span>0.95<span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">% 1.ç°åº¦</span><span class="token function selector">\definecolor</span><span class="token punctuation">{</span>orange<span class="token punctuation">}</span><span class="token punctuation">{</span>rgb<span class="token punctuation">}</span><span class="token punctuation">{</span>1,0.5,0<span class="token punctuation">}</span>      <span class="token comment" spellcheck="true">% 2.rgb</span><span class="token function selector">\definecolor</span><span class="token punctuation">{</span>orange<span class="token punctuation">}</span><span class="token punctuation">{</span>RGB<span class="token punctuation">}</span><span class="token punctuation">{</span>255,127,0<span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">% 3.RGB</span><span class="token function selector">\definecolor</span><span class="token punctuation">{</span>orange<span class="token punctuation">}</span><span class="token punctuation">{</span>HTML<span class="token punctuation">}</span><span class="token punctuation">{</span>FF7F00<span class="token punctuation">}</span>      <span class="token comment" spellcheck="true">% 4.HTML</span><span class="token function selector">\definecolor</span><span class="token punctuation">{</span>orange<span class="token punctuation">}</span><span class="token punctuation">{</span>cmyk<span class="token punctuation">}</span><span class="token punctuation">{</span>0,0.5,1,0<span class="token punctuation">}</span>   <span class="token comment" spellcheck="true">% 5.cmyk</span><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">document</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">% \pagecolor{yellow}          %è®¾ç½®èƒŒæ™¯è‰²ä¸ºé»„è‰²</span><span class="token comment" spellcheck="true">% ä½¿ç”¨é¢œè‰²çš„å¸¸ç”¨æ–¹å¼</span><span class="token function selector">\textcolor</span><span class="token punctuation">{</span>green<span class="token punctuation">}</span><span class="token punctuation">{</span>ç»¿è‰²<span class="token punctuation">}</span> <span class="token comment" spellcheck="true">% textcolor+é¢œè‰²</span><span class="token function selector">\color</span><span class="token punctuation">{</span>orange<span class="token punctuation">}</span><span class="token punctuation">{</span>æ©™è‰²<span class="token punctuation">}</span> <span class="token comment" spellcheck="true">% color+é¢œè‰²</span><span class="token function selector">\textcolor</span><span class="token punctuation">[</span>rgb<span class="token punctuation">]</span><span class="token punctuation">{</span>0,1,0<span class="token punctuation">}</span><span class="token punctuation">{</span>ç»¿è‰²<span class="token punctuation">}</span> <span class="token comment" spellcheck="true">% textcolor+rgb</span><span class="token function selector">\color</span><span class="token punctuation">[</span>rgb<span class="token punctuation">]</span><span class="token punctuation">{</span>1,0,0<span class="token punctuation">}</span><span class="token punctuation">{</span>çº¢è‰²<span class="token punctuation">}</span> <span class="token comment" spellcheck="true">% color+rgb</span><span class="token comment" spellcheck="true">% ä½¿ç”¨åº•è‰²</span><span class="token function selector">\colorbox</span><span class="token punctuation">{</span>red<span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token function selector">\color</span><span class="token punctuation">{</span>black<span class="token punctuation">}</span>çº¢åº•é»‘å­—<span class="token punctuation">}</span><span class="token function selector">\fcolorbox</span><span class="token punctuation">{</span>red<span class="token punctuation">}</span><span class="token punctuation">{</span>green<span class="token punctuation">}</span><span class="token punctuation">{</span>çº¢æ¡†ç»¿åº•<span class="token punctuation">}</span> <span class="token comment" spellcheck="true">% æ¡†è‰²+èƒŒæ™¯è‰²</span><span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">document</span><span class="token punctuation">}</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="7-é“¾æ¥"><a href="#7-é“¾æ¥" class="headerlink" title="7 é“¾æ¥"></a>7 é“¾æ¥</h2><p>å¯¼å…¥å®åŒ…ï¼š<code>\usepackage{url}</code><br>æ’å…¥è¶…é“¾æ¥ï¼š<code>\url{www.baidu.com}</code></p><h2 id="8-å›¾ç‰‡"><a href="#8-å›¾ç‰‡" class="headerlink" title="8 å›¾ç‰‡"></a>8 å›¾ç‰‡</h2><p>éœ€è¦å¯¼å…¥å®åŒ…ï¼š<code>\usepackage{graphicx}</code></p><ul><li>å•å¼ å›¾ç‰‡</li></ul><pre class="line-numbers language-latex"><code class="language-latex"><span class="token comment" spellcheck="true">%å¼€å§‹æ’å…¥å›¾ç‰‡</span><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">figure</span><span class="token punctuation">}</span><span class="token punctuation">[</span>htbp<span class="token punctuation">]</span> <span class="token comment" spellcheck="true">% htbpä»£è¡¨å›¾ç‰‡æ’å…¥ä½ç½®çš„è®¾ç½®</span><span class="token function selector">\centering</span> <span class="token comment" spellcheck="true">%å›¾ç‰‡å±…ä¸­</span><span class="token comment" spellcheck="true">%æ·»åŠ å›¾ç‰‡ï¼›[]ä¸­ä¸ºå¯é€‰å‚æ•°ï¼Œå¯ä»¥è®¾ç½®å›¾ç‰‡çš„å®½é«˜ï¼›{}ä¸­ä¸ºå›¾ç‰‡çš„ç›¸å¯¹ä½ç½®</span><span class="token function selector">\includegraphics</span><span class="token punctuation">[</span>width=6cm<span class="token punctuation">]</span><span class="token punctuation">{</span>image.jpg<span class="token punctuation">}</span><span class="token function selector">\caption</span><span class="token punctuation">{</span>è¿™æ˜¯ä¸€ä¸ªå›¾ç‰‡æ ‡é¢˜<span class="token punctuation">}</span> <span class="token comment" spellcheck="true">% å›¾ç‰‡æ ‡é¢˜</span><span class="token function selector">\label</span><span class="token punctuation">{</span><span class="token keyword">pic1</span><span class="token punctuation">}</span> <span class="token comment" spellcheck="true">% å›¾ç‰‡æ ‡ç­¾</span><span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">figure</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><code>[htbp]</code>æ˜¯å¯é€‰å‚æ•°ï¼Œå…è®¸ç”¨æˆ·æŒ‡å®šå›¾ç‰‡ã€è¡¨æ ¼ç­‰å…ƒç´ è¢«æ”¾ç½®çš„ä½ç½®ã€‚è¿™ä¸€å¯é€‰å‚æ•°é¡¹å¯ä»¥æ˜¯ä¸‹åˆ—å­—æ¯çš„ä»»æ„ç»„åˆã€‚</p><p><code>h(here)</code>: å½“å‰ä½ç½®ï¼›å°†å›¾å½¢æ”¾ç½®åœ¨ æ­£æ–‡æ–‡æœ¬ä¸­ç»™å‡ºè¯¥å›¾å½¢ç¯å¢ƒçš„åœ°æ–¹ã€‚å¦‚æœæœ¬é¡µæ‰€å‰©çš„é¡µé¢ä¸å¤Ÿï¼Œ è¿™ä¸€å‚æ•°å°†ä¸èµ·ä½œç”¨ã€‚</p><p><code>t(top)</code>: é¡¶éƒ¨ï¼›å°†å›¾å½¢æ”¾ç½®åœ¨é¡µé¢çš„é¡¶éƒ¨ã€‚</p><p><code>b(bottom)</code>: åº•éƒ¨ï¼›å°†å›¾å½¢æ”¾ç½®åœ¨é¡µé¢çš„åº•éƒ¨ã€‚</p><p><code>p(page)</code>: æµ®åŠ¨é¡µï¼›å°†å›¾å½¢æ”¾ç½®åœ¨ä¸€åªå…è®¸æœ‰æµ®åŠ¨å¯¹è±¡çš„é¡µé¢ä¸Šã€‚</p><p>æ³¨ï¼š</p><ul><li>å¦‚æœåœ¨å›¾å½¢ç¯å¢ƒä¸­æ²¡æœ‰ç»™å‡ºä¸Šè¿°ä»»ä¸€å‚æ•°ï¼Œåˆ™ç¼ºçœä¸º<code>[tbp]</code></li><li>ç»™å‡ºå‚æ•°çš„é¡ºåºä¸ä¼šå½±å“åˆ°æœ€åçš„ç»“æœã€‚å› ä¸ºåœ¨è€ƒè™‘è¿™äº›å‚æ•°æ—¶LaTeXæ€»æ˜¯å°è¯•ä»¥<code>h-t-b-p</code> çš„é¡ºåºæ¥ç¡®å®šå›¾å½¢çš„ä½ç½®ã€‚æ‰€ä»¥<code>[hb]</code>å’Œ<code>[bh]</code>éƒ½ä»¥<code>h-b</code>çš„é¡ºåºæ¥æ’ç‰ˆ</li><li>ç»™å‡ºçš„å‚æ•°è¶Šå¤šï¼ŒLaTeXçš„æ’ç‰ˆç»“æœå°±ä¼šè¶Šå¥½ã€‚<code>[htbp]</code>ï¼Œ <code>[tbp]</code>ï¼Œ <code>[htp]</code>ï¼Œ <code>[tp]</code> è¿™äº›ç»„åˆå¾—åˆ°çš„æ•ˆæœä¸é”™ï¼Œ<code>[h]</code>ä¹Ÿæ˜¯å¸¸ç”¨çš„é€‰æ‹©ã€‚</li></ul></blockquote><ul><li>å¹¶æ’æ’å…¥å¤šå¼ å›¾ç‰‡</li></ul><pre class="line-numbers language-latex"><code class="language-latex"><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">figure</span><span class="token punctuation">}</span><span class="token function selector">\centering</span><span class="token punctuation">{</span><span class="token function selector">\includegraphics</span><span class="token punctuation">[</span>width=2.5cm<span class="token punctuation">]</span><span class="token punctuation">{</span>1.jpg<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token function selector">\hspace</span><span class="token punctuation">{</span>10pt<span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">%æ¯å¼ å›¾ç‰‡æ°´å¹³è·ç¦»</span><span class="token punctuation">{</span><span class="token function selector">\includegraphics</span><span class="token punctuation">[</span>width=2.5cm<span class="token punctuation">]</span><span class="token punctuation">{</span>1.jpg<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token function selector">\hspace</span><span class="token punctuation">{</span>10pt<span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token function selector">\includegraphics</span><span class="token punctuation">[</span>width=2.5cm<span class="token punctuation">]</span><span class="token punctuation">{</span>1.jpg<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token function selector">\hspace</span><span class="token punctuation">{</span>10pt<span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token function selector">\includegraphics</span><span class="token punctuation">[</span>width=2.5cm<span class="token punctuation">]</span><span class="token punctuation">{</span>1.jpg<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token function selector">\hspace</span><span class="token punctuation">{</span>10pt<span class="token punctuation">}</span><span class="token function selector">\caption</span><span class="token punctuation">{</span>å¹¶æ’æ’å…¥4å¼ å›¾ç‰‡<span class="token punctuation">}</span> <span class="token comment" spellcheck="true">%å›¾ç‰‡æ ‡é¢˜</span><span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">figure</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ç«–æ’æ’å…¥å¤šå¼ å›¾ç‰‡</li></ul><h2 id="9-è¡¨æ ¼"><a href="#9-è¡¨æ ¼" class="headerlink" title="9 è¡¨æ ¼"></a>9 è¡¨æ ¼</h2><p>åœ¨çº¿ç”ŸæˆLatexè¡¨æ ¼ï¼š<a href="https://www.tablesgenerator.com/" target="_blank" rel="noopener">https://www.tablesgenerator.com/</a></p><h2 id="10-æ•°å­¦å…¬å¼"><a href="#10-æ•°å­¦å…¬å¼" class="headerlink" title="10 æ•°å­¦å…¬å¼"></a>10 æ•°å­¦å…¬å¼</h2><p>å…¬å¼ç¼–å†™ç±»ä¼¼Katexï¼Œä¸å†è¯¦ç»†è®²è¿°ï¼Œæ–‡æ¡£è¯·å‚è€ƒï¼š <a href="https://katex.org/docs/supported.html" target="_blank" rel="noopener">https://katex.org/docs/supported.html</a></p><ul><li>å…¬å¼è‡ªåŠ¨ç¼–å·</li></ul><p>ä½¿ç”¨<code>\begin{equation}</code>å’Œ<code>\end{equation}</code>è¿›è¡Œå…¬å¼è¾“å…¥ï¼Œè¦åŒæ—¶ä½¿ç”¨ï¼Œä¸”ç¼–å·ä¸èƒ½å¤Ÿä¿®æ”¹ã€‚</p><pre class="line-numbers language-latex"><code class="language-latex"><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">equation</span><span class="token punctuation">}</span><span class="token equation string">a^2+b^2=c^2</span><span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">equation</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>å…¬å¼æ‰‹åŠ¨ç¼–å·</li></ul><pre class="line-numbers language-latex"><code class="language-latex"><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">equation</span><span class="token punctuation">}</span><span class="token equation string">a^2 + b^2 = c^2<span class="token equation-command regex">\tag</span>{2}</span><span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">equation</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="11-ä»£ç "><a href="#11-ä»£ç " class="headerlink" title="11 ä»£ç "></a>11 ä»£ç </h2><ul><li>ç®—æ³•ä¼ªä»£ç </li></ul><p>éœ€è¦ä½¿ç”¨<code>\usepackage{algorithm}</code>å’Œ<code>\usepackage{algorithmic}</code>å®åŒ…ï¼Œ<code>if</code>ã€<code>for</code>ç­‰å…³é”®å­—è¦æŒ‰ç…§è§„èŒƒä¹¦å†™ï¼Œå¦‚<code>\IF \ENDIF</code>ã€‚</p><pre class="line-numbers language-latex"><code class="language-latex"><span class="token function selector">\documentclass</span><span class="token punctuation">{</span><span class="token keyword">article</span><span class="token punctuation">}</span><span class="token function selector">\usepackage</span><span class="token punctuation">[</span>UTF8<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token keyword">ctex</span><span class="token punctuation">}</span><span class="token function selector">\usepackage</span><span class="token punctuation">{</span><span class="token keyword">algorithm</span><span class="token punctuation">}</span> <span class="token comment" spellcheck="true">% æ’ç‰ˆç®—æ³•</span><span class="token function selector">\usepackage</span><span class="token punctuation">{</span><span class="token keyword">algorithmic</span><span class="token punctuation">}</span> <span class="token comment" spellcheck="true">% æ’ç‰ˆç®—æ³•</span><span class="token function selector">\title</span><span class="token punctuation">{</span>Algorithm<span class="token punctuation">}</span><span class="token function selector">\author</span><span class="token punctuation">{</span>NSJim Green<span class="token punctuation">}</span><span class="token function selector">\date</span><span class="token punctuation">{</span>October 2020<span class="token punctuation">}</span><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">document</span><span class="token punctuation">}</span><span class="token function selector">\maketitle</span><span class="token function selector">\section</span><span class="token punctuation">{</span><span class="token headline class-name">Algorithm 1</span><span class="token punctuation">}</span><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">algorithm</span><span class="token punctuation">}</span><span class="token function selector">\caption</span><span class="token punctuation">{</span>CheckSum(A,x)<span class="token punctuation">}</span> <span class="token comment" spellcheck="true">%ç®—æ³•æ ‡é¢˜</span><span class="token function selector">\label</span><span class="token punctuation">{</span><span class="token keyword">alg2</span><span class="token punctuation">}</span> <span class="token comment" spellcheck="true">%æ ‡ç­¾</span><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">algorithmic</span><span class="token punctuation">}</span> <span class="token comment" spellcheck="true">%ç®—æ³•å¼€å§‹</span><span class="token function selector">\STATE</span> <span class="token punctuation">{</span><span class="token function selector">\bf</span> Input:<span class="token punctuation">}</span> An array A and a value x  <span class="token comment" spellcheck="true">%ä¹Ÿå¯ä»¥ç”¨\textbf{Input:}</span><span class="token function selector">\STATE</span> <span class="token punctuation">{</span><span class="token function selector">\bf</span> Output:<span class="token punctuation">}</span> A bool value show if there is two elements in A whose sum is x<span class="token function selector">\STATE</span> A <span class="token equation string">$<span class="token equation-command regex">\gets</span>$</span> SORT(A)<span class="token function selector">\STATE</span> n <span class="token equation string">$<span class="token equation-command regex">\gets</span>$</span> length(n)<span class="token function selector">\FOR</span><span class="token punctuation">{</span>i <span class="token equation string">$<span class="token equation-command regex">\gets</span>$</span> 0 to n<span class="token punctuation">}</span>    <span class="token function selector">\IF</span><span class="token punctuation">{</span>Binary-search(A,x-A<span class="token punctuation">[</span>i<span class="token punctuation">]</span>,1,n)<span class="token punctuation">}</span>    <span class="token function selector">\STATE</span> return true    <span class="token function selector">\ENDIF</span><span class="token function selector">\ENDFOR</span><span class="token function selector">\STATE</span> return false<span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">algorithmic</span><span class="token punctuation">}</span><span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">algorithm</span><span class="token punctuation">}</span><span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">document</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ä»£ç å—</li></ul><p>ä½¿ç”¨<code>\usepackage{listings}</code>å®åŒ…ï¼Œå¹¶ä½¿ç”¨<code>\lstset{}</code>è¿›è¡ŒåŸºç¡€è®¾ç½®ï¼Œç„¶åä½¿ç”¨<code>\begin{lstlisting}[language=xxx]</code>å’Œ<code>\end{lstlisting}</code>æ’å…¥ä»£ç å—ã€‚</p><p>åŸºç¡€è®¾ç½®åŒ…æ‹¬è¡Œå·ï¼Œä¸æ˜¾ç¤ºå­—ç¬¦ä¸²ç©ºæ ¼ï¼Œä»£ç å—è¾¹æ¡†ï¼Œä¸åŒ…å«é¢œè‰²ç­‰è®¾ç½®ï¼Œè¦è®¾ç½®é¢œè‰²å’Œå­—ä½“è¯·è§ä¸‹æ–‡çš„é«˜çº§ç”¨æ³•ã€‚</p><p>è¿›è¡Œä»£ç åŸºç¡€è®¾ç½®ï¼šï¼ˆå†™åœ¨å¯¼è¨€åŒºï¼‰</p><pre class="line-numbers language-latex"><code class="language-latex"><span class="token comment" spellcheck="true">% ä»£ç å—åŸºç¡€è®¾ç½®</span><span class="token function selector">\lstset</span><span class="token punctuation">{</span>breaklines, <span class="token comment" spellcheck="true">% ä»£ç è‡ªåŠ¨æ¢è¡Œ</span>numbers=left,      <span class="token comment" spellcheck="true">% åœ¨å·¦ä¾§æ˜¾ç¤ºè¡Œå·</span>showstringspaces=false,  <span class="token comment" spellcheck="true">% ä¸æ˜¾ç¤ºå­—ç¬¦ä¸²ä¸­çš„ç©ºæ ¼</span>frame=single,      <span class="token comment" spellcheck="true">% è®¾ç½®ä»£ç å—è¾¹æ¡†</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä»–ä»£ç è®¾ç½®ï¼š</p><pre class="line-numbers language-latex"><code class="language-latex"><span class="token comment" spellcheck="true">% ä»£ç å—é«˜çº§è®¾ç½®</span><span class="token function selector">\lstset</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">% basicstyle=\footnotesize,                 % è®¾ç½®æ•´ä½“çš„å­—ä½“å¤§å°</span>showstringspaces=false,                     <span class="token comment" spellcheck="true">% ä¸æ˜¾ç¤ºå­—ç¬¦ä¸²ä¸­çš„ç©ºæ ¼</span>frame=single,                               <span class="token comment" spellcheck="true">% è®¾ç½®ä»£ç å—è¾¹æ¡†</span>numbers=left,                               <span class="token comment" spellcheck="true">% åœ¨å·¦ä¾§æ˜¾ç¤ºè¡Œå·</span><span class="token comment" spellcheck="true">% numberstyle=\footnotesize\color{gray},    % è®¾ç½®è¡Œå·æ ¼å¼</span>numberstyle=<span class="token function selector">\color</span><span class="token punctuation">{</span>darkgray<span class="token punctuation">}</span>,               <span class="token comment" spellcheck="true">% è®¾ç½®è¡Œå·æ ¼å¼</span>backgroundcolor=<span class="token function selector">\color</span><span class="token punctuation">{</span>white<span class="token punctuation">}</span>,              <span class="token comment" spellcheck="true">% è®¾ç½®èƒŒæ™¯é¢œè‰²</span>keywordstyle=<span class="token function selector">\color</span><span class="token punctuation">{</span>blue<span class="token punctuation">}</span>,                  <span class="token comment" spellcheck="true">% è®¾ç½®å…³é”®å­—é¢œè‰²</span>commentstyle=<span class="token function selector">\it</span><span class="token function selector">\color</span><span class="token punctuation">[</span>RGB<span class="token punctuation">]</span><span class="token punctuation">{</span>0,100,0<span class="token punctuation">}</span>,       <span class="token comment" spellcheck="true">% è®¾ç½®ä»£ç æ³¨é‡Šçš„æ ¼å¼</span>stringstyle=<span class="token function selector">\sl</span><span class="token function selector">\color</span><span class="token punctuation">{</span>red<span class="token punctuation">}</span>,                 <span class="token comment" spellcheck="true">% è®¾ç½®å­—ç¬¦ä¸²æ ¼å¼</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¹¦å†™ä»£ç ï¼šï¼ˆå†™åœ¨æ­£æ–‡åŒºï¼‰</p><pre class="line-numbers language-latex"><code class="language-latex"><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">lstlisting</span><span class="token punctuation">}</span><span class="token cdata">[language=c]#include &lt;stdio.h>// main functionint main() {    printf("Hello World!");    return 0;}</span><span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">lstlisting</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ–‡æ¡£ç¼–å†™ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ æ€»ç»“ </tag>
            
            <tag> Latex </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç»„åˆæ•°å­¦å¸¸ç”¨å…¬å¼</title>
      <link href="/p/3821341893.html"/>
      <url>/p/3821341893.html</url>
      
        <content type="html"><![CDATA[<h1 id="ç»„åˆæ•°å­¦å¸¸ç”¨å…¬å¼"><a href="#ç»„åˆæ•°å­¦å¸¸ç”¨å…¬å¼" class="headerlink" title="ç»„åˆæ•°å­¦å¸¸ç”¨å…¬å¼"></a>ç»„åˆæ•°å­¦å¸¸ç”¨å…¬å¼</h1><h2 id="äºŒé¡¹å¼å®šç†"><a href="#äºŒé¡¹å¼å®šç†" class="headerlink" title="äºŒé¡¹å¼å®šç†"></a>äºŒé¡¹å¼å®šç†</h2><p>äºŒé¡¹å¼ç³»æ•°ç›¸å…³æ€§è´¨ï¼š</p><ul><li><p>å¯¹ç§°æ€§ï¼š$C_n^m = C_n^{n-m}$</p></li><li><p>å¢å‡æ€§ä¸æœ€å¤§å€¼ï¼šäºŒé¡¹å¼ç³»æ•°å‰åŠéƒ¨åˆ†é€æ¸å¢å¤§ï¼ŒååŠéƒ¨åˆ†é€æ¸å‡å°ï¼Œä¸­é—´å–æœ€å¤§å€¼ã€‚<br>$$<br>\text{æœ€å¤§å€¼} max=\begin{cases} C_n^{\frac{n}{2}} \\ C_n^{\frac{n-1}{2}}=C_n^{\frac{n+1}{2}}\end{cases}<br>$$</p></li><li><p>äºŒé¡¹å¼ç³»æ•°ä¹‹å’Œ<br>$$<br>C_n^0+C_n^1+C_n^2+C_n^3+â€¦+C_n^{n-1}+C_n^n=2^n<br>$$</p></li><li><p>äºŒé¡¹å¼å¥‡æ•°é¡¹ç³»æ•°ä¹‹å’Œç­‰äºå¶æ•°é¡¹ç³»æ•°ä¹‹å’Œï¼Œå³<br>$$<br>C_n^1+C_n^3+C_n^5+â€¦=C_n^0+C_n^2+C_n^4+C_n^6+â€¦=2^{n-1}<br>$$</p></li></ul><h3 id="æ¨è¾‰ä¸‰è§’"><a href="#æ¨è¾‰ä¸‰è§’" class="headerlink" title="æ¨è¾‰ä¸‰è§’"></a>æ¨è¾‰ä¸‰è§’</h3><p><img src="3821341893/image-20230209115625513.png" alt="æ¨è¾‰ä¸‰è§’"></p><h2 id="ç»„åˆæ•°å…¬å¼"><a href="#ç»„åˆæ•°å…¬å¼" class="headerlink" title="ç»„åˆæ•°å…¬å¼"></a>ç»„åˆæ•°å…¬å¼</h2><p>$C_n^m$è®¡ç®—</p><ul><li>æ–¹å¼ä¸€ï¼šå…¬å¼è®¡ç®—<br>è®¡ç®—éƒ½æ˜¯åœ¨é€†å…ƒæˆ–è€…é˜¶ä¹˜åŸºç¡€ä¸Šè®¡ç®—çš„</li></ul><p>$$<br>C_n^m = \frac{n!}{m!*(n-m)!}<br>$$</p><pre class="line-numbers language-cpp"><code class="language-cpp">ll <span class="token function">C</span><span class="token punctuation">(</span>ll n<span class="token punctuation">,</span> ll m<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">&lt;</span> m<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> fact<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">*</span> invfac<span class="token punctuation">[</span>m<span class="token punctuation">]</span> <span class="token operator">%</span> mod <span class="token operator">*</span> invfac<span class="token punctuation">[</span>n <span class="token operator">-</span> m<span class="token punctuation">]</span> <span class="token operator">%</span> mod<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ–¹å¼äºŒï¼šé€’æ¨æ–¹å¼<br>éœ€è¦å»ºè¡¨ï¼Œæ‰€ä»¥å¦‚æœè®¡ç®—èŒƒå›´æ¯”è¾ƒå¤§æ—¶éœ€è¦çš„ç©ºé—´ä¹Ÿå¤§<br>é€’æ¨å…¬å¼ ï¼š </li></ul><p>$$<br>C_n^m = C_{n-1}^{m} + C_{n-1}^{m-1}<br>$$</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> j <span class="token operator">||</span> j <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> c<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> c<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> c<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ’åˆ—ç»„åˆæ–¹æ³•"><a href="#æ’åˆ—ç»„åˆæ–¹æ³•" class="headerlink" title="æ’åˆ—ç»„åˆæ–¹æ³•"></a>æ’åˆ—ç»„åˆæ–¹æ³•</h2><h3 id="1-éš”æ¿æ³•"><a href="#1-éš”æ¿æ³•" class="headerlink" title="1. éš”æ¿æ³•"></a>1. éš”æ¿æ³•</h3><blockquote><p>å¼•å…¥ï¼š 10 ä¸ª<strong>ç›¸åŒ</strong>å°çƒæ”¾è¿› 3 ä¸ª<strong>ä¸åŒ</strong>ç›’å­ï¼Œæ¯ä¸ªç›’å­è‡³å°‘æ”¾è¿›ä¸€ä¸ªï¼Œ æ±‚ç§ç±»æ•°ã€‚</p><p>åœ¨10 ä¸ªå°çƒä¸­é—´æ’å…¥éš”æ¿ï¼Œ å…±æœ‰ $10-1=9$ ä¸ªä½ç½®ï¼Œ éœ€è¦æ’å…¥ $3-1=2$ ä¸ªéš”æ¿å°†å…¶åˆ†æˆ 3 éƒ¨åˆ†ã€‚ å…± $C_9^2 = 36$ ç§ã€‚</p></blockquote><ul><li>ä¸€èˆ¬éš”æ¿æ³•ï¼š</li></ul><p>å°† $n$ ä¸ªç›¸åŒçš„å…ƒç´ åˆ†æˆ $k$ éƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†è‡³å°‘åˆ†å¾—ä¸€ä¸ªå…ƒç´ ï¼Œ å³åœ¨ $n-1$ ä¸ªç©ºéš™ä¸­æ’å…¥ $k-1$ ä¸ªéš”æ¿ï¼Œæƒ…å†µæ•°ä¸º<br>$$<br>C_{n-1}^{k-1}<br>$$<br>ç­‰ä»·äº $x_1+ x_2+x_3+â€¦+x_k=n, x_i \geq 1$ çš„å¯è¡Œè§£ä¸ªæ•°ã€‚</p><ul><li>æ·»å…ƒç´ éš”æ¿æ³•ï¼š</li></ul><p>å°† $n$ ä¸ªç›¸åŒçš„å…ƒç´ åˆ†æˆ $k$ éƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†å¯ä»¥ä¸ºç©ºï¼Œ ç­‰ä»·äºæˆ‘ä»¬å…ˆè®©å…ƒç´ ä¸ªæ•°æ·»åŠ ä¸Š $k$ ä¸ªï¼Œç„¶ååœ¨ $n+k$ ä¸ªå…ƒç´ ä¸­åˆ†æˆ $k$ éƒ¨åˆ†ï¼Œ æœ€åå†åœ¨ $k$ éƒ¨åˆ†çš„æ¯ä¸€ä¸ªéƒ¨åˆ†éƒ½æ‹¿èµ°ä¸€ä¸ªå…ƒç´ ï¼Œå…±æ‹¿èµ° $k$ ä¸ªå…ƒç´ ã€‚ å³åœ¨ $n+k-1$ ä¸ªç©ºéš™ä¸­æ’å…¥ $k-1$ ä¸ªéš”æ¿ï¼Œæƒ…å†µæ•°ä¸º<br>$$<br>C_{n+k-1}^{k-1}<br>$$<br>ç­‰ä»·äº $x_1+ x_2+x_3+â€¦+x_k=n, x_i \geq 0$ çš„å¯è¡Œè§£ä¸ªæ•°ã€‚</p><blockquote><p>æ­¤æ—¶è¯¥å¼å¯ä»¥è½¬åŒ–ä¸ºä¸€èˆ¬éš”æ¿æ³•ï¼Œ æˆ‘ä»¬è®© $x_i \geq 1$ å³å¯ï¼Œæ“ä½œæ˜¯å°†æ¯ä¸€ä¸ª $x_i$ å…ƒç´ åŠ ä¸Š $1$ ï¼Œç›¸å½“äºç­‰å¼ä¸¤è¾¹åŒæ—¶åŠ äº† $k$ ï¼Œå³ $x_1+x_2+â€¦+x_k=n+k,x_i \geq 1$ ï¼Œå³å¯è½¬åŒ–ä¸ºä¸€èˆ¬éš”æ¿æ³•ã€‚</p></blockquote><ul><li>éš”æ¿æ³•åº”ç”¨</li></ul><p>æŠŠ10ä¸ªç›¸åŒçš„å°çƒæ”¾åˆ°3ä¸ªä¸åŒçš„ç®±å­ï¼Œç¬¬ä¸€ä¸ªç®±å­è‡³å°‘1ä¸ªï¼Œç¬¬äºŒä¸ªç®±å­è‡³å°‘3ä¸ªï¼Œç¬¬3ä¸ªç®±å­å¯ä»¥ä¸º</p><p>ç©ºï¼Œæœ‰å‡ ç§æƒ…å†µï¼Ÿ</p><blockquote><p>æˆ‘ä»¬å¯ä»¥åœ¨ç¬¬äºŒä¸ªç®±å­å…ˆæ”¾å…¥10ä¸ªå°çƒä¸­çš„2ä¸ªï¼Œå°çƒå‰©8ä¸ªæ”¾3ä¸ªç®±å­ï¼Œç„¶ååœ¨ç¬¬ä¸‰ä¸ªç®±å­æ”¾å…¥8</p><p>ä¸ªå°çƒä¹‹å¤–çš„1ä¸ªå°çƒï¼ˆå³è¡¥å……äº†ä¸€ä¸ªçƒï¼‰ï¼Œåˆ™é—®é¢˜è½¬åŒ–ä¸ºæŠŠ9ä¸ªç›¸åŒå°çƒæ”¾3ä¸åŒç®±å­ï¼Œæ¯ç®±è‡³</p><p>å°‘1ä¸ªï¼Œå‡ ç§æ–¹æ³•ï¼Ÿ </p><p>$C^2_8=28$</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ•°è®º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç»„åˆæ•°å­¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ã€‹ç¬”è®°</title>
      <link href="/p/1060509989.html"/>
      <url>/p/1060509989.html</url>
      
        <content type="html"><![CDATA[<blockquote><p> æœ¬ç¬”è®°ä¸»è¦å‚è€ƒ<a href="https://zh-v2.d2l.ai/index.html" target="_blank" rel="noopener">ã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ã€‹</a> è¿›è¡Œå­¦ä¹ è®°å½•ï¼Œä¸åšæ— æ„ä¹‰çš„ä¹¦æœ¬å†…å®¹æ‘˜æŠ„ã€‚</p><p>è¯¾ç¨‹ç½‘å€ï¼š<a href="https://courses.d2l.ai/zh-v2/" target="_blank" rel="noopener">https://courses.d2l.ai/zh-v2/</a></p><p>ä½¿ç”¨æ·±åº¦å­¦ä¹ æ¡†æ¶ä¸ºï¼šPytorch</p></blockquote><p>å†…å®¹ä¸æ–­æ›´æ–°ä¸­$\cdots \cdots$</p><h1 id="2-é¢„å¤‡çŸ¥è¯†"><a href="#2-é¢„å¤‡çŸ¥è¯†" class="headerlink" title="2 é¢„å¤‡çŸ¥è¯†"></a>2 é¢„å¤‡çŸ¥è¯†</h1><h2 id="2-1-æ•°æ®å¤„ç†"><a href="#2-1-æ•°æ®å¤„ç†" class="headerlink" title="2.1 æ•°æ®å¤„ç†"></a>2.1 æ•°æ®å¤„ç†</h2><h2 id="2-2-çº¿æ€§ä»£æ•°"><a href="#2-2-çº¿æ€§ä»£æ•°" class="headerlink" title="2.2 çº¿æ€§ä»£æ•°"></a>2.2 çº¿æ€§ä»£æ•°</h2><p>çŸ©é˜µè¿ç®—ï¼šçŸ©é˜µç‚¹ç§¯ã€å‘é‡ç§¯ã€çŸ©é˜µä¹˜æ³•</p><blockquote><p>å‘é‡ç§¯éå‰ç§¯ï¼Œæ˜¯çŸ©é˜µä¸å‘é‡çš„ç§¯ã€‚ä¸‹ä¾‹å¯ä»¥çœ‹åš$A$çš„è¡Œå‘é‡å’Œå‘é‡çš„ç‚¹ç§¯ã€‚<br>$$<br>A =<br>\begin{pmatrix}<br>a_{11} &amp; \cdots &amp; a_{1m} \\<br>a_{21} &amp; \cdots &amp; a_{2m} \\<br>\vdots &amp; \ddots &amp; \vdots \\<br>a_{n1} &amp; \cdots &amp; a_{nm}<br>\end{pmatrix} ,<br>\overrightarrow x =<br>\begin{pmatrix}<br>x_1 \\<br>\vdots \\<br>x_m<br>\end{pmatrix}<br>\\<br>A\overrightarrow x =<br>\begin{pmatrix}<br>a_{11}x_1 + \cdots + a_{1m}x_m \\<br>\vdots \\<br>a_{n1}x_1 + \cdots + a_{nm}x_m<br>\end{pmatrix}<br>$$</p></blockquote><p>èŒƒæ•°ï¼š</p><p>$L_1$èŒƒæ•°æ˜¯å‘é‡ç»å¯¹å€¼ä¹‹å’Œã€‚<br>$$<br>|\mathbf{x}|_1 = \sum_{i=1}^n \left|x_i \right|.<br>$$<br>$L_2$èŒƒæ•°æ˜¯å‘é‡å…ƒç´ æ ¹çš„å¹³æ–¹å’Œã€‚<br>$$<br>|\mathbf{x}|_2 = \sqrt{\sum_{i=1}^n x_i^2},<br>$$<br>$L_p$èŒƒæ•°æ˜¯æ›´ä¸€èˆ¬çš„èŒƒæ•°ï¼Œå…¬å¼å¦‚ä¸‹ï¼š<br>$$<br>|\mathbf{x}|_p = \left(\sum_{i=1}^n \left|x_i \right|^p \right)^{1/p}.<br>$$</p><h2 id="2-3-å¾®ç§¯åˆ†"><a href="#2-3-å¾®ç§¯åˆ†" class="headerlink" title="2.3 å¾®ç§¯åˆ†"></a>2.3 å¾®ç§¯åˆ†</h2><h1 id="3-çº¿æ€§ç¥ç»ç½‘ç»œ"><a href="#3-çº¿æ€§ç¥ç»ç½‘ç»œ" class="headerlink" title="3 çº¿æ€§ç¥ç»ç½‘ç»œ"></a>3 çº¿æ€§ç¥ç»ç½‘ç»œ</h1><h2 id="3-1-çº¿æ€§å›å½’"><a href="#3-1-çº¿æ€§å›å½’" class="headerlink" title="3.1 çº¿æ€§å›å½’"></a>3.1 çº¿æ€§å›å½’</h2><h2 id="3-2-Softmaxå›å½’"><a href="#3-2-Softmaxå›å½’" class="headerlink" title="3.2 Softmaxå›å½’"></a>3.2 Softmaxå›å½’</h2><p>è¾“å‡ºçš„åŒ¹é…æ¦‚ç‡ï¼ˆéè´Ÿï¼Œå’Œä¸º1ï¼‰<br>$$<br>\hat{\mathbf{y}} = \mathrm{softmax}(\mathbf{o})\quad \text{å…¶ä¸­}\quad \hat{y}_j = \frac{\exp(o_j)}{\sum_k \exp(o_k)}<br>$$<br>æˆ‘ä»¬é€‰æ‹©æœ€ä¼˜å¯èƒ½çš„ç±»åˆ«<br>$$<br>\mathop {argmax}_j \hat y_j = \mathop {argmax}_j o_j.<br>$$<br>æŸå¤±å‡½æ•°ï¼Œä¸‹å¼é€šå¸¸ç§°ä¸º<strong>äº¤å‰ç†µæŸå¤±</strong>ã€‚ï¼ˆçœŸå®æ¦‚ç‡ä¸­åªæœ‰ä¸€ä¸ª$y_i$ä¸º1ï¼Œå…¶ä½™å…¨éƒ¨ä¸º0ï¼‰<br>$$<br>l(\mathbf{y}, \hat{\mathbf{y}}) = - \sum_{j=1}^q y_j \log \hat{y}_j.<br>$$</p><blockquote><p>äº¤å‰ç†µé€šå¸¸æ¥è¡¡é‡ä¸¤ä¸ªæ¦‚ç‡çš„åŒºåˆ«ï¼š<br>$$<br>H(p, q) = \sum \limits_i - p_i log(q_i)<br>$$</p></blockquote><p>æŸå¤±å‡½æ•°çš„å¯¼æ•°<br>$$<br>\partial_{o_j} l(\mathbf{y}, \hat{\mathbf{y}}) = \frac{\exp(o_j)}{\sum_{k=1}^q \exp(o_k)} - y_j = \mathrm{softmax}(\mathbf{o})_j - y_j.<br>$$</p><h2 id="3-3-æŸå¤±å‡½æ•°"><a href="#3-3-æŸå¤±å‡½æ•°" class="headerlink" title="3.3 æŸå¤±å‡½æ•°"></a>3.3 æŸå¤±å‡½æ•°</h2><ul><li>å‡æ–¹æŸå¤±ï¼ˆL2 Lossï¼‰</li></ul><p>$$<br>l(y, y{â€˜}) =\frac{1}{2}(y - y{â€˜})^2<br>$$</p><ul><li>ç»å¯¹å€¼æŸå¤±ï¼ˆL1 Lossï¼‰</li></ul><p>$$<br>l(y,y{â€˜}) = |y - y{â€˜}|<br>$$</p><ul><li>Huberâ€™s Robust Loss é²æ£’æŸå¤±</li></ul><p>$$<br>l(y, y{â€˜}) =<br>\begin{cases}<br>|y - y{â€˜}| &amp; if |y - y{â€˜}| \gt 1 \\<br>\frac{1}{2}(y - y{â€˜})^2 &amp; otherwise<br>\end{cases}<br>$$</p><h1 id="4-å¤šå±‚æ„ŸçŸ¥æœº"><a href="#4-å¤šå±‚æ„ŸçŸ¥æœº" class="headerlink" title="4 å¤šå±‚æ„ŸçŸ¥æœº"></a>4 å¤šå±‚æ„ŸçŸ¥æœº</h1><h2 id="4-1-å¤šå±‚æ„ŸçŸ¥æœº"><a href="#4-1-å¤šå±‚æ„ŸçŸ¥æœº" class="headerlink" title="4.1 å¤šå±‚æ„ŸçŸ¥æœº"></a>4.1 å¤šå±‚æ„ŸçŸ¥æœº</h2><p>å•å±‚æ„ŸçŸ¥æœºï¼š</p><ul><li>å›å½’è¾“å‡ºå®æ•°</li><li>è§£å†³äºŒåˆ†ç±»é—®é¢˜</li></ul><p>å•å±‚æ„ŸçŸ¥æœºå‡½æ•°ï¼Œ$\sigma$æ˜¯æ¿€æ´»å‡½æ•°<br>$$<br>o = \sigma (\langle \mathbf{w} , \mathbf{x} \rangle + b )<br>$$<br>å¤šå±‚æ„ŸçŸ¥æœºï¼š</p><ul><li><p>æ¿€æ´»å‡½æ•°éœ€è¦æ˜¯éçº¿æ€§ï¼šå¦‚æœä¸ºçº¿æ€§çš„è¯ï¼Œè¾“å‡ºå°±ä»ç„¶æ˜¯çº¿æ€§çš„ï¼Œç­‰ä»·äºå•å±‚æ„ŸçŸ¥æœº</p></li><li><p>ä½¿ç”¨éšè—å±‚å’Œæ¿€æ´»å‡½æ•°æ¥å¾—åˆ°éçº¿æ€§æ¨¡å‹</p></li><li><p>ä½¿ç”¨Softmaxæ¥å¤„ç†å¤šåˆ†ç±»</p></li><li><p>è¶…å‚æ•°ä¸ºéšè—å±‚æ•°å’Œå„ä¸ªéšè—å±‚å¤§å°</p></li></ul><p>å•éšè—å±‚ï¼š<br>$$<br>\mathbf{h} = \mathbf{W_1X+b_1} \\<br>o = \mathbf{w_2^T h } + b_2<br>$$</p><p>æ¿€æ´»å‡½æ•°ï¼š</p><ul><li>sigmoidå‡½æ•°ï¼Œå°†è¾“å‡ºæŠ•å½±åˆ°$(0, 1)$</li></ul><p>$$<br>sigmoid(x) = \frac{1}{1 + e ^{-x}}<br>$$</p><ul><li>Tanhå‡½æ•°ï¼Œå°†è¾“å‡ºæŠ•å½±åˆ°$(-1, 1)$</li></ul><p>$$<br>tanh(x) = \frac{1 - e^{-2x}}{1 + e ^ {-2x}}<br>$$</p><ul><li>ReLUæ¿€æ´»å‡½æ•°</li></ul><p>$$<br>ReLU(x) = max(x, 0)<br>$$</p><h2 id="4-2-æ¨¡å‹é€‰æ‹©"><a href="#4-2-æ¨¡å‹é€‰æ‹©" class="headerlink" title="4.2 æ¨¡å‹é€‰æ‹©"></a>4.2 æ¨¡å‹é€‰æ‹©</h2><p>è®­ç»ƒè¯¯å·®ï¼šæ¨¡å‹åœ¨è®­ç»ƒæ•°æ®é›†ä¸Šå¾—åˆ°çš„è¯¯å·®</p><p>æ³›åŒ–è¯¯å·®ï¼šæ¨¡å‹åœ¨æ–°æ•°æ®é›†ä¸Šå¾—åˆ°çš„è¯¯å·®</p>]]></content>
      
      
      <categories>
          
          <category> äººå·¥æ™ºèƒ½ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ æ€»ç»“ </tag>
            
            <tag> DeepLearning </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022å¹´åº¦æ€»ç»“</title>
      <link href="/p/1646942053.html"/>
      <url>/p/1646942053.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¸Œæœ›2023å¥åº·ï¼Œå‘è®ºæ–‡ï¼Œæ¯”èµ›æ‹¿ç‰Œï¼ŒæˆåŠŸä¸Šå²¸ã€‚</p></blockquote><p>ä»Šå¤©æ˜¯2023å¹´1æœˆ1æ—¥ï¼Œ2022æœ‰è®¸å¤šä¸é¡ºå¿ƒçš„äº‹ï¼Œä¹Ÿæœ‰ä¸€äº›å€¼å¾—è®°å¿†çš„äº‹ï¼Œå¸Œæœ›é€šè¿‡ä¸‹é¢çš„ç‰‡æ®µæ¥å›é¡¾è¿™å¹´ä¸æ˜“çš„æ—¶å…‰ã€‚</p><blockquote><p>èƒ½è¯´çš„å°½é‡è¯´ï¼Œä¸èƒ½è¯´çš„ä½ æˆ‘å¿ƒé¢†ç¥ä¼šã€‚æˆ‘å‘ç°æ—¶é—´è®©æˆ‘è¶Šæ¥è¶Šä¸æƒ³è¯´ä»€ä¹ˆä¸œè¥¿äº†ï¼Œæƒ³è¯´çš„åŸºæœ¬éƒ½ä¸èƒ½è¯´ï¼Œç°å®é™ˆè¿°åŸºæœ¬æ˜¯å®Œå…¨ç¦æ­¢çš„ï¼Œå½“ä¸‹çš„ç¯å¢ƒå°±è®©äººå®¹æ˜“çª’æ¯ã€‚</p></blockquote><p>æˆ‘æƒ³è¿˜æ˜¯å¤šè®°å½•ä¸€ä¸‹2022å¹´çš„ç”Ÿæ´»çŠ¶æ€å§ã€‚</p><p>è½¬çœ¼ä¸€çœ‹ï¼Œè¿‡çš„å¥½å¿«å•Šï¼Œè½¬çœ¼é—´å°±å¤§ä¸‰äº†ï¼Œå¤§å­¦ä¸çŸ¥ä¸è§‰åœ¨æ ¡å†…å’Œå®¶é‡Œè¿‡äº†ä¸‰å¹´ä¹‹ä¹…ã€‚</p><h1 id="å­¦æœŸç‰‡åˆ»"><a href="#å­¦æœŸç‰‡åˆ»" class="headerlink" title="å­¦æœŸç‰‡åˆ»"></a>å­¦æœŸç‰‡åˆ»</h1><h2 id="å¤§äºŒä¸‹"><a href="#å¤§äºŒä¸‹" class="headerlink" title="å¤§äºŒä¸‹"></a>å¤§äºŒä¸‹</h2><p>å¤§äºŒä¸Šçš„è€ƒè¯•ä¾ç„¶æ˜¯æå‰çš„ï¼Œæ²¡æœ‰å¤ä¹ å‘¨ï¼Œä¸‰å¹´äº†ï¼Œè€ƒè¯•è¦ä¹ˆæ˜¯æå‰è€ƒè¯•ï¼Œè¦ä¹ˆæ˜¯åœ¨å®¶çº¿ä¸Šè€ƒè¯•ã€‚</p><p>å¤§äºŒä¸‹æ˜¯æˆ‘è®¡åä¼šé•¿çš„æœ€ååŠå¹´ï¼Œå¼€å­¦æ˜¯ç¬¬ä¸€æ¬¡æ­£å¸¸å¼€å­¦ï¼Œå‰é¢ç–«æƒ…å½¢åŠ¿å¤§å¥½ï¼Œæ´»åŠ¨é¥é¥åœ¨æœ›ã€‚å¯æ˜¯è¿‘é‚»æ´»åŠ¨ä¸¾åŠä¹‹æ—¶ï¼ˆä¹Ÿæ‰è¿‡äº†ä¸€ä¸¤å‘¨ï¼‰ï¼Œç–«æƒ…å½¢åŠ¿æ€¥è½¬ç›´ä¸‹ï¼Œæ•´ä¸ªå­¦æ ¡åˆæ˜¯ä¸€ç‰‡å°æ§ä¹‹æ€ã€‚</p><p>å“ï¼Œæ•´ä¸ªä¼šé•¿çš„ä»»æœŸé—´å®Œå…¨åºŸæ‰äº†ï¼š</p><ul><li>é™¢èµ›æ²¡æ³•åŠï¼Œå­¦æ ¡ä¸è®©åŠï¼ˆç–«æƒ…å½±å“ï¼‰</li><li>æ´»åŠ¨å…¨çº¿ä¸Š</li><li>æ´»åŠ¨å°‘ä¹‹åˆå°‘ï¼Œçº¿ä¸Šæ ¹æœ¬éš¾ä»¥åŠèµ·æœ‰æ•ˆæ´»åŠ¨</li></ul><p>è¿™å­¦æœŸåº”è¯¥å°±å‚åŠ äº†ä¸ªè“æ¡¥æ¯ï¼Œå®éªŒå®¤é‡Œå‚åŠ çš„ï¼Œé¢˜å‘¢éš¾æ­»äº†ï¼Œå¯æœ€ç»ˆçœä¸€è¿˜æ˜¯æ²¡æƒ³åˆ°çš„ï¼Œä½†æ˜¯å›½èµ›åœ¨è€ƒè¯•æœŸé—´æ¯”å°±å¾ˆæ‹‰è·¨äº†ï¼Œé‚£æ—¶å€™ä»£ç æ²¡æ•²åŸºæœ¬ä¸€ä¸ªæœˆäº†ï¼ŒåŠ ä¹‹è‡ªèº«å®åŠ›å¤ªèœï¼Œæ ¹æœ¬éš¾ä»¥åº”å¯¹ï¼Œæ•…ä»¥å›½ä¼˜è½å¹•ã€‚</p><p>XCPCçœèµ›ä¹Ÿæ²¡äº†ï¼ŒCCPCåœ¨å­¦æœŸååŠæ®µæ—¶é—´ä¸€æ”¹å†æ”¹ï¼Œå› ä¸ºæ•™è‚²å…é€šçŸ¥6æœˆåˆä¹‹å‰å…¨éƒ¨ç¦»æ ¡ï¼Œä¼ çš„å¾ˆå¹¿äº†ã€‚æ ¡å†…ç”šè‡³è¿˜å‡ºç°äº†å‡ æ¬¡é›†ä½“æ€§èšé›†äº‹ä»¶ï¼ˆæˆ‘æ²¡æœ‰å‚åŠ ï¼Œåªæ˜¯å¬è¯´ï¼‰ï¼Œå›å®¶çš„è¿™ä»¶äº‹é‚£ä¹ˆå°±ç†æ‰€å½“ç„¶çš„ç¡®å®šäº†ã€‚</p><p>å…³äºæœŸæœ«è€ƒè¯•å‘¢ï¼Œå­¦ç”Ÿé—¹ä¹‹åˆé—¹ï¼Œè€ƒè¯•å£å¤´é€šçŸ¥æ”¹ä¹‹åˆæ”¹ï¼Œæœ€åå®šäºå›å®¶ä¹‹åå»¶æœŸæ•°åå¤©çº¿ä¸Šè¿›è¡Œï¼Œæ‰€å¹¸æœ¬æ¬¡è€ƒè¯•æˆ‘æ²¡æœ‰è¿‡äºæ‹‰è·¨ã€‚</p><h2 id="å¤§ä¸‰ä¸Š"><a href="#å¤§ä¸‰ä¸Š" class="headerlink" title="å¤§ä¸‰ä¸Š"></a>å¤§ä¸‰ä¸Š</h2><p>åˆä¸€æ¬¡æ¨è¿Ÿå¼€å­¦ï¼Œ21å’Œ22å±Šå†›è®­éƒ½æ²¡æœ‰è¿›è¡Œï¼ŒçœŸæœ‰ä½ çš„ï¼</p><p>è¾›äºCCPCçœèµ›åœ¨å‰æœŸæŠ“ç´§åŠäº†ï¼Œæ‰€å¹¸æ‹¿é‡‘ã€‚</p><p>å¥½å•¦ï¼Œè¿™å›å‰é¢åŸºæœ¬ä¸Šäº†5å‘¨ä»¥å†…çš„çº¿ä¸‹è¯¾å‘€ï¼Œåé¢å°±å®Œå…¨å°æ§äº†ï¼Œå°åœ¨å¯å®¤é‡Œé¢çš„ã€‚</p><p>çº¿ä¸Šï¼Œå°å¯ï¼Œåšæ ¸é…¸ç­‰ç­‰ï¼Œé‚£ä¹ˆä¸Šè¯¾å‘¢è‚¯å®šä¸ä¼šå¥½å¥½ä¸Šçš„ï¼ŒåŸºæœ¬æ˜¯æ— å¬çŠ¶æ€ï¼Œå› ä¸ºå¤§äºŒä¸‹å‡æœŸåæœŸå…¥äº†åŸç¥ï¼Œå°å¯å®¤æ˜¯æœ‰äº‹å¯åšçš„ï¼Œè¦ä¹ˆç©ï¼Œè¦ä¹ˆåˆ·bç«™ï¼Œå‰æœŸåˆ·é¢˜è¿˜åšæŒäº†ä¸€æ®µï¼Œåé¢å°±å¾ˆéš¾è¿›è¡Œä¸‹å»äº†ã€‚æœŸé—´æ—¶ä¸æ—¶æä¸€äº›é›¶ç¢çš„æŠ€æœ¯æ´»ï¼ˆç»´æŠ¤QQæœºå™¨äººã€ç»´æŠ¤åšå®¢ç½‘ç«™ã€ç»´æŠ¤vjç­‰ï¼‰ã€‚</p><p>é‚£ä¹ˆXCPCåŒºåŸŸèµ›éƒ½æ˜¯æ²¡æ³•æ‰“çš„ï¼Œåªèƒ½å•æŒ‘äº†ï¼ŒåŸºæœ¬æ•´ä¸ªå­¦æ ¡çš„æ¯”èµ›éƒ½æ˜¯æ‹‰è·¨çš„ã€‚</p><p>æ¯«æ— ç–‘é—®ï¼Œè¿™æ¬¡åˆæ˜¯æå‰æ”¾å‡å›å®¶äº†ï¼Œå­¦æ ¡é£è¿”ï¼Œç–«æƒ…å½¢åŠ¿å¾ˆéš¾æ§åˆ¶ä½äº†ï¼ˆè¿˜æœªæ”¾å¼€ï¼Œå„åœ°ç’å†µçš†æœ‰ï¼‰ï¼Œè€ƒè¯•å‘¢ä»çº¿ä¸Šæå‰è€ƒè¯•åˆæ”¹ä¸ºäº†ä¸‹å­¦æœŸçº¿ä¸‹è€ƒè¯•ï¼ˆè¿™æ—¶å€™åŸºæœ¬å°±æ˜¯å¤§æ”¾å¼€é˜¶æ®µäº†ï¼‰ã€‚</p><p>è¿™ä¸ªæ—¶æœŸçš„ç¤¾ä¼šäº‹ä»¶çœŸçš„æ˜¯å¤šä¹‹åˆå¤šï¼Œfskï¼Œzzï¼Œxjï¼Œbzè¿åŠ¨ç­‰ç­‰ï¼ŒæƒŠå¹ä¹‹åä¾¿ä¿æŒæ²‰é»˜ã€‚</p><h1 id="ä¸“é¡¹è¡ŒåŠ¨"><a href="#ä¸“é¡¹è¡ŒåŠ¨" class="headerlink" title="ä¸“é¡¹è¡ŒåŠ¨"></a>ä¸“é¡¹è¡ŒåŠ¨</h1><h2 id="æ¯”èµ›"><a href="#æ¯”èµ›" class="headerlink" title="æ¯”èµ›"></a>æ¯”èµ›</h2><p>ä»Šå¹´çš„æ¯”èµ›å®Œå…¨æ˜¯æ‹‰è·¨çš„ï¼Œå¤§ä¸‰ä¸Šå¤šå¥½çš„æ¯”èµ›æœºä¼šï¼Œéƒ½è¢«ç–«æƒ…å¸¦èµ°äº†ã€‚</p><p>æ‰€å¹¸è¿˜ç•™æœ‰ä¸€ä¸å¸Œæœ›ï¼š</p><p>CCPCçœèµ›æ‹¿é‡‘ï¼ŒCCPCå¹¿å·ç«™æ‹¿é“¶ï¼ˆzsy tqlï¼‰</p><h2 id="æŠ€æœ¯"><a href="#æŠ€æœ¯" class="headerlink" title="æŠ€æœ¯"></a>æŠ€æœ¯</h2><p>ä»Šå¹´QQæœºå™¨äººç»§ç»­å®Œå–„ï¼Œç°åœ¨åŸºæœ¬ä¸æ€ä¹ˆå…³æ³¨äº†ï¼Œåç»­åº”è¯¥è¿˜ä¼šå†æ¬¡å¯åŠ¨ï¼Œå‡†å¤‡è½¯è‘—ã€‚</p><p>æ–°å»ºvjå¹³å°ï¼Œè™½ç„¶æ˜¯copyçš„ï¼Œå› ä¸ºè‡ªèº«æ°´å¹³å—é™ï¼Œè¿˜æ˜¯åºŸäº†ä¸€ç•ªåŠŸå¤«ã€‚</p><p>æ‹¿ä¸‹æ–°åŸŸåï¼Œæ–°å»ºåšå®¢ç½‘ç«™ï¼Œç›®å‰å·²ç»è¿è¡ŒåŠå¹´ä¹‹ä¹…ã€‚</p><p>djangoå’Œappå¼€å‘éƒ½æœ‰æ‰€äº†è§£ï¼Œgithubåˆæ­¥ä½¿ç”¨</p><p>ä¹°äº†ä»£ç†ï¼Œä¸å†å—é™äºé‚£å µå¢™ã€‚</p><p>ç»™å‡º3å¼ å›¾çºªå¿µä¸€ä¸‹ï¼š</p><p><img src="1646942053/image-20230101121342445.png" alt="CF"></p><p><img src="1646942053/image-20230101121415331.png" alt="Github"></p><p><img src="1646942053/image-20230101121441216.png" alt="æœ¬ç«™åšå®¢"></p><h2 id="æ€æƒ³"><a href="#æ€æƒ³" class="headerlink" title="æ€æƒ³"></a>æ€æƒ³</h2><p>æˆ‘å‘ç°ï¼Œæˆ‘å¿ƒæ€ä¸å†æ˜¯åƒä¹‹å‰é‚£æ ·ä¹è§‚äº†ï¼Œç°åœ¨ä¼¼ä¹æ˜¯<code>é¢å¯¹å¯èƒ½å‘ç”Ÿä¹‹äº‹ä¿æŒè°¨æ…ï¼Œé¢å¯¹æœªçŸ¥ä¹‹äº‹ä¿æŒå…³æ³¨</code>è¿™æ ·çš„æ€åº¦äº†ï¼Œæˆ‘å¯¹è®¸å¤šä¸œè¥¿å·²ä¸æŠ¥å¸Œæœ›ï¼Œè¿™æ ·çš„ç¯å¢ƒåªèƒ½è¯´å°½é‡å­˜æ´»ä¸‹å»å§ã€‚</p><p>è¶Šæ¥è¶Šå¯¡è¨€å°‘è¯­ï¼Œè¶Šæ¥è¶Šè‰°éš¾ã€‚2023å¸Œæœ›å¥½è¿‡äº›å§ï¼Œæ¯•ç«Ÿæ”¾å¼€äº†ï¼Œæ¯”èµ›èƒ½çº¿ä¸‹äº†ï¼Œå¤§å­¦ç”Ÿæ´»æˆ–è®¸ä¼šæ”¹å˜ï¼Œä½†æ˜¯ä¹‹å‰çš„æ—¶é—´æµªè´¹æ˜¯å¼„ä¸å›æ¥äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å“²æ€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é˜¶æ®µæ€§æ€»ç»“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ å¸¸è§ç®—æ³•æ€»ç»“</title>
      <link href="/p/808139430.html"/>
      <url>/p/808139430.html</url>
      
        <content type="html"><![CDATA[<h1 id="æœºå™¨å­¦ä¹ ç¯å¢ƒæ­å»º"><a href="#æœºå™¨å­¦ä¹ ç¯å¢ƒæ­å»º" class="headerlink" title="æœºå™¨å­¦ä¹ ç¯å¢ƒæ­å»º"></a>æœºå™¨å­¦ä¹ ç¯å¢ƒæ­å»º</h1><ul><li><p>ä¸€èˆ¬ä½¿ç”¨anacondaæ­å»ºpythonè™šæ‹Ÿç¯å¢ƒï¼ˆminicondaå çš„ç©ºé—´åº”è¯¥å°ä¸€ç‚¹ï¼Œè¿™ä¸ªä¹Ÿå¯ä»¥ï¼‰</p></li><li><p>ä½¿ç”¨å·¥å…·åº“ä¸€èˆ¬æœ‰ç§‘å­¦è®¡ç®—åº“numpyï¼Œæ•°æ®å¤„ç†åº“pandasï¼Œç»˜å›¾matplotlibç­‰ï¼Œéœ€è¦äº†è§£ç›¸å…³ç”¨æ³•</p></li><li><p>â€¦â€¦</p></li></ul><h1 id="çº¿æ€§å›å½’-Linear-Regression"><a href="#çº¿æ€§å›å½’-Linear-Regression" class="headerlink" title="çº¿æ€§å›å½’ Linear Regression"></a>çº¿æ€§å›å½’ Linear Regression</h1><h2 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1 æ¦‚è¿°"></a>1 æ¦‚è¿°</h2><p>çº¿æ€§å›å½’ç±»ä¼¼é«˜ä¸­çš„<strong>çº¿æ€§è§„åˆ’</strong>é¢˜ç›®ã€‚çº¿æ€§å›å½’è¦åšçš„æ˜¯å°±æ˜¯æ‰¾åˆ°ä¸€ä¸ªæ•°å­¦å…¬å¼èƒ½ç›¸å¯¹è¾ƒå®Œç¾åœ°æŠŠæ‰€æœ‰è‡ªå˜é‡ç»„åˆï¼ˆåŠ å‡ä¹˜é™¤ï¼‰èµ·æ¥ï¼Œå¾—åˆ°çš„ç»“æœå’Œç›®æ ‡æ¥è¿‘ã€‚</p><p>çº¿æ€§å›å½’åˆ†ä¸ºä¸€å…ƒçº¿æ€§å›å½’å’Œå¤šå…ƒçº¿æ€§å›å½’ã€‚</p><h2 id="2-ä¸€å…ƒçº¿æ€§å›å½’"><a href="#2-ä¸€å…ƒçº¿æ€§å›å½’" class="headerlink" title="2 ä¸€å…ƒçº¿æ€§å›å½’"></a>2 ä¸€å…ƒçº¿æ€§å›å½’</h2><h3 id="2-1-æ„é€ å›å½’æ–¹ç¨‹"><a href="#2-1-æ„é€ å›å½’æ–¹ç¨‹" class="headerlink" title="2.1 æ„é€ å›å½’æ–¹ç¨‹"></a>2.1 æ„é€ å›å½’æ–¹ç¨‹</h3><p>æœ‰nç»„æ•°æ®ï¼Œè‡ªå˜é‡ï¼ˆç‰¹å¾å€¼ï¼‰ $x(x_1,x_2,â€¦,x_n)$ ä¸å› å˜é‡ï¼ˆç›®æ ‡å€¼ï¼‰ $y(y_1,y_2,â€¦,y_n)$ ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ä¸ªçº¿æ€§å…³ç³»ï¼Œä½¿ä»–ä»¬ä¹‹é—´å°½å¯èƒ½æ»¡è¶³ï¼š $f(x) =ax+b$ ï¼Œè¿™ä¸ªå°±æ˜¯æ„å»ºçš„ä¸€å…ƒçº¿æ€§æ–¹ç¨‹ã€‚</p><p><img src="808139430/1.jpg" alt="ä¸€å…ƒçº¿æ€§å›å½’"></p><p>çº¿æ€§å›å½’çš„ç›®æ ‡å°±æ˜¯è®© $f(X)$ ä¸ $y$ ä¹‹é—´çš„å·®è·æœ€å°ï¼Œä¹Ÿå°±æ˜¯æƒé‡$a$å’Œåç½®$b$å–ä»€ä¹ˆå€¼çš„æ—¶å€™$f(X)$å’Œ$y$æœ€æ¥è¿‘ã€‚</p><h3 id="2-2-æ„é€ æŸå¤±å‡½æ•°"><a href="#2-2-æ„é€ æŸå¤±å‡½æ•°" class="headerlink" title="2.2 æ„é€ æŸå¤±å‡½æ•°"></a>2.2 æ„é€ æŸå¤±å‡½æ•°</h3><p>æŸå¤±å‡½æ•°æ˜¯æ¥åº¦é‡æ¨¡å‹é¢„æµ‹å€¼ä¸çœŸå®å€¼ä¸ä¸€æ ·çš„ç¨‹åº¦çš„ï¼Œæˆ–è€…è¯´åº¦é‡é¢„æµ‹é”™è¯¯çš„ç¨‹åº¦ï¼ŒæŸå¤±å‡½æ•°å€¼è¶Šå°ï¼Œæ¨¡å‹å°±è¶Šå¥½ã€‚</p><p>åœ¨å›å½’é—®é¢˜ä¸­ï¼Œè¯¯å·®å¹³æ–¹å’Œæ˜¯å›å½’ä»»åŠ¡ä¸­æœ€å¸¸ç”¨çš„æ€§èƒ½åº¦é‡ã€‚è¿™é‡Œå°±å¯ä»¥ä»¤æŸå¤±å‡½æ•°$L(a,b)$ç­‰äºè¯¯å·®å¹³æ–¹å’Œï¼ˆå‡æ–¹è¯¯å·®ï¼‰ã€‚</p><p>åˆ™æŸå¤±å‡½æ•°ä¸º: $L(a, b) = \sum \limits_{i = 1}^{n}(f(x_i) - y_i)^2$</p><h3 id="2-3-ç¡®å®šå‚æ•°"><a href="#2-3-ç¡®å®šå‚æ•°" class="headerlink" title="2.3 ç¡®å®šå‚æ•°"></a>2.3 ç¡®å®šå‚æ•°</h3><p>æˆ‘ä»¬éœ€è¦é€šè¿‡æœ€å°çš„æŸå¤±å‡½æ•°å¾—åˆ°æœ€ä½³çš„å‚æ•° $a$ å’Œ $b$ ã€‚ä¸€èˆ¬ä½¿ç”¨<strong>æœ€å°äºŒä¹˜æ³•</strong>ã€‚<br>$$<br>a = \frac{\sum \limits_{i=1}^{n}x_iy_i - n \overline x \overline y}{\sum \limits_{i=1}^{n}x_i^2 - n \overline x ^ 2}<br>\\<br>b = \overline y - a \overline x<br>$$</p><h2 id="3-å¤šå…ƒçº¿æ€§å›å½’"><a href="#3-å¤šå…ƒçº¿æ€§å›å½’" class="headerlink" title="3 å¤šå…ƒçº¿æ€§å›å½’"></a>3 å¤šå…ƒçº¿æ€§å›å½’</h2><p>å¤šå…ƒçº¿æ€§å›å½’ç±»ä¼¼ä¸€å…ƒ</p><p>å›å½’æ–¹ç¨‹ï¼š $y = a_1 x_1 + a_2 x_2 + a_3 x_3 + â€¦ + a_n x_n + b$</p><p>å¯¹æ‰€æœ‰çš„æ•°æ®ç»Ÿä¸€ç”¨çŸ©é˜µå½¢å¼è¡¨ç¤ºï¼š<br>$$<br>y^{(i)} = \theta ^ T x ^ {(i)} + \varepsilon^{(i)} \ (1)<br>$$</p><blockquote><p>$y^{(i)}$è¡¨ç¤ºç¬¬<code>i</code>ä¸ªæ ·æœ¬çš„çœŸå®å€¼</p><p>$\varepsilon$ è¯¯å·®ä»£è¡¨çœŸå®å€¼å’Œé¢„æµ‹å€¼ä¹‹é—´çš„å·®å¼‚</p><p>è¯¯å·® $\varepsilon ^{(i)}$ æ˜¯ç‹¬ç«‹å¹¶å…·æœ‰ç›¸åŒçš„åˆ†å¸ƒï¼Œæœä»å‡å€¼ä¸º 0 æ–¹å·®ä¸º $\theta ^ 2$ çš„é«˜æ–¯åˆ†å¸ƒ</p></blockquote><p>æŸå¤±å‡½æ•°<br>$$<br>L(a_1, a_2, â€¦, a_n, b) = \sum_{i = 1}^{n}(f(x_i) - y_i)^2<br>$$</p><p>é«˜æ–¯åˆ†å¸ƒçš„æ¦‚ç‡å‡½æ•°ï¼š<br>$$<br>p(x) = \frac{1}{\sqrt {2 \pi} \sigma} \exp{(-\frac{x^2}{2 \sigma ^ 2})} \  (2)<br>$$<br>å°†<code>(1)</code>å¸¦å…¥<code>(2)</code>å¾—åˆ°<strong>é¢„æµ‹å€¼æˆä¸ºçœŸå®å€¼çš„æ¦‚ç‡</strong>å‡½æ•°ï¼š<br>$$<br>p(y ^ {(i)} | x ^ {(i)}; \theta) = \frac{1}{\sqrt {2 \pi} \sigma} \exp{(-\frac{(y^{(i)} - \theta ^ T x ^ {(i)})^2}{2 \sigma ^ 2})}<br>$$<br>ä¼¼ç„¶å‡½æ•°ï¼šï¼ˆä»€ä¹ˆæ ·çš„å‚æ•°è®¡ç®—å‡ºæ¥çš„è¯¯å·®æœ€å°ï¼Œå³ä¸å®é™…å€¼æœ€æ¥è¿‘ï¼‰<br>$$<br>L(\theta) = \prod \limits_{i = 1}^{m} p(y ^ {(i)} | x ^ {(i)}; \theta) = \prod \limits_{i=1}^{m}\frac{1}{\sqrt {2 \pi} \sigma} \exp{(-\frac{(y^{(i)} - \theta ^ T x ^ {(i)})^2}{2 \sigma ^ 2})}<br>$$<br>å¯¹æ•°ä¼¼ç„¶æ³•ï¼šï¼ˆå°†ä¹˜æ³•è½¬åŒ–ä¸ºåŠ æ³•ï¼‰ï¼Œä¹‹åéœ€è¦ç”¨æå¤§ä¼¼ç„¶ä¼°è®¡æ–¹æ³•æ±‚è§£<br>$$<br>ln L(\theta) = ln \prod \limits_{i=1}^{m}\frac{1}{\sqrt {2 \pi} \sigma} \exp{(-\frac{(y^{(i)} - \theta ^ T x ^ {(i)})^2}{2 \sigma ^ 2})}<br>$$<br>å±•å¼€åŒ–ç®€ï¼š<br>$$<br>ln L(\theta) = \sum \limits_{i = 1}^{m}ln \frac{1}{\sqrt {2 \pi} \sigma} \exp{(-\frac{(y^{(i)} - \theta ^ T x ^ {(i)})^2}{2 \sigma ^ 2})}<br>\\<br>= mln \frac{1}{\sqrt {2 \pi} \sigma} - \frac{1}{\sigma^2} \frac{1}{2} \sum \limits _{i = 1}^{m} (y^{(i)} - \theta ^ T x ^ {(i)})^2<br>$$</p><p>ç›®æ ‡ï¼šè®©ä¼¼ç„¶å‡½æ•°è¶Šå¤§è¶Šå¥½ï¼ˆæå¤§ä¼¼ç„¶ä¼°è®¡ï¼‰ï¼Œå³è®©$J(\theta)$è¶Šå°è¶Šå¥½ï¼ˆå¯ä»¥ä½¿ç”¨<strong>æœ€å°äºŒä¹˜æ³•</strong>æ±‚è§£ï¼‰<br>$$<br>J(\theta) = \frac{1}{2} \sum \limits _{i = 1}^{m} (y^{(i)} - \theta ^ T x ^ {(i)})^2<br>$$</p><blockquote><p>å…¶å®ç”±æŸå¤±å‡½æ•°ä¹Ÿå¯ä»¥å¾—åˆ°åŒæ ·çš„å¼å­ï¼š</p><p>å¯¹äº$y = \theta x + b$ï¼Œ$\theta$ å°† $b$ ä¹Ÿå¸å…¥è¿›å…¥å¾—åˆ° $\hat \theta = (\theta, b)$ ï¼Œ$X$ä»£è¡¨æ‰€æœ‰çš„æ ·æœ¬æ•°æ®ï¼Œæœ€åä¸€ä¸ªå…ƒç´ ç½®1ï¼Œæœ€åè¦å’Œ $\hat\theta$ ç›¸ä¹˜ï¼Œæœ€åæ±‚åå¯¼ä¹Ÿæ˜¯ä¸€æ ·çš„ç»“æœã€‚<br>$$<br>L = \sum \limits_{i = 1}^n ( y_i - f(x_i)) ^ 2 = (y - X \hat\theta)^T(y - X \hat\theta) \\<br>X =<br>\begin{pmatrix}<br>x_{11} &amp; x_{12} &amp; \cdots &amp; x_{1d} &amp; 1 \\<br>x_{11} &amp; x_{12} &amp; \cdots &amp; x_{1d} &amp; 1 \\<br>\vdots &amp; \vdots &amp; \ddots &amp; \vdots &amp; \vdots \\<br>x_{m1} &amp; x_{m2} &amp; \cdots &amp; x_{md} &amp; 1<br>\end{pmatrix}<br>=<br>\begin{pmatrix}<br>x_1^T &amp; 1 \\<br>x_2^T &amp; 1 \\<br>\vdots &amp; \vdots \\<br>x_m^T &amp; 1<br>\end{pmatrix}<br>$$</p></blockquote><p><img src="808139430/image-20221227173603912.png" alt="æœ€å°äºŒä¹˜æ³•åˆ†æ"></p><blockquote><p>çŸ©é˜µæ±‚å¯¼å‚è€ƒï¼š</p><ul><li><a href="https://zhuanlan.zhihu.com/p/263777564" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/263777564</a> ï¼ˆå…ˆå¯¼ç¯‡ï¼‰</li><li><a href="https://zhuanlan.zhihu.com/p/273729929" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/273729929</a> ï¼ˆå…¬å¼ç¯‡ï¼‰</li></ul></blockquote><p><img src="808139430/image-20221227173755095.png" alt="è¯„ä¼°æ–¹æ³•"></p><h2 id="4-æ¢¯åº¦ä¸‹é™"><a href="#4-æ¢¯åº¦ä¸‹é™" class="headerlink" title="4 æ¢¯åº¦ä¸‹é™"></a>4 æ¢¯åº¦ä¸‹é™</h2><p>æ¢¯åº¦ä¸‹é™æ³•ï¼ˆgradient descentï¼‰æ˜¯ä¸€ç§å¸¸ç”¨çš„ä¸€é˜¶ï¼ˆfirst-orderï¼‰ä¼˜åŒ–æ–¹æ³•ã€‚ä¸»è¦è§£å†³æ±‚æœ€å°å€¼é—®é¢˜ï¼Œå…¶åŸºæœ¬æ€æƒ³åœ¨äºä¸æ–­åœ°é€¼è¿‘æœ€ä¼˜ç‚¹ï¼Œæ¯ä¸€æ­¥çš„ä¼˜åŒ–æ–¹å‘å°±æ˜¯æ¢¯åº¦çš„æ–¹å‘ã€‚</p><h3 id="4-1-æ¢¯åº¦ä¸‹é™æ–¹æ³•"><a href="#4-1-æ¢¯åº¦ä¸‹é™æ–¹æ³•" class="headerlink" title="4.1 æ¢¯åº¦ä¸‹é™æ–¹æ³•"></a>4.1 æ¢¯åº¦ä¸‹é™æ–¹æ³•</h3><ul><li>æ‰¹é‡æ¢¯åº¦ä¸‹é™</li></ul><p>å®¹æ˜“å¾—åˆ°æœ€ä¼˜è§£ï¼Œä½†æ˜¯ç”±äºæ¯æ¬¡è€ƒè™‘<strong>æ‰€æœ‰æ ·æœ¬</strong>ï¼Œé€Ÿåº¦å¾ˆæ…¢ã€‚</p><ul><li>éšæœºæ¢¯åº¦ä¸‹é™</li></ul><p>æ¯æ¬¡æ‰¾ä¸€ä¸ªæ ·æœ¬ï¼Œè¿­ä»£é€Ÿåº¦å¾ˆå¿«ï¼Œä½†ä¸ä¸€å®šæ¯æ¬¡éƒ½æœç€æ”¶æ•›çš„æ–¹å‘ã€‚</p><ul><li>å°æ‰¹é‡æ¢¯åº¦ä¸‹é™</li></ul><p>æ¯æ¬¡æ›´æ–°ä¸€å°éƒ¨åˆ†æ•°æ®æ¥ç®—ï¼Œå› ä¸ºåœ¨æ•´ä¸ªè®­ç»ƒé›†ä¸Šç®—æ¢¯åº¦èµ„æºæ¶ˆè€—å¤ªå¤§ï¼Œæˆ‘ä»¬å¯ä»¥éšæœºé‡‡å–$b$ä¸ªæ ·æœ¬$i_1, i_2, \cdots, i_b$æ¥è¿‘ä¼¼æŸå¤±ï¼Œ$e$æ˜¯æŸå¤±å‡½æ•°ï¼Œ$b$æ˜¯æ‰¹é‡å¤§å°ã€‚<br>$$<br>\frac{1}{b} \sum \limits_{i \in I_b} \mathcal{e}(\mathbf{x_i}, y_i, \mathbf{w})<br>$$</p><h3 id="4-2-å…¶ä»–å‚æ•°"><a href="#4-2-å…¶ä»–å‚æ•°" class="headerlink" title="4.2 å…¶ä»–å‚æ•°"></a>4.2 å…¶ä»–å‚æ•°</h3><ul><li>å­¦ä¹ ç‡ï¼šæ›´æ–°çš„æ­¥é•¿</li></ul><p><img src="808139430/image-20221228161134519.png" alt="å­¦ä¹ ç‡çš„å½±å“"></p><ul><li>æ‰¹å¤„ç†æ•°é‡</li></ul><p>ä¸€èˆ¬<code>batch_size</code>é€‰æ‹©32ï¼Œ64ï¼Œ128ç­‰ï¼Œæœ‰æ—¶å€™ä¼šè€ƒè™‘å†…å­˜å’Œæ•ˆç‡ã€‚</p><h1 id="é€»è¾‘å›å½’"><a href="#é€»è¾‘å›å½’" class="headerlink" title="é€»è¾‘å›å½’"></a>é€»è¾‘å›å½’</h1><p>é€»è¾‘å›å½’æ˜¯ä¸€ä¸ªç»å…¸çš„äºŒåˆ†ç±»ç®—æ³•ã€‚</p><h2 id="1-sigmoidå‡½æ•°"><a href="#1-sigmoidå‡½æ•°" class="headerlink" title="1 sigmoidå‡½æ•°"></a>1 sigmoidå‡½æ•°</h2><p>$$<br>g(z) = \frac{1}{1 + e ^ {-z}}, z \in R<br>$$</p><p><img src="808139430/image-20221228161724190.png" alt="sigmoidå‡½æ•°å›¾åƒ"></p><blockquote><p>å°†ä»»æ„çš„è¾“å…¥æ˜ å°„åˆ°äº†$[0, 1]$åŒºé—´ä¸­ï¼Œåœ¨çº¿æ€§å›å½’ä¸­å¯ä»¥å¾—åˆ°ä¸€ä¸ªé¢„æµ‹å€¼ï¼Œå†å°†è¯¥å€¼æ˜ å°„åˆ°sigmoidå‡½æ•°ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥å®Œæˆç”±å€¼åˆ°æ¦‚ç‡çš„è½¬æ¢ï¼Œè¿™å°±æ˜¯åˆ†ç±»ä»»åŠ¡ã€‚</p></blockquote><h2 id="2-é€»è¾‘å›å½’æ±‚è§£"><a href="#2-é€»è¾‘å›å½’æ±‚è§£" class="headerlink" title="2 é€»è¾‘å›å½’æ±‚è§£"></a>2 é€»è¾‘å›å½’æ±‚è§£</h2><p>é¢„æµ‹å‡½æ•°ï¼š<br>$$<br>h_{\theta}(x) = g(\theta ^ T x) = \frac{1}{1 + e ^ {-\theta^T x}} \\<br>å…¶ä¸­ \theta_0 + \theta_1 x_1 + â€¦ + \theta_n x_n = \sum \limits_{i = 1}^n \theta_i x_i = \theta ^ T x<br>$$<br>åˆ†ç±»ä»»åŠ¡ï¼š<br>$$<br>\begin{cases}<br>P(y = 1|x; \theta) = h_\theta(x) \\<br>P(y = 0|x; \theta) = 1 - h_\theta(x)<br>\end{cases}<br>\Rightarrow<br>P(y | x; \theta) = (h_\theta(x)) ^ y (1 - h_\theta(x)) ^ {1 - y}<br>$$<br>å¯¹äºäºŒåˆ†ç±»ä»»åŠ¡ï¼ˆ0ï¼Œ 1ï¼‰ï¼Œæ•´åˆåï¼Œ<code>y</code>å–0åªä¿ç•™$(1 - h_\theta(x)) ^ {1 - y}$ ï¼Œ<code>y</code>å–1åªä¿ç•™ $(h_\theta(x)) ^ y$ ã€‚</p><p>ä¼¼ç„¶å‡½æ•°ï¼š<br>$$<br>L(\theta) = \prod \limits_{i = 1}^m P(y_i | x_i; \theta) = \prod \limits_{i = 1}^m (h_\theta(x_i)) ^ y_i (1 - h_\theta(x_i)) ^ {1 - y_i}<br>$$<br>å¯¹æ•°ä¼¼ç„¶æ³•ï¼Œå³æ±‚$l(\theta)$ çš„æœ€å¤§å€¼ï¼š<br>$$<br>l(\theta) = logL(\theta) = \sum \limits_{i = 1} ^m (y_i log h_\theta(x_i) + (1 - y_i) log (1 - h_\theta(x_i)))<br>$$<br>å°†ä¸Šè¿°å‡½æ•°è½¬åŒ–ä¸ºæ±‚æœ€å°å€¼ï¼ŒåŒæ—¶ç³»æ•°ä¹˜ä¸Šä¸€ä¸ªå¸¸æ•°ï¼Œå³æ±‚$J(\theta) = -\frac{1}{m}l(\theta)$ çš„æœ€å°å€¼ï¼Œè½¬åŒ–ä¸ºæ¢¯åº¦ä¸‹é™é—®é¢˜ï¼š<br>$$<br>J(\theta) = -\frac{1}{m}l(\theta)<br>$$<br><img src="808139430/image-20221228164952743.png" alt="æ±‚å¯¼è¿‡ç¨‹"></p><p>ä¸Šè¿°è¿‡ç¨‹å³æ±‚å‡ºäº†åå¯¼çš„æ–¹å‘ï¼Œæœ‰äº†æ›´æ–°æ–¹å‘å°±å¯ä»¥è¿›è¡Œå‚æ•°æ›´æ–°ï¼š $\alpha$ä»£è¡¨å­¦ä¹ ç‡<br>$$<br>\theta_j = \theta_j - \alpha \frac{1}{m} \sum \limits_{i = 1} ^ m (h_\theta(x_i) - y_i)x_i^j<br>$$</p><blockquote><p>å‡æ³•æ˜¯ä»£è¡¨ç”¨çš„æ¢¯åº¦ä¸‹é™ï¼Œæ•´ä½“é™¤ä»¥<code>m</code>æ˜¯è€ƒè™‘äº†æ‰€æœ‰çš„mä¸ªæ ·æœ¬ã€‚</p></blockquote><p>å¤šåˆ†ç±»é—®é¢˜ï¼š</p><p><img src="808139430/image-20221228171310763.png" alt="å¤šåˆ†ç±»"></p><blockquote><p>Softmaxå›å½’æ˜¯é€»è¾‘å›å½’çš„ä¸€èˆ¬åŒ–ï¼Œç›¸å…³å¯¹æ¯”å‚è€ƒ <a href="https://zhuanlan.zhihu.com/p/98061179" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/98061179</a></p></blockquote><h1 id="æ¨¡å‹è¯„ä¼°æ ‡å‡†"><a href="#æ¨¡å‹è¯„ä¼°æ ‡å‡†" class="headerlink" title="æ¨¡å‹è¯„ä¼°æ ‡å‡†"></a>æ¨¡å‹è¯„ä¼°æ ‡å‡†</h1><h2 id="1-å›å½’æ¨¡å‹è¯„ä¼°"><a href="#1-å›å½’æ¨¡å‹è¯„ä¼°" class="headerlink" title="1 å›å½’æ¨¡å‹è¯„ä¼°"></a>1 å›å½’æ¨¡å‹è¯„ä¼°</h2><h3 id="1-1-å¹³å‡ç»å¯¹è¯¯å·®ï¼ˆMean-Absolute-Errorï¼ŒMAEï¼‰"><a href="#1-1-å¹³å‡ç»å¯¹è¯¯å·®ï¼ˆMean-Absolute-Errorï¼ŒMAEï¼‰" class="headerlink" title="1.1 å¹³å‡ç»å¯¹è¯¯å·®ï¼ˆMean Absolute Errorï¼ŒMAEï¼‰"></a>1.1 å¹³å‡ç»å¯¹è¯¯å·®ï¼ˆMean Absolute Errorï¼ŒMAEï¼‰</h3><p>å¹³å‡ç»å¯¹è¯¯å·®å°±æ˜¯æŒ‡é¢„æµ‹å€¼ä¸çœŸå®å€¼ä¹‹é—´å¹³å‡ç›¸å·®å¤šå¤§<br>$$<br>MAE = \frac{1}{m}\sum \limits _{i = 1}^m \lvert f_i - y_i \rvert<br>$$</p><h3 id="1-2-å‡æ–¹è¯¯å·®ï¼ˆMean-Squared-Errorï¼ŒMSEï¼‰"><a href="#1-2-å‡æ–¹è¯¯å·®ï¼ˆMean-Squared-Errorï¼ŒMSEï¼‰" class="headerlink" title="1.2 å‡æ–¹è¯¯å·®ï¼ˆMean Squared Errorï¼ŒMSEï¼‰"></a>1.2 å‡æ–¹è¯¯å·®ï¼ˆMean Squared Errorï¼ŒMSEï¼‰</h3><p>è§‚æµ‹å€¼ä¸çœŸå€¼åå·®çš„å¹³æ–¹å’Œä¸è§‚æµ‹æ¬¡æ•°çš„æ¯”å€¼<br>$$<br>MSE = \frac{1}{m} \sum \limits_{i = 1}^m(f_i - y_i)^2<br>$$<br>è¿™ä¹Ÿæ˜¯çº¿æ€§å›å½’ä¸­æœ€å¸¸ç”¨çš„æŸå¤±å‡½æ•°ï¼Œçº¿æ€§å›å½’è¿‡ç¨‹ä¸­å°½é‡è®©è¯¥æŸå¤±å‡½æ•°æœ€å°ã€‚é‚£ä¹ˆæ¨¡å‹ä¹‹é—´çš„å¯¹æ¯”ä¹Ÿå¯ä»¥ç”¨å®ƒæ¥æ¯”è¾ƒã€‚</p><p>MSEå¯ä»¥è¯„ä»·æ•°æ®çš„å˜åŒ–ç¨‹åº¦ï¼ŒMSEçš„å€¼è¶Šå°ï¼Œè¯´æ˜é¢„æµ‹æ¨¡å‹æè¿°å®éªŒæ•°æ®å…·æœ‰æ›´å¥½çš„ç²¾ç¡®åº¦ã€‚</p><h3 id="1-3-R-squareï¼ˆå†³å®šç³»æ•°ï¼‰"><a href="#1-3-R-squareï¼ˆå†³å®šç³»æ•°ï¼‰" class="headerlink" title="1.3 R-squareï¼ˆå†³å®šç³»æ•°ï¼‰"></a>1.3 R-squareï¼ˆå†³å®šç³»æ•°ï¼‰</h3><p>$$<br>R^2 = 1 - \frac{\sum(Y_{actual} - Y_{predict})^2}{\sum(Y_{actual} - Y_{mean})^2}<br>$$</p><h3 id="1-4-Adjusted-R-Squareï¼ˆæ ¡æ­£å†³å®šç³»æ•°ï¼‰"><a href="#1-4-Adjusted-R-Squareï¼ˆæ ¡æ­£å†³å®šç³»æ•°ï¼‰" class="headerlink" title="1.4 Adjusted R-Squareï¼ˆæ ¡æ­£å†³å®šç³»æ•°ï¼‰"></a>1.4 Adjusted R-Squareï¼ˆæ ¡æ­£å†³å®šç³»æ•°ï¼‰</h3><p>$$<br>R^2_{adjusted} = 1 - \frac{(1 - R^2)(n - 1)}{n - p - 1}<br>$$</p><p>nä¸ºæ ·æœ¬æ•°é‡ï¼Œpä¸ºç‰¹å¾æ•°é‡</p><p>æ¶ˆé™¤äº†æ ·æœ¬æ•°é‡å’Œç‰¹å¾æ•°é‡çš„å½±å“</p><h3 id="1-5-äº¤å‰éªŒè¯"><a href="#1-5-äº¤å‰éªŒè¯" class="headerlink" title="1.5 äº¤å‰éªŒè¯"></a>1.5 äº¤å‰éªŒè¯</h3><p>æˆ‘ä»¬æœ‰ä¸€ä¸ªæ€»çš„æ•°æ®é›†ï¼Œå°†æ€»æ•°æ®é›†åˆ‡åˆ†ï¼Œä¾‹å¦‚ï¼Œå°†æ•°æ®åˆ†ä¸ºè®­ç»ƒé›†ï¼ˆ80%ï¼‰å’Œæµ‹è¯•é›†ï¼ˆ20%ï¼‰ï¼Œè®­ç»ƒé›†ç”¨æ¥è®­ç»ƒmodelï¼Œæµ‹è¯•é›†ç”¨æ¥æœ€ç»ˆçš„æµ‹è¯•ã€‚</p><p>è®­ç»ƒé›†è¿˜å†å¹³å‡è¿›è¡Œåˆ‡åˆ†ä¸º3ä»½ï¼ˆæ ‡å·ä¸º1ã€2ã€3ï¼‰ã€‚</p><blockquote><p>æµ‹è¯•é›†å’Œè®­ç»ƒé›†çš„æ¯”ä¾‹è‡ªå·±å®šã€‚</p></blockquote><p>äº¤å‰éªŒè¯å°±æ˜¯åœ¨è®­ç»ƒé›†ä¸­ï¼Œé‡‡ç”¨2ä»½æ•°æ®æ¥è®­ç»ƒï¼Œç”¨å¦ä¸€ä»½æ•°æ®æ¥éªŒè¯è®­ç»ƒå‡ºçš„æ¨¡å‹çš„å‚æ•°ï¼Œè¿›è¡Œ3æ¬¡ã€‚</p><p>å³ï¼š1 + 2æ¥è®­ç»ƒï¼Œ3éªŒè¯ï¼›2 + 3æ¥è®­ç»ƒï¼Œ1æ¥éªŒè¯ï¼›1 + 3æ¥è®­ç»ƒï¼Œ2æ¥éªŒè¯ã€‚</p><p>ä¸ºäº†è®©æ¨¡å‹çš„è¯„ä¼°æ•ˆæœæ¯”è¾ƒå¥½ï¼Œæœ€åå°†3æ¬¡çš„å‚æ•°å–å¹³å‡å€¼ã€‚</p><blockquote><p>æ— è®ºåˆ†ç±»è¿˜æ˜¯å›å½’æ¨¡å‹ï¼Œéƒ½å¯ä»¥åˆ©ç”¨äº¤å‰éªŒè¯ï¼Œè¿›è¡Œæ¨¡å‹è¯„ä¼°</p><p>sklearnæ¨¡å—ä¸­æœ‰äº¤å‰éªŒè¯å‡½æ•°ï¼Œä¾‹å¦‚<code>sklearn.cross_validation</code> ä¸­çš„ <code>train_testsplit</code> å‡½æ•°</p></blockquote><p>äº¤å‰éªŒè¯ä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢æŸä¸€éƒ¨åˆ†æ•°æ®æ¯”è¾ƒç®€å•ï¼Œå¯¼è‡´æ¨¡å‹çš„æ•ˆæœæ¯”è¾ƒé«˜ã€‚</p><h2 id="2-åˆ†ç±»æ¨¡å‹è¯„ä¼°"><a href="#2-åˆ†ç±»æ¨¡å‹è¯„ä¼°" class="headerlink" title="2 åˆ†ç±»æ¨¡å‹è¯„ä¼°"></a>2 åˆ†ç±»æ¨¡å‹è¯„ä¼°</h2><h3 id="2-1-å‡†ç¡®ç‡ã€ç²¾ç¡®ç‡ã€å¬å›ç‡ã€f1-score"><a href="#2-1-å‡†ç¡®ç‡ã€ç²¾ç¡®ç‡ã€å¬å›ç‡ã€f1-score" class="headerlink" title="2.1 å‡†ç¡®ç‡ã€ç²¾ç¡®ç‡ã€å¬å›ç‡ã€f1_score"></a>2.1 å‡†ç¡®ç‡ã€ç²¾ç¡®ç‡ã€å¬å›ç‡ã€f1_score</h3><ul><li><p>å‡†ç¡®ç‡ï¼ˆAccuracyï¼‰çš„å®šä¹‰æ˜¯ï¼šå¯¹äºç»™å®šçš„æµ‹è¯•é›†ï¼Œåˆ†ç±»æ¨¡å‹æ­£ç¡®åˆ†ç±»çš„æ ·æœ¬æ•°ä¸æ€»æ ·æœ¬æ•°ä¹‹æ¯”ï¼›</p></li><li><p>ç²¾ç¡®ç‡ï¼ˆPrecisionï¼‰çš„å®šä¹‰æ˜¯ï¼šå¯¹äºç»™å®šæµ‹è¯•é›†çš„æŸä¸€ä¸ªç±»åˆ«ï¼Œåˆ†ç±»æ¨¡å‹é¢„æµ‹æ­£ç¡®çš„æ¯”ä¾‹ï¼Œæˆ–è€…è¯´ï¼šåˆ†ç±»æ¨¡å‹é¢„æµ‹çš„æ­£æ ·æœ¬ä¸­æœ‰å¤šå°‘æ˜¯çœŸæ­£çš„æ­£æ ·æœ¬ï¼›</p></li><li><p>å¬å›ç‡ï¼ˆRecallï¼‰çš„å®šä¹‰ä¸ºï¼šå¯¹äºç»™å®šæµ‹è¯•é›†çš„æŸä¸€ä¸ªç±»åˆ«ï¼Œæ ·æœ¬ä¸­çš„æ­£ç±»æœ‰å¤šå°‘è¢«åˆ†ç±»æ¨¡å‹é¢„æµ‹æ­£ç¡®ï¼›</p><blockquote><p>å‡è®¾æœ‰1000ä¸ªäººï¼Œå…¶ä¸­990ä¸ªäººæ­£å¸¸ï¼Œæœ‰10ä¸ªäººæ‚£æœ‰ç™Œç—‡ï¼Œæ¨¡å‹æ—¨åœ¨é¢„æµ‹å“ªäº›äººæ˜¯æ‚£æœ‰ç™Œç—‡çš„ã€‚</p><p>å¦‚æœæ¨¡å‹é¢„æµ‹1000ä¸ªäººä¸­éƒ½æ˜¯æ­£å¸¸çš„ï¼Œæ²¡æœ‰ç™Œç—‡æ‚£è€…ï¼Œé‚£ä¹ˆå¯ä»¥è¯´æ¨¡å‹çš„ç²¾åº¦æ˜¯$\frac{990}{1000}=0.99$ã€‚è™½ç„¶ç²¾åº¦å¾ˆé«˜ï¼Œä½†æ˜¯éƒ½æ˜¯æ­£æ ·æœ¬ï¼Œæ²¡æœ‰è´Ÿæ ·æœ¬ï¼Œæ¨¡å‹æ˜¯æ— ç”¨çš„ï¼Œå› ä¸ºä¸€ä¸ªæ‚£è€…éƒ½æ²¡æœ‰æ‰¾åˆ°ã€‚å› æ­¤æ— æ³•ç”¨ç²¾åº¦æ¥è¯„ä¼°æ¨¡å‹ï¼Œè€Œæ˜¯ä½¿ç”¨recallå¬å›ç‡æ¥è¯„ä¼°ã€‚</p></blockquote></li><li><p>F1_scoreï¼Œåœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›æ¨¡å‹çš„ç²¾ç¡®ç‡è¶Šé«˜è¶Šå¥½ï¼ŒåŒæ—¶å¬å›ç‡ä¹Ÿè¶Šé«˜è¶Šé«˜ï¼Œä½†æ˜¯ï¼Œç°å®æƒ…å†µå¾€å¾€äº‹ä¸æ„¿è¿ï¼Œåœ¨ç°å®æƒ…å†µä¸‹ï¼Œç²¾ç¡®ç‡å’Œå¬å›ç‡åƒæ˜¯ååœ¨è··è··æ¿ä¸Šä¸€æ ·ï¼Œå¾€å¾€å‡ºç°ä¸€ä¸ªå€¼å‡é«˜ï¼Œå¦ä¸€ä¸ªå€¼é™ä½ï¼Œé‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰ä¸€ä¸ªæŒ‡æ ‡æ¥ç»¼åˆè€ƒè™‘ç²¾ç¡®ç‡å’Œå¬å›ç‡äº†ï¼Œè¿™ä¸ªæŒ‡æ ‡å°±æ˜¯Få€¼ã€‚Få€¼çš„è®¡ç®—å…¬å¼ä¸ºï¼š<br>$$<br>F = \frac{(a ^ 2 + 1) \times P \times R}{a ^ 2 \times (P + R)}<br>$$</p><blockquote><p>P: Precisionï¼Œ R: Recall, aï¼šæƒé‡å› å­</p><p>å½“a=1æ—¶ï¼ŒFå€¼ä¾¿æ˜¯F1å€¼ï¼Œä»£è¡¨ç²¾ç¡®ç‡å’Œå¬å›ç‡çš„æƒé‡æ˜¯ä¸€æ ·çš„ï¼Œæ˜¯æœ€å¸¸ç”¨çš„ä¸€ç§è¯„ä»·æŒ‡æ ‡ã€‚</p><p>F1çš„è®¡ç®—å…¬å¼ä¸ºï¼š$F1 = \frac{2 \times P \times R}{P + R}$</p></blockquote></li></ul><h3 id="2-2-æ··æ·†çŸ©é˜µ"><a href="#2-2-æ··æ·†çŸ©é˜µ" class="headerlink" title="2.2 æ··æ·†çŸ©é˜µ"></a>2.2 æ··æ·†çŸ©é˜µ</h3><p>æ··æ·†çŸ©é˜µä¹Ÿç§°è¯¯å·®çŸ©é˜µï¼Œæ˜¯è¡¨ç¤ºç²¾åº¦è¯„ä»·çš„ä¸€ç§æ ‡å‡†æ ¼å¼ï¼Œç”¨nè¡Œnåˆ—çš„çŸ©é˜µå½¢å¼æ¥è¡¨ç¤ºã€‚</p><p>å…·ä½“è¯„ä»·æŒ‡æ ‡æœ‰æ€»ä½“ç²¾åº¦ã€åˆ¶å›¾ç²¾åº¦ã€ç”¨æˆ·ç²¾åº¦ç­‰ï¼Œè¿™äº›ç²¾åº¦æŒ‡æ ‡ä»ä¸åŒçš„ä¾§é¢åæ˜ äº†å›¾åƒåˆ†ç±»çš„ç²¾åº¦ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ··æ·†çŸ©é˜µï¼Œ<code>Actual</code>ä»£è¡¨çœŸå®å€¼ï¼Œ<code>Predicted</code>ä»£è¡¨é¢„æµ‹å€¼ï¼Œé¢„æµ‹çš„æ˜¯æ ‡ç­¾å·ï¼ˆå› ä¸ºæ˜¯åˆ†ç±»ä»»åŠ¡ï¼Œä¸»è¦å¯¹æ ‡ç­¾è¿›è¡Œåˆ†ç±»ï¼‰ã€‚</p><blockquote><p>ä¸‹é¢æ˜¯æˆ‘å¯¹TPã€TNã€FPã€FNå››ä¸ªå€¼çš„ç†è§£ï¼ˆåŠ©è®°ï¼‰</p><p>TPï¼šé¢„æµ‹æ­£ç¡®ï¼Œé¢„æµ‹æˆ1</p><p>TNï¼šé¢„æµ‹æ­£ç¡®ï¼Œé¢„æµ‹æˆ0</p><p>FPï¼šé¢„æµ‹é”™è¯¯ï¼Œé¢„æµ‹æˆ1</p><p>FNï¼šé¢„æµ‹é”™è¯¯ï¼Œé¢„æµ‹æˆ0</p></blockquote><p><img src="808139430/image-20221230142020907.png" alt="æ··æ·†çŸ©é˜µ"></p><p>å¯ä»¥é€šè¿‡ä¸Šé¢å››ä¸ªå€¼è®¡ç®—ç›¸åº”çš„è¯„ä¼°å€¼ï¼Œè§ä¸‹å›¾ã€‚</p><p><img src="808139430/image-20221230143921870.png" alt="æ··æ·†çŸ©é˜µè®¡ç®—è¯„ä¼°æŒ‡æ ‡"></p><blockquote><ul><li>å‡†ç¡®ç‡ï¼šé¢„æµ‹æ­£ç¡®çš„æ¯”ä¾‹</li><li>ç²¾ç¡®ç‡ï¼šåœ¨é¢„æµ‹ä¹‹åï¼Œåœ¨é¢„æµ‹ç»“æœçš„æŸä¸€ç»“æœä¸Šï¼Œæ­£ç¡®çš„æ¯”ä¾‹</li><li>å¬å›ç‡ï¼šåœ¨é¢„æµ‹ä¹‹å‰ï¼ŒçœŸå®å€¼ä¸ºæŸä¸€ç»“æœä¸Šï¼Œæ­£ç¡®çš„æ¯”ä¾‹</li></ul></blockquote><h1 id="å›å½’æ¨¡å‹ç›¸å…³æŠ€å·§"><a href="#å›å½’æ¨¡å‹ç›¸å…³æŠ€å·§" class="headerlink" title="å›å½’æ¨¡å‹ç›¸å…³æŠ€å·§"></a>å›å½’æ¨¡å‹ç›¸å…³æŠ€å·§</h1><h2 id="1-ä¸‹é‡‡æ ·å’Œä¸Šé‡‡æ ·"><a href="#1-ä¸‹é‡‡æ ·å’Œä¸Šé‡‡æ ·" class="headerlink" title="1 ä¸‹é‡‡æ ·å’Œä¸Šé‡‡æ ·"></a>1 ä¸‹é‡‡æ ·å’Œä¸Šé‡‡æ ·</h2><p>åœ¨åˆ†ç±»é—®é¢˜çš„æ•°æ®ä¸­ï¼Œå¾ˆå®¹æ˜“å‡ºç°æ­£åæ•°æ®é›†æ•°é‡å­˜åœ¨æå¤§çš„å·®è·ï¼Œè¿™ç±»æ•°æ®ç›´æ¥ç”¨äºè®­ç»ƒä¸åˆ©äºæ¨¡å‹çš„æ„æ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹æ•°æ®è¿›è¡Œäº›è®¸å¤„ç†ã€‚</p><p>å¾ˆå®¹æ˜“æƒ³åˆ°ï¼Œåˆç†çš„æ•°æ®é›†åº”è¯¥æ˜¯æ­£åæ•°æ®é›†æ•°é‡åº”æ¥è¿‘ï¼Œé‚£å°±å­˜åœ¨ä¸¤ç§ç­–ç•¥ï¼š</p><p>ä¸‹é‡‡æ ·ç­–ç•¥ï¼šæŠŠæ•°é‡å¤šçš„å‡å°‘åˆ°ä¸æ•°é‡å°‘çš„ç›¸è¿‘</p><p>ä¸Šï¼ˆè¿‡ï¼‰é‡‡æ ·ç­–ç•¥ï¼šæŠŠæ•°é‡å°‘çš„å¢åŠ åˆ°ä¸æ•°é‡å¤šçš„ç›¸è¿‘</p><ul><li>ä¸‹é‡‡æ ·ï¼š</li></ul><p><img src="808139430/2.png" alt="img"></p><ul><li>ä¸Šé‡‡æ ·ï¼šSMOTEç®—æ³•</li></ul><p><strong>æ­¥éª¤ï¼š</strong></p><p>ï¼ˆ1ï¼‰å¯¹äºå°‘æ•°ç±»ä¸­æ¯ä¸€ä¸ªæ ·æœ¬xï¼Œä»¥<strong>æ¬§æ°è·ç¦»ï¼ˆä¸¤ç‚¹ä¹‹é—´è·ç¦»ï¼‰</strong>ä¸ºæ ‡å‡†è®¡ç®—å®ƒåˆ°å°‘æ•°ç±»æ ·æœ¬é›†ä¸­æ‰€æœ‰æ ·æœ¬çš„è·ç¦»ï¼Œå¾—åˆ°å…¶<code>k</code>è¿‘é‚»ï¼ˆæ‰€æœ‰è·ç¦»æ’åºåå‰<code>k</code>å°çš„è·ç¦»ï¼‰</p><p>ï¼ˆ2ï¼‰æ ¹æ®æ ·æœ¬ä¸å¹³è¡¡æ¯”ä¾‹è®¾ç½®ä¸€ä¸ªé‡‡æ ·æ¯”ä¾‹ä»¥ç¡®å®šé‡‡æ ·å€ç‡Nï¼Œå¯¹äºæ¯ä¸€ä¸ªå°‘æ•°ç±»æ ·æœ¬xï¼Œä»å…¶kè¿‘é‚»ä¸­éšæœºé€‰æ‹©è‹¥å¹²ä¸ªæ ·æœ¬ï¼Œå‡è®¾é€‰æ‹©çš„è¿‘é‚»ä¸ºxn</p><p>ï¼ˆ3ï¼‰å¯¹äºæ¯ä¸€ä¸ªéšæœºé€‰å‡ºçš„è¿‘é‚»xnï¼Œåˆ†åˆ«ä¸åŸæ ·æœ¬æŒ‰ç…§å¦‚ä¸‹çš„å…¬å¼æ„å»ºæ–°çš„æ ·æœ¬ã€‚<br>$$<br>x_{new} = x + rand(0, 1) \times (\widetilde x - x)<br>$$</p><blockquote><p>$(\widetilde x - x)$ ç›¸å½“äºè·ç¦» $d_i$ ï¼ˆæ¬§å‡ é‡Œå¾—è·ç¦»ï¼‰ï¼Œé‚£ä¹ˆæ¯ä¸ª $d_i$ éƒ½å¯ä»¥ç”Ÿæˆä¸€ä¸ªæ–°çš„æ•°æ®ã€‚</p></blockquote><p><img src="808139430/image-20221230161807567.png" alt="SMOTEç®—æ³•åŸç†å›¾"></p><h2 id="2-æ­£åˆ™åŒ–æƒ©ç½š"><a href="#2-æ­£åˆ™åŒ–æƒ©ç½š" class="headerlink" title="2 æ­£åˆ™åŒ–æƒ©ç½š"></a>2 æ­£åˆ™åŒ–æƒ©ç½š</h2><p>åŠ ä¸Šäº†æ­£åˆ™åŒ–é¡¹èƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šé¿å…è¿‡æ‹Ÿåˆ</p><h1 id="å†³ç­–æ ‘"><a href="#å†³ç­–æ ‘" class="headerlink" title="å†³ç­–æ ‘"></a>å†³ç­–æ ‘</h1><h2 id="1-æ¦‚è¿°-1"><a href="#1-æ¦‚è¿°-1" class="headerlink" title="1 æ¦‚è¿°"></a>1 æ¦‚è¿°</h2><h3 id="1-1-å®šä¹‰"><a href="#1-1-å®šä¹‰" class="headerlink" title="1.1 å®šä¹‰"></a>1.1 å®šä¹‰</h3><p>å†³ç­–æ ‘æ˜¯ä¸€ç§è§£å†³åˆ†ç±»é—®é¢˜çš„ç®—æ³•ï¼Œå†³ç­–æ ‘ç®—æ³•é‡‡ç”¨æ ‘å½¢ç»“æ„ï¼Œä½¿ç”¨å±‚å±‚æ¨ç†æ¥å®ç°æœ€ç»ˆçš„åˆ†ç±»ã€‚</p><p>å†³ç­–æ ‘å³å¯ä»¥åšåˆ†ç±»ï¼Œä¹Ÿå¯ä»¥åšå›å½’ã€‚å®ƒä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼š<strong>åˆ†ç±»æ ‘</strong> å’Œ <strong>å›å½’æ ‘</strong>ã€‚</p><h3 id="1-2-å†³ç­–æ ‘ç®—æ³•"><a href="#1-2-å†³ç­–æ ‘ç®—æ³•" class="headerlink" title="1.2 å†³ç­–æ ‘ç®—æ³•"></a>1.2 å†³ç­–æ ‘ç®—æ³•</h3><ul><li>ç¬¬ä¸€ä¸ªå†³ç­–æ ‘ç®—æ³•: CLS ï¼ˆConcept Learning Systemï¼‰</li><li>ä½¿å†³ç­–æ ‘å—åˆ°å…³æ³¨ã€æˆä¸ºæœºå™¨å­¦ä¹ ä¸»æµæŠ€æœ¯çš„ç®—æ³•: ID3</li><li>æœ€å¸¸ç”¨çš„å†³ç­–æ ‘ç®—æ³•: C4.5</li><li>å¯ä»¥ç”¨äºå›å½’ä»»åŠ¡çš„å†³ç­–æ ‘ç®—æ³•: CART ï¼ˆClassification and Regression Treeï¼‰</li><li>åŸºäºå†³ç­–æ ‘çš„æœ€å¼ºå¤§ç®—æ³•: RF ï¼ˆRandom Forestï¼‰</li></ul><h3 id="1-3-ç»“æ„"><a href="#1-3-ç»“æ„" class="headerlink" title="1.3 ç»“æ„"></a>1.3 ç»“æ„</h3><p>å†³ç­–æ ‘ç”±ä¸‹é¢å‡ ç§å…ƒç´ æ„æˆï¼š</p><ul><li>æ ¹èŠ‚ç‚¹ï¼šåŒ…å«æ ·æœ¬çš„å…¨é›†ï¼ˆå…¨éƒ¨è®­ç»ƒæ•°æ®ï¼‰</li><li>å†…éƒ¨èŠ‚ç‚¹ï¼šå¯¹åº”ç‰¹å¾å±æ€§æµ‹è¯•</li><li>å¶èŠ‚ç‚¹ï¼šä»£è¡¨å†³ç­–çš„ç»“æœ</li></ul><p><img src="808139430/image-20221230164038527.png" alt="å†³ç­–æ ‘ç»“æ„"></p><p>å†³ç­–æ ‘å­¦ä¹ çš„<strong>ç›®çš„</strong>æ˜¯ä¸ºäº†äº§ç”Ÿä¸€æ£µæ³›åŒ–èƒ½åŠ›å¼ºçš„å†³ç­–æ ‘</p><h2 id="2-å†³ç­–æ ‘æ„å»º"><a href="#2-å†³ç­–æ ‘æ„å»º" class="headerlink" title="2 å†³ç­–æ ‘æ„å»º"></a>2 å†³ç­–æ ‘æ„å»º</h2><h3 id="2-1-æ„å»ºè¿‡ç¨‹"><a href="#2-1-æ„å»ºè¿‡ç¨‹" class="headerlink" title="2.1 æ„å»ºè¿‡ç¨‹"></a>2.1 æ„å»ºè¿‡ç¨‹</h3><p>æ•´ä½“ç­–ç•¥ï¼šè‡ªä¸Šè€Œä¸‹åˆ†è€Œæ²»ä¹‹</p><p>å†³ç­–æ ‘çš„æ„å»ºè¿‡ç¨‹å°±æ˜¯ä¸€ä¸ª<strong>è‡ªæ ¹è‡³å¶çš„é€’å½’è¿‡ç¨‹</strong>ï¼Œ åœ¨æ¯ä¸ªä¸­é—´ç»“ç‚¹å¯»æ‰¾ä¸€ä¸ª<strong>åˆ’åˆ†</strong>å±æ€§ã€‚</p><p>å¤§è‡´è¿‡ç¨‹ï¼š</p><ul><li>å¼€å§‹ï¼šæ„å»ºæ ¹èŠ‚ç‚¹ï¼Œæ‰€æœ‰è®­ç»ƒæ•°æ®éƒ½æ”¾åœ¨æ ¹èŠ‚ç‚¹ï¼Œé€‰æ‹©xä¸ªæœ€ä¼˜ç‰¹å¾ï¼ŒæŒ‰ç€è¿™ä¸€ç‰¹å¾å°†è®­ç»ƒæ•°æ®é›†åˆ†å‰²æˆå­é›†ï¼Œè¿›å…¥å­èŠ‚ç‚¹ã€‚</li><li>æ‰€æœ‰å­é›†æŒ‰å†…éƒ¨èŠ‚ç‚¹çš„å±æ€§é€’å½’åœ°è¿›è¡Œåˆ†å‰²ã€‚</li><li>å¦‚æœè¿™äº›å­é›†å·²ç»èƒ½å¤Ÿè¢«åŸºæœ¬æ­£ç¡®åˆ†ç±»ï¼Œé‚£ä¹ˆæ„å»ºå¶èŠ‚ç‚¹ï¼Œå¹¶å°†è¿™äº›å­é›†åˆ†åˆ°æ‰€å¯¹åº”çš„å¶èŠ‚ç‚¹å»ã€‚</li><li>æ¯ä¸ªå­é›†éƒ½è¢«åˆ†åˆ°å¶èŠ‚ç‚¹ä¸Šï¼Œå³éƒ½æœ‰äº†æ˜ç¡®çš„ç±»ï¼Œè¿™æ ·å°±ç”Ÿæˆäº†ä¸€é¢—å†³ç­–æ ‘ã€‚</li></ul><p>é€’å½’çš„ä¸‰ç§åœæ­¢æ¡ä»¶ï¼š</p><ul><li>å½“å‰ç»“ç‚¹åŒ…å«çš„æ ·æœ¬å…¨å±äºåŒä¸€ç±»åˆ«ï¼Œæ— éœ€åˆ’åˆ†ï¼›</li><li>å½“å‰å±æ€§é›†ä¸ºç©ºï¼Œæˆ–æ˜¯æ‰€æœ‰æ ·æœ¬åœ¨æ‰€æœ‰å±æ€§ä¸Šå–å€¼ç›¸åŒï¼Œæ— æ³•åˆ’åˆ†;</li><li>å½“å‰ç»“ç‚¹åŒ…å«çš„æ ·æœ¬é›†åˆä¸ºç©ºï¼Œä¸èƒ½åˆ’åˆ†ã€‚</li></ul><h3 id="2-2-ç‰¹å¾é€‰æ‹©"><a href="#2-2-ç‰¹å¾é€‰æ‹©" class="headerlink" title="2.2 ç‰¹å¾é€‰æ‹©"></a>2.2 ç‰¹å¾é€‰æ‹©</h3><p><strong>ä¿¡æ¯ç†µ</strong>ï¼šéšæœºå˜é‡çš„ä¸ç¡®å®šæ€§ã€‚<br>$$<br>H(X) = - \sum p_i log_2 p_i \hspace{2em} \text{i = 1, 2, â€¦, n}<br>$$</p><blockquote><p>ä¾‹ï¼š</p><p>Aé›†åˆ $[1, 1, 1, 1, 1, 1, 1, 1, 2, 2]$</p><p>Bé›†åˆ$[1, 2, 3, 4, 5, 6, 7, 8, 9, 1]$</p><p>Aé›†åˆç†µå€¼ä½äºBé›†åˆç†µå€¼ï¼Œå› ä¸ºAé›†åˆä¸­åªæœ‰ä¸¤ç§ç±»åˆ«ï¼ŒBé›†åˆä¸­ç±»åˆ«æ¯”è¾ƒå¤šï¼ˆç»“æ„æ¯”è¾ƒä¹±ï¼‰ï¼Œç†µå€¼å°±ä¼šæ¯”è¾ƒå¤§</p></blockquote><p><strong>ä¿¡æ¯å¢ç›Šï¼š</strong> è¡¨ç¤ºç‰¹å¾Xä½¿å¾—ç±»Yçš„ä¸ç¡®å®šæ€§å‡å°‘çš„ç¨‹åº¦ï¼ˆç†µå€¼å‡å°‘ï¼‰ï¼Œå³å½“å‰åˆ’åˆ†å¯¹ä¿¡æ¯ç†µæ‰€é€ æˆçš„å˜åŒ–ã€‚</p><p>ä¿¡æ¯å¢ç›Šè¶Šå¤§ï¼Œè¡¨ç¤ºç‰¹å¾aæ¥åˆ’åˆ†æ‰€å‡å°‘çš„ç†µæœ€å¤§ï¼Œå³æå‡æœ€å¤§ï¼Œåº”å½“ä½œä¸ºæ ¹èŠ‚ç‚¹ã€‚</p><h2 id="3-å†³ç­–æ ‘ç®—æ³•"><a href="#3-å†³ç­–æ ‘ç®—æ³•" class="headerlink" title="3 å†³ç­–æ ‘ç®—æ³•"></a>3 å†³ç­–æ ‘ç®—æ³•</h2><h3 id="3-1-ID3ï¼ˆä¿¡æ¯å¢ç›Šï¼‰"><a href="#3-1-ID3ï¼ˆä¿¡æ¯å¢ç›Šï¼‰" class="headerlink" title="3.1 ID3ï¼ˆä¿¡æ¯å¢ç›Šï¼‰"></a>3.1 ID3ï¼ˆä¿¡æ¯å¢ç›Šï¼‰</h3><p>ä¸‹é¢æ˜¯åŸºäºä¿¡æ¯å¢ç›Šçš„ID3ç®—æ³•çš„å®ä¾‹ï¼š</p><p>æˆ‘ä»¬æœ‰14å¤©çš„æ•°æ®ï¼Œ4ä¸ªç‰¹å¾æ¡ä»¶ï¼š<strong>å¤©æ°”ï¼Œæ¸©åº¦ï¼Œæ¹¿åº¦ï¼Œæ˜¯å¦æœ‰é£</strong>ã€‚æœ€ç»ˆç»“æœæ˜¯å»ç©ä¸ç©ã€‚</p><p><img src="808139430/image-20221231110826312.png" alt="æ•°æ®"></p><p><img src="808139430/image-20221231110929844.png" alt="åˆ’åˆ†æ–¹å¼"></p><p>ä¸Šé¢æœ‰å››ç§åˆ’åˆ†æ–¹å¼ï¼Œæˆ‘ä»¬éœ€è¦åˆ¤æ–­è°æ¥å½“æ ¹èŠ‚ç‚¹ï¼Œæ ¹æ®çš„ä¸»è¦å°±æ˜¯ä¿¡æ¯å¢ç›Šè¿™ä¸ªæŒ‡æ ‡ã€‚ä¸‹é¢è®¡ç®—ä¿¡æ¯å¢ç›Šæ¥åˆ¤æ–­æ ¹èŠ‚ç‚¹ã€‚</p><p>æœ¬ä¾‹æš‚ä¸”ä»¥<code>ent(a, b)</code>ä»£è¡¨ä»¥ä¸‹å«ä¹‰ï¼šï¼ˆåªæœ‰ä¸¤ç§ç»“æœçš„æ—¶å€™çš„ç†µå€¼è®¡ç®—ï¼‰</p><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> math <span class="token keyword">import</span> log2<span class="token keyword">def</span> <span class="token function">ent</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span>    tot <span class="token operator">=</span> a <span class="token operator">+</span> b    x<span class="token punctuation">,</span> y <span class="token operator">=</span> a <span class="token operator">/</span> tot<span class="token punctuation">,</span> b <span class="token operator">/</span> tot    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token punctuation">(</span>x <span class="token operator">*</span> log2<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">+</span> y <span class="token operator">*</span> log2<span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ€»çš„æ•°æ®ä¸­ï¼Œ9å¤©ç©ï¼Œ5å¤©ä¸ç©ï¼Œç†µå€¼ä¸ºï¼š<br>$$<br>-\frac{9}{14}log_2 \frac{9}{14} - \frac{5}{14}log_2 \frac{5}{14} = 0.940<br>$$<br>ç„¶åå¯¹4ä¸ªç‰¹å¾é€ä¸ªåˆ†æï¼š</p><ul><li><p>outlook</p><ul><li><code>outlook = sunny</code>æ—¶ï¼Œç†µå€¼ä¸º0.971ï¼Œå–å€¼ä¸ºsunnyçš„æ¦‚ç‡ä¸º $\frac{5}{14}$</li><li><code>outlook = overcast</code>æ—¶ï¼Œç†µå€¼ä¸º0ï¼Œå–å€¼ä¸ºovercastçš„æ¦‚ç‡ä¸º $\frac{4}{14}$</li><li><code>outlook = rainy</code>æ—¶ï¼Œç†µå€¼ä¸º0.971ï¼Œå–å€¼ä¸ºrainyçš„æ¦‚ç‡ä¸º $\frac{5}{14}$</li></ul><p>ç†µå€¼ä¸ºï¼š<br>$$<br>\frac{5}{14} \times 0.971 + \frac{4}{14} \times 0 + \frac{5}{14} \times 0.971 = 0.693<br>$$<br>ä¿¡æ¯å¢ç›Šï¼šç³»ç»Ÿç†µå€¼ä»0.940ä¸‹é™åˆ°0.693ï¼Œå¢ç›Šä¸º0.247ã€‚</p></li><li><p>temperture</p><ul><li><code>temperture = hot</code>æ—¶ï¼Œç†µå€¼ä¸º1.0ï¼ˆ<code>ent(2, 2)</code>ï¼‰ï¼Œå–å€¼ä¸ºhotçš„æ¦‚ç‡ä¸º$\frac{4}{14}$</li><li><code>temperture = mild</code>æ—¶ï¼Œç†µå€¼ä¸º0.918ï¼ˆ<code>ent(4, 2)</code>ï¼‰ï¼Œå–å€¼ä¸ºmildçš„æ¦‚ç‡ä¸º$\frac{6}{14}$</li><li><code>temperture = cool</code>æ—¶ï¼Œç†µå€¼ä¸º0.81ï¼ˆ<code>ent(3,1)</code>ï¼‰ï¼Œå–å€¼ä¸ºcoolçš„æ¦‚ç‡ä¸º$\frac{4}{14}$</li></ul><p>ç†µå€¼ä¸ºï¼š<br>$$<br>\frac{4}{14} \times 1.0 + \frac{6}{14} \times 0.918 + \frac{4}{14} \times 0.81 = 0.911<br>$$<br>ä¿¡æ¯å¢ç›Šï¼š$Gain(S, temperture) = 0.940 - 0.911 = 0.029$</p></li><li><p>å…¶ä»–ç‰¹å¾æŒ‰ç…§ç›¸åŒæ–¹æ³•æ¥åšå¾—åˆ°ï¼š</p></li></ul><p>$$<br>Gain(Sï¼ŒOutlook)=0.247  \<br>Gain(S, Humidity)=0.151  \<br>Gain(S, Wind)=0 .048 \<br>Gain(S,Temperature)=0 .029<br>$$</p><p>è®¡ç®—å‡ºæ‰€æœ‰çš„ä¿¡æ¯å¢ç›Šä¹‹åï¼Œé€‰æ‹©<strong>æœ‰æœ€å¤§çš„ä¿¡æ¯å¢ç›Šçš„ç‰¹å¾</strong>ä½œä¸ºæ ¹èŠ‚ç‚¹ã€‚</p><p>ä¸‹é¢æ‰¾Sunnyåˆ†æ”¯çš„å†³ç­–æ ‘åˆ’åˆ†ï¼š</p><p>æ€»çš„ç†µå€¼<br>$$<br>-\frac{2}{5} \times log_2(\frac{2}{5}) - \frac{3}{5}log_2(\frac{3}{5}) = 0.97<br>$$<br>ä»¥å‰©ä¸‹çš„ä¸‰ä¸ªç‰¹å¾è¿›è¡Œåˆ†æï¼š</p><ul><li><p>temperture</p><ul><li>temperture=hotï¼Œç†µå€¼ä¸º0ï¼Œæ¦‚ç‡ä¸º$\frac{2}{5}$</li><li>temperture=mildï¼Œç†µå€¼ä¸º1.0ï¼Œæ¦‚ç‡ä¸º$\frac{2}{5}$</li><li>temperture=coolï¼Œç†µå€¼ä¸º0ï¼Œæ¦‚ç‡ä¸º$\frac{1}{5}$</li></ul><p>ç†µå€¼ä¸º$\frac{2}{5}$</p><p>ä¿¡æ¯å¢ç›Šï¼š$0.97-0.4 = 0.57$</p></li><li><p>humidy</p><ul><li>highï¼Œç†µå€¼ä¸º0ï¼Œæ¦‚ç‡ä¸º$\frac{3}{5}$</li><li>normalï¼Œç†µå€¼ä¸º1ï¼Œæ¦‚ç‡ä¸º$\frac{2}{5}$</li></ul><p>ç†µå€¼ä¸º$\frac{2}{5}$</p><p>ä¿¡æ¯å¢ç›Šï¼š$0.97 - 0.4 = 0.57$</p></li><li><p>windy</p><ul><li>falseï¼Œç†µå€¼ä¸º0.918ï¼Œæ¦‚ç‡ä¸º$\frac{3}{5}$</li><li>trueï¼Œç†µå€¼ä¸º1ï¼Œæ¦‚ç‡ä¸º$\frac{2}{5}$</li></ul><p>ç†µå€¼ä¸º$0.951$</p><p>ä¿¡æ¯å¢ç›Šï¼š$0.97 - 0.95 = 0.02$</p></li></ul><p>æ•…é€‰æ‹©humidyæˆ–windåˆ’åˆ†</p><p>å‰©ä¸‹çš„åˆ’åˆ†åŒç†ï¼Œæœ€ç»ˆå†³ç­–æ ‘ä¸º</p><p><img src="808139430/image-20230208111655893.png" alt="æœ€ç»ˆå†³ç­–æ ‘"></p><h3 id="3-2-C4-5ï¼ˆä¿¡æ¯å¢ç›Šç‡ï¼‰"><a href="#3-2-C4-5ï¼ˆä¿¡æ¯å¢ç›Šç‡ï¼‰" class="headerlink" title="3.2 C4.5ï¼ˆä¿¡æ¯å¢ç›Šç‡ï¼‰"></a>3.2 C4.5ï¼ˆä¿¡æ¯å¢ç›Šç‡ï¼‰</h3><blockquote><p>åŸºäºä¿¡æ¯å¢ç›Šçš„å†³ç­–æ ‘ç®—æ³•ä¼šæœ‰å“ªäº›é—®é¢˜ï¼š</p><p>å¦‚æœæœ‰ä¸€ä¸ªç‰¹å¾ï¼šidï¼Œä»£è¡¨æ ·æœ¬çš„ç¼–å·ï¼Œä»¥ä¸Šè¿°æ•°æ®ä¸ºä¾‹ï¼Œidä¸ºä»1åˆ°14ï¼Œå¦‚æœè®¡ç®—idç‰¹å¾çš„æ ¹èŠ‚ç‚¹ï¼Œå‘ç°ä¿¡æ¯å¢ç›Šæ˜¯æœ€å¤§çš„ï¼Œå› ä¸ºæ¯ä¸€ä¸ªå­èŠ‚ç‚¹çš„ä¿¡æ¯ç†µå€¼éƒ½ä¸º0ã€‚</p></blockquote><p>ä¿¡æ¯å¢ç›Šç‡ï¼šï¼ˆè§£å†³äº†ID3çš„é—®é¢˜ï¼Œè€ƒè™‘è‡ªèº«ç†µï¼Œä¿¡æ¯å¢ç›Šé™¤ä»¥è‡ªèº«ç†µï¼‰<br>$$<br>\frac{G}{H(x)} \hspace{2em} \text{G:ä¿¡æ¯å¢ç›Š, H(x):ç†µå€¼}<br>$$</p><h3 id="3-3-CARTï¼ˆGINIç³»æ•°ï¼‰"><a href="#3-3-CARTï¼ˆGINIç³»æ•°ï¼‰" class="headerlink" title="3.3 CARTï¼ˆGINIç³»æ•°ï¼‰"></a>3.3 CARTï¼ˆGINIç³»æ•°ï¼‰</h3><p>ä½¿ç”¨åŸºå°¼ç³»æ•°ä½œä¸ºè¡¡é‡æ ‡å‡†ã€‚<br>$$<br>Gini(p) = \sum \limits _{k = 1}^K p_k (1 - p_k) = 1 - \sum \limits _{k = 1}^K p_k^2<br>$$</p><h2 id="3-å†³ç­–æ ‘å‰ªæ"><a href="#3-å†³ç­–æ ‘å‰ªæ" class="headerlink" title="3 å†³ç­–æ ‘å‰ªæ"></a>3 å†³ç­–æ ‘å‰ªæ</h2><h3 id="3-1-é¢„å‰ªæ"><a href="#3-1-é¢„å‰ªæ" class="headerlink" title="3.1 é¢„å‰ªæ"></a>3.1 é¢„å‰ªæ</h3><p>åœ¨å»ºç«‹å†³ç­–æ ‘è¾¹çš„æ—¶å€™è¿›è¡Œå‰ªæçš„æ“ä½œï¼Œæ¯”è¾ƒä½¿ç”¨å®ç”¨ã€‚</p><p>å‰ªæç­–ç•¥ï¼š</p><ul><li>é™åˆ¶æ·±åº¦</li><li>é™åˆ¶å¶å­ç»“ç‚¹ä¸ªæ•°</li><li>é™åˆ¶å¶å­ç»“ç‚¹æ ·æœ¬æ•°</li><li>é™åˆ¶ä¿¡æ¯å¢ç›Šé‡ç­‰ã€‚</li></ul><h3 id="3-2-åå‰ªæ"><a href="#3-2-åå‰ªæ" class="headerlink" title="3.2 åå‰ªæ"></a>3.2 åå‰ªæ</h3><p>å»ºç«‹å®Œå†³ç­–æ ‘åè¿›è¡Œå‰ªææ“ä½œã€‚</p><h2 id="4-è¿ç»­å€¼å’Œç¼ºå¤±å€¼å¤„ç†"><a href="#4-è¿ç»­å€¼å’Œç¼ºå¤±å€¼å¤„ç†" class="headerlink" title="4 è¿ç»­å€¼å’Œç¼ºå¤±å€¼å¤„ç†"></a>4 è¿ç»­å€¼å’Œç¼ºå¤±å€¼å¤„ç†</h2><ul><li><p>è¿ç»­å€¼å±æ€§å¯å–æ•°å€¼ä¸æ˜¯æœ‰é™çš„ï¼Œä¸èƒ½æ ¹æ®è¿ç»­æ ‘å½¢çš„å¯å–å€¼å¯¹èŠ‚ç‚¹è¿›è¡Œåˆ’åˆ†ã€‚å¸¸è§åšæ³•æ˜¯ï¼š<strong>äºŒåˆ†æ³•</strong>å¯¹å…¶è¿›è¡Œç¦»æ•£åŒ–ã€‚</p></li><li><p>ç°å®åº”ç”¨ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°å±æ€§å€¼<code>ç¼ºå¤±</code>ç°è±¡ä»…ä½¿ç”¨æ— ç¼ºå¤±çš„æ ·ä¾‹ï¼Œè¿™æ˜¯å¯¹æ•°æ®çš„æå¤§æµªè´¹ä½¿ç”¨å¸¦ç¼ºå¤±å€¼çš„æ ·ä¾‹ï¼Œéœ€è§£å†³ï¼š</p><ul><li>å¦‚ä½•è¿›è¡Œåˆ’åˆ†å±æ€§é€‰æ‹©?</li><li>ç»™å®šåˆ’åˆ†å±æ€§ï¼Œè‹¥æ ·æœ¬åœ¨è¯¥å±æ€§ä¸Šçš„å€¼ç¼ºå¤±ï¼Œå¦‚ä½•è¿›è¡Œåˆ’åˆ†?</li></ul><p>åŸºæœ¬æ€è·¯ï¼š<strong>æ ·æœ¬èµ‹æƒï¼Œæƒé‡åˆ’åˆ†</strong></p></li></ul><h1 id="é›†æˆç®—æ³•"><a href="#é›†æˆç®—æ³•" class="headerlink" title="é›†æˆç®—æ³•"></a>é›†æˆç®—æ³•</h1><h2 id="1-æ¦‚è¿°-2"><a href="#1-æ¦‚è¿°-2" class="headerlink" title="1 æ¦‚è¿°"></a>1 æ¦‚è¿°</h2><p>é›†æˆç®—æ³•ï¼šEnsemble Learning</p><p>Baggingï¼šè®­ç»ƒå¤šä¸ªåˆ†ç±»å™¨å–å¹³å‡<br>$$<br>f(x) = \frac{1}{M} \sum \limits_{m = 1}^M f_m(x)<br>$$<br>Boostingï¼šä»å¼±å­¦ä¹ å™¨å¼€å§‹åŠ å¼ºï¼Œé€šè¿‡åŠ æƒæ¥è®­ç»ƒã€‚<br>$$<br>F_m(x) = F_{m - 1}(x) + argmin_h \sum \limits_{i = 1}^n L(y_i, F_{m - 1}(x_i) + h(x_i))<br>$$<br>Stackingï¼šèšåˆå¤šä¸ªåˆ†ç±»æˆ–å›å½’æ¨¡å‹ã€‚</p><h2 id="2-Baggingæ¨¡å‹-éšæœºæ£®æ—"><a href="#2-Baggingæ¨¡å‹-éšæœºæ£®æ—" class="headerlink" title="2 Baggingæ¨¡å‹-éšæœºæ£®æ—"></a>2 Baggingæ¨¡å‹-éšæœºæ£®æ—</h2><p>å…¶å®å°±æ˜¯å¹¶è¡Œè®­ç»ƒä¸€å †åˆ†ç±»å™¨ï¼ˆæ¯ä¸ªåˆ†ç±»å™¨äº’ç›¸ç‹¬ç«‹ï¼‰ã€‚å…¸å‹ä»£è¡¨ä¸ºéšæœºæ£®æ—ï¼ˆå¤šä¸ªå†³ç­–æ ‘å¹¶è¡Œæ”¾åœ¨ä¸€èµ·ï¼‰ã€‚</p><blockquote><p>éšæœºæŒ‡çš„æ˜¯ï¼šæ•°æ®éšæœºé‡‡æ ·ï¼Œç‰¹å¾éšæœºé€‰æ‹©</p><p>æ¯ä¸ªåˆ†ç±»å™¨å–‚çš„æ•°æ®éšæœºï¼Œæ•°æ®çš„ç‰¹å¾æ•°éšæœºã€‚äºŒé‡éšæœºæ€§ï¼Œä¼šè®©æ¯ä¸ªæ ‘åŸºæœ¬éƒ½ä¸ä¸€æ ·ï¼Œæœ€ç»ˆçš„ç»“æœä¹Ÿä¸ä¸€æ ·ã€‚</p></blockquote><p>éšæœºæ£®æ—ä¼˜åŠ¿ï¼š</p><ul><li>å¯ä»¥å¤„ç†é«˜ç»´åº¦ï¼ˆfeatureå¤šï¼‰æ•°æ®ï¼Œä¸ç”¨åšç‰¹å¾é€‰æ‹©</li><li>è®­ç»ƒå®Œä¹‹åï¼Œå¯ä»¥ç»™å‡ºé‚£äº›featureæ¯”è¾ƒé‡è¦</li><li>å®¹æ˜“åšæˆå¹¶è¡ŒåŒ–æ–¹æ³•ï¼Œé€Ÿåº¦å¿«</li><li>å¯ä»¥è¿›è¡Œå¯è§†åŒ–å±•ç¤ºï¼Œä¾¿äºåˆ†æ</li></ul><h2 id="3-Boostingæ¨¡å‹"><a href="#3-Boostingæ¨¡å‹" class="headerlink" title="3 Boostingæ¨¡å‹"></a>3 Boostingæ¨¡å‹</h2><p>æå‡æ¨¡å‹å…¸å‹ä»£è¡¨ï¼šAdaBoostï¼ŒXgBoost</p><p>AdaBoostï¼šä¼šæ ¹æ®å‰ä¸€æ¬¡çš„åˆ†ç±»æ•ˆæœè°ƒæ•´æ•°æ®æƒé‡</p><h2 id="4-Stackingæ¨¡å‹"><a href="#4-Stackingæ¨¡å‹" class="headerlink" title="4 Stackingæ¨¡å‹"></a>4 Stackingæ¨¡å‹</h2><p>å †å æ¨¡å‹ï¼šå¯ä»¥å †å å„ç§å„æ ·çš„åˆ†ç±»å™¨ï¼ˆKNNï¼ŒSVMï¼ŒRFç­‰ï¼‰</p><p>åˆ†é˜¶æ®µè¿›è¡Œï¼šç¬¬ä¸€é˜¶æ®µå¾—å‡ºå„è‡ªçš„ç»“æœï¼Œç¬¬äºŒé˜¶æ®µå†åˆ©ç”¨å‰ä¸€é˜¶æ®µç»“æœè¿›è¡Œè®­ç»ƒã€‚</p><h1 id="è´å¶æ–¯ç®—æ³•"><a href="#è´å¶æ–¯ç®—æ³•" class="headerlink" title="è´å¶æ–¯ç®—æ³•"></a>è´å¶æ–¯ç®—æ³•</h1><p>è´å¶æ–¯å…¬å¼ï¼š<br>$$<br>P(A | B) = \frac{P(B|A)P(A)}{P(B)}<br>$$</p><h2 id="1-1-å®ä¾‹ï¼šæ‹¼å†™çº æ­£"><a href="#1-1-å®ä¾‹ï¼šæ‹¼å†™çº æ­£" class="headerlink" title="1.1 å®ä¾‹ï¼šæ‹¼å†™çº æ­£"></a>1.1 å®ä¾‹ï¼šæ‹¼å†™çº æ­£</h2><p>ç”¨æˆ·è¾“å…¥ä¸€ä¸ªä¸åœ¨è¯å…¸ä¸­çš„å•è¯ï¼Œéœ€è¦çŒœæµ‹ç”¨æˆ·çœŸæ­£æƒ³è¾“å…¥çš„å•è¯ã€‚</p><p>æˆ‘ä»¬è¦æ±‚çš„æ˜¯<code>P(æˆ‘ä»¬çŒœæµ‹ç”¨æˆ·æƒ³è¾“å…¥çš„å•è¯|ç”¨æˆ·å®é™…è¾“å…¥çš„å•è¯)</code></p><p>å‡è®¾ç”¨æˆ·å®é™…è¾“å…¥çš„å•è¯ä¸º<code>D</code>ï¼ˆDataï¼‰</p><p>æˆ‘ä»¬æœ‰å¤šä¸ªçŒœæµ‹ï¼š<code>P(h1 | D), P(h2 | D)</code>ï¼Œ æ–¹ä¾¿åç»­è®¡ç®—ï¼Œç»Ÿä¸€ä¸º<code>P(h | D)</code><br>$$<br>P(h | D) = \frac{P(h) P(D | h)}{P(D)}<br>$$</p><blockquote><p>$P(h)$ä¸ºå•è¯åœ¨è¯­æ–™åº“ä¸­å‡ºç°çš„æ¦‚ç‡ï¼ˆå‡ºç°æ¬¡æ•° / æ€»æ¬¡æ•°ï¼‰ï¼Œæˆ‘ä»¬å«åš<strong>å…ˆéªŒæ¦‚ç‡</strong>ï¼Œè¿™ä¸ªæ¦‚ç‡å¯ä»¥ç®—å‡ºæ¥ã€‚</p><p>$P(D|h)$ ä¸ºæˆ‘ä»¬å°†ä¸€ä¸ªæ­£ç¡®çš„è¯è¾“å…¥é”™è¯¯çš„æ¦‚ç‡ã€‚</p></blockquote><p>å¯¹äºæ‰€æœ‰çš„çŒœæµ‹ï¼Œ$P(D)$ éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥å¯ä»¥å¿½ç•¥è¿™ä¸ªå¸¸æ•°ã€‚</p><p>åˆ™<br>$$<br>P(h|D) \varpropto P(h)P(D|h)<br>$$</p><blockquote><p>$P(D|h)$å¯ä»¥æ ¹æ®æŸç§æŒ‡æ ‡æ¥åˆ¤å®šï¼Œå¯ä»¥çœ‹é”®ç›˜ä¸Šå­—æ¯çš„ç¼–è¾‘è·ç¦»æ¥ç®—æ¦‚ç‡ç­‰ç­‰ã€‚</p></blockquote><p>å¦‚æœè®¡ç®—å‡ºæ¥å¤šä¸ªç»“æœé¢„æµ‹æ¦‚ç‡æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨<strong>å…ˆéªŒæ¦‚ç‡</strong>æ¥è¿›è¡Œåˆ¤æ–­è°æœ€ä¼˜å…ˆã€‚</p><h2 id="1-2-æ‹¼å†™æ£€æŸ¥å™¨å®ç°"><a href="#1-2-æ‹¼å†™æ£€æŸ¥å™¨å®ç°" class="headerlink" title="1.2 æ‹¼å†™æ£€æŸ¥å™¨å®ç°"></a>1.2 æ‹¼å†™æ£€æŸ¥å™¨å®ç°</h2><p>åŸç†ï¼š<br>$$<br>argmaxc \ P(A|B) = argmaxc \  \frac{P(B|A) P(A)}{P(B)}<br>$$</p><p>$P(A|B)$ï¼šå¾…æ±‚å€¼ï¼Œç”¨æˆ·æœ¬æƒ³è¾“å…¥Bçš„å‰æä¸‹ï¼Œé”™è¾“æˆAçš„æ¦‚ç‡</p><p>$P(A)$ï¼šæ–‡ç« ä¸­å‡ºç°æ­£ç¡®å•è¯Açš„æ¦‚ç‡</p><p>$P(B|A)$ï¼šç”¨æˆ·æœ¬æƒ³è¾“å…¥Açš„å‰æä¸‹ï¼Œé”™è¾“æˆBçš„æ¦‚ç‡</p><p>$P(B)$ï¼šæ–‡ç« ä¸­å‡ºç°æ­£ç¡®å•è¯Bçš„æ¦‚ç‡</p><p>$argmaxc$ï¼šç”¨æ¥æšä¸¾æ‰€æœ‰å¯èƒ½çš„Aï¼Œå¹¶é€‰å–æ¦‚ç‡æœ€å¤§çš„é‚£ä¸ª</p><p>æ‹¼å†™æ£€æŸ¥å™¨å°±æ˜¯ï¼Œè¾“å…¥ä¸€ä¸ªå•è¯ï¼Œå…ˆåˆ¤æ–­è¿™ä¸ªå•è¯æ˜¯å¦å­˜åœ¨äºè¯­æ–™åº“ä¸­ï¼ˆæ˜¯å¦æ­£ç¡®ï¼‰ï¼Œå¦‚æœä¸åœ¨ï¼ˆå¯èƒ½è¯­æ–™åº“ä¸­æ²¡æœ‰ï¼Œæˆ–è€…æ‹¼å†™é”™è¯¯ï¼‰ï¼Œåˆ™éœ€è¦æ ¹æ®ç¼–è¾‘è·ç¦»è¿›è¡Œæ£€æŸ¥ä¿®æ­£ã€‚</p><p><code>big.txt</code>æ–‡ä»¶ï¼š<a href="https://wwwi.lanzouo.com/i9s8t0ju5qzg" target="_blank" rel="noopener">https://wwwi.lanzouo.com/i9s8t0ju5qzg</a></p><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> re<span class="token punctuation">,</span> collections<span class="token comment" spellcheck="true">#  å°†æ‰€æœ‰å¤§å†™å­—æ¯è½¬åŒ–ä¸ºå°å†™ï¼Œå¹¶ä¸”å»æ‰ç‰¹æ®Šå­—ç¬¦</span><span class="token keyword">def</span> <span class="token function">words</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">return</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'[a-z]+'</span><span class="token punctuation">,</span> text<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">train</span><span class="token punctuation">(</span>features<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># é‡åˆ°ä»æ¥æ²¡æœ‰è§è¿‡çš„æ–°è¯ä½†è¯­æ–™åº“ä¸­æœªåŒ…å«ï¼Œæ¦‚ç‡æ¨¡å‹ä¸­å¸Œæœ›è¿”å›ä¸€ä¸ªå¾ˆå°çš„æ¦‚ç‡ï¼Œæ•…å‡ºç°æ¬¡æ•°è®¾ç½®ä¸º1</span>    model <span class="token operator">=</span> collections<span class="token punctuation">.</span>defaultdict<span class="token punctuation">(</span><span class="token keyword">lambda</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> f <span class="token keyword">in</span> features<span class="token punctuation">:</span>        model<span class="token punctuation">[</span>f<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>    <span class="token keyword">return</span> modelNWORDS <span class="token operator">=</span> train<span class="token punctuation">(</span>words<span class="token punctuation">(</span>open<span class="token punctuation">(</span><span class="token string">'big.txt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># è¯é¢‘</span>alphabet <span class="token operator">=</span> <span class="token string">'abcdefghijklmnopqrstuvwxyz'</span><span class="token comment" spellcheck="true"># ç¼–è¾‘è·ç¦»ä¸º1çš„å•è¯</span><span class="token keyword">def</span> <span class="token function">edits1</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">:</span>    n <span class="token operator">=</span> len<span class="token punctuation">(</span>word<span class="token punctuation">)</span>    <span class="token keyword">return</span> set<span class="token punctuation">(</span><span class="token punctuation">[</span>word<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span> i<span class="token punctuation">]</span> <span class="token operator">+</span> word<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+</span>   <span class="token comment" spellcheck="true"># deletion</span>               <span class="token punctuation">[</span>word<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span> i<span class="token punctuation">]</span> <span class="token operator">+</span> word<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> word<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> word<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+</span>  <span class="token comment" spellcheck="true"># transportation</span>               <span class="token punctuation">[</span>word<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span> i<span class="token punctuation">]</span> <span class="token operator">+</span> c <span class="token operator">+</span> word<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">:</span> <span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token keyword">for</span> c <span class="token keyword">in</span> alphabet<span class="token punctuation">]</span> <span class="token operator">+</span>  <span class="token comment" spellcheck="true"># alteration</span>               <span class="token punctuation">[</span>word<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span> i<span class="token punctuation">]</span> <span class="token operator">+</span> c <span class="token operator">+</span> word<span class="token punctuation">[</span>i<span class="token punctuation">:</span> <span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">for</span> c <span class="token keyword">in</span> alphabet<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># insertion</span><span class="token comment" spellcheck="true"># ç¼–è¾‘è·ç¦»ä¸º2 çš„å•è¯</span><span class="token keyword">def</span> <span class="token function">edits2</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">return</span> set<span class="token punctuation">(</span>e2 <span class="token keyword">for</span> e1 <span class="token keyword">in</span> edits1<span class="token punctuation">(</span>word<span class="token punctuation">)</span> <span class="token keyword">for</span> e2 <span class="token keyword">in</span> edits1<span class="token punctuation">(</span>e1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># å°†é‚£äº›æ­£ç¡®çš„è¯ä½œä¸ºå€™é€‰è¯</span><span class="token keyword">def</span> <span class="token function">known</span><span class="token punctuation">(</span>words<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">return</span> set<span class="token punctuation">(</span>w <span class="token keyword">for</span> w <span class="token keyword">in</span> words <span class="token keyword">if</span> w <span class="token keyword">in</span> NWORDS<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># æ£€æŸ¥å™¨å‡½æ•°ï¼Œå…ˆåˆ¤æ–­æ˜¯ä¸æ˜¯æ­£ç¡®çš„æ‹¼å†™å½¢å¼ï¼Œå¦‚æœä¸æ˜¯åˆ™é€‰å‡ºç¼–è¾‘è·ç¦»ä¸º1çš„å•è¯â€¦â€¦</span><span class="token keyword">def</span> <span class="token function">correct</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">:</span>    candidates <span class="token operator">=</span> known<span class="token punctuation">(</span><span class="token punctuation">[</span>word<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">or</span> known<span class="token punctuation">(</span>edits1<span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">or</span> known<span class="token punctuation">(</span>edits2<span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">or</span> <span class="token punctuation">[</span>word<span class="token punctuation">]</span>    <span class="token keyword">return</span> max<span class="token punctuation">(</span>candidates<span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token keyword">lambda</span> w<span class="token punctuation">:</span> NWORDS<span class="token punctuation">[</span>w<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>correct<span class="token punctuation">(</span><span class="token string">'mach'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="1-3-æ–°é—»åˆ†ç±»"><a href="#1-3-æ–°é—»åˆ†ç±»" class="headerlink" title="1.3 æ–°é—»åˆ†ç±»"></a>1.3 æ–°é—»åˆ†ç±»</h2><p>ä¹‹åç”¨åˆ°äº†å†è¡¥ï¼ŒçŸ­æ—¶é—´ä¸ä¼šå†™ã€‚</p><h1 id="SVMæ”¯æŒå‘é‡æœº"><a href="#SVMæ”¯æŒå‘é‡æœº" class="headerlink" title="SVMæ”¯æŒå‘é‡æœº"></a>SVMæ”¯æŒå‘é‡æœº</h1><h2 id="1-æ¦‚è¿°-3"><a href="#1-æ¦‚è¿°-3" class="headerlink" title="1 æ¦‚è¿°"></a>1 æ¦‚è¿°</h2><p>Support Vector Machineæ˜¯ä¸€ç§äºŒåˆ†ç±»æ¨¡å‹ï¼Œå®ƒçš„åŸºæœ¬æ¨¡å‹æ˜¯å®šä¹‰åœ¨ç‰¹å¾ç©ºé—´ä¸Šçš„<strong>é—´éš”æœ€å¤§çš„çº¿æ€§åˆ†ç±»å™¨</strong></p><p>SVMå­¦ä¹ çš„åŸºæœ¬æƒ³æ³•æ˜¯æ±‚è§£èƒ½å¤Ÿæ­£ç¡®åˆ’åˆ†è®­ç»ƒæ•°æ®é›†å¹¶ä¸”å‡ ä½•é—´éš”æœ€å¤§çš„åˆ†ç¦»è¶…å¹³é¢ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ $wx+b=0$ å³ä¸ºåˆ†ç¦»è¶…å¹³é¢ï¼Œå¯¹äºçº¿æ€§å¯åˆ†çš„æ•°æ®é›†æ¥è¯´ï¼Œè¿™æ ·çš„è¶…å¹³é¢æœ‰æ— ç©·å¤šä¸ªï¼ˆå³æ„ŸçŸ¥æœºï¼‰ï¼Œä½†æ˜¯å‡ ä½•é—´éš”æœ€å¤§çš„åˆ†ç¦»è¶…å¹³é¢å´æ˜¯å”¯ä¸€çš„ã€‚</p><p><img src="808139430/image-20230102144808362.png" alt="æ”¯æŒå‘é‡æœº"></p><h2 id="2-æ¨å¯¼"><a href="#2-æ¨å¯¼" class="headerlink" title="2 æ¨å¯¼"></a>2 æ¨å¯¼</h2><h3 id="2-1-è·ç¦»"><a href="#2-1-è·ç¦»" class="headerlink" title="2.1 è·ç¦»"></a>2.1 è·ç¦»</h3><p>æ­£å¸¸ä¸‰ç»´æ¡ä»¶ä¸‹ç‚¹$(x_0, y_0, z_0)$åˆ°å¹³é¢$Ax + By + Cz + D = 0$çš„è·ç¦»å…¬å¼ï¼ˆé«˜ä¸­çŸ¥è¯†ï¼‰ï¼š<br>$$<br>\frac{\vert Ax_0 + By_0 + Cz_0 + D \vert}{\sqrt{A^2 + B^2 + C^2}}<br>$$<br>æ¨å¯¼åˆ†æè¿‡ç¨‹ï¼š</p><p>å¹³é¢æ–¹ç¨‹ï¼š $ax + by + cz = d$ ï¼Œå¹³é¢å¤–ä¸€ç‚¹$P(x_0, y_0, z_0)$</p><p><img src="808139430/image-20230102153203878.png" alt="ç¤ºæ„å›¾"></p><p>PQå‚ç›´å¹³é¢ï¼Œå³ä¸ºæ±‚PQçš„é•¿åº¦ï¼Œä½†ä¸çŸ¥Qç‚¹çš„å…·ä½“æ•°æ®ã€‚</p><p>æ•…æ„é€ ä¸€ä¸ªå¹³é¢ä¸Šçš„ç‚¹$P^{â€˜}(x_1, y_1, z_1)$ï¼Œé—®é¢˜å³è½¬åŒ–ä¸ºæ±‚$\overrightarrow {P^{â€˜}P}$ åœ¨æ³•å‘é‡Nä¸Šé¢çš„åˆ†é‡ï¼Œå³$\overrightarrow {P^{â€˜}P}$ ä¸Nç›¸åŒæ–¹å‘çš„å•ä½å‘é‡çš„ç‚¹ç§¯ã€‚</p><p><img src="808139430/image-20230102153230935.png" alt="ç¤ºæ„å›¾"></p><p>è®¾è·ç¦»ä¸ºDã€‚</p><p><img src="808139430/1203675-20180109152428254-718844217.png" alt="è·ç¦»å…¬å¼æ¨å¯¼"></p><p>ç°åœ¨è€ƒè™‘ä¸€èˆ¬æƒ…å†µï¼š</p><p>æ±‚å¹³é¢å¤–ä¸€ç‚¹ $x$ åˆ°å¹³é¢$w^T x + b = 0$ çš„è·ç¦»ï¼š</p><blockquote><p>ç»“è®ºï¼šå¹³é¢$Ax + By + Cz + D = 0$çš„æ³•å‘é‡ä¸º$(A, B, C)$</p></blockquote><p><img src="808139430/image-20230102154354917.png" alt="ç¤ºæ„å›¾"></p><p>åŒä¸Šè¿°åŸç†ï¼š</p><p>è·ç¦»å°±ä¸º<br>$$<br>distance(x, b, w) = \vert \frac{w^T}{\vert \vert w \vert \vert}(x - x^{â€˜}) \vert = \frac{1}{\vert \vert w \vert \vert} \vert w^Tx + b \vert<br>$$</p><blockquote><p>ä¸Šè¿°å…¬å¼è¿›è¡Œäº†ä»£å…¥ï¼Œå°†$x^{â€˜}$ä»£å…¥å¹³é¢æ–¹ç¨‹å¾—$w^Tx^{â€˜} = -b$</p></blockquote><h3 id="2-2-æ•°æ®"><a href="#2-2-æ•°æ®" class="headerlink" title="2.2 æ•°æ®"></a>2.2 æ•°æ®</h3><p>æ•°æ®é›†ï¼š$(x_1, y_1)(x_2, y_2)â€¦(x_n, y_n)$</p><p>$Y$ ä¸ºæ ·æœ¬çš„ç±»åˆ«ï¼šå½“$X$ ä¸ºæ­£ä¾‹æ—¶ï¼Œ$Y = +1$ï¼Œå½“$X$ä¸ºè´Ÿä¾‹æ—¶ï¼Œ$Y = -1$</p><p>å†³ç­–æ–¹ç¨‹ï¼š$y(x) = w^T \Phi(x) + b$ ï¼ˆå…¶ä¸­$\Phi(x)$æ˜¯å¯¹æ•°æ®åšäº†æ ¸å˜æ¢ï¼Œå¯ä»¥æš‚æ—¶ç†è§£ä¸º$x$ï¼‰<br>$$<br>\begin{cases}<br>y(x_i) &gt; 0 \Leftrightarrow y_i = +1 \\<br>y(x_i) &lt; 0 \Leftrightarrow y_i = -1<br>\end{cases}<br>\Longrightarrow<br>y_i y(x_i) &gt; 0<br>$$</p><h3 id="2-3-ç›®æ ‡å‡½æ•°æ±‚è§£"><a href="#2-3-ç›®æ ‡å‡½æ•°æ±‚è§£" class="headerlink" title="2.3 ç›®æ ‡å‡½æ•°æ±‚è§£"></a>2.3 ç›®æ ‡å‡½æ•°æ±‚è§£</h3><blockquote><p>æˆ‘ä»¬è¦æ±‚çš„å°±æ˜¯æ‰¾åˆ°ä¸€ä¸ªçº¿æ€§åˆ’åˆ†ï¼ˆæ¯”å¦‚è¯´ç›´çº¿ï¼‰ï¼Œä½¿å¾—ç¦»è¯¥çº¿æœ€è¿‘çš„ç‚¹æœ€è¿œã€‚</p></blockquote><p>å°†ç‚¹åˆ°ç›´çº¿è·ç¦»è¿›è¡Œè½¬åŒ–ï¼ˆåŒ–ç®€ï¼‰ï¼š<br>$$<br>\frac{y_i \cdot (w^T \cdot \Phi(x) + b)}{\vert \vert w \vert \vert}<br>$$</p><blockquote><p>$y_i y(x_i) &gt; 0$ ç›´æ¥ä¹˜ä¸Š$y_i$ å°†ç»å¯¹å€¼å»æ‰ï¼Œ$|y_i| = 1$ï¼Œå¹¶ä¸å½±å“å€¼å¤§å°</p></blockquote><p>æ”¾ç¼©å˜æ¢ï¼šå¯¹äºå†³ç­–æ–¹ç¨‹ï¼ˆw, bï¼‰å¯ä»¥é€šè¿‡æ”¾ç¼©å˜æ¢ä½¿å…¶ç»“æœå€¼$|Y| \geq 1$ ï¼Œåˆ™<br>$$<br>y_i \cdot (w^T \cdot \Phi(x_i) + b) \geq 1<br>$$</p><blockquote><p>ç¼©æ”¾ä¹‹å‰wå’Œbæœ‰æ— æ•°ç»„è§£ï¼Œç¼©æ”¾ä¹‹åwå’Œbåªæœ‰ä¸€ç»„è§£ã€‚</p></blockquote><p>ä¼˜åŒ–ç›®æ ‡ï¼š<br>$$<br>\mathop{arg\  max} \limits_{w, b} \bigg\{ \frac{1}{||w||} \mathop{min} \limits_i \Big \{ y_i \cdot (w^T \cdot \Phi(x_i) + b)\Big \} \bigg\}<br>$$</p><blockquote><p>$\mathop{min} \limits_i \Big \{ y_i \cdot (w^T \cdot \Phi(x_i) + b) \Big \}$ æ˜¯æ±‚æ‰€æœ‰æ ·æœ¬ç‚¹åˆ°å¹³é¢çš„æœ€å°è·ç¦»çš„é‚£ä¸ªç‚¹</p><p>$\mathop{argmax} \limits_{w,b}$ æ˜¯<strong>æœ€å¤§åŒ–åˆ°å¹³é¢æœ€å°è·ç¦»çš„ç‚¹çš„è·ç¦»ï¼Œæ­¤æ—¶çš„w,bçš„å€¼</strong></p><p>ç”±äº$y_i \cdot (w^T \cdot \Phi(x_i) + b) \geq 1$ï¼Œ æ•…æœ€å°å€¼ä¸º1ï¼Œåªéœ€è¦è€ƒè™‘ $\mathop{arg\  max} \limits_{w, b} \frac{1}{||w||}$</p></blockquote><p>å½“å‰ç›®æ ‡å˜ä¸ºï¼š$\mathop{max} \limits_{w, b} \frac{1}{||w||}$ï¼Œå³æ±‚$||w||$çš„æœ€å°å€¼ï¼Œä½†æœ‰çº¦æŸæ¡ä»¶ $y_i \cdot (w^T \cdot \Phi(x_i) + b) \geq 1$</p><p>å°†æ±‚æå¤§å€¼è½¬åŒ–ä¸ºæ±‚æå°å€¼çš„é—®é¢˜ï¼Œæ±‚$\frac{1}{2}||w||^2$ çš„æœ€å°å€¼ã€‚</p><p>éœ€è¦ä½¿ç”¨<strong>æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•</strong>ï¼šï¼ˆæ­¤å¤„ä¸åšè¯æ˜ï¼Œç›´æ¥ç»™å‡ºç»“è®ºï¼‰<br>$$<br>L(w, b, \alpha) = \frac{1}{2}||w||^2 - \sum \limits_{i = 1}^n \alpha_i (y_i \cdot (w^T \cdot \Phi(x_i) + b) - 1)<br>$$</p><blockquote><p>ä¸Šå¼éœ€è¦æ»¡è¶³çº¦æŸæ¡ä»¶ï¼š$y_i \cdot (w^T \cdot \Phi(x_i) + b) \geq 1$</p><p>æ»¡è¶³KKTæ¡ä»¶çš„ç‚¹æœªå¿…æ˜¯å±€éƒ¨ï¼ˆå…¨å±€ï¼‰æœ€ä¼˜ç‚¹ï¼ˆè¿˜å¯èƒ½æ˜¯å±€éƒ¨æå¤§å’Œéç‚¹ï¼‰ï¼Œä½†å±€éƒ¨ï¼ˆå…¨å±€ï¼‰æœ€ä¼˜ç‚¹å¿…ç„¶æ»¡è¶³KKTæ¡ä»¶ã€‚å¯¹äºå‡¸ä¼˜åŒ–é—®é¢˜ï¼Œæ»¡è¶³KKTæ¡ä»¶çš„è§£ç›´æ¥å°±æ˜¯å…¨å±€æœ€ä¼˜è§£<br>$$<br>æœ€ä¼˜è§£çš„å¿…è¦æ¡ä»¶:<br>\begin{cases}<br>\nabla L(\mathbf{x}, \lambda) = \nabla f(\mathbf{x}) + \lambda \nabla g(\mathbf{x}) = 0 \\<br>\lambda \ge 0 \\<br>\lambda g(\mathbf{x}) = 0 (äº’è¡¥æ¾å¼›)\\<br>g(\mathbf{x}) \le 0 (åŸçº¦æŸ)<br>\end{cases}<br>$$</p><p>æ¨å¯¼å¯å‚è€ƒï¼š<a href="https://blog.csdn.net/v_july_v/article/details/7624837" target="_blank" rel="noopener">https://blog.csdn.net/v_july_v/article/details/7624837</a> </p><p>åŸç†å¯å‚è€ƒï¼š<a href="https://zhuanlan.zhihu.com/p/31886934" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/31886934</a> </p></blockquote><p><img src="808139430/image-20230102224841617.png" alt="æ±‚è§£è¿‡ç¨‹"></p><p><img src="808139430/image-20230102225344026.png" alt="æ±‚è§£è¿‡ç¨‹"></p><p><img src="808139430/image-20230102225422893.png" alt="æ±‚è§£è¿‡ç¨‹"></p><h2 id="3-SVMå®ä¾‹"><a href="#3-SVMå®ä¾‹" class="headerlink" title="3 SVMå®ä¾‹"></a>3 SVMå®ä¾‹</h2><p>æœ‰ä¸‰ä¸ªæ•°æ®ï¼š3ä¸ªç‚¹ï¼Œæ­£ä¾‹$x_1(3, 3), x_2(4, 3)$ï¼Œ è´Ÿä¾‹$x_3(1, 1)$ï¼Œï¼ˆæ•°æ®æ˜¯äºŒç»´æ•°æ®ï¼‰å¯¹å…¶è¿›è¡ŒäºŒåˆ†ç±»ã€‚</p><p>é¦–å…ˆéœ€è¦æ±‚è§£ä¸‹å¼çš„æœ€å°å€¼ï¼š<br>$$<br>\frac{1}{2}\sum \limits_{i = 1}^n \sum \limits _{j = 1}^n \alpha_i \alpha_j y_i y_j (x_i \cdot x_j) - \sum \limits_{i = 1}^n\alpha_i \hspace{3em} (1)<br>$$</p><blockquote><p>æ³¨æ„ï¼š$x_i \cdot x_j$ çš„è¿ç®—æ˜¯ç‚¹ç§¯è¿ç®—ã€‚</p><p>çº¦æŸæ¡ä»¶ï¼š<br>$$<br>\alpha_1 + \alpha_2 - \alpha_3 = 0 \\<br>\alpha_i \geq 0, \hspace{2em} i = 1, 2, 3<br>$$</p></blockquote><p><img src="808139430/image-20230103144319179.png" alt="å›¾åƒç¤ºæ„"></p><p>å°†å¯¹åº”çš„æ•°æ®å¸¦å…¥ï¼ˆ1ï¼‰å¼ï¼Œå¾—ï¼š<br>$$<br>\frac{1}{2} \Big( 18 \alpha_1^2 + 25\alpha_2^2 + 2 \alpha_3^2 + 42\alpha_1\alpha_2 - 12\alpha_1\alpha_3 - 14\alpha_2\alpha_3 \Big) - \alpha_1 - \alpha_2 - \alpha_3<br>$$<br>ç”±äº$\alpha_1 + \alpha_2 = \alpha_3$ï¼ŒåŒ–ç®€å¾—ï¼š<br>$$<br>4 \alpha_1 ^ 2 + \frac{13}{2} \alpha_2^2 + 10\alpha_1\alpha_2 - 2\alpha_1 - 2\alpha_2<br>$$<br>åˆ†åˆ«å¯¹$\alpha_1,\alpha_2$æ±‚åå¯¼ï¼Œåå¯¼ç­‰äº0å¾—<br>$$<br>\begin{cases}<br>\alpha_1 = 1.5 \\<br>\alpha_2 = -1<br>\end{cases}<br>$$<br>å‘ç°ä¸æ»¡è¶³çº¦æŸæ¡ä»¶$\alpha_i \geq 0$ï¼Œæ•…è§£åº”åœ¨è¾¹ç•Œä¸Šã€‚åˆ†åˆ«è®©ä¸¤ä¸ªå€¼ç­‰äº0æ±‚è§£<br>$$<br>\begin{cases}<br>\alpha_1 = 0 \\<br>\alpha_2 = -\frac{2}{13}<br>\end{cases}<br>(\times)<br>\hspace{4em}<br>\begin{cases}<br>\alpha_1 = 0.25 \\<br>\alpha_2 = 0<br>\end{cases}<br>(\checkmark)<br>$$<br>ç¬¬ä¸€ç»„è§£ä¸æ»¡è¶³ï¼Œæ•…æœ€å°å€¼åœ¨$(0.25, 0, 0.25)$å¤„å–å¾—ã€‚</p><p>å°†$\alpha$ç»“æœå¸¦æ±‚è§£$w = \sum \limits_{i = 1}^n \alpha_i y_i \Phi(x_i)$ï¼Œ$\Phi(x_i)$ä»¥$x_i$æ¥ä»£æ›¿<br>$$<br>w = \frac{1}{4} \times 1 \times (3,3) + \frac{1}{4} \times (-1) \times(1,1) = (\frac{1}{2}, \frac{1}{2})<br>\\<br>b = y_i - \sum \limits_{i = 1}^n a_i y_i (x_i x_j) = 1 - (\frac{1}{4} \times 1 \times 18  + \frac{1}{4} \times (-1) \times 6) = -2<br>$$<br>æ•…å¹³é¢æ–¹ç¨‹ä¸ºï¼š<br>$$<br>0.5 x_1 + 0.5 x_2 - 2 = 0<br>$$</p><blockquote><p>å› ä¸º$w = \sum \limits_{i = 1}^n \alpha_i y_i \Phi(x_i)$</p><p>æ”¯æŒå‘é‡çš„$\alpha$å€¼ä¸ç­‰äº0ï¼Œ$\alpha = 0$çš„å‘é‡ä¸æ˜¯æ”¯æŒå‘é‡ï¼Œå¯¹æœ€ç»ˆç»“æœæ²¡æœ‰å½±å“ã€‚</p><p>æ”¯æŒå‘é‡å°±æ˜¯é‚£äº›å¯¹æœ€ç»ˆç»“æœèµ·ä½œç”¨çš„å‘é‡ï¼Œä¹Ÿå¯ä»¥å½“åšæ˜¯è¾¹ç•Œä¸Šçš„å‘é‡ã€‚</p></blockquote><h2 id="4-è½¯é—´éš”"><a href="#4-è½¯é—´éš”" class="headerlink" title="4 è½¯é—´éš”"></a>4 è½¯é—´éš”</h2><p>æ•°æ®ä¸­æœ‰æ—¶å€™ä¼šæœ‰ä¸€äº›å™ªéŸ³ç‚¹ï¼Œå¦‚æœè€ƒè™‘å®ƒä»¬ç»“æœå¯èƒ½ä¸ä¼šå¾ˆå¥½ã€‚</p><p>ä¹‹å‰è®¨è®ºçš„æ˜¯è¦æ±‚æ‰€æœ‰æ ·æœ¬ç‚¹å…¨éƒ¨æ»¡è¶³çº¦æŸï¼ˆè¿™æ˜¯ç¡¬é—´éš”ï¼‰ï¼Œè€Œå®é™…æƒ…å†µä¸­è¿™æ˜¾ç„¶æ˜¯ä¸å¤ªå¯èƒ½çš„ï¼Œè½¯é—´éš”åˆ™æ˜¯å…è®¸æŸäº›æ ·æœ¬ç‚¹ä¸æ»¡è¶³çº¦æŸã€‚</p><p>ä¸ºè§£å†³è¯¥é—®é¢˜ï¼Œå¼•å…¥æ¾å¼›å› å­ï¼š$y_i(w \cdot x_i + b) \geq 1 - \xi_i$</p><p>æ–°çš„ç›®æ ‡å‡½æ•°ï¼š<br>$$<br>\mathop{min}\limits_{w, b, \xi_i} \frac{1}{2} ||w||^2 + C \sum \limits _{i = 1}^n \xi_i<br>$$</p><blockquote><p>Cæ˜¯æˆ‘ä»¬éœ€è¦æŒ‡å®šçš„ä¸€ä¸ªå‚æ•°</p><p>å½“Cè¶‹è¿‘äºå¾ˆå¤§æ—¶ï¼šæ„å‘³ç€åˆ†ç±»ä¸¥æ ¼ä¸èƒ½æœ‰é”™è¯¯</p><p>å½“Cè¶‹è¿‘äºå¾ˆå°æ—¶ï¼šæ„å‘³ç€å¯ä»¥ç”±æ›´å¤§çš„é”™è¯¯å®¹å¿</p></blockquote><p>è§£æ³•åŸºæœ¬ä¸€æ ·ï¼š</p><p><img src="808139430/image-20230103153918323.png" alt="è§£æ³•"></p><h2 id="5-SVMæ ¸å˜æ¢"><a href="#5-SVMæ ¸å˜æ¢" class="headerlink" title="5 SVMæ ¸å˜æ¢"></a>5 SVMæ ¸å˜æ¢</h2><p>å°†ä½ç»´ä¸å¯åˆ†æ˜ å°„åˆ°é«˜ç»´ï¼Œæ‰¾åˆ°ä¸€ç§å˜æ¢æ–¹æ³•ï¼Œå³ä¸º$\phi(x)$</p><p>é«˜æ–¯æ ¸å‡½æ•°ï¼š<br>$$<br>K(X, Y) =  exp \bigg\{ -\frac{||X-Y||^2}{2\sigma^2} \bigg\}<br>$$</p><h2 id="6-åŸºäºsklearnæ±‚è§£SVM"><a href="#6-åŸºäºsklearnæ±‚è§£SVM" class="headerlink" title="6 åŸºäºsklearnæ±‚è§£SVM"></a>6 åŸºäºsklearnæ±‚è§£SVM</h2><p>å‚è€ƒ <a href="https://blog.csdn.net/weixin_42600072/article/details/88644229" target="_blank" rel="noopener">https://blog.csdn.net/weixin_42600072/article/details/88644229</a></p><h1 id="èšç±»ç®—æ³•"><a href="#èšç±»ç®—æ³•" class="headerlink" title="èšç±»ç®—æ³•"></a>èšç±»ç®—æ³•</h1><p>æ€§èƒ½åº¦é‡ï¼š</p><ul><li>å¤–éƒ¨æŒ‡æ ‡<ul><li><code>jaccard</code>ç³»æ•°ï¼ˆç®€ç§°<code>JC</code>ï¼‰</li><li><code>FM</code>æŒ‡æ•°ï¼ˆç®€ç§°<code>FMI</code>ï¼‰</li><li><code>Rand</code>æŒ‡æ•°ï¼ˆç®€ç§°<code>RI</code>ï¼‰</li></ul></li><li>å†…éƒ¨æŒ‡æ ‡<ul><li><code>DB</code>æŒ‡æ•°ï¼ˆç®€ç§°<code>DBI</code>ï¼‰</li><li><code>Dunn</code>æŒ‡æ•°ï¼ˆç®€ç§°<code>DI</code>ï¼‰</li></ul></li></ul><p>è·ç¦»è®¡ç®—ï¼š</p><ul><li>$L_p$ èŒƒæ•°</li><li>æ¬§æ°è·ç¦»</li><li>æ›¼å“ˆé¡¿è·ç¦»</li></ul><p>åˆ†ç±»ï¼š</p><ul><li>åŸå‹èšç±»ï¼š<code>k-means</code>ç®—æ³•ï¼Œå­¦ä¹ å‘é‡é‡åŒ–ï¼ˆæœ‰ç›‘ç£å­¦ä¹ ï¼‰ï¼Œé«˜æ–¯æ··åˆèšç±» éƒ½æ˜¯æ­¤ç±»å‹ç®—æ³•</li></ul><blockquote><p>å‡è®¾èšç±»ç»“æ„èƒ½å¤Ÿé€šè¿‡ä¸€ç»„åŸå‹åˆ»ç”»ï¼Œç„¶åå¯¹åŸå‹è¿›è¡Œè¿­ä»£æ›´æ–°æ±‚è§£ã€‚</p></blockquote><ul><li><p>å¯†åº¦èšç±»ï¼šDBSCAN</p></li><li><p>å±‚æ¬¡èšç±»ï¼šAGNES</p><p>è¯•å›¾åœ¨ä¸åŒå±‚æ¬¡ä¸Šå¯¹æ•°æ®é›†è¿›è¡Œåˆ’åˆ†ï¼Œåˆ†ä¸ºè‡ªåº•å‘ä¸Šçš„èšåˆç­–ç•¥å’Œè‡ªé¡¶å‘ä¸‹çš„åˆ†æ‹†ç­–ç•¥</p></li></ul><p>èšç°‡ä¹‹é—´çš„è·ç¦»çš„è®¡ç®—ï¼šæœ€å°è·ç¦»ï¼Œæœ€å¤§è·ç¦»å’Œå¹³å‡è·ç¦»ï¼ˆä¸¤ä¸ªç°‡ä¸­æ ·æœ¬ç‚¹å¯¹è·ç¦»ä¹‹å’Œå–å¹³å‡ï¼‰</p><p>AGNESç®—æ³•è¢«ç›¸åº”ç§°ä¸ºï¼šå•é“¾æ¥ç®—æ³•ï¼ˆä»¥æœ€å°è·ç¦»ä¸ºå‡†ï¼‰ï¼Œå…¨é“¾æ¥ç®—æ³•ï¼ˆä»¥æœ€å¤§è·ç¦»ä¸ºå‡†ï¼‰å’Œå‡é“¾æ¥ç®—æ³•</p><blockquote><p>ä»¥å•é“¾æ¥ç®—æ³•ä¸ºä¾‹ï¼š</p><ul><li>åˆå§‹æ—¶æ¯ä¸ªæ ·æœ¬ç‚¹çœ‹åšä¸€ä¸ªç°‡ï¼Œæ‰¾åˆ°æ‰€æœ‰ç°‡å¯¹ä¸­æœ€å°çš„è·ç¦»ï¼Œå°†ä»–ä»¬åˆå¹¶ä¸ºä¸€ä¸ªç°‡ï¼Œæ­¤æ—¶åˆå¹¶çš„ç°‡ä¸å…¶ä»–ç°‡çš„è·ç¦»æ›´æ–°ä¸ºä¸¤ä¸ªç‚¹åˆ°å…¶ä»–ç°‡è·ç¦»çš„æœ€å°å€¼ã€‚</li><li>ä¸Šé¢çš„æ­¥éª¤ä¸ºå¾ªç¯é‡Œé¢çš„æ­¥éª¤ï¼Œæ¥ç€è¿›è¡Œä¸‹ä¸€æ¬¡å¾ªç¯ï¼Œæ‰¾åˆ°æ‰€æœ‰ç°‡ä¸­æœ€çŸ­çš„è·ç¦»ï¼Œç„¶åå°†ä»–ä»¬åˆå¹¶ï¼Œåˆå¹¶åæ›´æ–°ç°‡ä¹‹é—´çš„è·ç¦»ä¸ºã€åˆå¹¶ç°‡ä¸­çš„æ‰€æœ‰ç‚¹åˆ°å…¶ä»–ç°‡è·ç¦»çš„æœ€å°å€¼ã€‘ï¼Œä¸€ç›´è¿›è¡Œä¸Šè¿°å¾ªç¯æ“ä½œï¼Œç›´åˆ°è¾¾åˆ°æŒ‡å®šç°‡çš„æ•°é‡å†åœæ­¢å¾ªç¯ã€‚</li></ul></blockquote><h2 id="K-MEANSç®—æ³•"><a href="#K-MEANSç®—æ³•" class="headerlink" title="K-MEANSç®—æ³•"></a>K-MEANSç®—æ³•</h2><h3 id="1-æ¦‚è¿°-4"><a href="#1-æ¦‚è¿°-4" class="headerlink" title="1 æ¦‚è¿°"></a>1 æ¦‚è¿°</h3><p>èšç±»æ¦‚å¿µï¼šè¿™æ˜¯ä¸ªæ— ç›‘ç£é—®é¢˜ï¼ˆæ²¡æœ‰æ ‡ç­¾æ•°æ®ï¼‰ï¼Œç›®çš„æ˜¯å°†ç›¸ä¼¼çš„ä¸œè¥¿åˆ†åˆ°ä¸€ç»„ã€‚</p><p>é€šå¸¸ä½¿ç”¨çš„ç®—æ³•æ˜¯K-MEANSç®—æ³•</p><blockquote><p>K-MEANSç®—æ³•ï¼š</p><ul><li>éœ€è¦æŒ‡å®šç°‡çš„ä¸ªæ•°ï¼Œå³Kå€¼</li><li>è´¨å¿ƒï¼šæ•°æ®çš„å‡å€¼ï¼Œå³å‘é‡å„ç»´å–å¹³å‡å³å¯</li><li>è·ç¦»çš„åº¦é‡ï¼šå¸¸ç”¨æ¬§å‡ é‡Œå¾—è·ç¦»å’Œä½™å¼¦ç›¸ä¼¼åº¦ï¼ˆå…ˆæ ‡å‡†åŒ–ï¼Œè®©æ•°æ®åŸºæœ¬éƒ½æ˜¯åœ¨ä¸€ä¸ªæ¯”è¾ƒå°çš„èŒƒå›´å†…æµ®åŠ¨ï¼‰</li><li>ä¼˜åŒ–ç›®æ ‡ï¼š$min\sum \limits_{i = 1}^K \sum \limits_{x \in C_i} dist(c_i, x)^2$ ï¼ˆå¯¹äºæ¯ä¸€ä¸ªç°‡è®©æ¯ä¸€ä¸ªæ ·æœ¬åˆ°ä¸­å¿ƒç‚¹çš„è·ç¦»è¶Šå°è¶Šå¥½ï¼Œ$c_i$ä»£è¡¨ä¸­å¿ƒç‚¹ï¼‰</li></ul></blockquote><h3 id="2-K-MEANSæµç¨‹"><a href="#2-K-MEANSæµç¨‹" class="headerlink" title="2 K-MEANSæµç¨‹"></a>2 K-MEANSæµç¨‹</h3><p>å‡è®¾å¹³é¢ä¸Šæœ‰ä¸€ç³»åˆ—æ ·æœ¬ç‚¹ï¼Œç°åœ¨éœ€è¦å°†å…¶è¿›è¡Œåˆ†ç»„ã€‚</p><p>é€‰å®š<code>K=2</code>ï¼Œå³å°†è¿™äº›æ•°æ®ç‚¹åˆ†æˆä¸¤ä¸ªç»„åˆ«ã€‚</p><ul><li>éšæœºé€‰æ‹©ä¸¤ä¸ªè´¨å¿ƒï¼ˆåˆ†åˆ«ä»£è¡¨ä¸¤ä¸ªç°‡ï¼‰ï¼Œè®¡ç®—æ‰€æœ‰æ ·æœ¬ç‚¹åˆ°ä¸¤ä¸ªè´¨å¿ƒçš„è·ç¦»ã€‚æ¯ä¸ªæ ·æœ¬ç‚¹ä¼šè®¡ç®—å‡ºåˆ°ä¸¤ä¸ªè´¨å¿ƒçš„è·ç¦»ï¼Œé‚£ä¹ˆé€‰æ‹©æœ€å°çš„è·ç¦»ï¼Œè¿™ä¸ªæ ·æœ¬ç‚¹å°±å½’å±äºå“ªä¸ªç°‡ã€‚</li><li>ç„¶åå¯¹äºä¸¤ä¸ªç°‡çš„æ‰€æœ‰æ ·æœ¬ç‚¹åˆ†åˆ«ç®—å‡ºå¯¹åº”çš„è´¨å¿ƒï¼ˆè¿™ä¸¤ä¸ªè´¨å¿ƒä¾¿å……å½“æ–°çš„è´¨å¿ƒï¼‰ï¼Œå†å¯¹æ‰€æœ‰æ ·æœ¬ç‚¹è®¡ç®—åˆ°ä¸¤ä¸ªæ–°çš„è´¨å¿ƒçš„è·ç¦»ï¼Œè¿˜æ˜¯é€‰æ‹©æœ€å°çš„è·ç¦»ï¼Œé‚£ä¹ˆè¿™ä¸ªæ ·æœ¬ç‚¹å°±å½’å±äºå“ªä¸ªç°‡ã€‚</li><li>æœ€ç»ˆç›´åˆ°ä¸¤ä¸ªç°‡æ‰€å±çš„æ ·æœ¬ç‚¹ä¸åœ¨å‘ç”Ÿå˜åŒ–ã€‚</li></ul><blockquote><p><a href="https://www.bilibili.com/video/BV1bt411i77G?p=101&vd_source=bb4ca29d8dfb2e3c28c10bb09f4b962e" target="_blank" rel="noopener">K-MEANSå·¥ä½œæµç¨‹è§†é¢‘å‚è€ƒ</a></p></blockquote><h3 id="3-ä¼˜ç¼ºç‚¹"><a href="#3-ä¼˜ç¼ºç‚¹" class="headerlink" title="3 ä¼˜ç¼ºç‚¹"></a>3 ä¼˜ç¼ºç‚¹</h3><p>ä¼˜ç‚¹ï¼š</p><ul><li>ç®€å•å¿«é€Ÿï¼Œé€‚åˆå¸¸è§„æ•°æ®é›†</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>Kå€¼éš¾ä»¥ç¡®å®š</li><li>å¤æ‚åº¦ä¸æ ·æœ¬å‘ˆçº¿æ€§å…³ç³»</li><li>å¾ˆéš¾å‘ç°ä»»æ„å½¢çŠ¶çš„ç°‡</li><li>åˆå§‹çš„ç‚¹å½±å“å¾ˆå¤§</li></ul><blockquote><p> <a href="https://www.naftaliharris.com/blog/visualizing-k-means-clustering/" target="_blank" rel="noopener">K-MEANSå¯è§†åŒ–æ¼”ç¤º</a></p></blockquote><h3 id="4-K-MEANSè¿›è¡Œå›¾åƒå‹ç¼©"><a href="#4-K-MEANSè¿›è¡Œå›¾åƒå‹ç¼©" class="headerlink" title="4 K-MEANSè¿›è¡Œå›¾åƒå‹ç¼©"></a>4 K-MEANSè¿›è¡Œå›¾åƒå‹ç¼©</h3><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> skimage <span class="token keyword">import</span> io<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>cluster <span class="token keyword">import</span> KMeans<span class="token keyword">import</span> numpy <span class="token keyword">as</span> npimage <span class="token operator">=</span> io<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">"1.jpg"</span><span class="token punctuation">)</span>io<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># io.show()  # æ˜¾ç¤ºå›¾ç‰‡</span>rows <span class="token operator">=</span> image<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>cols <span class="token operator">=</span> image<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>image <span class="token operator">=</span> image<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span>rows <span class="token operator">*</span> cols<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>kmeans <span class="token operator">=</span> KMeans<span class="token punctuation">(</span>n_clusters<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">,</span> n_init<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> max_iter<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># ç°‡128, æœ€å¤§è¿­ä»£æ¬¡æ•°100</span>kmeans<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>image<span class="token punctuation">)</span>clusters <span class="token operator">=</span> np<span class="token punctuation">.</span>asarray<span class="token punctuation">(</span>kmeans<span class="token punctuation">.</span>cluster_centers_<span class="token punctuation">,</span> dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span>labels <span class="token operator">=</span> np<span class="token punctuation">.</span>asarray<span class="token punctuation">(</span>kmeans<span class="token punctuation">.</span>labels_<span class="token punctuation">,</span> dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span>labels <span class="token operator">=</span> labels<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span>rows<span class="token punctuation">,</span> cols<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>clusters<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>np<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token string">'test.npy'</span><span class="token punctuation">,</span> clusters<span class="token punctuation">)</span>io<span class="token punctuation">.</span>imsave<span class="token punctuation">(</span><span class="token string">'compressed.jpg'</span><span class="token punctuation">,</span> labels<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="DBSCANç®—æ³•"><a href="#DBSCANç®—æ³•" class="headerlink" title="DBSCANç®—æ³•"></a>DBSCANç®—æ³•</h2><h3 id="1-æ¦‚è¿°-5"><a href="#1-æ¦‚è¿°-5" class="headerlink" title="1 æ¦‚è¿°"></a>1 æ¦‚è¿°</h3><p>DBSCANï¼ˆDensity-Based Spatial Clustering of Applications with Noiseï¼Œå…·æœ‰å™ªå£°çš„åŸºäºå¯†åº¦çš„èšç±»æ–¹æ³•ï¼‰æ˜¯ä¸€ç§<strong>åŸºäºå¯†åº¦çš„ç©ºé—´èšç±»ç®—æ³•</strong>ã€‚è¯¥ç®—æ³•å°†å…·æœ‰è¶³å¤Ÿå¯†åº¦çš„åŒºåŸŸåˆ’åˆ†ä¸ºç°‡ï¼Œå¹¶åœ¨å…·æœ‰å™ªå£°çš„ç©ºé—´<a href="https://cloud.tencent.com/solution/database?from=10680" target="_blank" rel="noopener">æ•°æ®åº“</a>ä¸­å‘ç°ä»»æ„å½¢çŠ¶çš„ç°‡ï¼ŒDBSCANç®—æ³•å°†<code>ç°‡</code>å®šä¹‰ä¸ºå¯†åº¦ç›¸è¿çš„ç‚¹çš„æœ€å¤§é›†åˆã€‚</p><p>æ ¸å¿ƒå¯¹è±¡ï¼šè‹¥æŸä¸ªç‚¹çš„å¯†åº¦è¾¾åˆ°ç®—æ³•è®¾å®šçš„é˜ˆå€¼åˆ™ç§°å…¶ä¸ºæ ¸å¿ƒç‚¹ã€‚ï¼ˆå³<code>r</code>é‚»åŸŸå†…çš„ç‚¹çš„æ•°é‡ä¸å°äº<code>minPts</code>ï¼‰</p><p>åŸºäºä»¥ä¸Šå¯†åº¦çš„å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ ·æœ¬é›†ä¸­çš„ç‚¹åˆ’åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼š</p><ul><li><strong>æ ¸å¿ƒç‚¹</strong>ï¼šåœ¨åŠå¾„råŒºåŸŸå†…ï¼Œå«æœ‰è¶…è¿‡MinPtsæ•°ç›®ï¼ˆæœ€å°æ•°ç›®ï¼‰çš„ç‚¹ï¼Œç§°ä¸ºæ ¸å¿ƒç‚¹ï¼›</li><li><strong>è¾¹ç•Œç‚¹</strong>ï¼šåœ¨åŠå¾„råŒºåŸŸå†…ï¼Œç‚¹çš„æ•°é‡å°äºMinPtsæ•°ç›®ï¼Œä½†æ˜¯æ˜¯æ ¸å¿ƒç‚¹çš„ç›´æ¥é‚»å±…ï¼›</li><li><strong>å™ªå£°ç‚¹</strong>ï¼šæ—¢ä¸æ˜¯æ ¸å¿ƒç‚¹ä¹Ÿä¸æ˜¯è¾¹ç•Œç‚¹çš„ç‚¹</li></ul><blockquote><p>å™ªå£°ç‚¹æ˜¯ä¸ä¼šè¢«èšç±»çº³å…¥çš„ç‚¹ï¼Œè¾¹ç•Œç‚¹ä¸æ ¸å¿ƒç‚¹ç»„æˆèšç±»çš„â€œç°‡â€ã€‚</p></blockquote><p>ä¸€äº›æ¦‚å¿µï¼š</p><ul><li><strong>ç›´æ¥å¯†åº¦å¯è¾¾</strong>ï¼šåœ¨ç»™å®šä¸€ä¸ªå¯¹è±¡é›†åˆDï¼Œå¦‚æœpåœ¨qçš„ré¢†åŸŸå†…ï¼Œä¸”<strong>qæ˜¯ä¸€ä¸ªæ ¸å¿ƒç‚¹å¯¹è±¡</strong>ï¼Œåˆ™ç§°å¯¹è±¡pä»å¯¹è±¡qå‡ºå‘æ—¶æ˜¯ç›´æ¥å¯†åº¦å¯è¾¾çš„</li><li><strong>å¯†åº¦å¯è¾¾</strong>ï¼šåœ¨ç»™å®šå¯¹è±¡é›†åˆDä¸­ï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ªå¯¹è±¡é“¾qâ€“&gt;eâ€“&gt;aâ€“&gt;kâ€“&gt;lâ€“&gt;pï¼Œä»»æ„ç›¸é‚»ä¸¤ä¸ªå¯¹è±¡é—´éƒ½æ˜¯ç›´æ¥å¯†åº¦å¯è¾¾çš„ï¼Œåˆ™ç§°å¯¹è±¡pæ˜¯å¯¹è±¡qå…³äºré‚»åŸŸå†…ã€MinPtsæ•°ç›®ä¸‹ï¼Œæ˜¯å¯†åº¦å¯è¾¾çš„ï¼›</li><li><strong>å¯†åº¦ç›¸è¿</strong>ï¼šå¦‚æœåœ¨å¯¹è±¡é›†åˆDä¸­å­˜åœ¨ä¸€ä¸ªå¯¹è±¡Oï¼Œä½¿å¾—å¯¹è±¡på’Œqéƒ½æ˜¯ä»Oå…³äºré‚»åŸŸå†…ã€MinPtsæ•°ç›®ä¸‹ï¼Œæ˜¯å¯†åº¦ç›¸è¿çš„ã€‚</li></ul><blockquote><p>æ ¸å¿ƒç‚¹èƒ½å¤Ÿè¿é€šï¼ˆå¯†åº¦å¯è¾¾ï¼‰ï¼Œå®ƒä»¬æ„æˆçš„ä»¥rä¸ºåŠå¾„çš„åœ†å½¢é‚»åŸŸç›¸äº’è¿æ¥æˆ–é‡å ï¼Œè¿™äº›è¿é€šçš„æ ¸å¿ƒç‚¹åŠå…¶æ‰€å¤„çš„é‚»åŸŸå†…çš„å…¨éƒ¨ç‚¹æ„æˆä¸€ä¸ªç°‡ã€‚</p></blockquote><h3 id="2-åŸç†"><a href="#2-åŸç†" class="headerlink" title="2 åŸç†"></a>2 åŸç†</h3><ol><li>DBSCANé€šè¿‡æ£€æŸ¥æ•°æ®é›†ä¸­æ¯ä¸ªç‚¹çš„ré‚»åŸŸæ¥æœç´¢ç°‡ï¼Œå¦‚æœç‚¹pçš„ré‚»åŸŸåŒ…å«å¤šäºMinPtsä¸ªç‚¹ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªä»¥pä¸ºæ ¸å¿ƒå¯¹è±¡çš„ç°‡ï¼›</li><li>ç„¶åï¼Œ DBSCANè¿­ä»£çš„èšé›†ä»è¿™äº›æ ¸å¿ƒå¯¹è±¡ç›´æ¥å¯†åº¦å¯è¾¾çš„å¯¹è±¡ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯èƒ½æ¶‰åŠä¸€äº›å¯†åº¦å¯è¾¾ç°‡çš„åˆå¹¶ï¼›</li><li>å½“æ²¡æœ‰æ–°çš„å¸¦ä½ æ·»åŠ åˆ°ä»»ä½•ç°‡æ—¶ï¼Œè¿­ä»£è¿‡ç¨‹ç»“æŸã€‚</li></ol><p>ä¼˜ç¼ºç‚¹ï¼š</p><ul><li><p>ä¼˜ç‚¹ï¼šåŸºäºå¯†åº¦å®šä¹‰ï¼Œå¯ä»¥å¯¹æŠ—å™ªå£°ï¼Œèƒ½å¤„ç†ä»»æ„å½¢çŠ¶å’Œå¤§å°çš„ç°‡</p></li><li><p>ç¼ºç‚¹ï¼šå½“ç°‡çš„å¯†åº¦å˜åŒ–å¤ªå¤§æ—¶å€™ï¼Œèšç±»å¾—åˆ°çš„ç»“æœä¼šä¸ç†æƒ³ï¼›å¯¹äºé«˜ç»´é—®é¢˜ï¼Œå¯†åº¦å®šä¹‰ä¹Ÿæ˜¯ä¸€ä¸ªæ¯”è¾ƒéº»çƒ¦çš„é—®é¢˜ã€‚</p></li></ul><h3 id="3-å®ç°"><a href="#3-å®ç°" class="headerlink" title="3 å®ç°"></a>3 å®ç°</h3><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">from</span> sklearn <span class="token keyword">import</span> datasets<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>colors<span class="token comment" spellcheck="true"># åˆ›å»ºFigure</span>fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># ç”¨æ¥æ­£å¸¸æ˜¾ç¤ºä¸­æ–‡æ ‡ç­¾</span>matplotlib<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>u<span class="token string">'SimHei'</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true"># ç”¨æ¥æ­£å¸¸æ˜¾ç¤ºè´Ÿå·</span>matplotlib<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>X1<span class="token punctuation">,</span> y1 <span class="token operator">=</span> datasets<span class="token punctuation">.</span>make_circles<span class="token punctuation">(</span>n_samples<span class="token operator">=</span><span class="token number">5000</span><span class="token punctuation">,</span> factor<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">6</span><span class="token punctuation">,</span>                                      noise<span class="token operator">=</span><span class="token punctuation">.</span><span class="token number">05</span><span class="token punctuation">)</span>X2<span class="token punctuation">,</span> y2 <span class="token operator">=</span> datasets<span class="token punctuation">.</span>make_blobs<span class="token punctuation">(</span>n_samples<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">,</span> n_features<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>                             centers<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1.2</span><span class="token punctuation">,</span><span class="token number">1.2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> cluster_std<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>random_state<span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># åŸå§‹ç‚¹çš„åˆ†å¸ƒ</span>ax1 <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">311</span><span class="token punctuation">)</span>X <span class="token operator">=</span> np<span class="token punctuation">.</span>concatenate<span class="token punctuation">(</span><span class="token punctuation">(</span>X1<span class="token punctuation">,</span> X2<span class="token punctuation">)</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>X<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> X<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> marker<span class="token operator">=</span><span class="token string">'o'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span>u<span class="token string">'åŸå§‹æ•°æ®åˆ†å¸ƒ'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>sca<span class="token punctuation">(</span>ax1<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># K-meansèšç±»</span><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>cluster <span class="token keyword">import</span> KMeansax2 <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">312</span><span class="token punctuation">)</span>y_pred <span class="token operator">=</span> KMeans<span class="token punctuation">(</span>n_clusters<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> random_state<span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fit_predict<span class="token punctuation">(</span>X<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>X<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> X<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> c<span class="token operator">=</span>y_pred<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span>u<span class="token string">'K-meansèšç±»'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>sca<span class="token punctuation">(</span>ax2<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># DBSCANèšç±»</span><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>cluster <span class="token keyword">import</span> DBSCANax3 <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">313</span><span class="token punctuation">)</span>y_pred <span class="token operator">=</span> DBSCAN<span class="token punctuation">(</span>eps <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">,</span> min_samples <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fit_predict<span class="token punctuation">(</span>X<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>X<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> X<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> c<span class="token operator">=</span>y_pred<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span>u<span class="token string">'DBSCANèšç±»'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>sca<span class="token punctuation">(</span>ax3<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="PCAä¸»æˆåˆ†åˆ†æ"><a href="#PCAä¸»æˆåˆ†åˆ†æ" class="headerlink" title="PCAä¸»æˆåˆ†åˆ†æ"></a>PCAä¸»æˆåˆ†åˆ†æ</h1><p>Principal Component Analysisï¼šé™ç»´ä¸­æœ€å¸¸ç”¨çš„ä¸€ç§æ‰‹æ®µ</p><h2 id="1-åŸºå˜æ¢"><a href="#1-åŸºå˜æ¢" class="headerlink" title="1 åŸºå˜æ¢"></a>1 åŸºå˜æ¢</h2><p>ç›®æ ‡ï¼šæå–æœ€æœ‰ä»·å€¼çš„ä¿¡æ¯ï¼ˆåŸºäºæ–¹å·®ï¼‰</p><ul><li><p>åŸºæ¦‚å¿µï¼šä¾‹å¦‚åœ¨äºŒç»´åæ ‡ç³»ä¸­ï¼Œå‘é‡ï¼ˆ3ï¼Œ4ï¼‰ä¹Ÿå¯è¡¨ç¤ºä¸ºçº¿æ€§ç»„åˆ$x(1, 0) + y(0, 1)$ï¼Œè€Œ$(0,1)(1,0)$å«åšäºŒç»´ç©ºé—´çš„ä¸€ç»„åŸºã€‚</p></li><li><p>åŸºå˜æ¢</p><ul><li><p>è¦æ±‚ï¼šåŸºæ˜¯æ­£äº¤çš„ï¼ˆå†…ç§¯/ç‚¹ç§¯ä¸º0ï¼Œæˆ–è€…è¯´äº’ç›¸å‚ç›´ï¼Œçº¿æ€§æ— å…³ï¼‰</p></li><li><p>å˜æ¢ï¼šæ•°æ®ä¸ç¬¬ä¸€ä¸ªåŸºåšå†…ç§¯è¿ç®—ï¼Œç»“æœä½œä¸ºç¬¬ä¸€ä¸ªæ–°çš„åæ ‡åˆ†é‡ï¼›æ•°æ®ä¸ç¬¬äºŒä¸ªåŸºåšå†…ç§¯è¿ç®—ï¼Œç»“æœä½œä¸ºç¬¬äºŒä¸ªæ–°çš„åæ ‡åˆ†é‡ã€‚</p></li></ul></li></ul><p>æ¯”å¦‚$(3,2)$æ˜ å°„åˆ°åŸºçš„åæ ‡ï¼š<br>$$<br>\begin{pmatrix}<br>\frac{1}{\sqrt{2}} &amp; \frac{1}{\sqrt{2}} \\<br>-\frac{1}{\sqrt{2}} &amp; \frac{1}{\sqrt{2}}<br>\end{pmatrix}<br>\begin{pmatrix}<br>3 \\<br>2<br>\end{pmatrix}<br>=<br>\begin{pmatrix}<br>\frac{5}{\sqrt 2} \\<br>-\frac{1}{\sqrt 2}<br>\end{pmatrix}<br>$$</p><ul><li>åŸºå˜æ¢ä¸€èˆ¬å…¬å¼ï¼š</li></ul><p>$$<br>\begin{pmatrix}<br>p_1 \\<br>p_2 \\<br>\vdots \\<br>p_n<br>\end{pmatrix}<br>\begin{pmatrix}<br>a_1 &amp; a_2 &amp; \cdots &amp;a_m<br>\end{pmatrix}<br>=<br>\begin{pmatrix}<br>p_1a_1 &amp; p_1a_2 &amp; \cdots &amp; p_1a_m \\<br>p_2a_1 &amp; p_2a_2 &amp; \cdots &amp; p_2a_m \\<br>\vdots &amp; \vdots &amp; \ddots &amp; \vdots \\<br>p_na_1 &amp; p_na_2 &amp; \cdots &amp; p_na_m \\<br>\end{pmatrix}<br>$$</p><blockquote><p>ç­‰å¼å·¦è¾¹çš„ä¸¤ä¸ªçŸ©é˜µä¸­ï¼Œå·¦è¾¹æ˜¯åŸºï¼Œå³è¾¹æ˜¯æ•°æ®ã€‚</p><p>ä¸¤ä¸ªçŸ©é˜µç›¸ä¹˜çš„æ„ä¹‰æ˜¯å°†å³è¾¹çš„çŸ©é˜µä¸­çš„æ¯ä¸€åˆ—åˆ—å‘é‡å˜æ¢åˆ°å·¦è¾¹çŸ©é˜µä¸­æ¯ä¸€è¡Œè¡Œå‘é‡ä¸ºåŸºæ‰€è¡¨ç¤ºçš„ç©ºé—´ä¸­å»ã€‚</p></blockquote><h2 id="2-åæ–¹å·®çŸ©é˜µ"><a href="#2-åæ–¹å·®çŸ©é˜µ" class="headerlink" title="2 åæ–¹å·®çŸ©é˜µ"></a>2 åæ–¹å·®çŸ©é˜µ</h2><p>æˆ‘ä»¬å¸Œæœ›é€‰æ‹©ä¸€ä¸ªæ–¹å‘ï¼ˆåŸºï¼‰ï¼šæ•°æ®èƒ½å¤Ÿä¿ç•™æ›´å¤šçš„åŸå§‹ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥è¯´å¸Œæœ›ç»è¿‡æŸä¸ªåŸºæŠ•å½±åçš„æŠ•å½±å€¼å°½å¯èƒ½åˆ†æ•£ã€‚ï¼ˆé›¾</p><p>æ–¹å·®ï¼š<br>$$<br>Var(a) = \frac{1}{m} \sum \limits_{i = 1}^m (a_i - \mu)^2<br>$$<br>å¯»æ‰¾ä¸€ä¸ªä¸€ç»´åŸºï¼Œä½¿å¾—æ‰€æœ‰æ•°æ®å˜æ¢ä¸ºè¿™ä¸ªåŸºä¸Šçš„åæ ‡è¡¨ç¤ºåï¼Œ<strong>æ–¹å·®å€¼æœ€å¤§</strong>ï¼ˆåˆ†æ•£ï¼‰ã€‚</p><p>åæ–¹å·®ï¼šï¼ˆå‡è®¾å‡å€¼ä¸º0æ—¶ï¼‰ï¼ˆå¯¹äºæ ‡ç­¾$a_i, b_i$ï¼Œå¦‚æœä¸¤ä¸ªç›¸ä¼¼åº¦è¶Šå¤§ï¼Œåæ–¹å·®è¶Šå¤§ï¼‰<br>$$<br>Cov(a, b) = \frac{1}{m} \sum \limits_{i = 1}^m a_ib_i<br>$$</p><blockquote><p>å¦‚æœå•çº¯é€‰æ‹©æ–¹å·®æœ€å¤§çš„æ–¹å‘ï¼Œåç»­æ–¹å‘åº”è¯¥ä¼šå’Œæ–¹å·®æœ€å¤§çš„æ–¹å‘æ¥è¿‘é‡åˆã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼šä¸ºäº†è®©ä¸¤ä¸ªå­æ®µå°½å¯èƒ½è¡¨ç¤ºæ›´å¤šçš„åŸå§‹ä¿¡æ¯ï¼Œæˆ‘ä»¬æ˜¯ä¸å¸Œæœ›ä»–ä»¬ä¹‹é—´å­˜åœ¨ï¼ˆçº¿æ€§ï¼‰ç›¸å…³æ€§çš„ã€‚</p><p>å¯ä»¥ç”¨ä¸¤ä¸ªå­—æ®µçš„åæ–¹å·®è¡¨ç¤ºç›¸å…³æ€§ï¼Œå½“åæ–¹å·®ä¸º0æ—¶ï¼Œä»£è¡¨ä¸¤ä¸ªå­—æ®µæ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚</p></blockquote><p>é¢˜æ„ï¼šå°†ä¸€ç»„Nç»´å‘é‡é™ä¸ºKç»´ï¼Œç›®æ ‡æ˜¯é€‰æ‹©Kä¸ªå•ä½çš„æ­£äº¤åŸºï¼Œä½¿åŸå§‹æ•°æ®å˜æ¢åˆ°è¿™ç»„åŸºä¸Šé¢åï¼Œå„å­—æ®µä¸¤ä¸¤ä¹‹é—´åæ–¹å·®ä¸º0ï¼Œå­—æ®µæ–¹å·®å°½å¯èƒ½å¤§ã€‚</p><p>$$<br>\text{ç‰¹å¾æ•°æ®}X =<br>\begin{pmatrix}<br>a_1 &amp; a_2 &amp; \cdots &amp; a_m \\<br>b_1 &amp; b_2 &amp; \cdots &amp; b_m<br>\end{pmatrix}<br>$$<br>åæ–¹å·®çŸ©é˜µï¼š<br>$$<br>\frac{1}{m}XX^T =<br>\begin{pmatrix}<br>\frac{1}{m}\sum \limits_{i = 1}^m a_i^2  &amp; \frac{1}{m}\sum \limits_{i = 1}^ma_ib_i \\<br>\frac{1}{m}\sum \limits_{i = 1}^m a_ib_i &amp; \frac{1}{m}\sum \limits_{i = 1}^mb_i^2<br>\end{pmatrix}<br>$$</p><blockquote><p>çŸ©é˜µå¯¹è§’çº¿ä¸Šçš„ä¸¤ä¸ªå…ƒç´ åˆ†åˆ«ä¸ºä¸¤ä¸ªå­—æ®µçš„æ–¹å·®ï¼ˆå‡è®¾å‡å€¼ä¸º0ï¼‰ï¼Œè€Œå…¶ä»–å…ƒç´ æ˜¯aå’Œbçš„åæ–¹å·®ã€‚</p></blockquote><h2 id="3-ä¼˜åŒ–"><a href="#3-ä¼˜åŒ–" class="headerlink" title="3 ä¼˜åŒ–"></a>3 ä¼˜åŒ–</h2><p>æ¥ä¸‹æ¥å°±æ˜¯å¸Œæœ›è®©åæ–¹å·®çŸ©é˜µçš„é™¤å¯¹è§’çº¿ä½ç½®çš„å…ƒç´ ä¸º0ï¼ˆåæ–¹å·®ä¸º0ï¼‰ï¼Œå°±æ˜¯è¿›è¡Œå¯¹è§’åŒ–æ“ä½œã€‚</p><p>åæ–¹å·®çŸ©é˜µå¯¹è§’åŒ–ï¼š<br>$$<br>PCP^T = \Lambda =<br>\begin{pmatrix}<br>\lambda_1 \\<br>&amp; \lambda_2 \\<br>&amp; &amp; \ddots \\<br>&amp; &amp; &amp; \lambda_n<br>\end{pmatrix}<br>$$</p><blockquote><p>ç»“è®ºï¼šä¸€ä¸ªnè¡Œnåˆ—çš„å®å¯¹ç§°çŸ©é˜µä¸€å®šå¯ä»¥æ‰¾åˆ°nä¸ªå•ä½æ­£äº¤ç‰¹å¾å‘é‡<br>$$<br>E = \begin{pmatrix} e_1 &amp; e_2 &amp; \cdots &amp; e_n\end{pmatrix}<br>$$<br>å®å¯¹ç§°çŸ©é˜µå¯ä»¥è¿›è¡Œå¯¹è§’åŒ–ï¼š<br>$$<br>ECE^T = \Lambda =<br>\begin{pmatrix}<br>\lambda_1 \\<br>&amp; \lambda_2 \\<br>&amp; &amp; \ddots \\<br>&amp; &amp; &amp; \lambda_n<br>\end{pmatrix}<br>$$</p></blockquote><p>å°†ç‰¹å¾å€¼ä»å¤§åˆ°å°æ’åˆ—ï¼Œç”¨å‰Kè¡Œç»„æˆçš„çŸ©é˜µä¹˜åŸå§‹æ•°æ®çŸ©é˜µXï¼Œå°±å¾—åˆ°é™ç»´åçš„æ•°æ®çŸ©é˜µYã€‚</p><h2 id="4-ç¤ºä¾‹"><a href="#4-ç¤ºä¾‹" class="headerlink" title="4 ç¤ºä¾‹"></a>4 ç¤ºä¾‹</h2><p>æ•°æ®ï¼ˆå…±5ä¸ªæ•°æ®ï¼Œæ¯ä¸ªæ•°æ®2ä¸ªç‰¹å¾ç‚¹ï¼‰<br>$$<br>\begin{pmatrix}<br>-1 &amp; -1 &amp; 0 &amp; 2 &amp; 0 \\<br>-2 &amp; 0 &amp; 0 &amp; 1 &amp; 1<br>\end{pmatrix}<br>$$<br>åæ–¹å·®çŸ©é˜µ<br>$$<br>C = \frac{1}{5}<br>\begin{pmatrix}<br>-1 &amp; -1 &amp; 0 &amp; 2 &amp; 0 \\<br>-2 &amp; 0 &amp; 0 &amp; 1 &amp; 1<br>\end{pmatrix}<br>\begin{pmatrix}<br>-1 &amp; -2 \\<br>-1 &amp; 0 \\<br>0 &amp; 0 \\<br>2 &amp; 1 \\<br>0 &amp; 1<br>\end{pmatrix}<br>=<br>\begin{pmatrix}<br>\frac{6}{5} &amp; \frac{4}{5} \\<br>\frac{4}{5} &amp; \frac{6}{5}<br>\end{pmatrix}<br>$$<br>ç‰¹å¾å€¼<br>$$<br>\lambda_1 = 2, \lambda_2 = \frac{2}{5}<br>$$<br>ç‰¹å¾å‘é‡<br>$$<br>c_1<br>\begin{pmatrix}<br>1 \\<br>1<br>\end{pmatrix} ,<br>c_2<br>\begin{pmatrix}<br>-1 \\<br>1<br>\end{pmatrix}<br>$$<br>å¯¹è§’åŒ–ï¼Œæˆ‘ä»¬è¦é™æˆ1ç»´ï¼Œé€‰æ‹©ï¼ˆé€‰æ‹©å‰1å¤§ï¼‰æœ€å¤§ç‰¹å¾å€¼å¯¹åº”çš„ç‰¹å¾å‘é‡$c_1$è¿™ä¸ª<br>$$<br>PCP^T =<br>\begin{pmatrix}<br>\frac{1}{\sqrt 2} &amp; \frac{1}{\sqrt 2} \\<br>-\frac{1}{\sqrt 2} &amp; \frac{1}{\sqrt 2}<br>\end{pmatrix}<br>\begin{pmatrix}<br>\frac{6}{5} &amp; \frac{4}{5} \\<br>\frac{4}{5} &amp; \frac{6}{5}<br>\end{pmatrix}<br>\begin{pmatrix}<br>\frac{1}{\sqrt 2} &amp; -\frac{1}{\sqrt 2} \\<br>\frac{1}{\sqrt 2} &amp; \frac{1}{\sqrt 2}<br>\end{pmatrix}<br>=<br>\begin{pmatrix}<br>2 &amp; 0 \\<br>0 &amp; \frac{2}{5}<br>\end{pmatrix}<br>$$<br>é™ç»´<br>$$<br>Y =<br>\begin{pmatrix}<br>\frac{1}{\sqrt 2} &amp; \frac{1}{\sqrt 2}<br>\end{pmatrix}<br>\begin{pmatrix}<br>-1 &amp; -1 &amp; 0 &amp; 2 &amp; 0 \\<br>-2 &amp; 0 &amp; 0 &amp; 1 &amp; 1<br>\end{pmatrix}<br>=<br>\begin{pmatrix}<br>-\frac{3}{\sqrt 2} &amp; -\frac{1}{\sqrt 2} &amp; 0 &amp; \frac{3}{\sqrt 2} &amp; -\frac{1}{\sqrt 2}<br>\end{pmatrix}<br>$$</p><blockquote><p>æœºå™¨å­¦ä¹ å®æˆ˜å‚è€ƒï¼š<a href="https://blog.csdn.net/weixin_42600072/category_8751294.html" target="_blank" rel="noopener">https://blog.csdn.net/weixin_42600072/category_8751294.html</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> äººå·¥æ™ºèƒ½ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ æ€»ç»“ </tag>
            
            <tag> MachineLearning </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pytorchå…¥é—¨çŸ¥è¯†æ€»ç»“</title>
      <link href="/p/1888017128.html"/>
      <url>/p/1888017128.html</url>
      
        <content type="html"><![CDATA[<h1 id="Pytorchæ·±åº¦å­¦ä¹ å…¥é—¨çŸ¥è¯†æ€»ç»“"><a href="#Pytorchæ·±åº¦å­¦ä¹ å…¥é—¨çŸ¥è¯†æ€»ç»“" class="headerlink" title="Pytorchæ·±åº¦å­¦ä¹ å…¥é—¨çŸ¥è¯†æ€»ç»“"></a>Pytorchæ·±åº¦å­¦ä¹ å…¥é—¨çŸ¥è¯†æ€»ç»“</h1><h1 id="GPUç›¸å…³"><a href="#GPUç›¸å…³" class="headerlink" title="GPUç›¸å…³"></a>GPUç›¸å…³</h1><p>æ£€æŸ¥GPUæ˜¯å¦å·¥ä½œ</p><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> torchtorch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h1 id="Dataset"><a href="#Dataset" class="headerlink" title="Dataset"></a>Dataset</h1><p>å¯ä»¥ç»§æ‰¿Datasetæ¥åˆ¶ä½œè‡ªå·±çš„æ•°æ®ç±»</p><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data <span class="token keyword">import</span> Dataset<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image<span class="token keyword">import</span> os<span class="token keyword">class</span> <span class="token class-name">MyData</span><span class="token punctuation">(</span>Dataset<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    For example:    root_dir: D:/code/data    label_dir: ants    """</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> root_dir<span class="token punctuation">,</span> label_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># å›¾ç‰‡æ ¹è·¯å¾„</span>        self<span class="token punctuation">.</span>root_dir <span class="token operator">=</span> root_dir        <span class="token comment" spellcheck="true"># å›¾ç‰‡æ ‡ç­¾åç§°</span>        self<span class="token punctuation">.</span>label_dir <span class="token operator">=</span> label_dir        <span class="token comment" spellcheck="true"># æ•°æ®æ ¹è·¯å¾„ + æ ‡ç­¾åï¼ˆæ ‡ç­¾ä¸‹å­˜æœ‰å¯¹åº”çš„å›¾ç‰‡ï¼‰</span>        self<span class="token punctuation">.</span>path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>root_dir<span class="token punctuation">,</span>label_dir<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># è·å–æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åï¼Œç”Ÿæˆåˆ—è¡¨</span>        self<span class="token punctuation">.</span>img_path <span class="token operator">=</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>self<span class="token punctuation">.</span>path<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">__getitem__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> idx<span class="token punctuation">)</span><span class="token punctuation">:</span>        img_name <span class="token operator">=</span> self<span class="token punctuation">.</span>img_path<span class="token punctuation">[</span>idx<span class="token punctuation">]</span>        img_item_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>self<span class="token punctuation">.</span>path<span class="token punctuation">,</span>img_name<span class="token punctuation">)</span>        img <span class="token operator">=</span> Image<span class="token punctuation">.</span>open<span class="token punctuation">(</span>img_item_path<span class="token punctuation">)</span>        label <span class="token operator">=</span> self<span class="token punctuation">.</span>label_dir        <span class="token keyword">return</span> img<span class="token punctuation">,</span> label    <span class="token keyword">def</span> <span class="token function">__len__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> len<span class="token punctuation">(</span>self<span class="token punctuation">.</span>img_path<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥ä½¿ç”¨ä½¿ç”¨æ•°ç»„ä¸­çš„ç´¢å¼•æ“ä½œç­‰</p><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># flower_photosä¸‹æœ‰å¤šä¸ªç›®å½•ï¼Œæ¯ä¸ªç›®å½•çš„åç§°éƒ½æ˜¯æ•°æ®çš„æ ‡ç­¾,ç„¶åæ¯ä¸ªç›®å½•ä¸‹éƒ½æœ‰è¯¥æ ‡ç­¾çš„å¯¹åº”æ•°æ®</span>root_dir <span class="token operator">=</span> <span class="token string">"D:\\code\\data\\flower_photos"</span><span class="token comment" spellcheck="true"># daisyæ•°æ®é›†</span>daisy_label_dir <span class="token operator">=</span> <span class="token string">"daisy"</span>daisy_dataset <span class="token operator">=</span> MyData<span class="token punctuation">(</span>root_dir<span class="token punctuation">,</span> daisy_label_dir<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># rosesæ•°æ®é›†</span>roses_label_dir <span class="token operator">=</span> <span class="token string">"roses"</span>roses_dataset <span class="token operator">=</span> MyData<span class="token punctuation">(</span>root_dir<span class="token punctuation">,</span> roses_label_dir<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># å¯ä»¥è¿›è¡Œæ•°æ®é›†åˆå¹¶æ“ä½œ</span>dataset <span class="token operator">=</span> daisy_dataset <span class="token operator">+</span> roses_dataset<span class="token comment" spellcheck="true"># å¯ä»¥è¿›è¡Œç´¢å¼•ç´¢å¼•æ“ä½œï¼Œå–æœ€åä¸€ä¸ªæ•°æ®</span>roses_img <span class="token punctuation">,</span> label <span class="token operator">=</span> dataset<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true"># è¿”å›çš„æ•°æ®roses_imgæ˜¯PILç±»å‹</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="Tensorboard"><a href="#Tensorboard" class="headerlink" title="Tensorboard"></a>Tensorboard</h1><p>åˆå§‹åŒ–</p><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>tensorboard <span class="token keyword">import</span> SummaryWriter<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Imagewriter <span class="token operator">=</span> SummaryWriter<span class="token punctuation">(</span><span class="token string">"logs"</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># åœ¨å½“å‰ç›®å½•logsç›®å½•ä¸‹ç”Ÿæˆæ–‡ä»¶</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åéœ€è¦å¯¹writterè¿›è¡Œå…³é—­</p><pre class="line-numbers language-python"><code class="language-python">writer<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¯è§†åŒ–æŸ¥çœ‹æ–‡ä»¶ï¼Œåœ¨å½“å‰CMDå·¥ä½œç›®å½•ä¸‹ï¼ˆå¿…é¡»å…·æœ‰å¯¹åº”çš„pythonç¯å¢ƒï¼‰è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ‰“å¼€</p><pre><code>tensorboard --logdir=logs</code></pre><p>æˆ–è€…æ·»åŠ å‚æ•°æŒ‡å®šæ‰“å¼€ç«¯å£</p><pre><code>tensorboard --logdir=logs --port=6006</code></pre><h2 id="1-æ·»åŠ å•å¼ å›¾ç‰‡"><a href="#1-æ·»åŠ å•å¼ å›¾ç‰‡" class="headerlink" title="1 æ·»åŠ å•å¼ å›¾ç‰‡"></a>1 æ·»åŠ å•å¼ å›¾ç‰‡</h2><p>æ·»åŠ <code>ndarray</code>å‹å›¾ç‰‡</p><pre class="line-numbers language-python"><code class="language-python">image_path <span class="token operator">=</span> <span class="token string">"./flower_photos/daisy/5673728_71b8cb57eb.jpg"</span> <span class="token comment" spellcheck="true">#  ç”¨æˆ·éœ€è¦è‡ªå·±è®¾ç½®æˆç”µè„‘ä¸Šå›¾ç‰‡çš„è·¯å¾„</span><span class="token comment" spellcheck="true"># æ‰“å¼€å›¾ç‰‡ï¼Œè½¬åŒ–ä¸ºPILç±»å‹</span>img_PIL <span class="token operator">=</span> Image<span class="token punctuation">.</span>open<span class="token punctuation">(</span>image_path<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># å°†PILç±»å‹å›¾ç‰‡è½¬åŒ–ä¸ºnumpyå‹å›¾ç‰‡</span>img_array <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>img_PIL<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># shapeä¸ºHWC(é«˜ å®½ é¢œè‰²)</span><span class="token keyword">print</span><span class="token punctuation">(</span>img_array<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># (332, 500, 3)</span><span class="token comment" spellcheck="true"># title ä¼ å…¥å›¾ç‰‡  æ­¥é•¿  shapeå½¢å¼</span>writer<span class="token punctuation">.</span>add_image<span class="token punctuation">(</span><span class="token string">"ndarray"</span><span class="token punctuation">,</span> img_array<span class="token punctuation">,</span> global_step<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> dataformats<span class="token operator">=</span><span class="token string">"HWC"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ·»åŠ <code>tensor</code>ç±»å‹å›¾ç‰‡</p><pre class="line-numbers language-python"><code class="language-python">image_path <span class="token operator">=</span> <span class="token string">"./flower_photos/daisy/5673728_71b8cb57eb.jpg"</span> <span class="token comment" spellcheck="true">#  ç”¨æˆ·éœ€è¦è‡ªå·±è®¾ç½®æˆç”µè„‘ä¸Šå›¾ç‰‡çš„è·¯å¾„</span>img_PIL <span class="token operator">=</span> Image<span class="token punctuation">.</span>open<span class="token punctuation">(</span>image_path<span class="token punctuation">)</span>trans_totensor <span class="token operator">=</span> transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span>tensor_img <span class="token operator">=</span> trans_totensor<span class="token punctuation">(</span>img_PIL<span class="token punctuation">)</span>writer<span class="token punctuation">.</span>add_image<span class="token punctuation">(</span><span class="token string">"tensor"</span><span class="token punctuation">,</span> tensor_img<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-æ·»åŠ å…¬å¼å›¾åƒ"><a href="#2-æ·»åŠ å…¬å¼å›¾åƒ" class="headerlink" title="2 æ·»åŠ å…¬å¼å›¾åƒ"></a>2 æ·»åŠ å…¬å¼å›¾åƒ</h2><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># æ·»åŠ å‡½æ•°å›¾åƒ,æ˜¾ç¤ºå‡½æ•°å›¾åƒ</span><span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># æ ‡é¢˜ yè½´ xè½´</span>    writer<span class="token punctuation">.</span>add_scalar<span class="token punctuation">(</span><span class="token string">"y = x"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> i<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># value, step</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-æ·»åŠ å¤šä¸ªå›¾ç‰‡"><a href="#3-æ·»åŠ å¤šä¸ªå›¾ç‰‡" class="headerlink" title="3 æ·»åŠ å¤šä¸ªå›¾ç‰‡"></a>3 æ·»åŠ å¤šä¸ªå›¾ç‰‡</h2><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># å›¾ç‰‡å·²ç»é€šè¿‡transformè½¬å˜ä¸ºtensorç±»å‹ï¼Œtransformå¯è§ä¸‹æ–‡</span>test_data <span class="token operator">=</span> torchvision<span class="token punctuation">.</span>datasets<span class="token punctuation">.</span>CIFAR10<span class="token punctuation">(</span><span class="token string">"./dataset"</span><span class="token punctuation">,</span> train<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> transform<span class="token operator">=</span>torchvision<span class="token punctuation">.</span>transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>test_loader <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>dataset<span class="token operator">=</span>test_data<span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span> shuffle<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> num_workers<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> drop_last<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>writer <span class="token operator">=</span> SummaryWriter<span class="token punctuation">(</span><span class="token string">"logs"</span><span class="token punctuation">)</span>step <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">for</span> data <span class="token keyword">in</span> test_loader<span class="token punctuation">:</span>    imgs<span class="token punctuation">,</span> targets <span class="token operator">=</span> data    writer<span class="token punctuation">.</span>add_images<span class="token punctuation">(</span><span class="token string">"epoch"</span><span class="token punctuation">,</span> imgs<span class="token punctuation">,</span> step<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># å°†64å¼ å›¾ç‰‡æ·»åŠ è¿›å»</span>    step <span class="token operator">=</span> step <span class="token operator">+</span> <span class="token number">1</span>writer<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="Transforms"><a href="#Transforms" class="headerlink" title="Transforms"></a>Transforms</h1><pre class="line-numbers language-python"><code class="language-python">writer <span class="token operator">=</span> SummaryWriter<span class="token punctuation">(</span><span class="token string">"logs"</span><span class="token punctuation">)</span>img <span class="token operator">=</span> Image<span class="token punctuation">.</span>open<span class="token punctuation">(</span><span class="token string">"./flower_photos/daisy/5673728_71b8cb57eb.jpg"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="1-ToTensor"><a href="#1-ToTensor" class="headerlink" title="1 ToTensor"></a>1 ToTensor</h2><pre class="line-numbers language-python"><code class="language-python">trans_totensor <span class="token operator">=</span> transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span>tensor_img <span class="token operator">=</span> trans_totensor<span class="token punctuation">(</span>img<span class="token punctuation">)</span>writer<span class="token punctuation">.</span>add_image<span class="token punctuation">(</span><span class="token string">"tensor"</span><span class="token punctuation">,</span> tensor_img<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="2-Normalizeå½’ä¸€åŒ–"><a href="#2-Normalizeå½’ä¸€åŒ–" class="headerlink" title="2 Normalizeå½’ä¸€åŒ–"></a>2 Normalizeå½’ä¸€åŒ–</h2><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># output[channel] = (input[channel] - mean[channel]) / std[channel] ï¼ˆè¾“å…¥ - å¹³å‡å€¼ï¼‰ / æ ‡å‡†å·®</span><span class="token comment" spellcheck="true"># ä¸‹ä¾‹ï¼š(input - 0.5) / 0.5 = 2 * input - 1</span>trans_norm <span class="token operator">=</span> transforms<span class="token punctuation">.</span>Normalize<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>img_norm <span class="token operator">=</span> trans_norm<span class="token punctuation">(</span>tensor_img<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>img_norm<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>writer<span class="token punctuation">.</span>add_image<span class="token punctuation">(</span><span class="token string">"Normalize"</span><span class="token punctuation">,</span> img_norm<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-Resize"><a href="#3-Resize" class="headerlink" title="3 Resize"></a>3 Resize</h2><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># print(img.size)  PILå›¾ç‰‡ç±»å‹å…·æœ‰sizeå±æ€§</span><span class="token comment" spellcheck="true"># æ”¹å˜å›¾ç‰‡çš„å¤§å°</span>trans_resize <span class="token operator">=</span> transforms<span class="token punctuation">.</span>Resize<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">)</span><span class="token punctuation">)</span>img_resize <span class="token operator">=</span> trans_resize<span class="token punctuation">(</span>img<span class="token punctuation">)</span>img_resize <span class="token operator">=</span> trans_totensor<span class="token punctuation">(</span>img_resize<span class="token punctuation">)</span>writer<span class="token punctuation">.</span>add_image<span class="token punctuation">(</span><span class="token string">"resize"</span><span class="token punctuation">,</span> img_resize<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-Compose"><a href="#4-Compose" class="headerlink" title="4 Compose"></a>4 Compose</h2><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># å°†transformæ“ä½œç»„åˆèµ·æ¥</span>trans_resize_2 <span class="token operator">=</span> transforms<span class="token punctuation">.</span>Resize<span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># PIL -> PIL -> Tensor</span>trans_compose <span class="token operator">=</span> transforms<span class="token punctuation">.</span>Compose<span class="token punctuation">(</span><span class="token punctuation">[</span>trans_resize_2<span class="token punctuation">,</span> trans_totensor<span class="token punctuation">]</span><span class="token punctuation">)</span>img_resize_2 <span class="token operator">=</span> trans_compose<span class="token punctuation">(</span>img<span class="token punctuation">)</span>writer<span class="token punctuation">.</span>add_image<span class="token punctuation">(</span><span class="token string">"resize"</span><span class="token punctuation">,</span> img_resize_2<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-RandomCrop"><a href="#5-RandomCrop" class="headerlink" title="5 RandomCrop"></a>5 RandomCrop</h2><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># éšæœºè£å‰ª</span>trans_random <span class="token operator">=</span> transforms<span class="token punctuation">.</span>RandomCrop<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># éšæœºè£å‰ªæˆ100Ã—100å¤§å°çš„å›¾ç‰‡</span>trans_compose_2 <span class="token operator">=</span> transforms<span class="token punctuation">.</span>Compose<span class="token punctuation">(</span><span class="token punctuation">[</span>trans_random<span class="token punctuation">,</span> trans_totensor<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    img_crop <span class="token operator">=</span> trans_compose_2<span class="token punctuation">(</span>img<span class="token punctuation">)</span>    writer<span class="token punctuation">.</span>add_image<span class="token punctuation">(</span><span class="token string">"RandomCrop"</span><span class="token punctuation">,</span> img_crop<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="Torchvision"><a href="#Torchvision" class="headerlink" title="Torchvision"></a>Torchvision</h1><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># åœ¨datasetsä¸­è·å–å®˜æ–¹æ•°æ®é›†</span>train_data <span class="token operator">=</span> torchvision<span class="token punctuation">.</span>datasets<span class="token punctuation">.</span>CIFAR10<span class="token punctuation">(</span><span class="token string">"./dataset"</span><span class="token punctuation">,</span> train<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> transform<span class="token operator">=</span>torchvision<span class="token punctuation">.</span>transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                          download<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>test_data <span class="token operator">=</span> torchvision<span class="token punctuation">.</span>datasets<span class="token punctuation">.</span>CIFAR10<span class="token punctuation">(</span><span class="token string">"./dataset"</span><span class="token punctuation">,</span> train<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> transform<span class="token operator">=</span>torchvision<span class="token punctuation">.</span>transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                         download<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="DataLoader"><a href="#DataLoader" class="headerlink" title="DataLoader"></a>DataLoader</h1><p>åŠ è½½å¯¹åº”çš„æ•°æ®é›†ï¼Œå¯ä»¥å¯¹æ•°æ®é›†è¿›è¡Œæ‰“åŒ…ï¼Œ<code>batch_size</code> æŒ‡ä¸€æ¬¡æ‰“åŒ…å¤šå°‘å¼ å›¾ç‰‡ã€‚</p><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># åŠ è½½æ•°æ®é›† æ‰“åŒ…æ•°æ®,å‹ç¼©æ•°æ® ä¸ºç½‘ç»œæä¾›ä¸åŒçš„æ•°æ®å½¢å¼</span>train_dataloader <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>train_data<span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span> shuffle<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>test_dataloader <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>test_data<span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥å¯¹åŠ è½½åçš„æ•°æ®é›†è¿›è¡Œ<code>len</code>æ“ä½œï¼Œæ•°æ®é›†å¯è¿­ä»£ï¼Œè¿­ä»£æ—¶çš„å•ä¸ªå…ƒç´ è¿”å›çš„æ˜¯<strong>æ•°æ®</strong>å’Œ<strong>label</strong>ï¼ˆéƒ½æ˜¯ä»¥CIFAR10æ•°æ®é›†ä¸ºä¾‹ï¼‰ã€‚</p><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">for</span> imgs<span class="token punctuation">,</span> targets <span class="token keyword">in</span> train_dataloader<span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># imgs ä¸º64å¼ tensorç±»å‹çš„å›¾ç‰‡ï¼ˆè¿›è¡Œä¸Šè¿°æ“ä½œä¹‹åï¼‰</span>    <span class="token comment" spellcheck="true"># targets ä¸º64å¼ å›¾ç‰‡å¯¹åº”çš„æ ‡ç­¾labelå€¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h1 id="æŸå¤±å‡½æ•°å’Œåå‘ä¼ æ’­"><a href="#æŸå¤±å‡½æ•°å’Œåå‘ä¼ æ’­" class="headerlink" title="æŸå¤±å‡½æ•°å’Œåå‘ä¼ æ’­"></a>æŸå¤±å‡½æ•°å’Œåå‘ä¼ æ’­</h1><pre class="line-numbers language-python"><code class="language-python">loss_fn <span class="token operator">=</span> torch<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>CrossEntropyLoss<span class="token punctuation">(</span><span class="token punctuation">)</span>outputs <span class="token operator">=</span> model<span class="token punctuation">(</span>imgs<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># è®¡ç®—lossè¯¯å·®</span>loss <span class="token operator">=</span> loss_fn<span class="token punctuation">(</span>outputs<span class="token punctuation">,</span> targets<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># åå‘ä¼ æ’­</span>loss<span class="token punctuation">.</span>backward<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="GPUè®­ç»ƒ"><a href="#GPUè®­ç»ƒ" class="headerlink" title="GPUè®­ç»ƒ"></a>GPUè®­ç»ƒ</h1><p>ç½‘ç»œæ¨¡å‹ï¼ŒæŸå¤±å‡½æ•°ï¼Œè¾“å…¥æ•°æ®éƒ½è¦<code>to(device)</code>ï¼Œè§ä¸‹é¢<code>CIFAR10</code>å›¾ç‰‡åˆ†ç±»ä»£ç </p><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># è·å–è®­ç»ƒè®¾å¤‡</span>device <span class="token operator">=</span> torch<span class="token punctuation">.</span>device<span class="token punctuation">(</span><span class="token string">"cuda"</span> <span class="token keyword">if</span> torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token string">"cpu"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># ä¾‹</span>model <span class="token operator">=</span> MyModel<span class="token punctuation">(</span><span class="token punctuation">)</span>model<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="CIFAR10å›¾ç‰‡åˆ†ç±»ç»ƒä¹ "><a href="#CIFAR10å›¾ç‰‡åˆ†ç±»ç»ƒä¹ " class="headerlink" title="CIFAR10å›¾ç‰‡åˆ†ç±»ç»ƒä¹ "></a>CIFAR10å›¾ç‰‡åˆ†ç±»ç»ƒä¹ </h1><p>model.py</p><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">from</span> torch <span class="token keyword">import</span> nn<span class="token keyword">import</span> torch<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>tensorboard <span class="token keyword">import</span> SummaryWriter<span class="token keyword">class</span> <span class="token class-name">MyModel</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        super<span class="token punctuation">(</span>MyModel<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>model <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Flatten<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span><span class="token number">64</span> <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>model<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token keyword">return</span> x<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>train.py</p><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token keyword">import</span> torchvision<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data <span class="token keyword">import</span> DataLoader<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>tensorboard <span class="token keyword">import</span> SummaryWriter<span class="token keyword">from</span> model <span class="token keyword">import</span> MyModel<span class="token comment" spellcheck="true"># ä½¿ç”¨å¯¹åº”è®¾å¤‡è¿›è¡Œè®­ç»ƒ</span>device <span class="token operator">=</span> torch<span class="token punctuation">.</span>device<span class="token punctuation">(</span><span class="token string">"cuda"</span> <span class="token keyword">if</span> torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token string">"cpu"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># è·å–æ¯ä¸€ä¸ª imgæ•°æ® å’Œ label</span><span class="token comment" spellcheck="true"># è®­ç»ƒæ•°æ®é›†</span>train_data <span class="token operator">=</span> torchvision<span class="token punctuation">.</span>datasets<span class="token punctuation">.</span>CIFAR10<span class="token punctuation">(</span><span class="token string">"./dataset/CIFAR"</span><span class="token punctuation">,</span> train<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> transform<span class="token operator">=</span>torchvision<span class="token punctuation">.</span>transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                          download<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>test_data <span class="token operator">=</span> torchvision<span class="token punctuation">.</span>datasets<span class="token punctuation">.</span>CIFAR10<span class="token punctuation">(</span><span class="token string">"./dataset/CIFAR"</span><span class="token punctuation">,</span> train<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> transform<span class="token operator">=</span>torchvision<span class="token punctuation">.</span>transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                         download<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"è®­ç»ƒæ•°æ®é›†é•¿åº¦ä¸º:{}"</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>len<span class="token punctuation">(</span>train_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æµ‹è¯•æ•°æ®é›†é•¿åº¦ä¸º:{}"</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>len<span class="token punctuation">(</span>test_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># åŠ è½½æ•°æ®é›† æ‰“åŒ…æ•°æ®,å‹ç¼©æ•°æ® ä¸ºç½‘ç»œæä¾›ä¸åŒçš„æ•°æ®å½¢å¼</span>train_dataloader <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>train_data<span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span> shuffle<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>test_dataloader <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>test_data<span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span>model <span class="token operator">=</span> MyModel<span class="token punctuation">(</span><span class="token punctuation">)</span>model<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># æŸå¤±å‡½æ•°</span>loss_fn <span class="token operator">=</span> torch<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>CrossEntropyLoss<span class="token punctuation">(</span><span class="token punctuation">)</span>loss_fn<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># è®¾ç½®ä¼˜åŒ–å™¨</span>learning_rate <span class="token operator">=</span> <span class="token number">0.01</span>optimizer <span class="token operator">=</span> torch<span class="token punctuation">.</span>optim<span class="token punctuation">.</span>SGD<span class="token punctuation">(</span>model<span class="token punctuation">.</span>parameters<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> lr<span class="token operator">=</span>learning_rate<span class="token punctuation">)</span><span class="token comment" spellcheck="true"># è®¾ç½®ç½‘ç»œè®­ç»ƒå‚æ•°</span>total_train_step <span class="token operator">=</span> <span class="token number">0</span>total_test_step <span class="token operator">=</span> <span class="token number">0</span>epoch <span class="token operator">=</span> <span class="token number">5</span>writer <span class="token operator">=</span> SummaryWriter<span class="token punctuation">(</span><span class="token string">"./logs/scalar"</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>epoch<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"----å¼€å§‹ç¬¬{}è½®è®­ç»ƒ----"</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># è®­ç»ƒå¼€å§‹ å¯¹æŒ‡å®šçš„å±‚æ‰æœ‰ä½œç”¨</span>    model<span class="token punctuation">.</span>train<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> data <span class="token keyword">in</span> train_dataloader<span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># è·å–æ•°æ®</span>        imgs<span class="token punctuation">,</span> targets <span class="token operator">=</span> data        <span class="token comment" spellcheck="true"># è½¬æ¢è®­ç»ƒè®¾å¤‡</span>        imgs<span class="token punctuation">,</span> targets <span class="token operator">=</span> imgs<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span><span class="token punctuation">,</span> targets<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>        outputs <span class="token operator">=</span> model<span class="token punctuation">(</span>imgs<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># è®¡ç®—lossè¯¯å·®</span>        loss <span class="token operator">=</span> loss_fn<span class="token punctuation">(</span>outputs<span class="token punctuation">,</span> targets<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># æ¸…ç©ºæ¢¯åº¦</span>        optimizer<span class="token punctuation">.</span>zero_grad<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># åå‘ä¼ æ’­</span>        loss<span class="token punctuation">.</span>backward<span class="token punctuation">(</span><span class="token punctuation">)</span>        optimizer<span class="token punctuation">.</span>step<span class="token punctuation">(</span><span class="token punctuation">)</span>        total_train_step <span class="token operator">=</span> total_train_step <span class="token operator">+</span> <span class="token number">1</span>        <span class="token keyword">if</span> total_train_step <span class="token operator">%</span> <span class="token number">100</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"è®­ç»ƒæ¬¡æ•°ï¼š{},losså€¼ï¼š{}"</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>total_train_step<span class="token punctuation">,</span> loss<span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># æ·»åŠ itemæ˜¯ç›´æ¥è¾“å‡ºtensorå¯¹åº”çš„æ•°å­—ï¼Œä¸åŠ è¾“å‡ºtensoç±»å‹çš„æ•°å­—</span>            writer<span class="token punctuation">.</span>add_scalar<span class="token punctuation">(</span><span class="token string">"train_loss"</span><span class="token punctuation">,</span> loss<span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> total_train_step<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># æ¯æ¬¡è®­ç»ƒä¸€è½®åè·‘ä¸€è¾¹æµ‹è¯•</span>    <span class="token comment" spellcheck="true"># éªŒè¯æµ‹è¯•</span>    model<span class="token punctuation">.</span>eval<span class="token punctuation">(</span><span class="token punctuation">)</span>    total_test_loss <span class="token operator">=</span> <span class="token number">0</span>    total_accuracy <span class="token operator">=</span> <span class="token number">0</span>    <span class="token comment" spellcheck="true"># ç½‘ç»œæ¨¡å‹ä¸­çš„æ¢¯åº¦éƒ½æ²¡æœ‰ï¼Œ ä¸å‘ç”Ÿå˜åŒ–</span>    <span class="token keyword">with</span> torch<span class="token punctuation">.</span>no_grad<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> img<span class="token punctuation">,</span> target <span class="token keyword">in</span> test_data<span class="token punctuation">:</span>            img <span class="token operator">=</span> torch<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            target <span class="token operator">=</span> torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span>target<span class="token punctuation">]</span><span class="token punctuation">)</span>            img<span class="token punctuation">,</span> target <span class="token operator">=</span> img<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span><span class="token punctuation">,</span> target<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>            <span class="token comment" spellcheck="true"># è®¡ç®—è¾“å‡º</span>            output <span class="token operator">=</span> model<span class="token punctuation">(</span>img<span class="token punctuation">)</span>            loss <span class="token operator">=</span> loss_fn<span class="token punctuation">(</span>output<span class="token punctuation">,</span> target<span class="token punctuation">)</span>            total_test_loss <span class="token operator">=</span> total_test_loss <span class="token operator">+</span> loss<span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token triple-quoted-string string">"""            outputs:[0.1, 0.2] ä¸¤ä¸ªç±»åˆ«çš„æ¦‚ç‡                    [0.3, 0.4]            targets:[0, 1] ç›®æ ‡ç±»åˆ«            predict:[1, 1] é¢„æµ‹ç±»åˆ«            result :[False, True]            """</span>            <span class="token comment" spellcheck="true"># argmaxæ±‚æ¨ªå‘æœ€å¤§å€¼æ‰€åœ¨çš„ä½ç½®</span>            accuracy <span class="token operator">=</span> <span class="token punctuation">(</span>output<span class="token punctuation">.</span>argmax<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> target<span class="token punctuation">)</span><span class="token punctuation">.</span>sum<span class="token punctuation">(</span><span class="token punctuation">)</span>            total_accuracy <span class="token operator">=</span> total_accuracy <span class="token operator">+</span> accuracy    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ•´ä½“æµ‹è¯•é›†çš„lossï¼š{}"</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>total_test_loss<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ•´ä½“æ­£ç¡®ç‡ï¼š{}"</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>total_accuracy <span class="token operator">/</span> len<span class="token punctuation">(</span>test_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    writer<span class="token punctuation">.</span>add_scalar<span class="token punctuation">(</span><span class="token string">"test_loss"</span><span class="token punctuation">,</span> total_test_loss<span class="token punctuation">,</span> total_test_step<span class="token punctuation">)</span>    writer<span class="token punctuation">.</span>add_scalar<span class="token punctuation">(</span><span class="token string">"test_accuracy"</span><span class="token punctuation">,</span> total_accuracy <span class="token operator">/</span> len<span class="token punctuation">(</span>test_data<span class="token punctuation">)</span><span class="token punctuation">,</span> total_test_step<span class="token punctuation">)</span>    total_test_step <span class="token operator">=</span> total_test_step <span class="token operator">+</span> <span class="token number">1</span>    <span class="token comment" spellcheck="true"># ä¿å­˜æ¯ä¸€è½®çš„æ¨¡å‹</span>    torch<span class="token punctuation">.</span>save<span class="token punctuation">(</span>model<span class="token punctuation">,</span> <span class="token string">"./weights/model{}.pth"</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># ä¹Ÿå¯ä»¥æ–¹å¼äºŒ</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ¨¡å‹å·²ä¿å­˜"</span><span class="token punctuation">)</span>writer<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>read_data.py</p><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> os<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data <span class="token keyword">import</span> Dataset<span class="token keyword">class</span> <span class="token class-name">MyData</span><span class="token punctuation">(</span>Dataset<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> root_dir<span class="token punctuation">,</span> label<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>root_dir <span class="token operator">=</span> root_dir        self<span class="token punctuation">.</span>label <span class="token operator">=</span> label        self<span class="token punctuation">.</span>path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>root_dir<span class="token punctuation">,</span> label<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>img_names <span class="token operator">=</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>self<span class="token punctuation">.</span>path<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">__getitem__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">:</span>        img_name <span class="token operator">=</span> self<span class="token punctuation">.</span>img_names<span class="token punctuation">[</span>index<span class="token punctuation">]</span>        img_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>self<span class="token punctuation">.</span>path<span class="token punctuation">,</span> img_name<span class="token punctuation">)</span>        img <span class="token operator">=</span> Image<span class="token punctuation">.</span>open<span class="token punctuation">(</span>img_path<span class="token punctuation">)</span>        label <span class="token operator">=</span> self<span class="token punctuation">.</span>label        <span class="token keyword">return</span> img<span class="token punctuation">,</span> label    <span class="token keyword">def</span> <span class="token function">__len__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> len<span class="token punctuation">(</span>self<span class="token punctuation">.</span>img_names<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>test.py</p><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token keyword">import</span> torchvision<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image<span class="token keyword">from</span> model <span class="token keyword">import</span> MyModel<span class="token keyword">from</span> read_data <span class="token keyword">import</span> MyData<span class="token keyword">import</span> osans <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"airplane"</span><span class="token punctuation">,</span> <span class="token string">"automobile"</span><span class="token punctuation">,</span> <span class="token string">"bird"</span><span class="token punctuation">,</span> <span class="token string">"cat"</span><span class="token punctuation">,</span> <span class="token string">"deer"</span><span class="token punctuation">,</span> <span class="token string">"dog"</span><span class="token punctuation">,</span> <span class="token string">"frog"</span><span class="token punctuation">,</span> <span class="token string">"horse"</span><span class="token punctuation">,</span> <span class="token string">"ship"</span><span class="token punctuation">,</span> <span class="token string">"truck"</span><span class="token punctuation">]</span>device <span class="token operator">=</span> torch<span class="token punctuation">.</span>device<span class="token punctuation">(</span><span class="token string">"cuda"</span> <span class="token keyword">if</span> torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token string">"cpu"</span><span class="token punctuation">)</span>root_dir <span class="token operator">=</span> <span class="token string">"D:\\code\\pytorch_learning\\CIFAR10\\dataset\\val"</span>labels_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>root_dir<span class="token punctuation">)</span>trans <span class="token operator">=</span> torchvision<span class="token punctuation">.</span>transforms<span class="token punctuation">.</span>Compose<span class="token punctuation">(</span><span class="token punctuation">[</span>torchvision<span class="token punctuation">.</span>transforms<span class="token punctuation">.</span>Resize<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                        torchvision<span class="token punctuation">.</span>transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>model <span class="token operator">=</span> torch<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">"./weights/model67.8.pth"</span><span class="token punctuation">)</span>tot_num <span class="token operator">=</span> <span class="token number">0</span>tot_accuracy <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">for</span> label <span class="token keyword">in</span> labels_dir<span class="token punctuation">:</span>    cur_accuracy <span class="token operator">=</span> <span class="token number">0</span>    myData <span class="token operator">=</span> MyData<span class="token punctuation">(</span>root_dir<span class="token punctuation">,</span> label<span class="token punctuation">)</span>    tot_num <span class="token operator">+=</span> len<span class="token punctuation">(</span>myData<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"----------å½“å‰çš„å›¾ç‰‡ç±»å‹ä¸º: {} ----------"</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>label<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> img<span class="token punctuation">,</span> t_label <span class="token keyword">in</span> myData<span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># å°†å›¾ç‰‡è½¬æ¢ä¸ºä¸ºtorch.Size([3, 32, 32])</span>        img <span class="token operator">=</span> trans<span class="token punctuation">(</span>img<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># img = img.convert("RGB")</span>        img <span class="token operator">=</span> torch<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        img <span class="token operator">=</span> img<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>        model<span class="token punctuation">.</span>eval<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">with</span> torch<span class="token punctuation">.</span>no_grad<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            output <span class="token operator">=</span> model<span class="token punctuation">(</span>img<span class="token punctuation">)</span>        predict_result <span class="token operator">=</span> ans<span class="token punctuation">[</span>output<span class="token punctuation">.</span>argmax<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>        cur_accuracy <span class="token operator">+=</span> <span class="token punctuation">(</span>predict_result <span class="token operator">==</span> label<span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"é¢„æµ‹ç»“æœ: {}  "</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>predict_result<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"æ­£ç¡®"</span> <span class="token keyword">if</span> predict_result <span class="token operator">==</span> label <span class="token keyword">else</span> <span class="token string">"é”™è¯¯"</span><span class="token punctuation">)</span>    tot_accuracy <span class="token operator">+=</span> cur_accuracy    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å½“å‰ç§ç±»é¢„æµ‹å‡†ç¡®ç‡ä¸º: {}"</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>cur_accuracy <span class="token operator">/</span> len<span class="token punctuation">(</span>myData<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ€»é¢„æµ‹å‡†ç¡®ç‡ä¸º: {}"</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>tot_accuracy <span class="token operator">/</span> tot_num<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ‰€æœ‰ä»£ç ï¼š <a href="https://github.com/anda522/CIFAR10" target="_blank" rel="noopener">https://github.com/anda522/CIFAR10</a></p><p>å‚è€ƒè§†é¢‘ï¼š<a href="https://www.bilibili.com/video/BV1hE411t7RN/" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1hE411t7RN/</a></p><p>å‚è€ƒPytorchæ–‡æ¡£ï¼š<a href="https://pytorch.org/docs/stable/nn.html" target="_blank" rel="noopener">https://pytorch.org/docs/stable/nn.html</a></p></blockquote><p><img src="https://wyqz.top/medias/gzh.jpg" alt></p>]]></content>
      
      
      <categories>
          
          <category> äººå·¥æ™ºèƒ½ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pytorch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022ç‰›å®¢å¤šæ ¡è¡¥é¢˜3</title>
      <link href="/p/3182360886.html"/>
      <url>/p/3182360886.html</url>
      
        <content type="html"><![CDATA[<h1 id="2022ç‰›å®¢å¤šæ ¡3è¡¥é¢˜"><a href="#2022ç‰›å®¢å¤šæ ¡3è¡¥é¢˜" class="headerlink" title="2022ç‰›å®¢å¤šæ ¡3è¡¥é¢˜"></a><a href="https://ac.nowcoder.com/acm/contest/33188" target="_blank" rel="noopener">2022ç‰›å®¢å¤šæ ¡3è¡¥é¢˜</a></h1><h1 id="A"><a href="#A" class="headerlink" title="A"></a>A</h1><blockquote><p>ç»™å‡ºä¸¤æ£µç¼–å· $1-n$ çš„æ ‘Aå’ŒBï¼ŒAå’ŒBæ ‘ä¸Šæ¯ä¸ªèŠ‚ç‚¹å‡æœ‰ä¸€ä¸ªæƒå€¼ï¼Œç»™å‡º $k$ ä¸ªå…³é”®ç‚¹</p><p>çš„ç¼–å· $x_1â€¦x_n$ ï¼Œé—®æœ‰å¤šå°‘ç§æ–¹æ¡ˆä½¿å¾—å»æ‰æ°å¥½ä¸€ä¸ªå…³é”®ç‚¹ä½¿å¾—å‰©ä½™å…³é”®ç‚¹åœ¨æ ‘Aä¸Š</p><p>LCAçš„æƒå€¼å¤§äºæ ‘Bä¸ŠLCAçš„æƒå€¼</p></blockquote><p>è§‚å¯Ÿå’Œä¸æ–­æ¨¡æ‹Ÿå¯ä»¥å‘ç°ä¸€ç³»åˆ—çš„ç‚¹çš„LCAå¯ä»¥é€šè¿‡å‰ç¼€LCAå®ç°ã€‚</p><p>æ•…é¢„å¤„ç†å‡ºå…³é”®ç‚¹åºåˆ—çš„åœ¨æ ‘A Bä¸Šçš„å‰ç¼€LCAå’Œåç¼€LCAï¼Œæšä¸¾å»æ‰çš„å…³é”®èŠ‚ç‚¹å¹¶ä½¿ç”¨å‰åç¼€LCAç®—å‡ºå‰©ä½™èŠ‚ç‚¹çš„LCAæ¯”è¾ƒæƒå€¼å³å¯ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> ull <span class="token operator">=</span> <span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> db <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> ld <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">Min</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">></span> b<span class="token punctuation">)</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">Max</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> b<span class="token punctuation">)</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">const</span> <span class="token keyword">int</span> dx<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> dy<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">const</span> ld eps <span class="token operator">=</span> <span class="token number">1e-8</span><span class="token punctuation">;</span><span class="token keyword">struct</span> Tree <span class="token punctuation">{</span>    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> sz<span class="token punctuation">,</span> top<span class="token punctuation">,</span> dep<span class="token punctuation">,</span> parent<span class="token punctuation">,</span> in<span class="token punctuation">;</span>    <span class="token keyword">int</span> cur<span class="token punctuation">;</span>    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> e<span class="token punctuation">;</span>    <span class="token function">Tree</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">sz</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">top</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">dep</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">parent</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">e</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">in</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cur</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>        e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>        e<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">dfsSz</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">dfsHLD</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">dfsSz</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>            e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>std<span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> parent<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        sz<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">&amp;</span>v <span class="token operator">:</span> e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            parent<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> u<span class="token punctuation">;</span>            dep<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> dep<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token function">dfsSz</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>            sz<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> sz<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>sz<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">></span> sz<span class="token punctuation">[</span>e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                std<span class="token operator">::</span><span class="token function">swap</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">dfsHLD</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">)</span> <span class="token punctuation">{</span>        in<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> cur<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> v <span class="token operator">:</span> e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">==</span> e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                top<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> top<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                top<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> v<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token function">dfsHLD</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> <span class="token function">lca</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>top<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">!=</span> top<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>dep<span class="token punctuation">[</span>top<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">></span> dep<span class="token punctuation">[</span>top<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                u <span class="token operator">=</span> parent<span class="token punctuation">[</span>top<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                v <span class="token operator">=</span> parent<span class="token punctuation">[</span>top<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>dep<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">&lt;</span> dep<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> u<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> v<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> n<span class="token punctuation">,</span> k<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n <span class="token operator">>></span> k<span class="token punctuation">;</span>    vi <span class="token function">x</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> k<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        cin <span class="token operator">>></span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">--</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Tree <span class="token function">A</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">B</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>    vi <span class="token function">a</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        cin <span class="token operator">>></span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> p<span class="token punctuation">;</span>        cin <span class="token operator">>></span> p<span class="token punctuation">;</span>        p<span class="token operator">--</span><span class="token punctuation">;</span>        A<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    vi <span class="token function">b</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        cin <span class="token operator">>></span> b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> p<span class="token punctuation">;</span>        cin <span class="token operator">>></span> p<span class="token punctuation">;</span>        p<span class="token operator">--</span><span class="token punctuation">;</span>        B<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    A<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    B<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    vi <span class="token function">prea</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">sufa</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">preb</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">sufb</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> k<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>            prea<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> preb<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">else</span>        <span class="token punctuation">{</span>            prea<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> A<span class="token punctuation">.</span><span class="token function">lca</span><span class="token punctuation">(</span>prea<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preb<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> B<span class="token punctuation">.</span><span class="token function">lca</span><span class="token punctuation">(</span>preb<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>            sufa<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> sufb<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">else</span>        <span class="token punctuation">{</span>            sufa<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> A<span class="token punctuation">.</span><span class="token function">lca</span><span class="token punctuation">(</span>sufa<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            sufb<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> B<span class="token punctuation">.</span><span class="token function">lca</span><span class="token punctuation">(</span>sufb<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> k<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>sufa<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">></span> b<span class="token punctuation">[</span>sufb<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                ans<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>prea<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">></span> b<span class="token punctuation">[</span>preb<span class="token punctuation">[</span>i <span class="token operator">-</span>  <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                ans<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">else</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> va <span class="token operator">=</span> A<span class="token punctuation">.</span><span class="token function">lca</span><span class="token punctuation">(</span>prea<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> sufa<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> vb <span class="token operator">=</span> B<span class="token punctuation">.</span><span class="token function">lca</span><span class="token punctuation">(</span>preb<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> sufb<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>va<span class="token punctuation">]</span> <span class="token operator">></span> b<span class="token punctuation">[</span>vb<span class="token punctuation">]</span><span class="token punctuation">)</span>                ans<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    cout <span class="token operator">&lt;&lt;</span> ans <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// cin >> t;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="C"><a href="#C" class="headerlink" title="C"></a>C</h1><blockquote><p>é¢˜æ„ï¼š ç»™å®šnä¸ªå­—ç¬¦ä¸²ï¼Œæ±‚ä¸€ä¸ªå°†ä»–ä»¬æ‹¼æ¥èµ·æ¥çš„æ–¹æ¡ˆï¼Œä½¿å¾—ç»“æœçš„å­—å…¸åºæœ€å°ã€‚</p></blockquote><p>å¯¹$n$ä¸ªå­—ç¬¦ä¸²æ’åºï¼Œ $a$ åœ¨ $b$ å‰é¢çš„æ¡ä»¶æ˜¯ $a + b &lt; b + a$ </p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> n<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>string<span class="token operator">></span> <span class="token function">s</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        cin <span class="token operator">>></span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token function">sort</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>string a<span class="token punctuation">,</span> string b<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">&lt;</span> b <span class="token operator">+</span> a<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        cout <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// cin >> t;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="F"><a href="#F" class="headerlink" title="F"></a>F</h1><blockquote><p>ç»™å®šä¸€ä¸ªnä¸ªç‚¹mæ¡è¾¹çš„æ— å‘å›¾ï¼Œæ¯æ¬¡è¯¢é—®ä¸¤ç‚¹x, yï¼Œæ±‚æ˜¯å¦å­˜åœ¨ä¸€ä¸ªnçš„æ’åˆ—ï¼Œä½¿å¾—ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºxï¼Œæœ€åä¸€ä¸ªå…ƒç´ ä¸ºyï¼Œä¸”æ’åˆ—çš„ä»»æ„ä¸€ä¸ªå‰ç¼€ã€ä»»æ„ä¸€ä¸ªå</p><p>ç¼€éƒ½è¿é€š</p></blockquote><p>è€ƒè™‘ä¸€æ¡é“¾ï¼Œé‚£ä¹ˆä¸¤ç«¯çš„é¡¶ç‚¹æ˜¯æ»¡è¶³æƒ…å†µçš„ï¼Œå¦‚æœæ˜¯å…¶ä»–çš„ä¸¤ä¸ªç‚¹é‚£ä¹ˆä¸æ»¡è¶³æƒ…å†µã€‚</p><p>è€ƒè™‘ä¸€ä¸ªç¯ï¼Œå‘ç°ç¯ä¸­çš„ä»»æ„ä¸¤ä¸ªç‚¹éƒ½æ»¡è¶³æƒ…å†µã€‚</p><p>è€ƒè™‘ä¸€ä¸ªå›¾ï¼Œå›¾ä¸­å¯èƒ½å­˜åœ¨ç¯ã€‚</p><p>é‚£ä¹ˆå¯¹æ‰€æœ‰çš„ç‚¹åŒç¼©ç‚¹ä¹‹åï¼Œå¿…é¡»æ˜¯ä¸€æ¡é“¾ï¼Œå¦‚æœä¸æ˜¯ä¸€æ¡é“¾å°±ä¸èƒ½æ»¡è¶³ã€‚é¦–å…ˆé€šè¿‡tarjanæ±‚å‡ºå‰²ç‚¹ä»¥åŠç‚¹åŒã€‚</p><p>å¦‚æœå›¾æœ¬èº«å°±ä¸è¿é€šï¼ˆå³æœ‰å¤šä¸ªè¿é€šå—ï¼‰ï¼Œä¸æ»¡è¶³ã€‚</p><p>å¦‚æœç‚¹åŒç­‰äº1ï¼Œå³æ˜¯ä¸€ä¸ªç¯ï¼Œæ»¡è¶³ã€‚</p><p>æ¥ä¸‹æ¥æ˜¯å¯¹äºä¸€èˆ¬çš„è¿é€šå›¾ï¼Œæˆ‘ä»¬å¯¹äºè¾¹ç•Œå¤„çš„ç‚¹åŒè¿›è¡Œèµ‹å€¼ï¼Œç¬¬ä¸€ä¸ªè¾¹ç•Œå¤„ç‚¹åŒéå‰²ç‚¹å…¨éƒ¨èµ‹ä¸º1ï¼Œç¬¬äºŒä¸ªè¾¹ç•Œå¤„ç‚¹åŒä¸­éå‰²ç‚¹å…¨éƒ¨èµ‹ä¸º2ï¼Œé‚£ä¹ˆè¯¢é—®æ—¶ï¼Œå¦‚æœä¸¤ä¸ªç‚¹çš„å€¼åŠ å’Œæ˜¯3ï¼Œå³å¯ä»¥æ»¡è¶³è¦æ±‚ã€‚</p><p>ä¸»è¦æ˜¯å¦‚ä½•åˆ¤æ–­æ˜¯å¦æ˜¯å¤„äºè¾¹ç•Œçš„ç‚¹åŒï¼Œè¾¹ç•Œå¤„çš„ç‚¹åŒï¼Œé‚£ä¹ˆæ­¤ç‚¹åŒä¸­çš„å‰²ç‚¹æ‰€åœ¨ç‚¹åŒåªæœ‰2ä¸ªï¼Œä¸èƒ½æœ‰å¤šä¸ªï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œå¿…ç„¶ä¸æ˜¯åœ¨è¾¹ç•Œï¼ˆå› ä¸ºå­˜åœ¨ä¸€ä¸ªå‰²ç‚¹è‡³å°‘åˆ™ä¼šå­˜åœ¨ä¸¤ä¸ªç‚¹åŒï¼‰ã€‚</p><p>ä»£ç ä¸­ä¸ºä»€ä¹ˆæ²¡æœ‰ $d = 2$</p><p>å› ä¸ºå­˜åœ¨ä»¥ä¸‹æƒ…å†µï¼š</p><p><img src="3182360886/image-20220907221918311.png" alt="æ»¡è¶³çš„æƒ…å†µ"></p><p>ä¸Šå›¾æ˜¯æ»¡è¶³æƒ…å†µçš„ï¼Œä¸­é—´çš„ç‚¹åŒè¿é€šåˆ†é‡çš„ $d = 2$ ï¼Œä½†æ˜¯è¾¹ç•Œ1å’Œ6ç‚¹éƒ½å·²ç»ç¡®å®šäº†ï¼Œå¯ä»¥é€šè¿‡è¾¹ç•Œç¡®å®šæ˜¯å¦æ»¡è¶³æƒ…å†µã€‚</p><p><img src="3182360886/image-20220907222225218.png" alt="ä¸æ»¡è¶³çš„æƒ…å†µ"></p><p>ä¸Šå›¾æ˜¯ä¸æ»¡è¶³æƒ…å†µçš„ï¼Œä¸­é—´çš„ç‚¹åŒä¸­ $d = 2$ï¼Œä½†æ˜¯è¾¹ç•Œä¹Ÿå¯ä»¥ç¡®å®šï¼ŒåŒæ ·å¯ä»¥é€šè¿‡è¾¹ç•Œæ¥åˆ¤æ–­æ˜¯å¦æ»¡è¶³æƒ…å†µã€‚</p><p>é‚£ä¹ˆå…¶ä»–æƒ…å†µä¹Ÿæ˜¯å¦‚æ­¤ï¼Œéƒ½æ˜¯å¯ä»¥é€šè¿‡è¾¹ç•Œç‚¹åŒè¿é€šåˆ†é‡æ¥åˆ¤æ–­ï¼Œ $d = 2$ å› ä¸ºç‰µæ‰¯åˆ°æœ‰æ»¡è¶³æƒ…å†µå’Œä¸æ»¡è¶³æƒ…å†µçš„ï¼Œæš‚ä¸è€ƒè™‘ï¼ˆä½†æ˜¯ä»–ä»¬å¯ä»¥é€šè¿‡è¾¹ç•Œç‚¹åŒæ¥åˆ¤æ–­ï¼‰</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> ull <span class="token operator">=</span> <span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> db <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> ld <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">Min</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">></span> b<span class="token punctuation">)</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">Max</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> b<span class="token punctuation">)</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">const</span> <span class="token keyword">int</span> dx<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> dy<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">const</span> ld eps <span class="token operator">=</span> <span class="token number">1e-8</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// sum[i] æ˜¯ç‚¹iæ‰€åœ¨ç‚¹åŒè¿é€šåˆ†é‡çš„ä¸ªæ•°</span><span class="token comment" spellcheck="true">// ans[i] æ˜¯ç‚¹iæ‰€åœ¨ç¬¬å‡ ä¸ªè¾¹ç•Œçš„ç‚¹åŒè¿é€šåˆ†é‡ä¸­</span><span class="token keyword">int</span> low<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> dfn<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> stk<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> top<span class="token punctuation">,</span> ts<span class="token punctuation">,</span> dcc_cnt<span class="token punctuation">,</span> root <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> sum<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> ans<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> dcc<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> e<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">bool</span> cut<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">tarjan</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">)</span><span class="token punctuation">{</span>    dfn<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> low<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">++</span>ts<span class="token punctuation">;</span>    stk<span class="token punctuation">[</span><span class="token operator">++</span>top<span class="token punctuation">]</span> <span class="token operator">=</span> u<span class="token punctuation">;</span>    <span class="token keyword">int</span> flag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> v <span class="token operator">:</span> e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>dfn<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">tarjan</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>            low<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>low<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">,</span> low<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>dfn<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> low<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                flag<span class="token operator">++</span><span class="token punctuation">;</span>                dcc_cnt<span class="token operator">++</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>u <span class="token operator">!=</span> root <span class="token operator">||</span> flag <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> cut<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> x<span class="token punctuation">;</span>                <span class="token keyword">do</span>                <span class="token punctuation">{</span>                    x <span class="token operator">=</span> stk<span class="token punctuation">[</span>top<span class="token operator">--</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                    sum<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>                    dcc<span class="token punctuation">[</span>dcc_cnt<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span><span class="token keyword">while</span><span class="token punctuation">(</span>x <span class="token operator">!=</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>                dcc<span class="token punctuation">[</span>dcc_cnt<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>                sum<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">else</span> low<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>low<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">,</span> dfn<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n <span class="token operator">>></span> m<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> u<span class="token punctuation">,</span> v<span class="token punctuation">;</span>        cin <span class="token operator">>></span> u <span class="token operator">>></span> v<span class="token punctuation">;</span>        e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>        e<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">tarjan</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">bool</span> is <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n <span class="token operator">&amp;&amp;</span> is<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>dfn<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            is <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>is <span class="token operator">&amp;&amp;</span> dcc_cnt <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> id <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> dcc_cnt<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> d <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>             <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> x <span class="token operator">:</span> dcc<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>cut<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span> d <span class="token operator">+</span><span class="token operator">=</span> sum<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>d <span class="token operator">></span> <span class="token number">2</span><span class="token punctuation">)</span> is <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// </span>            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>d <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ç«¯ç‚¹å¤„çš„ç‚¹åŒ</span>            <span class="token punctuation">{</span>                id<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ç«¯ç‚¹å¤„ç‚¹åŒä¸ªæ•°åŠ 1</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> x <span class="token operator">:</span> dcc<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>cut<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span>                        ans<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> id<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// æ­¤ç‚¹åŒä¸­éå‰²ç‚¹èµ‹å€¼</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> q<span class="token punctuation">;</span>    cin <span class="token operator">>></span> q<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>q<span class="token operator">--</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> x<span class="token punctuation">,</span> y<span class="token punctuation">;</span>        cin <span class="token operator">>></span> x <span class="token operator">>></span> y<span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>is<span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"NO\n"</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>dcc_cnt <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"YES\n"</span><span class="token punctuation">;</span>        <span class="token keyword">else</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>ans<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span> ans<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"YES\n"</span><span class="token punctuation">;</span>            <span class="token keyword">else</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"NO\n"</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// cin >> t;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="H"><a href="#H" class="headerlink" title="H"></a>H</h1><blockquote><p>ç»™å‡ºé•¿åº¦ä¸º $n$ çš„å°å†™å­—ç¬¦ä¸²Aå’Œ $k$ ä¸ªé•¿åº¦ä¸º $m$ çš„å°å†™å­—ç¬¦ä¸² $B_1â€¦B_k$ ï¼ŒBçš„æ¯ä¸ªä½ç½®æ‹¥æœ‰ç»Ÿä¸€çš„æƒå€¼ $v_1â€¦v_m$ ï¼Œå¯¹äºæ¯ä¸ª $B_i$ æ±‚æœ€å¤§å’ŒåŒºé—´æ»¡è¶³è¯¥åŒºé—´æ„æˆçš„å­—ç¬¦ä¸²æ˜¯Açš„å­ä¸²ï¼ˆç©ºåŒºé—´åˆæ³•ï¼‰ã€‚</p></blockquote><p>å¯ä»¥å°†é—®é¢˜è¿›è¡Œè½¬åŒ–ï¼Œç›¸å½“äºå¯¹ $B_i$ çš„æ¯ä¸ªä½ç½®æ±‚å‡ºå®ƒä½œä¸ºç»“æŸä½ç½®åœ¨ A ä¸­çš„æœ€é•¿å­ä¸²é•¿åº¦ï¼Œç„¶ååœ¨è¯¥åŒºé—´æ±‚æœ€å¤§å­æ®µå’Œï¼Œæ‰€æœ‰ä½ç½®çš„æœ€å¤§å€¼å³ä¸ºç­”æ¡ˆã€‚</p><p>å¯¹äºæ¯ä¸ªä½ç½®çš„æœ€é•¿å­ä¸²ï¼Œå¯ä»¥å¯¹ A å»ºåç¼€è‡ªåŠ¨æœºï¼Œç„¶å $B_i$ ä»å·¦å¾€å³åœ¨Açš„åç¼€è‡ªåŠ¨æœºä¸Šè½¬ç§»ï¼Œå¦‚æœå½“å‰èŠ‚ç‚¹æ— æ³•è½¬ç§»åˆ™è·³è‡³çˆ¶äº²èŠ‚ç‚¹ï¼ˆè¡¨ç¤ºå»æ‰ä¸€ä¸ªå‰ç¼€å­—ç¬¦å†æ¬¡è¿›è¡ŒåŒ¹é…ï¼‰ï¼Œæœ€åæ— æ³•è½¬ç§»åˆ™é•¿åº¦ä¸º 0 ï¼Œè½¬ç§»æˆåŠŸåˆ™ä¸ºè½¬ç§»å‰èŠ‚ç‚¹çš„æœ€å¤§é•¿åº¦<strong>åŠ ä¸€</strong>ã€‚</p><p>æœ€å¤§å­æ®µå’Œå¯ä»¥é€šè¿‡å‰ç¼€å’Œä¸STè¡¨æ±‚ï¼ŒBä¸­æ»¡è¶³æ˜¯Açš„å­ä¸²çš„åŒºé—´ä¸º $[l, r]$ æ—¶ï¼Œ åˆ™æœ€å¤§å­æ®µå’Œå¯ä»¥é€šè¿‡ $s[r] - min(s[j]), l \leq j \lt r$ ä¸æ–­è¿›è¡Œæ›´æ–°ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> ull <span class="token operator">=</span> <span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> db <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> ld <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">Min</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">></span> b<span class="token punctuation">)</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">Max</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> b<span class="token punctuation">)</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">const</span> <span class="token keyword">int</span> dx<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> dy<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">const</span> ld eps <span class="token operator">=</span> <span class="token number">1e-8</span><span class="token punctuation">;</span><span class="token keyword">struct</span> SuffixAutomaton <span class="token punctuation">{</span>    <span class="token keyword">static</span> <span class="token keyword">constexpr</span> <span class="token keyword">int</span> ALPHABET_SIZE <span class="token operator">=</span> <span class="token number">26</span><span class="token punctuation">,</span> N <span class="token operator">=</span> <span class="token number">1e5</span><span class="token punctuation">;</span>    <span class="token keyword">struct</span> Node <span class="token punctuation">{</span>        <span class="token keyword">int</span> len<span class="token punctuation">;</span>        <span class="token keyword">int</span> link<span class="token punctuation">;</span>        <span class="token keyword">int</span> next<span class="token punctuation">[</span>ALPHABET_SIZE<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token function">Node</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">len</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">link</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> next<span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token punctuation">}</span> t<span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> N<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> cntNodes<span class="token punctuation">;</span>    <span class="token function">SuffixAutomaton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        cntNodes <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        std<span class="token operator">::</span><span class="token function">fill</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">,</span> t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>next <span class="token operator">+</span> ALPHABET_SIZE<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>len <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span>string s<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> p <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> x <span class="token operator">:</span> s<span class="token punctuation">)</span>            p <span class="token operator">=</span> <span class="token function">extend</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> x <span class="token operator">-</span> <span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>    <span class="token keyword">int</span> <span class="token function">extend</span><span class="token punctuation">(</span><span class="token keyword">int</span> p<span class="token punctuation">,</span> <span class="token keyword">int</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span> q <span class="token operator">=</span> t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">.</span>len <span class="token operator">==</span> t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> q<span class="token punctuation">;</span>            <span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token operator">++</span>cntNodes<span class="token punctuation">;</span>            t<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">.</span>len <span class="token operator">=</span> t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            t<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">.</span>link <span class="token operator">=</span> t<span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">.</span>link<span class="token punctuation">;</span>            std<span class="token operator">::</span><span class="token function">copy</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">,</span> t<span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">.</span>next <span class="token operator">+</span> ALPHABET_SIZE<span class="token punctuation">,</span> t<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>            t<span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">.</span>link <span class="token operator">=</span> r<span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">[</span>c<span class="token punctuation">]</span> <span class="token operator">==</span> q<span class="token punctuation">)</span> <span class="token punctuation">{</span>                t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">[</span>c<span class="token punctuation">]</span> <span class="token operator">=</span> r<span class="token punctuation">;</span>                p <span class="token operator">=</span> t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>link<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> r<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">int</span> cur <span class="token operator">=</span> <span class="token operator">++</span>cntNodes<span class="token punctuation">;</span>        t<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>len <span class="token operator">=</span> t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">[</span>c<span class="token punctuation">]</span> <span class="token operator">=</span> cur<span class="token punctuation">;</span>            p <span class="token operator">=</span> t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>link<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        t<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>link <span class="token operator">=</span> <span class="token function">extend</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> cur<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>sam<span class="token punctuation">;</span>ll f<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> lg<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>    lg<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        lg<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> lg<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i <span class="token operator">&amp;</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> lg<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> j<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> f<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>ll <span class="token function">query</span><span class="token punctuation">(</span><span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> k <span class="token operator">=</span> lg<span class="token punctuation">[</span>r <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">min</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> f<span class="token punctuation">[</span>r <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> k<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">,</span> k<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n <span class="token operator">>></span> m <span class="token operator">>></span> k<span class="token punctuation">;</span>    string s<span class="token punctuation">;</span>    cin <span class="token operator">>></span> s<span class="token punctuation">;</span>    sam<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        cin <span class="token operator">>></span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> a<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">init</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>k<span class="token operator">--</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        string t<span class="token punctuation">;</span>        cin <span class="token operator">>></span> t<span class="token punctuation">;</span>        t <span class="token operator">=</span> <span class="token string">" "</span> <span class="token operator">+</span> t<span class="token punctuation">;</span>        <span class="token keyword">int</span> p <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> c <span class="token operator">=</span> t<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token string">'a'</span><span class="token punctuation">;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>p <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>sam<span class="token punctuation">.</span>t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span>                p <span class="token operator">=</span> sam<span class="token punctuation">.</span>t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>link<span class="token punctuation">,</span> l <span class="token operator">=</span> sam<span class="token punctuation">.</span>t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>len<span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                p <span class="token operator">=</span> sam<span class="token punctuation">.</span>t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">,</span> l<span class="token operator">++</span><span class="token punctuation">;</span>                <span class="token function">Max</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token function">query</span><span class="token punctuation">(</span>i <span class="token operator">-</span> l<span class="token punctuation">,</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span> p <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> l <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        cout <span class="token operator">&lt;&lt;</span> ans <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// cin >> t;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="J"><a href="#J" class="headerlink" title="J"></a>J</h1><blockquote><p>ç»™å®šä¸€ä¸ªåŸå¸‚æœ‰è‹¥å¹²åå­—è·¯å£ï¼Œå³è½¬ä¸éœ€è¦ç­‰çº¢ç¯ï¼Œç›´è¡Œã€å·¦è½¬å’Œæ‰å¤´éƒ½éœ€è¦ï¼Œæ±‚èµ·</p><p>ç‚¹åˆ°ç»ˆç‚¹æœ€å°‘ç­‰å‡ æ¬¡çº¢ç¯</p></blockquote><p>æŠŠæ¯æ¡è·¯çœ‹åšç‚¹ï¼Œåå­—è·¯å£å¤„è¿è¾¹ï¼Œå½¢æˆä¸€ä¸ªè¾¹æƒä¸º0/1çš„æœ‰å‘å›¾ã€‚</p><p>å¯ä»¥ä½¿ç”¨<code>dijkstra</code>æ±‚æœ€çŸ­è·¯ã€‚</p><p>åŒæ—¶ä¹Ÿå¯ä»¥ç”¨<code>01BFS</code>è§£å†³ï¼Œæ­¤æ—¶ä½¿ç”¨dequeç»´æŠ¤é˜Ÿåˆ—ï¼Œè¾¹æƒä¸º0æ—¶å…¥é˜Ÿå¤´ï¼Œè¾¹æƒä¸º1æ—¶å…¥é˜Ÿå°¾ã€‚</p><p>æ— è®ºä¸€ä¸ªè·¯å£å››ä¸ªæ–¹å‘æ€ä¹ˆç»™ï¼Œå› ä¸ºéƒ½æ˜¯æŒ‰ç…§é€†æ—¶é’ˆæ–¹å‘ç»™å‡ºçš„ï¼Œæ‰€ä»¥æ‰€æœ‰è·¯çš„ç›¸å¯¹å…³ç³»éƒ½å¯ä»¥å¾—åˆ°ï¼Œæ¯èµ°åˆ°ä¸€ä¸ªè·¯å£ï¼Œéƒ½ä¼šçŸ¥é“å½“å‰è·¯å£çš„å››ä¸ªæ–¹å‘çš„æƒ…å†µã€‚</p><p>$dis[i][j]$ ä»£è¡¨ä»èµ·ç‚¹çš„è·¯åˆ°è¾¾ç»ˆç‚¹è·¯çš„æœ€å°ç­‰å¾…æ•°ï¼Œå› ä¸ºç‚¹æ•°è¿‡å¤šï¼Œå°†ç¬¬äºŒç»´å‹ç¼©ï¼Œå‹ç¼©æˆå››ä¸ªæ–¹å‘ï¼Œå³åˆ°è¾¾ï¼ˆ $i$ï¼Œ$i$ è·¯å£çš„ç¬¬ $j$ ä¸ªæ–¹å‘æŒ‡å‘çš„è·¯å£ï¼‰è¿™æ¡è·¯ä¸Šã€‚</p><p>é˜Ÿåˆ—ä¸­å­˜çš„æ˜¯è·¯çš„èµ·å§‹å’Œç»“æŸä½ç½®ï¼Œä»¥åŠåˆ°è¾¾è¯¥è·¯ä¸Šçš„æœ€å°ç­‰å¾…çº¢ç¯æ•°ã€‚</p><blockquote><p>å¯¹äº01BFSçš„ç†è§£ï¼Œæˆ‘ä»¬é¦–å…ˆæ‰©å±•çš„æ˜¯è·ç¦»ç­‰äº0çš„ä½ç½®ï¼ˆè¿™æ ·è‚¯å®šæ˜¯æœ€ä¼˜çš„ï¼Œæ²¡æœ‰è·ç¦»å˜›ï¼‰ï¼Œæ‰€ä»¥å°±æ˜¯å…ˆèµ°å½“å‰çš„æœ€çŸ­è·¯ï¼Œç„¶åå†æ‰©å±•æœ‰è·ç¦»çš„è·¯ï¼Œä¹Ÿæ˜¯ä¸€å±‚ä¸€å±‚çš„æ‰©å±•ã€‚</p></blockquote><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> ull <span class="token operator">=</span> <span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> db <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> ld <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">Min</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">></span> b<span class="token punctuation">)</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">Max</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> b<span class="token punctuation">)</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">const</span> <span class="token keyword">int</span> dx<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> dy<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">5e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">const</span> ld eps <span class="token operator">=</span> <span class="token number">1e-8</span><span class="token punctuation">;</span><span class="token keyword">int</span> dis<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> to<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> n<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>            cin <span class="token operator">>></span> to<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> sx<span class="token punctuation">,</span> sy<span class="token punctuation">,</span> fx<span class="token punctuation">,</span> fy<span class="token punctuation">;</span>    cin <span class="token operator">>></span> sx <span class="token operator">>></span> sy <span class="token operator">>></span> fx <span class="token operator">>></span> fy<span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>dis<span class="token punctuation">,</span> <span class="token number">0x3f</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span> dis<span class="token punctuation">)</span><span class="token punctuation">;</span>    deque<span class="token operator">&lt;</span>array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">>></span> dq<span class="token punctuation">;</span>    dq<span class="token punctuation">.</span><span class="token function">push_front</span><span class="token punctuation">(</span><span class="token punctuation">{</span>sx<span class="token punctuation">,</span> sy<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>dq<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">auto</span> t <span class="token operator">=</span> dq<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        dq<span class="token punctuation">.</span><span class="token function">pop_front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> x <span class="token operator">=</span> t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y <span class="token operator">=</span> t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> w <span class="token operator">=</span> t<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>y<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> id <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> y<span class="token punctuation">)</span>                id <span class="token operator">=</span> i<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>dis<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">></span> w<span class="token punctuation">)</span>            dis<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> w<span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> x<span class="token punctuation">)</span>                id <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">4</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> id<span class="token punctuation">)</span>                dq<span class="token punctuation">.</span><span class="token function">push_front</span><span class="token punctuation">(</span><span class="token punctuation">{</span>y<span class="token punctuation">,</span> to<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> w<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">else</span> dq<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token punctuation">{</span>y<span class="token punctuation">,</span> to<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> w <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> id <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">[</span>fx<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> fy<span class="token punctuation">)</span>            id <span class="token operator">=</span> i<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>dis<span class="token punctuation">[</span>fx<span class="token punctuation">]</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"-1\n"</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> cout <span class="token operator">&lt;&lt;</span> dis<span class="token punctuation">[</span>fx<span class="token punctuation">]</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// cin >> t;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å¤šæ ¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AtCoder Beginner Contest 266 A-G</title>
      <link href="/p/2022907814.html"/>
      <url>/p/2022907814.html</url>
      
        <content type="html"><![CDATA[<h1 id="AtCoder-Beginner-Contest-266-A-G"><a href="#AtCoder-Beginner-Contest-266-A-G" class="headerlink" title="AtCoder Beginner Contest 266 A-G"></a>AtCoder Beginner Contest 266 A-G</h1><h1 id="A"><a href="#A" class="headerlink" title="A"></a>A</h1><p>ç›´æ¥è¾“å‡ºå­—ç¬¦ä¸²ä¸­é—´å­—ç¬¦å³å¯ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> db <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> ld <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">Min</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">></span> b<span class="token punctuation">)</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">Max</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> b<span class="token punctuation">)</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">const</span> <span class="token keyword">int</span> dx<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> dy<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">const</span> ld eps <span class="token operator">=</span> <span class="token number">1e-8</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    string s<span class="token punctuation">;</span>    cin <span class="token operator">>></span> s<span class="token punctuation">;</span>    cout <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">[</span>s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// cin >> t;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="B"><a href="#B" class="headerlink" title="B"></a>B</h1><p>ä»¤ $m = 998244353$ ã€‚<br>$$<br>N - x = k \times m, k \in Z<br>$$</p><p>$$<br>x = N - k \times m, 0 \leq x \leq m - 1<br>$$</p><p>$$<br>x = (N \bmod m + m) \bmod m<br>$$</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> db <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> ld <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">Min</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">></span> b<span class="token punctuation">)</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">Max</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> b<span class="token punctuation">)</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">const</span> <span class="token keyword">int</span> dx<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> dy<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">998244353</span><span class="token punctuation">;</span><span class="token keyword">const</span> ld eps <span class="token operator">=</span> <span class="token number">1e-8</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// x = n - k mod</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ll n<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n<span class="token punctuation">;</span>    cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>n <span class="token operator">%</span> mod <span class="token operator">+</span> mod<span class="token punctuation">)</span> <span class="token operator">%</span> mod <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// cin >> t;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="C"><a href="#C" class="headerlink" title="C"></a>C</h1><p>ç›´æ¥æš´åŠ›åˆ¤æ–­å‰ç§¯æ˜¯å¦å°äºç­‰äº0å³å¯ã€‚</p><blockquote><p>å‰ç§¯è®¡ç®—çš„æ˜¯ä¸‰è§’å½¢é¢ç§¯ï¼Œå½“åœ¨å³æ‰‹ç³»çš„æƒ…å†µä¸‹ï¼Œ å‰ç§¯è®¡ç®—å‡ºæ¥çš„å€¼å°±æ˜¯ä¸‰è§’å½¢çš„æ­£é¢ç§¯ï¼Œå¦‚æœè®¡ç®—å‡ºçš„å€¼ä¸ºè´Ÿå€¼ï¼Œå³ä¸‰è§’å½¢ä¸å­˜åœ¨ã€‚</p><p>$A,B,C$ ä¸‰ä¸ªç‚¹ï¼Œ$\frac {\overrightarrow {AB} \times \overrightarrow {AC}}{2}$ å³ä¸ºå¯¹åº”çš„ä¸‰è§’å½¢é¢ç§¯ï¼Œ åªéœ€åˆ¤æ–­ä¸Šé¢åˆ†æ¯çš„å‰ç§¯æ˜¯å¦å°äºç­‰äº 0 å³å¯ã€‚ä¸¤ä¸ªå‘é‡åˆ†åˆ«ä¸º $(x1, y1),(x2, y2)$ ï¼Œåˆ™ $S_{\triangle ABC} = x1 \cdot y2  - x2 \cdot y1$</p></blockquote><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> db <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> ld <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">Min</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">></span> b<span class="token punctuation">)</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">Max</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> b<span class="token punctuation">)</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">const</span> <span class="token keyword">int</span> dx<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> dy<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">const</span> ld eps <span class="token operator">=</span> <span class="token number">1e-8</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span>pii<span class="token operator">></span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        cin <span class="token operator">>></span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>first <span class="token operator">>></span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        pii a <span class="token operator">=</span> <span class="token punctuation">{</span>p<span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first <span class="token operator">-</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">,</span> p<span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>second <span class="token operator">-</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">}</span><span class="token punctuation">;</span>        pii b <span class="token operator">=</span> <span class="token punctuation">{</span>p<span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first <span class="token operator">-</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">,</span> p<span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>second <span class="token operator">-</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>first <span class="token operator">*</span> b<span class="token punctuation">.</span>second <span class="token operator">-</span> b<span class="token punctuation">.</span>first <span class="token operator">*</span> a<span class="token punctuation">.</span>second <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            cout <span class="token operator">&lt;&lt;</span> <span class="token string">"No\n"</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Yes\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// cin >> t;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="D"><a href="#D" class="headerlink" title="D"></a>D</h1><p>$f[i]$ ä»£è¡¨å‰ $i$ ä¸ªè›‡ï¼Œ æŠ“äº†ç¬¬ $i$ ä¸ªï¼Œå¾—åˆ°çš„æœ€å¤§ä»·å€¼ã€‚</p><p>å¯ä»¥å‘ç°ï¼Œå½“æŠ“äº†ç¬¬ $i$ ä¸ªè›‡åï¼Œ é‚£ä¹ˆä½ç½®å¿…é¡»å¤„äº $p[i]$ å¤„ï¼Œé‚£ä¹ˆé¦–å…ˆå¯ä»¥æš´åŠ›çš„æƒ³æ€ä¹ˆè½¬ç§»ï¼Œ å°±æ˜¯æˆ‘ä»¬å¯ä»¥ä¸¤å±‚å¾ªç¯ï¼Œ å¯¹äºæ¯ä¸€ä¸ª $f[i]$ ï¼Œæˆ‘ä»¬æ‰¾å‰é¢çš„å¯ä»¥è¿›è¡Œè½¬ç§»ï¼ˆå³åœ¨æ—¶é—´é™åˆ¶å†…å¯ä»¥åˆ°è¾¾ $f[j]$ ï¼‰çš„ä½ç½® $j,j \lt i$ ï¼Œæ¯ä¸€ä¸ªä½ç½®è¿›è¡Œåˆ¤æ–­ã€‚ å¤æ‚åº¦ $O(n^2)$</p><p>ä½†æ˜¯æœ¬é¢˜æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œä½ç½®æ•°æå°‘ï¼Œåªæœ‰5ä¸ªï¼Œé‚£ä¹ˆ $i$ ä½ç½®å¾€å‰5ä¸ªä¹‹åä¸€å®šæ˜¯å¯ä»¥è½¬ç§»çš„ä½ç½®ï¼ˆåœ¨æ—¶é—´é™åˆ¶å†…ä¸€å®šå¯ä»¥åˆ°è¾¾ $i$ï¼‰ã€‚ æ‰€ä»¥æˆ‘ä»¬æš´åŠ›åˆ¤æ–­ $i$ ä½ç½®çš„å‰å‡ ä¸ªï¼Œç„¶åå¯¹æ­¤è¿›è¡Œè½¬ç§»å³å¯ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> db <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> ld <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">Min</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">></span> b<span class="token punctuation">)</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">Max</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> b<span class="token punctuation">)</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">const</span> <span class="token keyword">int</span> dx<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> dy<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">const</span> ld eps <span class="token operator">=</span> <span class="token number">1e-8</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> n<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n<span class="token punctuation">;</span>    vi <span class="token function">t</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">p</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">w</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        cin <span class="token operator">>></span> t<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">>></span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">>></span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    vl <span class="token function">f</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2e18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    f<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> i <span class="token operator">-</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> t<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">>=</span> <span class="token function">abs</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> p<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token function">Max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> f<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    ll ans <span class="token operator">=</span> <span class="token operator">*</span><span class="token function">max_element</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> f<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>ans <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> <span class="token number">0</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> cout <span class="token operator">&lt;&lt;</span> ans <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// cin >> t;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="E"><a href="#E" class="headerlink" title="E"></a>E</h1><p>$$<br>f[x] = \frac{1}{6}max(1, f[x - 1]) + \frac{1}{6}max(2, f[x - 1]) \\ + \frac{1}{6}max(3, f[x - 1]) + \frac{1}{6}max(4, f[x - 1]) \\ + \frac{1}{6}max(5, f[x - 1]) + \frac{1}{6}max(6, f[x - 1])<br>$$</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> db <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> ld <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">Min</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">></span> b<span class="token punctuation">)</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">Max</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> b<span class="token punctuation">)</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">const</span> <span class="token keyword">int</span> dx<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> dy<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">const</span> ld eps <span class="token operator">=</span> <span class="token number">1e-8</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> n<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n<span class="token punctuation">;</span>    db ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        db t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> <span class="token number">6</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>            t <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> <span class="token punctuation">(</span>db<span class="token punctuation">)</span>j<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">6</span><span class="token punctuation">;</span>        ans <span class="token operator">=</span> t<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    cout <span class="token operator">&lt;&lt;</span> fixed <span class="token operator">&lt;&lt;</span> <span class="token function">setprecision</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> ans <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// cin >> t;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="F"><a href="#F" class="headerlink" title="F"></a>F</h1><blockquote><p>ä¸€é¢—åŸºç¯æ ‘ï¼Œ qä¸ªè¯¢é—®ï¼Œ é—®ä¸¤ç‚¹ä¹‹é—´æ˜¯å¦å­˜åœ¨å•ä¸€è·¯å¾„ã€‚</p></blockquote><p>æˆ‘ä»¬é¦–å…ˆéœ€è¦æ‰¾åˆ°è¿™ä¸ªç¯ï¼Œæ ‡è®°ä¸€ä¸‹ç¯ä¸Šçš„ç‚¹ï¼Œé‚£ä¹ˆä»¥ç¯ä¸ºæ ‘æ ¹ï¼Œå•é¢—å­æ ‘ä¸Šçš„èŠ‚ç‚¹ï¼ˆé™¤ç¯ä¸Šçš„ç‚¹ï¼‰éƒ½æœ‰å•ä¸€è·¯å¾„ï¼Œæˆ‘ä»¬ä½¿ç”¨å¹¶æŸ¥é›†å°†ä»–ä»¬è¿æˆä¸€ä¸ªé›†åˆå³å¯ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> db <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> ld <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">Min</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">></span> b<span class="token punctuation">)</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">Max</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> b<span class="token punctuation">)</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">const</span> <span class="token keyword">int</span> dx<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> dy<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">const</span> ld eps <span class="token operator">=</span> <span class="token number">1e-8</span><span class="token punctuation">;</span><span class="token keyword">struct</span> DSU<span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> f<span class="token punctuation">,</span> sz<span class="token punctuation">;</span>    <span class="token function">DSU</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">sz</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">iota</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> f<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">int</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> f<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span>        <span class="token keyword">return</span> f<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">bool</span> <span class="token function">same</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">find</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token function">find</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        x <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        y <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> y<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sz<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">&lt;</span> sz<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>        f<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>        sz<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> sz<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span>        sz<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> n<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>vi<span class="token operator">></span> <span class="token function">g</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> u<span class="token punctuation">,</span> v<span class="token punctuation">;</span>        cin <span class="token operator">>></span> u <span class="token operator">>></span> v<span class="token punctuation">;</span>        u<span class="token operator">--</span><span class="token punctuation">,</span> v<span class="token operator">--</span><span class="token punctuation">;</span>        g<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>        g<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    vector<span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token operator">></span> <span class="token function">cyc</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>    vi <span class="token function">fa</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">vis</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> cur <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    function<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token operator">></span> dfs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        vis<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> cur<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> v <span class="token operator">:</span> g<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>v <span class="token operator">==</span> fa<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>vis<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                fa<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> u<span class="token punctuation">;</span>                <span class="token function">dfs</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>vis<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">&lt;</span> vis<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> u<span class="token punctuation">;</span> i <span class="token operator">!=</span> v<span class="token punctuation">;</span> i <span class="token operator">=</span> fa<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                    cyc<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>                cyc<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    DSU <span class="token function">dsu</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> j <span class="token operator">:</span> g<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>cyc<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token operator">!</span>cyc<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>                dsu<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> q<span class="token punctuation">;</span>    cin <span class="token operator">>></span> q<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>q<span class="token operator">--</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> u<span class="token punctuation">,</span> v<span class="token punctuation">;</span>        cin <span class="token operator">>></span> u <span class="token operator">>></span> v<span class="token punctuation">;</span>        u<span class="token operator">--</span><span class="token punctuation">,</span> v<span class="token operator">--</span><span class="token punctuation">;</span>        cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>dsu<span class="token punctuation">.</span><span class="token function">same</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"Yes\n"</span> <span class="token operator">:</span> <span class="token string">"No\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// cin >> t;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="G"><a href="#G" class="headerlink" title="G"></a>G</h1><blockquote><p>é—®æœ‰<code>R</code> ä¸ªå­—ç¬¦ <code>R</code>ï¼Œ<code>G</code> ä¸ªå­—ç¬¦ <code>G</code>ï¼Œ<code>B</code> ä¸ªå­—ç¬¦ <code>B</code>ï¼Œ<code>K</code> ä¸ªå­—ç¬¦ <code>RG</code>çš„å­—ç¬¦ä¸²çš„ä¸ªæ•°ã€‚</p></blockquote><p>æ’åˆ—ç»„åˆçŸ¥è¯†ã€‚</p><p>é¦–å…ˆå®‰æ’Gå’ŒBï¼Œå…±$C_{G+B}^{B}$ ç§ã€‚</p><p>ç„¶åå®‰æ’Kä¸ªRï¼Œåªèƒ½åœ¨Gçš„å‰é¢å¡«ï¼Œå…±<code>G</code>ä¸ªä½ç½®ï¼Œå‡‘æˆ<code>RG</code>ï¼Œå…± $C_G^K$ ç§ã€‚</p><p>å‰©ä¸‹äº† $R-K$ ä¸ª<code>R</code> ï¼Œéœ€è¦å¡«è¿›å»åŒæ—¶ä¿è¯<code>RG</code>çš„æ•°é‡ä¸ä¼šå¢åŠ ï¼Œé‚£ä¹ˆåªèƒ½åœ¨<code>B</code> å’Œ <code>RG</code> çš„å‰é¢ä»¥åŠæœ€åä¸€ä¸ªä½ç½®å¡«ï¼Œå…± $B+K+1$ ä¸ªä½ç½®ã€‚</p><p>å³ $B+K+1$ ä¸ªä½ç½®å¡« $R-K$ ä¸ª<code>R</code> ã€‚æˆ‘ä»¬ä½¿ç”¨éš”æ¿æ³•ï¼Œ å³ç­‰ä»·äºå°† $B+K+1 + R-K$ ä¸ª<code>R</code>åˆ†æˆ $B+K+1$ ä»½ï¼Œ ç­”æ¡ˆä¸º $C_{B+R}^{B+K}$ ç§ã€‚</p><blockquote><p>ä»¥ä¸‹ä¸ºéš”æ¿æ³•æè¿°ï¼š</p></blockquote><p><strong>ä¸€èˆ¬éš”æ¿æ³•ï¼š</strong></p><p>å°† $n$ ä¸ªç›¸åŒçš„å…ƒç´ åˆ†æˆ $k$ éƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†è‡³å°‘åˆ†å¾—ä¸€ä¸ªå…ƒç´ ï¼Œ å³åœ¨ $n-1$ ä¸ªç©ºéš™ä¸­æ’å…¥ $k-1$ ä¸ªéš”æ¿ï¼Œæƒ…å†µæ•°ä¸º<br>$$<br>C_{n-1}^{k-1}<br>$$<br>ç­‰ä»·äº $x_1+ x_2+x_3+â€¦+x_k=n, x_i \geq 1$ çš„å¯è¡Œè§£ä¸ªæ•°ã€‚</p><p><strong>æ·»å…ƒç´ éš”æ¿æ³•</strong>ï¼š</p><p>å°† $n$ ä¸ªç›¸åŒçš„å…ƒç´ åˆ†æˆ $k$ éƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†å¯ä»¥ä¸ºç©ºï¼Œ ç­‰ä»·äºæˆ‘ä»¬å…ˆè®©å…ƒç´ ä¸ªæ•°æ·»åŠ ä¸Š $k$ ä¸ªï¼Œç„¶ååœ¨ $n+k$ ä¸ªå…ƒç´ ä¸­åˆ†æˆ $k$ éƒ¨åˆ†ï¼Œ æœ€åå†åœ¨ $k$ éƒ¨åˆ†çš„æ¯ä¸€ä¸ªéƒ¨åˆ†éƒ½æ‹¿èµ°ä¸€ä¸ªå…ƒç´ ï¼Œå…±æ‹¿èµ° $k$ ä¸ªå…ƒç´ ã€‚ å³åœ¨ $n+k-1$ ä¸ªç©ºéš™ä¸­æ’å…¥ $k-1$ ä¸ªéš”æ¿ï¼Œæƒ…å†µæ•°ä¸º<br>$$<br>C_{n+k-1}^{k-1}<br>$$<br>ç­‰ä»·äº $x_1+ x_2+x_3+â€¦+x_k=n, x_i \geq 0$ çš„å¯è¡Œè§£ä¸ªæ•°ã€‚</p><blockquote><p>æ­¤æ—¶è¯¥å¼å¯ä»¥è½¬åŒ–ä¸ºä¸€èˆ¬éš”æ¿æ³•ï¼Œ æˆ‘ä»¬è®© $x_i \geq 1$ å³å¯ï¼Œæ“ä½œæ˜¯å°†æ¯ä¸€ä¸ª $x_i$ å…ƒç´ åŠ ä¸Š $1$ ï¼Œç›¸å½“äºç­‰å¼ä¸¤è¾¹åŒæ—¶åŠ äº† $k$ ï¼Œå³ $x_1+x_2+â€¦+x_k=n+k,x_i \geq 1$ ï¼Œå³å¯è½¬åŒ–ä¸ºä¸€èˆ¬éš”æ¿æ³•ã€‚</p></blockquote><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> db <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> ld <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">Min</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">></span> b<span class="token punctuation">)</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">Max</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> T b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> b<span class="token punctuation">)</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">const</span> <span class="token keyword">int</span> dx<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> dy<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">3e6</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">998244353</span><span class="token punctuation">;</span><span class="token keyword">const</span> ld eps <span class="token operator">=</span> <span class="token number">1e-8</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// assume -P &lt;= x &lt; 2P</span><span class="token keyword">int</span> <span class="token function">norm</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        x <span class="token operator">+</span><span class="token operator">=</span> mod<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">>=</span> mod<span class="token punctuation">)</span> <span class="token punctuation">{</span>        x <span class="token operator">-</span><span class="token operator">=</span> mod<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> x<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span>T <span class="token function">power</span><span class="token punctuation">(</span>T a<span class="token punctuation">,</span> ll b<span class="token punctuation">)</span> <span class="token punctuation">{</span>    T res <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> b<span class="token punctuation">;</span> b <span class="token operator">/</span><span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> a <span class="token operator">*</span><span class="token operator">=</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            res <span class="token operator">*</span><span class="token operator">=</span> a<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">struct</span> Z <span class="token punctuation">{</span>    <span class="token keyword">int</span> x<span class="token punctuation">;</span>    <span class="token function">Z</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token function">norm</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token function">Z</span><span class="token punctuation">(</span>ll x<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token function">norm</span><span class="token punctuation">(</span>x <span class="token operator">%</span> mod<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">int</span> <span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> x<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Z <span class="token keyword">operator</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">Z</span><span class="token punctuation">(</span><span class="token function">norm</span><span class="token punctuation">(</span>mod <span class="token operator">-</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Z <span class="token function">inv</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>        <span class="token function">assert</span><span class="token punctuation">(</span>x <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">power</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">,</span> mod <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Z <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">*</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        x <span class="token operator">=</span> <span class="token function">ll</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">*</span> rhs<span class="token punctuation">.</span>x <span class="token operator">%</span> mod<span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Z <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">+</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        x <span class="token operator">=</span> <span class="token function">norm</span><span class="token punctuation">(</span>x <span class="token operator">+</span> rhs<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Z <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">-</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        x <span class="token operator">=</span> <span class="token function">norm</span><span class="token punctuation">(</span>x <span class="token operator">-</span> rhs<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Z <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">/</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">*</span><span class="token operator">=</span> rhs<span class="token punctuation">.</span><span class="token function">inv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> Z <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>lhs<span class="token punctuation">,</span> <span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Z res <span class="token operator">=</span> lhs<span class="token punctuation">;</span>        res <span class="token operator">*</span><span class="token operator">=</span> rhs<span class="token punctuation">;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> Z <span class="token keyword">operator</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>lhs<span class="token punctuation">,</span> <span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Z res <span class="token operator">=</span> lhs<span class="token punctuation">;</span>        res <span class="token operator">+</span><span class="token operator">=</span> rhs<span class="token punctuation">;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> Z <span class="token keyword">operator</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>lhs<span class="token punctuation">,</span> <span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Z res <span class="token operator">=</span> lhs<span class="token punctuation">;</span>        res <span class="token operator">-</span><span class="token operator">=</span> rhs<span class="token punctuation">;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> Z <span class="token keyword">operator</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>lhs<span class="token punctuation">,</span> <span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Z res <span class="token operator">=</span> lhs<span class="token punctuation">;</span>        res <span class="token operator">/</span><span class="token operator">=</span> rhs<span class="token punctuation">;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> std<span class="token operator">::</span>istream <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">>></span><span class="token punctuation">(</span>std<span class="token operator">::</span>istream <span class="token operator">&amp;</span>is<span class="token punctuation">,</span> Z <span class="token operator">&amp;</span>a<span class="token punctuation">)</span> <span class="token punctuation">{</span>        ll v<span class="token punctuation">;</span>        is <span class="token operator">>></span> v<span class="token punctuation">;</span>        a <span class="token operator">=</span> <span class="token function">Z</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> is<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> std<span class="token operator">::</span>ostream <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>std<span class="token operator">::</span>ostream <span class="token operator">&amp;</span>os<span class="token punctuation">,</span> <span class="token keyword">const</span> Z <span class="token operator">&amp;</span>a<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> os <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> R<span class="token punctuation">,</span> G<span class="token punctuation">,</span> B<span class="token punctuation">,</span> K<span class="token punctuation">;</span>    cin <span class="token operator">>></span> R <span class="token operator">>></span> G <span class="token operator">>></span> B <span class="token operator">>></span> K<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>Z<span class="token operator">></span> <span class="token function">fac</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">invfac</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span>    fac<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        fac<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> fac<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> i<span class="token punctuation">;</span>    invfac<span class="token punctuation">[</span>N <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> fac<span class="token punctuation">[</span>N <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">inv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> N <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>        invfac<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> invfac<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> i<span class="token punctuation">;</span>    <span class="token keyword">auto</span> C <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> m<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">return</span> fac<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">*</span> invfac<span class="token punctuation">[</span>m<span class="token punctuation">]</span> <span class="token operator">*</span> invfac<span class="token punctuation">[</span>n <span class="token operator">-</span> m<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    Z ans <span class="token operator">=</span> <span class="token function">C</span><span class="token punctuation">(</span>G <span class="token operator">+</span> B<span class="token punctuation">,</span> G<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">C</span><span class="token punctuation">(</span>G<span class="token punctuation">,</span> K<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">C</span><span class="token punctuation">(</span>B <span class="token operator">+</span> R<span class="token punctuation">,</span> B <span class="token operator">+</span> K<span class="token punctuation">)</span><span class="token punctuation">;</span>    cout <span class="token operator">&lt;&lt;</span> ans <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// cin >> t;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Atcoder </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Atcoder </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022ç‰›å®¢å¤šæ ¡2è¡¥é¢˜</title>
      <link href="/p/2791995876.html"/>
      <url>/p/2791995876.html</url>
      
        <content type="html"><![CDATA[<h1 id="2022ç‰›å®¢å¤šæ ¡2è¡¥é¢˜"><a href="#2022ç‰›å®¢å¤šæ ¡2è¡¥é¢˜" class="headerlink" title="2022ç‰›å®¢å¤šæ ¡2è¡¥é¢˜"></a><a href="https://ac.nowcoder.com/acm/contest/33187" target="_blank" rel="noopener">2022ç‰›å®¢å¤šæ ¡2è¡¥é¢˜</a></h1><h1 id="G-Link-with-Monotonic-Subsequence"><a href="#G-Link-with-Monotonic-Subsequence" class="headerlink" title="G Link with Monotonic Subsequence"></a>G Link with Monotonic Subsequence</h1><p>$max(lis(p), lds(p))$ çš„ä¸‹ç•Œä¸º $\lceil \sqrt n \rceil$ </p><p>å¦‚æœ $n = k^2$ æ„é€ å‡º $(n-k+1,n-k+2,â€¦,n)(k+1,â€¦,2 \times k)(1,2,3,â€¦,k)$</p><p>è§„å¾‹ä¹Ÿå¯ä»¥é€šè¿‡æ‰“è¡¨å¾—åˆ°</p><p>æ‰“è¡¨ç¨‹åºä¸»ä½“</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    vi <span class="token function">a</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">iota</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">1e9</span><span class="token punctuation">;</span>    vi t<span class="token punctuation">;</span>    <span class="token keyword">do</span>    <span class="token punctuation">{</span>        vi <span class="token function">dpd</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">dpi</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> j<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> a<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span>                    dpd<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dpd<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dpd<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> j<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> a<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span>                    dpi<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dpi<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dpi<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> in <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> de <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            in <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>in<span class="token punctuation">,</span> dpi<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            de <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>de<span class="token punctuation">,</span> dpd<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">max</span><span class="token punctuation">(</span>in<span class="token punctuation">,</span> de<span class="token punctuation">)</span> <span class="token operator">&lt;</span> ans<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            ans <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>in<span class="token punctuation">,</span> de<span class="token punctuation">)</span><span class="token punctuation">;</span>            t <span class="token operator">=</span> a<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">next_permutation</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> x <span class="token operator">:</span> t<span class="token punctuation">)</span>        cout <span class="token operator">&lt;&lt;</span> x <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> n<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n<span class="token punctuation">;</span>    <span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token function">sqrt</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>len <span class="token operator">*</span> len <span class="token operator">!=</span> n<span class="token punctuation">)</span> len <span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> val <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">%</span> len<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        val <span class="token operator">+</span><span class="token operator">=</span> n <span class="token operator">%</span> len<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n <span class="token operator">%</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            cout <span class="token operator">&lt;&lt;</span> val<span class="token operator">--</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>        val <span class="token operator">+</span><span class="token operator">=</span> n <span class="token operator">%</span> len <span class="token operator">+</span> len<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">else</span> val <span class="token operator">+</span><span class="token operator">=</span> len<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n <span class="token operator">/</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> len<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>            cout <span class="token operator">&lt;&lt;</span> val<span class="token operator">--</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>        val <span class="token operator">+</span><span class="token operator">=</span> len <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    cin <span class="token operator">>></span> t<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="D-Link-with-Game-Glitch"><a href="#D-Link-with-Game-Glitch" class="headerlink" title="D Link with Game Glitch"></a>D Link with Game Glitch</h1><blockquote><p>nç§ç‰©å“ï¼Œmç§äº¤æ¢ï¼Œæ¯ $a_i$ ä¸ª $b_i$ ç±»ç‰©å“å¯ä»¥æ¢ $w \cdot c_i$ ä¸ª $d_i$ ç±»ç‰©å“ã€‚æ±‚æœ€å¤§çš„ w ä½¿ä¸å­˜åœ¨ä¸€ç§æ— é™äº¤æ¢çš„æ–¹å¼ã€‚</p></blockquote><p>ä» $b_i$ å‘ $d_i$ è¿ä¸€æ¡ $w \cdot c_i / a_i$ çš„è¾¹ã€‚</p><p>äºŒåˆ† $w$ ï¼Œå¦‚æœå›¾ä¸­å‡ºç°è¾¹ä¹˜ç§¯å¤§äº 1 çš„ç¯ï¼Œå³å­˜åœ¨æ— é™è½¬æ¢çš„æ–¹å¼ï¼Œå¦åˆ™ä¸å­˜åœ¨ã€‚</p><blockquote><p>å› ä¸ºè¾¹ä¹˜ç§¯è¾ƒå¤§ï¼Œéœ€è¦è½¬æ¢ä¸º $log$ è¿›è¡Œå¤„ç†ã€‚<br>$$<br>log(w_1 \cdot w_2 \cdot â€¦ \cdot w_n) = logw_1 + logw_2 + â€¦ + logw_n<br>$$<br>è¾¹æƒä¹˜ç§¯è½¬åŒ–ä¸ºè¾¹æƒlogå’Œã€‚</p><p>å³ä¸ºå­˜åœ¨è¾¹æƒå’Œå¤§äºç­‰äº0çš„ç¯å³æ˜¯æ— é™è½¬æ¢ï¼Œæˆ‘ä»¬æŠŠè¾¹æƒå–ç¬¦å·ï¼Œå³å­˜åœ¨å°äºç­‰äº0çš„ç¯å³ä¸ºæ— çº¿è½¬æ¢ã€‚æ‰€ä»¥è½¬æ¢ä¸ºåˆ¤æ–­æ˜¯å¦å­˜åœ¨è´Ÿç¯ã€‚</p></blockquote><p>åˆ¤æ–­è´Ÿç¯ä½¿ç”¨SPFAï¼Œå»ºç«‹ä¸€ä¸ªè¶…çº§æºç‚¹ï¼Œä½¿å…¶å¯ä»¥åˆ°è¾¾æ‰€æœ‰ç‚¹ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> db <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> ld <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> tu <span class="token operator">=</span> tuple<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> db<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> dx<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> dy<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e3</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">*</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">const</span> ld eps <span class="token operator">=</span> <span class="token number">1e-8</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">;</span><span class="token keyword">int</span> e<span class="token punctuation">[</span>M<span class="token punctuation">]</span><span class="token punctuation">,</span> h<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> ne<span class="token punctuation">[</span>M<span class="token punctuation">]</span><span class="token punctuation">,</span> idx<span class="token punctuation">;</span>db w<span class="token punctuation">[</span>M<span class="token punctuation">]</span><span class="token punctuation">,</span> dis<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">,</span> db c<span class="token punctuation">)</span><span class="token punctuation">{</span>    e<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> b<span class="token punctuation">,</span> w<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">,</span> ne<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> h<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">,</span> h<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> idx<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    cin <span class="token operator">>></span> n <span class="token operator">>></span> m<span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">;</span>        cin <span class="token operator">>></span> a <span class="token operator">>></span> b <span class="token operator">>></span> c <span class="token operator">>></span> d<span class="token punctuation">;</span>        <span class="token function">add</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> d<span class="token punctuation">,</span> <span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">auto</span> check <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token punctuation">]</span><span class="token punctuation">(</span>db x<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">bool</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            dis<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1e9</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span>db<span class="token operator">></span> <span class="token function">W</span><span class="token punctuation">(</span>idx<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> idx<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> n<span class="token punctuation">)</span> W<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">else</span> W<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        vector<span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token operator">></span> <span class="token function">vis</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        vi <span class="token function">cnt</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> q<span class="token punctuation">;</span>        q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        dis<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        vis<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> u <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            vis<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">~</span>i<span class="token punctuation">;</span> i <span class="token operator">=</span> ne<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">int</span> v <span class="token operator">=</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                db ww <span class="token operator">=</span> W<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>dis<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> ww <span class="token operator">&lt;</span> dis<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    dis<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> dis<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> ww<span class="token punctuation">;</span>                    cnt<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>cnt<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">>=</span> n<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>vis<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>                    <span class="token punctuation">{</span>                        vis<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                        q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    db l <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>r <span class="token operator">-</span> l <span class="token operator">></span> eps<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        db mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">check</span><span class="token punctuation">(</span>mid<span class="token punctuation">)</span><span class="token punctuation">)</span> l <span class="token operator">=</span> mid<span class="token punctuation">;</span>        <span class="token keyword">else</span> r <span class="token operator">=</span> mid<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    cout <span class="token operator">&lt;&lt;</span> fixed <span class="token operator">&lt;&lt;</span> <span class="token function">setprecision</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> l <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// cin >> t;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="J-Link-with-Arithmetic-Progression"><a href="#J-Link-with-Arithmetic-Progression" class="headerlink" title="J  Link with Arithmetic Progression"></a>J  Link with Arithmetic Progression</h1><blockquote><p>ç»™å®šæ•°åˆ— $a_1,a_2, â€¦, a_n$ ï¼Œæ±‚ä¸€ä¸ªç­‰å·®æ•°åˆ— $b_1, b_2, â€¦,b_n$ ä½¿ $\sum \limits_{i=1}^n(b_i-a_i)^2$ æœ€å°ï¼Œè¾“å‡ºæœ€å°å€¼ã€‚</p></blockquote><p>çº¿æ€§å›å½’ï¼Œæ±‚å‡ºä¸€æ¡æ‹Ÿåˆç›´çº¿ $y = kx + b$ å¯ä»¥ä¿è¯é¢˜ç›®ä¸­æœ€å°å€¼ã€‚<br>$$<br>k = \frac{\sum \limits_{i=1}^n x_iy_i - n \overline x \overline y}{\sum \limits_{i=1}^nx_i^2 - n \overline x^2}\<br>b = \overline y - k \overline x<br>$$</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> db <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> ld <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> dx<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> dy<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">const</span> ld eps <span class="token operator">=</span> <span class="token number">1e-8</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> n<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n<span class="token punctuation">;</span>    vl <span class="token function">y</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ll sy <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> sx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        cin <span class="token operator">>></span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        sx <span class="token operator">+</span><span class="token operator">=</span> i<span class="token punctuation">,</span> sy <span class="token operator">+</span><span class="token operator">=</span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        a <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1ll</span> <span class="token operator">*</span> i <span class="token operator">*</span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        b <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1ll</span> <span class="token operator">*</span> i <span class="token operator">*</span> i<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    ld ax <span class="token operator">=</span> <span class="token punctuation">(</span>ld<span class="token punctuation">)</span>sx <span class="token operator">/</span> n<span class="token punctuation">,</span> ay <span class="token operator">=</span> <span class="token punctuation">(</span>ld<span class="token punctuation">)</span>sy <span class="token operator">/</span> n<span class="token punctuation">;</span>    ld k <span class="token operator">=</span> <span class="token punctuation">(</span>a <span class="token operator">-</span> n <span class="token operator">*</span> ax <span class="token operator">*</span> ay<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>b <span class="token operator">-</span> n <span class="token operator">*</span> ax <span class="token operator">*</span> ax<span class="token punctuation">)</span><span class="token punctuation">;</span>    ld c <span class="token operator">=</span> ay <span class="token operator">-</span> k <span class="token operator">*</span> ax<span class="token punctuation">;</span>    ld ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        ld x <span class="token operator">=</span> <span class="token punctuation">(</span>k <span class="token operator">*</span> i <span class="token operator">+</span> c <span class="token operator">-</span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>k <span class="token operator">*</span> i <span class="token operator">+</span> c <span class="token operator">-</span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ans <span class="token operator">+</span><span class="token operator">=</span> x<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    cout <span class="token operator">&lt;&lt;</span> fixed <span class="token operator">&lt;&lt;</span> <span class="token function">setprecision</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> ans <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    cin <span class="token operator">>></span> t<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="K-Link-with-Bracket-Sequence-I"><a href="#K-Link-with-Bracket-Sequence-I" class="headerlink" title="K Link with Bracket Sequence I"></a>K Link with Bracket Sequence I</h1><blockquote><p>é•¿åº¦ä¸ºnçš„æ‹¬å·åºåˆ—aæ˜¯é•¿åº¦ä¸ºmçš„åˆæ³•æ‹¬å·åºåˆ—çš„å­åºåˆ—ï¼Œç»™å®šaï¼Œæ±‚bçš„æ•°é‡ã€‚</p></blockquote><p>$f[i][j][k]$ : bä¸²æœ‰ $i$ ä¸ªå­—ç¬¦ï¼Œaä¸²ä¸­å‰ $j$ ä¸ªå­—ç¬¦æ˜¯bä¸²çš„å­åºåˆ—ï¼Œè¿˜æœ‰kä¸ªå·¦æ‹¬å·æœªåŒ¹é…çš„æ•°é‡ã€‚</p><p>è½¬ç§»ï¼š</p><p>$i+1$ ä½ç½®æ”¾ <code>(</code>ï¼Œä¸”æœ‰ $j=n$ æˆ– $s_{j+1}\neq$ <code>(</code> ï¼Œé‚£ä¹ˆæœ‰è½¬ç§» $f_{i,j,k}\rightarrow f_{i+1,j,k+1}$ã€‚</p><p>$i+1$ ä½ç½®æ”¾ <code>)</code>ï¼Œä¸”æœ‰ $j=n$ æˆ– $s_{j+1}\neq$ <code>)</code> ï¼Œä¸” $k&gt;0$ï¼Œé‚£ä¹ˆæœ‰è½¬ç§» $f_{i,j,k}\rightarrow f_{i+1,j,k-1}$ã€‚</p><p>$i+1$ ä½ç½®æ”¾ <code>(</code>ï¼Œä¸”æœ‰ $j&lt;n,s_{j+1}=$<code>(</code> ï¼Œé‚£ä¹ˆæœ‰è½¬ç§» $f_{i,j,k}\rightarrow f_{i+1,j+1,k+1}$ã€‚</p><p>$i+1$ ä½ç½®æ”¾ <code>)</code>ï¼Œä¸”æœ‰ $j&lt;n,s_{j+1}=$ <code>)</code> ï¼Œä¸”$k&gt;0$ï¼Œé‚£ä¹ˆæœ‰è½¬ç§» $f_{i,j,k}\rightarrow f_{i+1,j+1,k-1}$</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> db <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> ld <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> dx<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> dy<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">205</span><span class="token punctuation">,</span> M <span class="token operator">=</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">const</span> ld eps <span class="token operator">=</span> <span class="token number">1e-8</span><span class="token punctuation">;</span><span class="token keyword">int</span> f<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">&amp;</span>x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">+</span><span class="token operator">=</span> y<span class="token punctuation">)</span> <span class="token operator">>=</span> mod<span class="token punctuation">)</span>        x <span class="token operator">-</span><span class="token operator">=</span> mod<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">memset</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n <span class="token operator">>></span> m<span class="token punctuation">;</span>    string s<span class="token punctuation">;</span>    cin <span class="token operator">>></span> s<span class="token punctuation">;</span>    s <span class="token operator">=</span> <span class="token string">" "</span> <span class="token operator">+</span> s<span class="token punctuation">;</span>    f<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> <span class="token function">min</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;=</span> i<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">&lt;</span> m <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>j <span class="token operator">==</span> n <span class="token operator">||</span> s<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">'('</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                        <span class="token function">add</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>j <span class="token operator">==</span> n <span class="token operator">||</span> s<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">')'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                        <span class="token function">add</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">&lt;</span> n<span class="token punctuation">)</span>                    <span class="token punctuation">{</span>                        <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">&lt;</span> m <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'('</span><span class="token punctuation">)</span>                            <span class="token function">add</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">')'</span><span class="token punctuation">)</span>                            <span class="token function">add</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>    cout <span class="token operator">&lt;&lt;</span> f<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    cin <span class="token operator">>></span> t<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="L-Link-with-Level-Editor-I"><a href="#L-Link-with-Level-Editor-I" class="headerlink" title="L Link with Level Editor I"></a>L Link with Level Editor I</h1><blockquote><p>$n$ ä¸ªä¸–ç•Œï¼Œ æ¯ä¸ªä¸–ç•Œæœ‰ä¸€ä¸ª $m$ ä¸ªç‚¹çš„æ— å‘å›¾ï¼Œä»ç¬¬ä¸€ä¸ªä¸–ç•Œçš„ç¼–å·ä¸º $1$ çš„ç‚¹å‡ºå‘ï¼Œæ¯ä¸ªä¸–ç•Œå¯ä»¥ä¸åŠ¨æˆ–å¯ä»¥èµ°ä¸€æ¡è¾¹åˆ°è¾¾ä¸‹ä¸€ä¸ªç‚¹ $u$ ï¼Œç„¶åè·³åˆ°ä¸‹ä¸€ä¸ªä¸–ç•Œçš„ç‚¹ $u$ ï¼Œå¦‚æœè·³åˆ°ç‚¹ $m$ åˆ™èƒœåˆ©ã€‚æ±‚ä¸€ä¸ªæœ€çŸ­çš„å­æ®µï¼Œä½¿å¾—å…¶å¯èƒœåˆ©ã€‚</p></blockquote><p>$(i, u)$ åˆ° $(i + 1, v)$ æœ‰å…³ç³»ï¼Œå¯ä»¥è€ƒè™‘è¿›è¡ŒçŠ¶æ€è½¬ç§»ã€‚</p><p>è®¾ç½® $f[i][j]$ : è¡¨ç¤ºåˆ°è¾¾ç¬¬ $i$ ä¸ªä¸–ç•Œä¸­çš„ $j$ å·ç‚¹æœ€å°‘éœ€è¦ç»è¿‡å¤šå°‘ä¸–ç•Œ</p><p>åˆå§‹æ—¶ï¼š $f[i][1] = 1, f[i][j] = \infty$ </p><p>ä¸¤ç§è½¬ç§»æ–¹å¼ï¼š</p><ul><li>åœ¨å½“å‰ä¸–ç•ŒåŸåœ°ä¸åŠ¨ï¼Œä¹‹ååˆ°ä¸‹ä¸€ä¸ªä¸–ç•Œã€‚ $f[i][j] + 1 \rightarrow f[i+1][j] (i &lt; n)$</li><li>åœ¨å½“å‰ä¸–ç•Œèµ°ä¸€æ¡è¾¹ï¼Œä¹‹ååˆ°ä¸‹ä¸€ä¸ªä¸–ç•Œã€‚$f[i][u]+1 \rightarrow f[i+1][v] (i &lt; n),(u, v)$  å±äºç¬¬ $i$ ä¸ªä¸–ç•Œçš„ä¸€æ¡è¾¹ã€‚</li></ul><p>ç¬¬ä¸€ç»´å¯ä»¥è¿›è¡Œå‹ç¼©ï¼Œè¿›è¡Œç©ºé—´ä¼˜åŒ–ã€‚</p><blockquote><p> æ³¨æ„ï¼šè½¬ç§»çš„æ—¶å€™ï¼Œæ˜¯å…ˆè¿›è¡Œèµ°è¾¹ï¼Œç„¶åå†åˆ°ä¸‹ä¸€ä¸ªä¸–ç•Œã€‚</p><p>å½“åˆ°è¾¾ç¬¬ $i$ ä¸ªä¸–ç•Œæ—¶ï¼Œ å…ˆå¯¹ä¸Šä¸€å±‚çŠ¶æ€ $f[]$ æ•°ç»„ä¸ä¸ºæ— ç©·çš„åŠ ä¸€ï¼Œä»£è¡¨è¿›å…¥å½“å‰ä¸–ç•Œã€‚ç„¶åè¿›è¡ŒçŠ¶æ€è½¬ç§»ï¼Œè½¬ç§»æ—¶å€™åˆ©ç”¨çš„æ˜¯è½¬ç§»åˆ°å½“å‰ä¸–ç•Œçš„æ•°ç»„ï¼ˆå³ä¸‹é¢ä»£ç çš„$f[]$ æ•°ç»„ï¼‰è¿›è¡Œæ›´æ–°ã€‚</p></blockquote><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> db <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> ld <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">double</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> dx<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> dy<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">const</span> ld eps <span class="token operator">=</span> <span class="token number">1e-8</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n <span class="token operator">>></span> m<span class="token punctuation">;</span>    vi <span class="token function">f</span><span class="token punctuation">(</span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1e9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nf<span class="token punctuation">;</span>    f<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> c<span class="token punctuation">;</span>        cin <span class="token operator">>></span> c<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">!=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> j <span class="token operator">!=</span> m <span class="token operator">&amp;&amp;</span> f<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">1e9</span><span class="token punctuation">)</span>                f<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// èµ°åˆ°ç¬¬ i ä¸ªä¸–ç•Œ,ä¸–ç•Œæ•°åŠ ä¸€</span>        nf <span class="token operator">=</span> f<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>c<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> u<span class="token punctuation">,</span> v<span class="token punctuation">;</span>            cin <span class="token operator">>></span> u <span class="token operator">>></span> v<span class="token punctuation">;</span>            nf<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">,</span> nf<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// åœ¨ç¬¬iä¸ªä¸–ç•Œä¸­è¿›è¡ŒçŠ¶æ€è½¬ç§»ï¼Œf[]ä¸ºè€çš„çŠ¶æ€ï¼Œæ–°çš„çŠ¶æ€å­˜åœ¨nf[]æ•°ç»„ä¸­</span>        <span class="token punctuation">}</span>        f <span class="token operator">=</span> nf<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>f<span class="token punctuation">[</span>m<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1e9</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> f<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// cin >> t;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å¤šæ ¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022ç‰›å®¢å¤šæ ¡1è¡¥é¢˜</title>
      <link href="/p/2541904761.html"/>
      <url>/p/2541904761.html</url>
      
        <content type="html"><![CDATA[<h1 id="2022ç‰›å®¢å¤šæ ¡1è¡¥é¢˜"><a href="#2022ç‰›å®¢å¤šæ ¡1è¡¥é¢˜" class="headerlink" title="2022ç‰›å®¢å¤šæ ¡1è¡¥é¢˜"></a>2022ç‰›å®¢å¤šæ ¡1è¡¥é¢˜</h1><p>é¢˜è§£æœ‰<code>A C D G I J</code>å…­é¢˜ã€‚</p><p>é¢˜è§£çº¯å±è‡ªå·±ç©ï¼Œæ›´å¤šè¯¦ç»†è§£é‡Šè¿˜è¯·çœ‹å®˜æ–¹é¢˜è§£ã€‚</p><h1 id="G"><a href="#G" class="headerlink" title="G"></a>G</h1><h2 id="é¢˜æ„"><a href="#é¢˜æ„" class="headerlink" title="é¢˜æ„"></a>é¢˜æ„</h2><p>ç»™å®š $n$ ï¼Œå°† $1,2,. . . , n$ è§†ä¸ºä¸å«å‰å¯¼é›¶çš„å­—ç¬¦ä¸²</p><p>æ±‚è¿™äº›å­—ç¬¦ä¸²ä¸­å­—å…¸åºæœ€å¤§çš„å­—ç¬¦ä¸²</p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>åªéœ€è¦åœ¨ $|n|-1$ ä¸ª9å’Œ $n$ ä¸¤ä¸ªç­”æ¡ˆä¹‹ä¸­è¿›è¡Œé€‰æ‹©ã€‚</p><ul><li>$n$å»é™¤æœ€åä¸€ä½å…¶ä½™å‡ä¸º9ï¼Œç­”æ¡ˆä¸º $n$</li><li>å¦åˆ™ä¸º $|n|-1$ ä¸ª9</li></ul><p>å¤æ‚åº¦ ï¼š $O(|n|)$</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    string s<span class="token punctuation">;</span>    cin <span class="token operator">>></span> s<span class="token punctuation">;</span>    string t <span class="token operator">=</span> <span class="token function">string</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'9'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> t<span class="token punctuation">)</span> cout <span class="token operator">&lt;&lt;</span> s <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> cout <span class="token operator">&lt;&lt;</span> t <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// cin >> t;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="A"><a href="#A" class="headerlink" title="A"></a>A</h1><h2 id="é¢˜æ„-1"><a href="#é¢˜æ„-1" class="headerlink" title="é¢˜æ„"></a>é¢˜æ„</h2><p>$n$ä¸ªåŒºé—´ $[x_i-r_i, x_i+r_i]$ ï¼Œæ±‚ $n$ ä¸ªåŒºé—´å¹¶ä¹‹åçš„åŒºé—´çš„ç©ºéš™é•¿åº¦å’Œã€‚</p><h2 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>è´ªå¿ƒï¼Œå°†åŒºé—´æŒ‰å·¦ç«¯ç‚¹ä»å°åˆ°å¤§æ’åºï¼Œä»å‰å¾€åæ‰«ä¸€éï¼Œä¸æ–­ç»´æŠ¤ç»´æŠ¤åŒºé—´å³ç«¯ç‚¹ $r$ ã€‚è‹¥å½“å‰åŒºé—´çš„å·¦ç«¯ç‚¹å°äº $r$ ï¼Œå¯ä»¥è¿›è¡Œåˆå¹¶ï¼Œå¹¶ä¸”æ›´æ–°åŒºé—´å³ç«¯ç‚¹ï¼›è‹¥å½“å‰åŒºé—´çš„å·¦ç«¯ç‚¹å¤§äº $r$ ï¼Œè®¡ç®—ç­”æ¡ˆã€‚</p><blockquote><p>æ³¨æ„ç¬¬ä¸€ä¸ªåŒºé—´çš„åˆ¤æ–­ä»¥åŠ $r$ çš„åˆå§‹å€¼ã€‚</p></blockquote><p>å¤æ‚åº¦ ï¼š $O(nlogn)$</p><h2 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> n<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>pii<span class="token operator">></span> <span class="token function">a</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> c<span class="token punctuation">,</span> r<span class="token punctuation">;</span>        cin <span class="token operator">>></span> c <span class="token operator">>></span> r<span class="token punctuation">;</span>        a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>c <span class="token operator">-</span> r<span class="token punctuation">,</span> c <span class="token operator">+</span> r<span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> rr <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1e18</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        ll l <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">,</span> r <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">></span> rr <span class="token operator">&amp;&amp;</span> i<span class="token punctuation">)</span>            ans <span class="token operator">+</span><span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">-</span> rr<span class="token punctuation">)</span><span class="token punctuation">;</span>        rr <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>rr<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    cout <span class="token operator">&lt;&lt;</span> ans <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// cin >> t;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="D"><a href="#D" class="headerlink" title="D"></a>D</h1><h2 id="é¢˜æ„-2"><a href="#é¢˜æ„-2" class="headerlink" title="é¢˜æ„"></a>é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªåœ†å’Œä¸¥æ ¼ä½äºåœ†å†…çš„ä¸€ç‚¹ $P$</p><p>Mocha ä¼šä»ç‚¹ $P$ å‘ä»»æ„è§’åº¦å‘å°„ä¸€ä¸ªé•¿åº¦ä¸º $2d$ çš„ç”µç£ç‚®</p><p>ç”µç£ç‚®åº•è¾¹çš„ä¸­ç‚¹ä¸ºç‚¹Pä¸”ä¸¤ç«¯ä½äºåœ†å†…</p><p>è¯¢é—®å•æ¬¡å‘å°„èƒ½æ‘§æ¯çš„æœ€å¤§åœ†å¼§é•¿</p><p>$1â‰¤Tâ‰¤1000,-10^9â‰¤ x, y â‰¤10^9,1 â‰¤r, dâ‰¤10^9$</p><h2 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>å°†ç”µç£ç‚®æ–¹å‘è½¬åŒ–ä¸ºç«–ç›´å‘ä¸Šï¼šæ— è®ºå½“å‰çš„ç”µç£ç‚®æ—‹è½¬è§’åº¦å¦‚ä½•ï¼Œæˆ‘ä»¬å¯ä»¥å›ºå®šç”µç£ç‚®çš„æ–¹å‘ï¼Œå°†ç‚¹ $P$ ç»•åŸç‚¹æ—‹è½¬ï¼Œä»è€Œä½¿å¾—ç”µç£ç‚®æ–¹å‘ç«–ç›´å‘ä¸Šï¼ˆå³ $y$ è½´æ­£æ–¹å‘ï¼‰ã€‚</p><p>é‚£ä¹ˆå¯ä»¥å°†é¢˜ç›®è½¬åŒ–æˆä¸ºç”µç£ç‚®çš„æ–¹å‘æ€»æ˜¯ç«–ç›´å‘ä¸Šçš„ï¼Œç‚¹ P ç»•åŸç‚¹æ—‹è½¬ä¸€å‘¨çš„è¿‡ç¨‹ä¸­å¯ä»¥æ‘§æ¯çš„æœ€é•¿å¢™å£é•¿åº¦ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬è®¾ç‚¹ P åˆ°åŸç‚¹è·ç¦»æ˜¯ $dis$ï¼Œç‚¹ Q ç»•åŸç‚¹æ—‹è½¬ä¸€å‘¨å°±å¯ä»¥è½¬åŒ–æˆç‚¹Qåœ¨ä»¥ $(-dis,0)$ å’Œ $(dis,0)$ ä¸ºç«¯ç‚¹çš„çº¿æ®µä¸Šç§»åŠ¨ã€‚</p><p>ä¸‹é¢ç”¨ä¸€å¼ åŠ¨å›¾æ¥è¯´æ˜ï¼šå½“ç‚¹ Q ä½äº $x$ è½´ä¸Šæ—¶ï¼Œäº§ç”Ÿçš„å¼§é•¿æœ€é•¿ã€‚</p><p><img src="https://uploadfiles.nowcoder.com/images/20220724/543419382_1658594584578/2CB7686E53E6883E02FCAA79818B7E3B" alt></p><p>æ‰€ä»¥ç”»å›¾è¿›è¡Œè®¡ç®—ï¼Œæˆ‘ä»¬è®¡ç®—å¼§åº¦ä»¥æ­¤æ¥ç®—å¼§é•¿ã€‚ $L = \alpha R$</p><blockquote><p> å½“æˆ‘ä»¬ä½¿ç”¨ $sin$ è®¡ç®—æ—¶ï¼Œå› ä¸ºæ­£å¼¦çš„ $0Â°-180Â°$è¡¨ç¤ºå¹¶ä¸å”¯ä¸€ï¼Œæ‰€ä»¥éœ€è¦åˆ†æƒ…å†µè®¨è®º $dis &gt; d$ å’Œ $dis &lt; d$</p><p>å½“æˆ‘ä»¬ä½¿ç”¨ $cos$ è®¡ç®—æ—¶ï¼Œ$cos$ å¯ä»¥å”¯ä¸€è¡¨ç¤º $0-180$ åº¦ï¼Œæ‰€ä»¥ä¸éœ€è¦åˆ†ç±»è®¨è®ºã€‚</p></blockquote><p><img src="2541904761/image-20220821221513603.png" alt="å›¾ç¤º"></p><p>ä»¥ $cos$ è®¡ç®—ä¸ºä¾‹ï¼š</p><p>$\alpha = arccos(\frac{dis - d}{r})$</p><p>$\beta = arcos(\frac{dis + d}{r})$</p><p>$L = (\alpha - \beta) \times r$</p><h2 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> r<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> d<span class="token punctuation">;</span>    cin <span class="token operator">>></span> r <span class="token operator">>></span> x <span class="token operator">>></span> y <span class="token operator">>></span> d<span class="token punctuation">;</span>    <span class="token keyword">double</span> dis <span class="token operator">=</span> <span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token number">1ll</span> <span class="token operator">*</span> x <span class="token operator">*</span> x <span class="token operator">+</span> <span class="token number">1ll</span> <span class="token operator">*</span> y <span class="token operator">*</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>    cout <span class="token operator">&lt;&lt;</span> fixed <span class="token operator">&lt;&lt;</span> <span class="token function">setprecision</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">double</span> a <span class="token operator">=</span> <span class="token function">acos</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dis <span class="token operator">+</span> d<span class="token punctuation">)</span> <span class="token operator">/</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">double</span> b <span class="token operator">=</span> <span class="token function">acos</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dis <span class="token operator">-</span> d<span class="token punctuation">)</span> <span class="token operator">/</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>    cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>b <span class="token operator">-</span> a<span class="token punctuation">)</span> <span class="token operator">*</span> r <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// if(dis > d)</span>    <span class="token comment" spellcheck="true">// {</span>    <span class="token comment" spellcheck="true">//     double a = asin((dis + d) / r);</span>    <span class="token comment" spellcheck="true">//     double b = asin((dis - d) / r);</span>    <span class="token comment" spellcheck="true">//     cout &lt;&lt; r * (a - b) &lt;&lt; "\n";</span>    <span class="token comment" spellcheck="true">// }</span>    <span class="token comment" spellcheck="true">// else</span>    <span class="token comment" spellcheck="true">// {</span>    <span class="token comment" spellcheck="true">//     double a = asin((d + dis) / r);</span>    <span class="token comment" spellcheck="true">//     double b = asin((d - dis) / r);</span>    <span class="token comment" spellcheck="true">//     cout &lt;&lt; r * (a + b) &lt;&lt; "\n";</span>    <span class="token comment" spellcheck="true">// }</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    cin <span class="token operator">>></span> t<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="C"><a href="#C" class="headerlink" title="C"></a>C</h1><h2 id="é¢˜æ„-3"><a href="#é¢˜æ„-3" class="headerlink" title="é¢˜æ„"></a>é¢˜æ„</h2><p>ä¸€ä¸ªäºŒç»´å¹³é¢ï¼Œé»‘æ¿ä¸º $(0,1)-(0,m)$ çš„çº¿æ®µï¼Œ $n$ è¡Œ $m$ åˆ—åº§ä½åœ¨é»‘æ¿å‰é¢ï¼Œå‡ä¸ºæ•´æ•°åæ ‡ã€‚</p><p>$k$ ä¸ªä½ç½®æœ‰äººï¼Œæ±‚åˆ°é»‘æ¿è§†çº¿ä¸è¢«ä»»ä½•äººæŒ¡ä½çš„åº§ä½æ•°é‡ã€‚</p><p>$q$ æ¬¡è¯¢é—®ï¼Œä¿®æ”¹ä¸€ä¸ªäººçš„åæ ‡è¦æ±‚è®¡ç®—ç­”æ¡ˆã€‚</p><p>$2 \leq n,m \leq 2\times10^5, 1 \leq k \leq 2 \times10 ^ 5, 1 \leq q \leq 200$</p><h2 id="æ€è·¯-3"><a href="#æ€è·¯-3" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>æ¯ä¸ªäººä¼šæŒ¡ä½è‡ªå·±å³è¾¹çš„äººã€‚æ¯ä¸ªäººæŒ¡ä½çš„åŒºåŸŸä¸ºä¸€ä¸ªæŠ˜çº¿å³è¾¹çš„åŒºåŸŸã€‚</p><p>æ¯æ¬¡è¯¢é—®ç»´æŠ¤ $mn[i], X[i]$</p><p>$mn[i]$ ï¼š çºµåæ ‡ä¸º $i$ æ—¶æœ€å¤§ä¸è¢«é®æŒ¡çš„äººçš„æ¨ªåæ ‡ã€‚</p><p>$X[i]$ : çºµåæ ‡ä¸º $i$ æ—¶ï¼Œè¢«é®æŒ¡çš„åº§ä½çš„æœ€å°æ¨ªåæ ‡ã€‚</p><p>å¯ä»¥å‘ç°ä¸€ä¸ªæ€§è´¨ï¼Œå½“çºµåæ ‡ä»å°åˆ°å¤§æ—¶ï¼Œå¦‚æœæ–°å‡ºç°çš„ç‚¹ $(X[i], i)$ ä¸ $(0,1)$ æ„æˆçš„æ–œç‡æ›´å¤§ï¼Œå¦‚æœé®æŒ¡çºµåæ ‡æ›´å¤§çš„ç‚¹æ—¶ï¼Œä¹Ÿæ˜¯è¯¥ç‚¹é®æŒ¡åé¢çš„ç‚¹ã€‚</p><p>æ—¶é—´å¤æ‚åº¦ ï¼š $O(mq)$</p><h2 id="ä»£ç -3"><a href="#ä»£ç -3" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">,</span> k<span class="token punctuation">,</span> q<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n <span class="token operator">>></span> m <span class="token operator">>></span> k <span class="token operator">>></span> q<span class="token punctuation">;</span>    vl <span class="token function">x</span><span class="token punctuation">(</span>k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">y</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">X</span><span class="token punctuation">(</span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">mn</span><span class="token punctuation">(</span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> k<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        cin <span class="token operator">>></span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">>></span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>q<span class="token operator">--</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> id<span class="token punctuation">;</span>        cin <span class="token operator">>></span> id<span class="token punctuation">;</span>        cin <span class="token operator">>></span> x<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">>></span> y<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            mn<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> n<span class="token punctuation">,</span> X<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> k<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            X<span class="token punctuation">[</span>y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>X<span class="token punctuation">[</span>y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ä»ä¸‹å¾€ä¸Š</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// (0, 1)(X[i], i) (0, 1)(X[j], j)</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>X<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> n <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span>j <span class="token operator">||</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> X<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> <span class="token punctuation">(</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> X<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                j <span class="token operator">=</span> i<span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>                mn<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>mn<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> X<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">:</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">else</span> <span class="token comment" spellcheck="true">// y = kx+1 = (j - 1)/X[j] x + 1 = i</span>                mn<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>mn<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> j <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> X<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">:</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> m<span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// (0,m)(X[i],i) (0,m)(X[j],j)</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>X<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> n <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span>j <span class="token operator">||</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> m<span class="token punctuation">)</span> <span class="token operator">*</span> X<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token punctuation">(</span>j <span class="token operator">-</span> m<span class="token punctuation">)</span> <span class="token operator">*</span> X<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                j <span class="token operator">=</span> i<span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">==</span> m<span class="token punctuation">)</span>                mn<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>mn<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i <span class="token operator">==</span> m <span class="token operator">?</span> X<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">:</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">else</span> <span class="token comment" spellcheck="true">// y = kx+m = (j-m)/X[j] x + m = i</span>                mn<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>mn<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> j <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>m <span class="token operator">-</span> i<span class="token punctuation">)</span> <span class="token operator">*</span> X<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>m <span class="token operator">-</span> j<span class="token punctuation">)</span> <span class="token operator">:</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            ans <span class="token operator">+</span><span class="token operator">=</span> mn<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        cout <span class="token operator">&lt;&lt;</span> ans <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// cin >> t;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="I"><a href="#I" class="headerlink" title="I"></a>I</h1><h2 id="é¢˜æ„-4"><a href="#é¢˜æ„-4" class="headerlink" title="é¢˜æ„"></a>é¢˜æ„</h2><p>åˆå§‹æ‰‹ç‰Œæœ‰13å¼ éº»å°†ç‰Œï¼Œç›¸åŒç‰Œè‡³å¤šå‡ºç°2å¼ </p><p>æ¯è½®å¯ä»¥ä»ç‰Œå †æ‘¸ç‰Œï¼Œè‹¥è¾¾æˆä¸ƒå¯¹å­åˆ™è‡ªæ‘¸èƒ¡ç‰Œ</p><p>è‹¥ä¸ç„¶åˆ™é€‰æ‹©æ‰‹ç‰Œä¸­æŸå¼ ç‰Œå¹¶ä¸¢å¼ƒä¹‹</p><p>ç»™å®šåˆå§‹æ‰‹ç‰Œï¼Œæ±‚æœ€ä¼˜ç­–ç•¥ä¸‹è¾¾æˆä¸ƒå¯¹å­çš„æœŸæœ›è½®æ•°</p><p>å¤šç»„æ•°æ®ï¼Œæ•°æ®ç»„æ•°ä¸è¶…è¿‡ $10^5$ ç»„</p><h2 id="æ€è·¯-4"><a href="#æ€è·¯-4" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>æœŸæœ›DP</p><p>$f[i][j]$ : æœ‰ $j$ å¼ å•æ’ï¼Œç‰Œå †å‰©ä½™ $i$ å¼ çš„æœŸæœ›è½®æ•°</p><p>$f[i][j] = \frac{3 \times j}{i} \times (1 + f[i - 1][j - 2]) + \frac{i - 3 \times j}{i} \times (1 + f[i - 1][j])$</p><p>å½“ $j = 1$ æ—¶ï¼Œ $f[i][j] =  \frac{3 \times j}{i} \times (1 + 0) + \frac{i - 3 \times j}{i} \times (1 + f[i - 1][j])$</p><p>åˆå§‹æ‰‹ç‰Œå•ç‰Œæ•°é‡ä¸º $cnt$ ï¼Œç­”æ¡ˆä¸º $f[136-13][cnt]$</p><h2 id="ä»£ç -4"><a href="#ä»£ç -4" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span>ll f<span class="token punctuation">[</span><span class="token number">150</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">;</span>ll <span class="token function">ksm</span><span class="token punctuation">(</span>ll a<span class="token punctuation">,</span> ll b<span class="token punctuation">)</span><span class="token punctuation">{</span>    ll res <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>b <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> res <span class="token operator">=</span> res <span class="token operator">*</span> a <span class="token operator">%</span> mod<span class="token punctuation">;</span>        b <span class="token operator">>>=</span> <span class="token number">1</span><span class="token punctuation">;</span>        a <span class="token operator">=</span> a <span class="token operator">*</span> a <span class="token operator">%</span> mod<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> res <span class="token operator">%</span> mod<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">123</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        ll inv <span class="token operator">=</span> <span class="token function">ksm</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> mod <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> <span class="token number">13</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span>                 f<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> j <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> j<span class="token punctuation">)</span> <span class="token operator">%</span> mod <span class="token operator">*</span> inv <span class="token operator">%</span> mod <span class="token operator">+</span>                 f<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">3</span> <span class="token operator">*</span> j<span class="token punctuation">)</span> <span class="token operator">%</span> mod <span class="token operator">*</span> inv <span class="token operator">%</span> mod<span class="token punctuation">)</span> <span class="token operator">%</span> mod<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>ll <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    string s<span class="token punctuation">;</span>    cin <span class="token operator">>></span> s<span class="token punctuation">;</span>    <span class="token keyword">int</span> cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    unordered_map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span> mp<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">int</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>mp<span class="token punctuation">[</span>s<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> cnt<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> cnt<span class="token operator">++</span><span class="token punctuation">;</span>        mp<span class="token punctuation">[</span>s<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> f<span class="token punctuation">[</span><span class="token number">123</span><span class="token punctuation">]</span><span class="token punctuation">[</span>cnt<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    cin <span class="token operator">>></span> t<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> t<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Case #"</span> <span class="token operator">&lt;&lt;</span> i <span class="token operator">&lt;&lt;</span> <span class="token string">": "</span> <span class="token operator">&lt;&lt;</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="J"><a href="#J" class="headerlink" title="J"></a>J</h1><h2 id="é¢˜æ„-5"><a href="#é¢˜æ„-5" class="headerlink" title="é¢˜æ„"></a>é¢˜æ„</h2><p>æœ‰ä¸€å¼  n ä¸ªç‚¹ m æ¡è¾¹çš„æ— é‡è¾¹æ— è‡ªç¯çš„æœ‰å‘å›¾</p><p>åˆå§‹æ—¶å¯ä»¥é€‰æ‹©ä¸€ä¸ªç‚¹æŸ“é»‘ï¼Œå…¶ä½™ç‚¹å‡ä¸ºç™½ç‚¹</p><p>è‹¥æŸä¸ªç‚¹æ‰€æœ‰å…¥è¾¹çš„èµ·ç‚¹å‡ä¸ºé»‘ç‚¹ï¼Œåˆ™è¯¥ç‚¹å¯ä»¥è¢«æŸ“é»‘</p><p>æœ€å¤§åŒ–å›¾ä¸­é»‘ç‚¹æ•°é‡</p><h2 id="æ€è·¯-5"><a href="#æ€è·¯-5" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>å¯å‘å¼åˆå¹¶ã€‚</p><p>å½“ä¸€ä¸ªç‚¹çš„å…¥åº¦ä¸º 1 ï¼Œé‚£ä¹ˆè¯¥ç‚¹çš„å‰é©±æŸ“é»‘çš„è¯ï¼Œè¯¥ç‚¹ä¸€å®šä¹Ÿè¢«æŸ“é»‘ã€‚é‚£ä¹ˆå¯ä»¥å°†è¯¥ç‚¹å’Œè¯¥ç‚¹çš„å‰é©±è¿›è¡Œç¼©ç‚¹åˆå¹¶çœ‹åšä¸€ä¸ªé›†åˆã€‚</p><p>å› ä¸ºæ¯ä¸ªç‚¹éƒ½å¯èƒ½ä¼šæœ‰å¯¹åº”çš„å‡ºè¾¹ï¼Œè€Œåˆå¹¶çš„ä¸¤ä¸ªç‚¹çš„å‡ºè¾¹å¯èƒ½ä¼šæœ‰é‡å¤ï¼Œå°±è¦è¿›è¡Œå»é‡ï¼Œå› ä¸ºç¼©ç‚¹ä¹‹åçš„å‡ºè¾¹åªèƒ½æœ‰ä¸€æ¡ã€‚å»é‡å°±å¯ä»¥ç”¨åˆ° <code>set</code>  ï¼Œè‡ªå¸¦å»é‡æ“ä½œã€‚</p><p>åˆå¹¶çš„æ—¶å€™ä¹Ÿæœ‰æŠ€å·§ï¼Œé€šè¿‡å‡ºè¾¹æ•°è¾ƒå°çš„ç‚¹åˆå¹¶åˆ°å‡ºè¾¹æ•°è¾ƒå¤§çš„ç‚¹èº«ä¸Šï¼Œä¹Ÿå°±æ˜¯å¯å‘å¼åˆå¹¶ï¼ˆç±»ä¼¼å¹¶æŸ¥é›†ä¸­çš„åˆå¹¶ï¼‰ï¼Œè¾¾åˆ°å‡å°æ—¶é—´å¤æ‚åº¦çš„ç›®çš„ã€‚</p><p>é€’å½’åˆå¹¶å³å¯ï¼Œæœ€åè¾“å‡ºåˆå¹¶åæœ€å¤§çš„å—ã€‚</p><h2 id="ä»£ç -5"><a href="#ä»£ç -5" class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">2e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">int</span> f<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> sz<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>set<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> in<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> out<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> f<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> x<span class="token punctuation">;</span>    <span class="token keyword">return</span> f<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">{</span>    x <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> y<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>out<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> out<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>    f<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>    sz<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> sz<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span>    vi q<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> v <span class="token operator">:</span> out<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        out<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>        in<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>        in<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>in<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>            q<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> v <span class="token operator">:</span> q<span class="token punctuation">)</span>        <span class="token function">merge</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> n<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        in<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> out<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        f<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>        sz<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> k<span class="token punctuation">;</span>        cin <span class="token operator">>></span> k<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> k<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> u<span class="token punctuation">;</span>            cin <span class="token operator">>></span> u<span class="token punctuation">;</span>            in<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>            out<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>in<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>            <span class="token function">merge</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token operator">*</span>in<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        ans <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> sz<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    cin <span class="token operator">>></span> t<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> t<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Case #"</span> <span class="token operator">&lt;&lt;</span> i <span class="token operator">&lt;&lt;</span> <span class="token string">": "</span> <span class="token operator">&lt;&lt;</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å¤šæ ¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ ‘ä¸Šæ‹“æ‰‘åºè®¡æ•°|æ ‘å½¢DP</title>
      <link href="/p/2852940489.html"/>
      <url>/p/2852940489.html</url>
      
        <content type="html"><![CDATA[<h1 id="æ ‘ä¸Šæ‹“æ‰‘åºè®¡æ•°-æ ‘å½¢DP"><a href="#æ ‘ä¸Šæ‹“æ‰‘åºè®¡æ•°-æ ‘å½¢DP" class="headerlink" title="æ ‘ä¸Šæ‹“æ‰‘åºè®¡æ•°|æ ‘å½¢DP"></a>æ ‘ä¸Šæ‹“æ‰‘åºè®¡æ•°|æ ‘å½¢DP</h1><p><a href="https://ac.nowcoder.com/acm/contest/38630/F" target="_blank" rel="noopener">https://ac.nowcoder.com/acm/contest/38630/F</a></p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>æ¯ä¸ªå…¬å¸æ˜¯ä¸€æ£µæ ‘ï¼Œç„¶åæ¯ä¸ªå…¬å¸å¯ä»¥çœ‹åšè¿åœ¨ä¸€ä¸ªè™šæ‹Ÿçš„æ ¹ä¸Šã€‚æ¯ä¸ªå…¬å¸çš„è®¡ç®—æ–¹æ¡ˆå®é™…ä¸Šå°±æ˜¯è®¡ç®—è¿™æ£µæ ‘çš„æ‹“æ‰‘åºçš„ä¸ªæ•°ã€‚ç”¨æ ‘å½¢DPæ±‚è§£ã€‚</p><p>$f[u]$ : ä»¥<code>u</code>ä¸ºæ ¹çš„å­æ ‘çš„æ‹“æ‰‘åºæ•°</p><p>$sz[u]$ ï¼š ä»¥<code>u</code>ä¸ºæ ¹çš„å­æ ‘çš„å¤§å°ï¼ˆèŠ‚ç‚¹çš„æ•°é‡ï¼‰</p><p>å½“æ ‘ä¸ºäºŒå‰æ ‘æ—¶ï¼Œå°†ä¸¤ä¸ªå­æ ‘<code>v1,v2</code>è¿›è¡Œåˆå¹¶ï¼šå³å…ˆæŠŠå„å­æ ‘çš„æ–¹æ¡ˆæ•°ä¹˜èµ·æ¥ç®—å‡ºæ€»æ–¹æ¡ˆï¼Œç„¶åè€ƒè™‘å„å­æ ‘å…ƒç´ çš„ç›¸å¯¹æ’åˆ—é¡ºåºï¼Œå³åœ¨æ€»çš„èŠ‚ç‚¹ä¸ªæ•°ä¸­é€‰<code>sz[v1]</code>æ’åœ¨å‰é¢çš„<code>sz[v1]</code>ä¸ªä½ç½®ï¼Œå‰©ä¸‹çš„æ’åœ¨åé¢ï¼Œä¿è¯æ¯é¢—å­æ ‘çš„ç›¸å¯¹æ‹“æ‰‘åºä¸å˜ã€‚</p><p>$$<br>f[u] = f[v1] \cdot f[v2] \cdot C(sz[v1] + sz[v2], sz[v1])<br>$$</p><blockquote><p>ä¾‹å­ï¼š<code>u</code>èŠ‚ç‚¹æœ‰å››é¢—å­æ ‘ï¼Œå­æ ‘å¤§å°åˆ†åˆ«ä¸º<code>a, b, c, d</code>ï¼Œåˆ™æ–¹æ¡ˆæ•°ä¸ºï¼š</p><p>$f[u] = f[a]\cdot f[b]\cdot f[c]\cdot f[d]\cdot C(a+b+c+d, a)\cdot C(b+c+d, b)\cdot C(c+d,c)$</p><p>$=f[a]\cdot f[b]\cdot f[c]\cdot f[d]\cdot \frac{(a+b+c+d)!}{a!(b+c+d)!}\cdot \frac{(b+c+d)!}{b!(c+d)!}\cdot \frac{(c+d)!}{c!d!}$</p><p>$=f[a]\cdot f[b]\cdot f[c]\cdot f[d]\cdot \frac{(a+b+c+d)!}{a!b!c!d!}$</p></blockquote><p>æ¨å¹¿åˆ°ä¸€èˆ¬æ ‘ï¼š<br>$$<br>f[u] = (\prod \limits_{v \in son(u)} f[v] ) \cdot \frac{(sz[u] - 1)!}{\prod \limits_{v \in son(u)}sz[v]!}<br>$$<br>æ¢ä¸€ä¸‹å½¢å¼ï¼š<br>$$<br>f[u] = (sz[u] - 1)! \cdot \prod \limits_{v \in son(u)} \frac{f[v]}{sz[v]!}<br>$$</p><p>æ‹“æ‰‘åºæ•°é‡è¿˜å¯ä»¥è¿™æ ·è®¡ç®—ï¼š<br>$$<br>n! \cdot \prod \limits_{i = 1} ^ n \frac{1}{sz[i]}<br>$$</p><h2 id="ä»£ç 1"><a href="#ä»£ç 1" class="headerlink" title="ä»£ç 1"></a>ä»£ç 1</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span>ll fac<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> inv<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>ll <span class="token function">ksm</span><span class="token punctuation">(</span>ll a<span class="token punctuation">,</span> ll b<span class="token punctuation">)</span><span class="token punctuation">{</span>    ll res <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>b <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> res <span class="token operator">=</span> res <span class="token operator">*</span> a <span class="token operator">%</span> mod<span class="token punctuation">;</span>        b <span class="token operator">>>=</span> <span class="token number">1</span><span class="token punctuation">;</span>        a <span class="token operator">=</span> a <span class="token operator">*</span> a <span class="token operator">%</span> mod<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> res <span class="token operator">%</span> mod<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> n<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n<span class="token punctuation">;</span>    ll ans <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> tot <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> c<span class="token punctuation">;</span>        cin <span class="token operator">>></span> c<span class="token punctuation">;</span>        cnt <span class="token operator">+</span><span class="token operator">=</span> c<span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span>vi<span class="token operator">></span> <span class="token function">g</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> c<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> u<span class="token punctuation">;</span>            cin <span class="token operator">>></span> u<span class="token punctuation">;</span>            u<span class="token operator">--</span><span class="token punctuation">;</span>            g<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        vi <span class="token function">sz</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        vl <span class="token function">f</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        function<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token operator">></span> dfs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> v <span class="token operator">:</span> g<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token function">dfs</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>                sz<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> sz<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token punctuation">(</span>f<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">*</span><span class="token operator">=</span> f<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">*</span> inv<span class="token punctuation">[</span>sz<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">%</span> mod<span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">=</span> mod<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token punctuation">(</span>f<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">*</span><span class="token operator">=</span> fac<span class="token punctuation">[</span>sz<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">=</span> mod<span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">(</span>tot <span class="token operator">*</span><span class="token operator">=</span> f<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> inv<span class="token punctuation">[</span>c<span class="token punctuation">]</span> <span class="token operator">%</span> mod<span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">=</span> mod<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    ans <span class="token operator">=</span> ans <span class="token operator">*</span> tot <span class="token operator">%</span> mod <span class="token operator">*</span> fac<span class="token punctuation">[</span>cnt<span class="token punctuation">]</span> <span class="token operator">%</span> mod<span class="token punctuation">;</span>    cout <span class="token operator">&lt;&lt;</span> ans <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    fac<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        fac<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> fac<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> i <span class="token operator">%</span> mod<span class="token punctuation">;</span>    inv<span class="token punctuation">[</span>N <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">ksm</span><span class="token punctuation">(</span>fac<span class="token punctuation">[</span>N <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> mod <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> N <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>        inv<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> inv<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">%</span> mod<span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// cin >> t;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä»£ç 2"><a href="#ä»£ç 2" class="headerlink" title="ä»£ç 2"></a>ä»£ç 2</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> pll <span class="token operator">=</span> pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> arr <span class="token operator">=</span> array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vi <span class="token operator">=</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">using</span> vl <span class="token operator">=</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// assume -P &lt;= x &lt; 2P</span><span class="token keyword">int</span> <span class="token function">norm</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        x <span class="token operator">+</span><span class="token operator">=</span> mod<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">>=</span> mod<span class="token punctuation">)</span> <span class="token punctuation">{</span>        x <span class="token operator">-</span><span class="token operator">=</span> mod<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> x<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span>T <span class="token function">power</span><span class="token punctuation">(</span>T a<span class="token punctuation">,</span> ll b<span class="token punctuation">)</span> <span class="token punctuation">{</span>    T res <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> b<span class="token punctuation">;</span> b <span class="token operator">/</span><span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> a <span class="token operator">*</span><span class="token operator">=</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            res <span class="token operator">*</span><span class="token operator">=</span> a<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">struct</span> Z <span class="token punctuation">{</span>    <span class="token keyword">int</span> x<span class="token punctuation">;</span>    <span class="token function">Z</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token function">norm</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token function">Z</span><span class="token punctuation">(</span>ll x<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token function">norm</span><span class="token punctuation">(</span>x <span class="token operator">%</span> mod<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">int</span> <span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> x<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Z <span class="token keyword">operator</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">Z</span><span class="token punctuation">(</span><span class="token function">norm</span><span class="token punctuation">(</span>mod <span class="token operator">-</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Z <span class="token function">inv</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>        <span class="token function">assert</span><span class="token punctuation">(</span>x <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">power</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">,</span> mod <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Z <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">*</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        x <span class="token operator">=</span> <span class="token function">ll</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">*</span> rhs<span class="token punctuation">.</span>x <span class="token operator">%</span> mod<span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Z <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">+</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        x <span class="token operator">=</span> <span class="token function">norm</span><span class="token punctuation">(</span>x <span class="token operator">+</span> rhs<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Z <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">-</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        x <span class="token operator">=</span> <span class="token function">norm</span><span class="token punctuation">(</span>x <span class="token operator">-</span> rhs<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Z <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">/</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">*</span><span class="token operator">=</span> rhs<span class="token punctuation">.</span><span class="token function">inv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> Z <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>lhs<span class="token punctuation">,</span> <span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Z res <span class="token operator">=</span> lhs<span class="token punctuation">;</span>        res <span class="token operator">*</span><span class="token operator">=</span> rhs<span class="token punctuation">;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> Z <span class="token keyword">operator</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>lhs<span class="token punctuation">,</span> <span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Z res <span class="token operator">=</span> lhs<span class="token punctuation">;</span>        res <span class="token operator">+</span><span class="token operator">=</span> rhs<span class="token punctuation">;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> Z <span class="token keyword">operator</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>lhs<span class="token punctuation">,</span> <span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Z res <span class="token operator">=</span> lhs<span class="token punctuation">;</span>        res <span class="token operator">-</span><span class="token operator">=</span> rhs<span class="token punctuation">;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> Z <span class="token keyword">operator</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>lhs<span class="token punctuation">,</span> <span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Z res <span class="token operator">=</span> lhs<span class="token punctuation">;</span>        res <span class="token operator">/</span><span class="token operator">=</span> rhs<span class="token punctuation">;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> std<span class="token operator">::</span>istream <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">>></span><span class="token punctuation">(</span>std<span class="token operator">::</span>istream <span class="token operator">&amp;</span>is<span class="token punctuation">,</span> Z <span class="token operator">&amp;</span>a<span class="token punctuation">)</span> <span class="token punctuation">{</span>        ll v<span class="token punctuation">;</span>        is <span class="token operator">>></span> v<span class="token punctuation">;</span>        a <span class="token operator">=</span> <span class="token function">Z</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> is<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> std<span class="token operator">::</span>ostream <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>std<span class="token operator">::</span>ostream <span class="token operator">&amp;</span>os<span class="token punctuation">,</span> <span class="token keyword">const</span> Z <span class="token operator">&amp;</span>a<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> os <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> n<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n<span class="token punctuation">;</span>    Z ans <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> tot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> c<span class="token punctuation">;</span>        cin <span class="token operator">>></span> c<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> c<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>            ans <span class="token operator">*</span><span class="token operator">=</span> <span class="token operator">++</span>tot<span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span>vi<span class="token operator">></span> <span class="token function">g</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> c<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> u<span class="token punctuation">;</span>            cin <span class="token operator">>></span> u<span class="token punctuation">;</span>            u<span class="token operator">--</span><span class="token punctuation">;</span>            g<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        vi <span class="token function">sz</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        function<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token operator">></span> dfs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> v <span class="token operator">:</span> g<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token function">dfs</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>                sz<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> sz<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            ans <span class="token operator">/</span><span class="token operator">=</span> sz<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    cout <span class="token operator">&lt;&lt;</span> ans <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// cin >> t;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‹“æ‰‘åºè®¡æ•°ç›¸å…³é¢˜ç›®ï¼š</p><p>HDU4661 ï¼š <a href="http://acm.hdu.edu.cn/showproblem.php?pid=4661" target="_blank" rel="noopener">http://acm.hdu.edu.cn/showproblem.php?pid=4661</a></p>]]></content>
      
      
      <categories>
          
          <category> æ ‘å½¢DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ ‘å½¢DP </tag>
            
            <tag> ç»„åˆæ•°å­¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ STLæ€»ç»“</title>
      <link href="/p/870124582.html"/>
      <url>/p/870124582.html</url>
      
        <content type="html"><![CDATA[<h1 id="C-STL-æ€»ç»“-åŸºäºç®—æ³•ç«èµ›ï¼ˆæ‚ äº«ç‰ˆï¼‰"><a href="#C-STL-æ€»ç»“-åŸºäºç®—æ³•ç«èµ›ï¼ˆæ‚ äº«ç‰ˆï¼‰" class="headerlink" title="C++ STL æ€»ç»“-åŸºäºç®—æ³•ç«èµ›ï¼ˆæ‚ äº«ç‰ˆï¼‰"></a>C++ STL æ€»ç»“-åŸºäºç®—æ³•ç«èµ›ï¼ˆæ‚ äº«ç‰ˆï¼‰</h1><p>æœ¬æ–‡ä»‹ç»å¸¸ç”¨STLçŸ¥è¯†ï¼Œæ³¨é‡åº”ç”¨ï¼Œå¼ºè°ƒç”¨æ³•ï¼Œä¸å¼ºè°ƒåŸç†å’Œç¹æ‚çš„è®°å¿†ã€‚çœ‹è¿‡ä¹‹åè¯·å¤šè¿ç”¨ï¼Œå¤šæ•²ä»£ç è¯•ã€‚</p><blockquote><p>è´¹å°½å¿ƒæ€é‡æ–°æ¢³ç†äº†ä¸€ä¸‹ï¼Œæ³¨æ„äº†äº›ç¾è§‚æ€§ï¼Œä¿®æ”¹äº†éƒ¨åˆ†é”™è¯¯ï¼Œæ·»åŠ äº†éƒ¨åˆ†è§£é‡Šï¼Œç¼–å†™è¿‡ç¨‹éå¸¸éš¾ã€‚</p></blockquote><p>å¦å¤–C++ç‰ˆæœ¬ä¸€å®šè¦å¯¹ï¼ˆå¯èƒ½è¦åŠ ç¼–è¯‘å‚æ•°<code>-std=c++11</code>ï¼‰ï¼ŒC++11å³å¯ï¼ŒC++17æˆ–20æ›´å¥½ã€‚</p><blockquote><p>ä½¿DEVæ”¯æŒC++20 ï¼š <a href="https://blog.csdn.net/qq_50285142/article/details/122930647" target="_blank" rel="noopener">https://blog.csdn.net/qq_50285142/article/details/122930647</a></p></blockquote><blockquote><p>å®è·µæ‰æ˜¯æ£€éªŒçœŸç†çš„å”¯ä¸€æ ‡å‡†ï¼</p><p>æœ¬æ–‡ç« CSDNçš„ç‰ˆæœ¬ï¼š<a href="https://wyq666.blog.csdn.net/article/details/114026148" target="_blank" rel="noopener">https://wyq666.blog.csdn.net/article/details/114026148</a> ï¼ˆCSDNæ›´æ–°å¯èƒ½ä¸åŠæ—¶ï¼Œæ¯•ç«Ÿå¤šå¹³å°ç»´æŠ¤éº»çƒ¦ï¼Œæœ€æ–°ç‰ˆä»¥æœ¬ç½‘ç«™ä¸ºä¸»ï¼‰</p></blockquote><h2 id="1-vector"><a href="#1-vector" class="headerlink" title="1 vector"></a>1 vector</h2><h3 id="1-1-ä»‹ç»"><a href="#1-1-ä»‹ç»" class="headerlink" title="1.1 ä»‹ç»"></a>1.1 ä»‹ç»</h3><p><code>vector</code>ä¸ºå¯å˜é•¿æ•°ç»„ï¼ˆåŠ¨æ€æ•°ç»„ï¼‰ï¼Œå®šä¹‰çš„<code>vector</code>æ•°ç»„å¯ä»¥éšæ—¶æ·»åŠ æ•°å€¼å’Œåˆ é™¤å…ƒç´ ã€‚</p><blockquote><p>æ³¨æ„ï¼š<strong>åœ¨å±€éƒ¨åŒºåŸŸä¸­ï¼ˆæ¯”å¦‚å±€éƒ¨å‡½æ•°é‡Œé¢ï¼‰å¼€vectoræ•°ç»„ï¼Œæ˜¯åœ¨å †ç©ºé—´é‡Œé¢å¼€çš„ã€‚</strong> </p><p>åœ¨å±€éƒ¨åŒºåŸŸå¼€æ•°ç»„æ˜¯åœ¨æ ˆç©ºé—´å¼€çš„ï¼Œè€Œæ ˆç©ºé—´æ¯”è¾ƒå°ï¼Œå¦‚æœå¼€äº†éå¸¸é•¿çš„æ•°ç»„å°±ä¼šå‘ç”Ÿçˆ†æ ˆã€‚</p><p>æ•…å±€éƒ¨åŒºåŸŸ<strong>ä¸å¯ä»¥</strong>å¼€å¤§é•¿åº¦æ•°ç»„ï¼Œä½†æ˜¯å¯ä»¥å¼€å¤§é•¿åº¦<code>vector</code>ã€‚</p></blockquote><ul><li>å¤´æ–‡ä»¶</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><p>åˆå§‹åŒ–</p><ul><li><p>ä¸€ç»´åˆå§‹åŒ–</p><pre class="line-numbers language-cpp"><code class="language-cpp">vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> a<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//å®šä¹‰äº†ä¸€ä¸ªåä¸ºaçš„ä¸€ç»´æ•°ç»„,æ•°ç»„å­˜å‚¨intç±»å‹æ•°æ®</span>vector<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">></span> b<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å®šä¹‰äº†ä¸€ä¸ªåä¸ºbçš„ä¸€ç»´æ•°ç»„ï¼Œæ•°ç»„å­˜å‚¨doubleç±»å‹æ•°æ®</span>vector<span class="token operator">&lt;</span>node<span class="token operator">></span> c<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å®šä¹‰äº†ä¸€ä¸ªåä¸ºcçš„ä¸€ç»´æ•°ç»„ï¼Œæ•°ç»„å­˜å‚¨ç»“æ„ä½“ç±»å‹æ•°æ®ï¼Œnodeæ˜¯ç»“æ„ä½“ç±»å‹</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æŒ‡å®š<strong>é•¿åº¦</strong>å’Œ<strong>åˆå§‹å€¼</strong>çš„åˆå§‹åŒ–</p><pre class="line-numbers language-cpp"><code class="language-cpp">vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">v</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å®šä¹‰ä¸€ä¸ªé•¿åº¦ä¸ºnçš„æ•°ç»„ï¼Œåˆå§‹å€¼é»˜è®¤ä¸º0ï¼Œä¸‹æ ‡èŒƒå›´[0, n - 1]</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">v</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//v[0]åˆ°v[n-1]æ‰€æœ‰çš„å…ƒç´ åˆå§‹å€¼å‡ä¸º1</span><span class="token comment" spellcheck="true">//æ³¨æ„ï¼šæŒ‡å®šæ•°ç»„é•¿åº¦ä¹‹åï¼ˆæŒ‡å®šé•¿åº¦åçš„æ•°ç»„å°±ç›¸å½“äºæ­£å¸¸çš„æ•°ç»„äº†ï¼‰</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>åˆå§‹åŒ–ä¸­æœ‰å¤šä¸ªå…ƒç´ </p><pre class="line-numbers language-cpp"><code class="language-cpp">vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> a<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æ•°ç»„aä¸­æœ‰äº”ä¸ªå…ƒç´ ï¼Œæ•°ç»„é•¿åº¦å°±ä¸º5</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ‹·è´åˆå§‹åŒ–</p><pre class="line-numbers language-cpp"><code class="language-cpp">vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">a</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">b</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ä¸¤ä¸ªæ•°ç»„ä¸­çš„ç±»å‹å¿…é¡»ç›¸åŒ,aå’Œbéƒ½æ˜¯é•¿åº¦ä¸ºn+1ï¼Œåˆå§‹å€¼éƒ½ä¸º0çš„æ•°ç»„</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>äºŒç»´åˆå§‹åŒ–<br>å®šä¹‰ç¬¬ä¸€ç»´å›ºå®šé•¿åº¦ä¸º<code>5</code>ï¼Œç¬¬äºŒç»´å¯å˜åŒ–çš„äºŒç»´æ•°ç»„</p><pre class="line-numbers language-cpp"><code class="language-cpp">vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> v<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å®šä¹‰å¯å˜é•¿äºŒç»´æ•°ç»„</span><span class="token comment" spellcheck="true">//æ³¨æ„ï¼šè¡Œä¸å¯å˜ï¼ˆåªæœ‰5è¡Œï¼‰, è€Œåˆ—å¯å˜,å¯ä»¥åœ¨æŒ‡å®šè¡Œæ·»åŠ å…ƒç´ </span><span class="token comment" spellcheck="true">//ç¬¬ä¸€ç»´å›ºå®šé•¿åº¦ä¸º5ï¼Œç¬¬äºŒç»´é•¿åº¦å¯ä»¥æ”¹å˜</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p><code>vector&lt;int&gt; v[5]</code>å¯ä»¥è¿™æ ·ç†è§£ï¼šé•¿åº¦ä¸º5çš„væ•°ç»„ï¼Œæ•°ç»„ä¸­å­˜å‚¨çš„æ˜¯<code>vector&lt;int&gt;</code>æ•°æ®ç±»å‹ï¼Œè€Œè¯¥ç±»å‹å°±æ˜¯æ•°ç»„å½¢å¼ï¼Œæ•…<code>v</code>ä¸ºäºŒç»´æ•°ç»„ã€‚å…¶ä¸­æ¯ä¸ªæ•°ç»„å…ƒç´ å‡ä¸ºç©ºï¼Œå› ä¸ºæ²¡æœ‰æŒ‡å®šé•¿åº¦ï¼Œæ‰€ä»¥ç¬¬äºŒç»´å¯å˜é•¿ã€‚å¯ä»¥è¿›è¡Œä¸‹è¿°æ“ä½œï¼š</p><pre class="line-numbers language-cpp"><code class="language-cpp">v<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>v<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></blockquote><p>è¡Œåˆ—å‡å¯å˜</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//åˆå§‹åŒ–äºŒç»´å‡å¯å˜é•¿æ•°ç»„</span>vector<span class="token operator">&lt;</span>vectot<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> v<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å®šä¹‰ä¸€ä¸ªè¡Œå’Œåˆ—å‡å¯å˜çš„äºŒç»´æ•°ç»„</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>åº”ç”¨ï¼šå¯ä»¥åœ¨<code>v</code>æ•°ç»„é‡Œé¢è£…å¤šä¸ªæ•°ç»„</p><pre class="line-numbers language-cpp"><code class="language-cpp">vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> t1<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> t2<span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>v<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">;</span>v<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>t2<span class="token punctuation">)</span><span class="token punctuation">;</span>v<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// {3, 4, 5, 6}å¯ä»¥ä½œä¸ºvectorçš„åˆå§‹åŒ–,ç›¸å½“äºä¸€ä¸ªæ— åvector</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><p>è¡Œåˆ—é•¿åº¦å‡å›ºå®š <code>n + 1</code>è¡Œ <code>m + 1</code>åˆ—åˆå§‹å€¼ä¸º0</p><pre class="line-numbers language-cpp"><code class="language-cpp">vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">></span> <span class="token function">a</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">(</span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>c++17æˆ–è€…c++20æ”¯æŒçš„å½¢å¼ï¼ˆä¸å¸¸ç”¨ï¼‰ï¼Œä¸ä¸Šé¢ç›¸åŒçš„åˆå§‹åŒ–</p><pre class="line-numbers language-cpp"><code class="language-cpp">vector <span class="token function">a</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token function">vector</span><span class="token punctuation">(</span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul></li></ul><hr><h3 id="1-2-æ–¹æ³•å‡½æ•°"><a href="#1-2-æ–¹æ³•å‡½æ•°" class="headerlink" title="1.2 æ–¹æ³•å‡½æ•°"></a>1.2 æ–¹æ³•å‡½æ•°</h3><p>çŸ¥é“äº†å¦‚ä½•å®šä¹‰åˆå§‹åŒ–å¯å˜æ•°ç»„ï¼Œä¸‹é¢å°±éœ€è¦çŸ¥é“å¦‚ä½•æ·»åŠ ï¼Œåˆ é™¤ï¼Œä¿®æ”¹æ•°æ®ã€‚</p><p><strong>cæŒ‡å®šä¸ºæ•°ç»„åç§°</strong>ï¼Œå«ä¹‰ä¸­ä¼šæ³¨æ˜ç®—æ³•å¤æ‚åº¦ã€‚</p><table><thead><tr><th>ä»£ç </th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>c.front()</code></td><td>è¿”å›ç¬¬ä¸€ä¸ªæ•°æ®$O(1)$</td></tr><tr><td><code>c.back()</code></td><td>è¿”å›æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªæ•°æ® $O(1)$</td></tr><tr><td><code>c.pop_back()</code></td><td>åˆ é™¤æœ€åä¸€ä¸ªæ•°æ®$O(1)$</td></tr><tr><td><code>c.push_back(element)</code></td><td>åœ¨å°¾éƒ¨åŠ ä¸€ä¸ªæ•°æ®$O(1)$</td></tr><tr><td><code>c.size()</code></td><td>è¿”å›å®é™…æ•°æ®ä¸ªæ•°ï¼ˆunsignedç±»å‹ï¼‰$O(1)$</td></tr><tr><td><code>c.clear()</code></td><td>æ¸…é™¤å…ƒç´ ä¸ªæ•°$O(N)$ï¼ŒNä¸ºå…ƒç´ ä¸ªæ•°</td></tr><tr><td><code>c.resize(n, v)</code></td><td>æ”¹å˜æ•°ç»„å¤§å°ä¸º<code>n</code>,<code>n</code>ä¸ªç©ºé—´æ•°å€¼èµ‹ä¸º<code>v</code>ï¼Œå¦‚æœæ²¡æœ‰é»˜è®¤èµ‹å€¼ä¸º<code>0</code></td></tr><tr><td><code>c.insert(it, x)</code></td><td>å‘ä»»æ„è¿­ä»£å™¨<code>it</code>æ’å…¥ä¸€ä¸ªå…ƒç´ <code>x</code> ï¼Œ$O(N)$</td></tr><tr><td>ä¾‹ï¼š<code>c.insert(c.begin()+2,-1)</code></td><td>å°†<code>-1</code>æ’å…¥<code>c[2]</code>çš„ä½ç½®</td></tr><tr><td><code>c.erase(first,last)</code></td><td>åˆ é™¤<code>[first,last)</code>çš„æ‰€æœ‰å…ƒç´ ï¼Œ$O(N)$</td></tr><tr><td><code>c.begin()</code></td><td>è¿”å›é¦–å…ƒç´ çš„è¿­ä»£å™¨ï¼ˆé€šä¿—æ¥è¯´å°±æ˜¯åœ°å€ï¼‰$O(1)$</td></tr><tr><td><code>c.end()</code></td><td>è¿”å›æœ€åä¸€ä¸ªå…ƒç´ åä¸€ä¸ªä½ç½®çš„è¿­ä»£å™¨ï¼ˆåœ°å€ï¼‰$O(1)$</td></tr><tr><td><code>c.empty()</code></td><td>åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºè¿”å›çœŸï¼Œåä¹‹è¿”å›å‡ $O(1)$</td></tr></tbody></table><p>æ³¨æ„ï¼š <code>end()</code>è¿”å›çš„æ˜¯æœ€åä¸€ä¸ªå…ƒç´ çš„åä¸€ä¸ªä½ç½®çš„åœ°å€ï¼Œä¸æ˜¯æœ€åä¸€ä¸ªå…ƒç´ çš„åœ°å€ï¼Œ<strong>æ‰€æœ‰STLå®¹å™¨å‡æ˜¯å¦‚æ­¤</strong></p><p><strong>æ’åº</strong></p><p>ä½¿ç”¨<code>sort</code>æ’åºè¦ï¼š  <code>sort(c.begin(), c.end());</code></p><blockquote><p><code>sort()</code>ä¸ºSTLå‡½æ•°ï¼Œè¯·å‚è€ƒæœ¬æ–‡æœ€åé¢STLå‡½æ•°ç³»åˆ—ã€‚</p></blockquote><p>å¯¹æ‰€æœ‰å…ƒç´ è¿›è¡Œæ’åºï¼Œå¦‚æœè¦å¯¹æŒ‡å®šåŒºé—´è¿›è¡Œæ’åºï¼Œå¯ä»¥å¯¹<code>sort()</code>é‡Œé¢çš„å‚æ•°è¿›è¡ŒåŠ å‡æ”¹åŠ¨ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp">vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">a</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å¯¹[1, n]åŒºé—´è¿›è¡Œä»å°åˆ°å¤§æ’åº</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><hr><h3 id="1-3-è®¿é—®"><a href="#1-3-è®¿é—®" class="headerlink" title="1.3  è®¿é—®"></a>1.3  è®¿é—®</h3><ul><li><strong>ä¸‹æ ‡æ³•ï¼š</strong> å’Œæ™®é€šæ•°ç»„ä¸€æ ·</li></ul><p>æ³¨æ„ï¼šä¸€ç»´æ•°ç»„çš„ä¸‹æ ‡æ˜¯ä»$0$åˆ°$v.size()-1$ï¼Œè®¿é—®ä¹‹å¤–çš„æ•°ä¼šå‡ºç°è¶Šç•Œé”™è¯¯</p><ul><li><strong>è¿­ä»£å™¨æ³•ï¼š</strong> ç±»ä¼¼æŒ‡é’ˆä¸€æ ·çš„è®¿é—® ï¼Œé¦–å…ˆéœ€è¦å£°æ˜è¿­ä»£å™¨å˜é‡ï¼Œå’Œå£°æ˜æŒ‡é’ˆå˜é‡ä¸€æ ·ï¼Œå¯ä»¥æ ¹æ®ä»£ç è¿›è¡Œç†è§£ï¼ˆé™„æœ‰æ³¨é‡Šï¼‰ã€‚</li></ul><p>ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-cpp"><code class="language-cpp">vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> vi<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//å®šä¹‰ä¸€ä¸ªviæ•°ç»„</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">::</span>iterator it <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å£°æ˜ä¸€ä¸ªè¿­ä»£å™¨æŒ‡å‘viçš„åˆå§‹ä½ç½®</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="1-3-1-ä¸‹æ ‡è®¿é—®"><a href="#1-3-1-ä¸‹æ ‡è®¿é—®" class="headerlink" title="1.3.1 ä¸‹æ ‡è®¿é—®"></a>1.3.1 ä¸‹æ ‡è®¿é—®</h4><p>ç›´æ¥å’Œæ™®é€šæ•°ç»„ä¸€æ ·è¿›è¡Œè®¿é—®å³å¯ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//æ·»åŠ å…ƒç´ </span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    vi<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ä¸‹æ ‡è®¿é—® </span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    cout <span class="token operator">&lt;&lt;</span> vi<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="1-3-2-è¿­ä»£å™¨è®¿é—®"><a href="#1-3-2-è¿­ä»£å™¨è®¿é—®" class="headerlink" title="1.3.2 è¿­ä»£å™¨è®¿é—®"></a>1.3.2 è¿­ä»£å™¨è®¿é—®</h4><p>ç±»ä¼¼æŒ‡é’ˆã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//è¿­ä»£å™¨è®¿é—®</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">::</span>iterator it<span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//ç›¸å½“äºå£°æ˜äº†ä¸€ä¸ªè¿­ä»£å™¨ç±»å‹çš„å˜é‡it</span><span class="token comment" spellcheck="true">//é€šä¿—æ¥è¯´å°±æ˜¯å£°æ˜äº†ä¸€ä¸ªæŒ‡é’ˆå˜é‡</span><span class="token comment" spellcheck="true">//æ–¹å¼ä¸€ï¼š</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">::</span>iterator it <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span><span class="token punctuation">(</span>it <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æ–¹å¼äºŒï¼š</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">::</span>iterator it<span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>it <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> vi<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>it <span class="token operator">++</span><span class="token punctuation">)</span>    cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>it <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//vi.end()æŒ‡å‘å°¾å…ƒç´ åœ°å€çš„ä¸‹ä¸€ä¸ªåœ°å€</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="1-3-3-æ™ºèƒ½æŒ‡é’ˆ"><a href="#1-3-3-æ™ºèƒ½æŒ‡é’ˆ" class="headerlink" title="1.3.3 æ™ºèƒ½æŒ‡é’ˆ"></a>1.3.3 æ™ºèƒ½æŒ‡é’ˆ</h4><p><strong>åªèƒ½éå†å®Œæ•°ç»„</strong>ï¼Œå¦‚æœè¦æŒ‡å®šçš„å†…å®¹è¿›è¡Œéå†ï¼Œéœ€è¦å¦é€‰æ–¹æ³•ã€‚<br><strong>auto</strong> èƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ«å¹¶è·å–ç±»å‹ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp">vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> v<span class="token punctuation">;</span>v<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>v<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token number">241</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> val <span class="token operator">:</span> v<span class="token punctuation">)</span>     cout <span class="token operator">&lt;&lt;</span> val <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 12 241</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><code>vector</code>æ³¨æ„ï¼š</p><ul><li><p><code>vi[i]</code>  å’Œ  <code>*(vi.begin() + i)</code> ç­‰ä»·</p></li><li><p><code>vector</code>å’Œ<code>string</code>çš„<code>STL</code>å®¹å™¨æ”¯æŒ<code>*(it + i)</code>çš„å…ƒç´ è®¿é—®ï¼Œå…¶å®ƒå®¹å™¨å¯èƒ½ä¹Ÿå¯ä»¥æ”¯æŒè¿™ç§æ–¹å¼è®¿é—®ï¼Œä½†ç”¨çš„ä¸å¤šï¼Œå¯è‡ªè¡Œå°è¯•ã€‚</p></li></ul></blockquote><hr><h2 id="2-stack"><a href="#2-stack" class="headerlink" title="2 stack"></a>2 stack</h2><h3 id="2-1-ä»‹ç»"><a href="#2-1-ä»‹ç»" class="headerlink" title="2.1 ä»‹ç»"></a>2.1 ä»‹ç»</h3><p>æ ˆä¸ºæ•°æ®ç»“æ„çš„ä¸€ç§ï¼Œæ˜¯STLä¸­å®ç°çš„ä¸€ä¸ªå…ˆè¿›åå‡ºï¼Œåè¿›å…ˆå‡ºçš„å®¹å™¨ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//å¤´æ–‡ä»¶éœ€è¦æ·»åŠ </span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;stack></span></span><span class="token comment" spellcheck="true">//å£°æ˜</span>stack<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> s<span class="token punctuation">;</span>stack<span class="token operator">&lt;</span>string<span class="token operator">></span> s<span class="token punctuation">;</span>stack<span class="token operator">&lt;</span>node<span class="token operator">></span> s<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//nodeæ˜¯ç»“æ„ä½“ç±»å‹</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-2-æ–¹æ³•å‡½æ•°"><a href="#2-2-æ–¹æ³•å‡½æ•°" class="headerlink" title="2.2 æ–¹æ³•å‡½æ•°"></a>2.2 æ–¹æ³•å‡½æ•°</h3><table><thead><tr><th>ä»£ç </th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>s.push(ele)</code></td><td>å…ƒç´ <code>ele</code>å…¥æ ˆï¼Œå¢åŠ å…ƒç´   $O(1)$</td></tr><tr><td><code>s.pop()</code></td><td>ç§»é™¤æ ˆé¡¶å…ƒç´  $O(1)$</td></tr><tr><td><code>s.top()</code></td><td>å–å¾—æ ˆé¡¶å…ƒç´ ï¼ˆä½†ä¸åˆ é™¤ï¼‰$O(1)$</td></tr><tr><td><code>s.empty()</code></td><td>æ£€æµ‹æ ˆå†…æ˜¯å¦ä¸ºç©ºï¼Œç©ºä¸ºçœŸ $O(1)$</td></tr><tr><td><code>s.size()</code></td><td>è¿”å›æ ˆå†…å…ƒç´ çš„ä¸ªæ•° $O(1)$</td></tr></tbody></table><hr><h3 id="2-3-æ ˆéå†"><a href="#2-3-æ ˆéå†" class="headerlink" title="2.3 æ ˆéå†"></a>2.3 æ ˆéå†</h3><h4 id="2-3-1-æ ˆéå†"><a href="#2-3-1-æ ˆéå†" class="headerlink" title="2.3.1 æ ˆéå†"></a>2.3.1 æ ˆéå†</h4><p>æ ˆåªèƒ½å¯¹æ ˆé¡¶å…ƒç´ è¿›è¡Œæ“ä½œï¼Œå¦‚æœæƒ³è¦è¿›è¡Œéå†ï¼Œåªèƒ½å°†æ ˆä¸­å…ƒç´ ä¸€ä¸ªä¸ªå–å‡ºæ¥å­˜åœ¨æ•°ç»„ä¸­</p><h4 id="2-3-2-æ•°ç»„æ¨¡æ‹Ÿæ ˆè¿›è¡Œéå†"><a href="#2-3-2-æ•°ç»„æ¨¡æ‹Ÿæ ˆè¿›è¡Œéå†" class="headerlink" title="2.3.2 æ•°ç»„æ¨¡æ‹Ÿæ ˆè¿›è¡Œéå†"></a>2.3.2 æ•°ç»„æ¨¡æ‹Ÿæ ˆè¿›è¡Œéå†</h4><p>é€šè¿‡ä¸€ä¸ª<strong>æ•°ç»„</strong>å¯¹æ ˆè¿›è¡Œæ¨¡æ‹Ÿï¼Œä¸€ä¸ªå­˜æ”¾ä¸‹æ ‡çš„å˜é‡<code>top</code>æ¨¡æ‹ŸæŒ‡å‘æ ˆé¡¶çš„æŒ‡é’ˆã€‚</p><p><strong>ç‰¹ç‚¹ï¼š</strong> æ¯”<code>STL</code>çš„<code>stack</code>é€Ÿåº¦æ›´å¿«ï¼Œéå†å…ƒç´ æ–¹ä¾¿</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> s<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// æ ˆ ä»å·¦è‡³å³ä¸ºæ ˆåº•åˆ°æ ˆé¡¶</span><span class="token keyword">int</span> tt <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// tt ä»£è¡¨æ ˆé¡¶æŒ‡é’ˆ,åˆå§‹æ ˆå†…æ— å…ƒç´ ï¼Œttä¸º-1</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//å…¥æ ˆ </span>    s<span class="token punctuation">[</span><span class="token operator">++</span>tt<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// å‡ºæ ˆ</span><span class="token keyword">int</span> top_element <span class="token operator">=</span> s<span class="token punctuation">[</span>tt<span class="token operator">--</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//å…¥æ ˆæ“ä½œç¤ºæ„</span><span class="token comment" spellcheck="true">//  0  1  2  3  4  5  </span><span class="token comment" spellcheck="true">//                tt</span><span class="token comment" spellcheck="true">//å‡ºæ ˆåç¤ºæ„</span><span class="token comment" spellcheck="true">//  0  1  2  3  4 </span><span class="token comment" spellcheck="true">//              tt</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="3-queue"><a href="#3-queue" class="headerlink" title="3 queue"></a>3 queue</h2><h3 id="3-1-ä»‹ç»"><a href="#3-1-ä»‹ç»" class="headerlink" title="3.1 ä»‹ç»"></a>3.1 ä»‹ç»</h3><p>é˜Ÿåˆ—æ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºçš„æ•°æ®ç»“æ„ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//å¤´æ–‡ä»¶</span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;queue></span></span><span class="token comment" spellcheck="true">//å®šä¹‰åˆå§‹åŒ–</span>queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> q<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-2-æ–¹æ³•å‡½æ•°"><a href="#3-2-æ–¹æ³•å‡½æ•°" class="headerlink" title="3.2 æ–¹æ³•å‡½æ•°"></a>3.2 æ–¹æ³•å‡½æ•°</h3><table><thead><tr><th>ä»£ç </th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>q.front()</code></td><td>è¿”å›é˜Ÿé¦–å…ƒç´   $O(1)$</td></tr><tr><td><code>q.back()</code></td><td>è¿”å›é˜Ÿå°¾å…ƒç´  $O(1)$</td></tr><tr><td><code>q.push(element)</code></td><td>å°¾éƒ¨æ·»åŠ ä¸€ä¸ªå…ƒç´ <code>element</code>  è¿›é˜Ÿ$O(1)$</td></tr><tr><td><code>q.pop()</code></td><td>åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´   å‡ºé˜Ÿ $O(1)$</td></tr><tr><td><code>q.size()</code></td><td>è¿”å›é˜Ÿåˆ—ä¸­å…ƒç´ ä¸ªæ•°ï¼Œè¿”å›å€¼ç±»å‹<code>unsigned int</code> $O(1)$</td></tr><tr><td><code>q.empty()</code></td><td>åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œé˜Ÿåˆ—ä¸ºç©ºï¼Œè¿”å›<code>true</code> $O(1)$</td></tr></tbody></table><h3 id="3-3-é˜Ÿåˆ—æ¨¡æ‹Ÿ"><a href="#3-3-é˜Ÿåˆ—æ¨¡æ‹Ÿ" class="headerlink" title="3.3 é˜Ÿåˆ—æ¨¡æ‹Ÿ"></a>3.3 é˜Ÿåˆ—æ¨¡æ‹Ÿ</h3><p>ä½¿ç”¨<code>q[]</code>æ•°ç»„æ¨¡æ‹Ÿé˜Ÿåˆ—<br><code>hh</code>è¡¨ç¤ºé˜Ÿé¦–å…ƒç´ çš„ä¸‹æ ‡ï¼Œåˆå§‹å€¼ä¸º<code>0</code><br><code>tt</code>è¡¨ç¤ºé˜Ÿå°¾å…ƒç´ çš„ä¸‹æ ‡ï¼Œåˆå§‹å€¼ä¸º<code>-1</code>ï¼Œè¡¨ç¤ºåˆš<strong>å¼€å§‹é˜Ÿåˆ—ä¸ºç©º</strong></p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span><span class="token operator">+</span><span class="token number">5</span><span class="token punctuation">;</span><span class="token keyword">int</span> q<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> hh <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>tt <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//    å…¥é˜Ÿ </span>    q<span class="token punctuation">[</span><span class="token operator">++</span>tt<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    q<span class="token punctuation">[</span><span class="token operator">++</span>tt<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//    å°†æ‰€æœ‰å…ƒç´ å‡ºé˜Ÿ </span>    <span class="token keyword">while</span><span class="token punctuation">(</span>hh <span class="token operator">&lt;=</span> tt<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> t <span class="token operator">=</span> q<span class="token punctuation">[</span>hh<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="4-deque"><a href="#4-deque" class="headerlink" title="4 deque"></a>4 deque</h2><h3 id="4-1-ä»‹ç»"><a href="#4-1-ä»‹ç»" class="headerlink" title="4.1 ä»‹ç»"></a>4.1 ä»‹ç»</h3><p>é¦–å°¾éƒ½å¯æ’å…¥å’Œåˆ é™¤çš„é˜Ÿåˆ—ä¸ºåŒç«¯é˜Ÿåˆ—ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//æ·»åŠ å¤´æ–‡ä»¶</span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;deque></span></span><span class="token comment" spellcheck="true">//åˆå§‹åŒ–å®šä¹‰</span>deque<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> dq<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-2-æ–¹æ³•å‡½æ•°"><a href="#4-2-æ–¹æ³•å‡½æ•°" class="headerlink" title="4.2 æ–¹æ³•å‡½æ•°"></a>4.2 æ–¹æ³•å‡½æ•°</h3><table><thead><tr><th>ä»£ç </th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>push_back(x)/push_front(x)</code></td><td>æŠŠ<code>x</code>æ’å…¥é˜Ÿå°¾å / é˜Ÿé¦– $O(1)$</td></tr><tr><td><code>back()/front()</code></td><td>è¿”å›é˜Ÿå°¾ / é˜Ÿé¦–å…ƒç´  $O(1)$</td></tr><tr><td><code>pop_back() / pop_front()</code></td><td>åˆ é™¤é˜Ÿå°¾ / é˜Ÿé¦–å…ƒç´  $O(1)$</td></tr><tr><td><code>erase(iterator it)</code></td><td>åˆ é™¤åŒç«¯é˜Ÿåˆ—ä¸­çš„æŸä¸€ä¸ªå…ƒç´ </td></tr><tr><td><code>erase(iterator first,iterator last)</code></td><td>åˆ é™¤åŒç«¯é˜Ÿåˆ—ä¸­<code>[first,last)</code>ä¸­çš„å…ƒç´ </td></tr><tr><td><code>empty()</code></td><td>åˆ¤æ–­dequeæ˜¯å¦ç©º $O(1)$</td></tr><tr><td><code>size()</code></td><td>è¿”å›dequeçš„å…ƒç´ æ•°é‡ $O(1)$</td></tr><tr><td><code>clear()</code></td><td>æ¸…ç©ºdeque</td></tr></tbody></table><h3 id="4-3-æ³¨æ„ç‚¹"><a href="#4-3-æ³¨æ„ç‚¹" class="headerlink" title="4.3 æ³¨æ„ç‚¹"></a>4.3 æ³¨æ„ç‚¹</h3><p>dequeå¯ä»¥è¿›è¡Œæ’åº</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//ä»å°åˆ°å¤§</span><span class="token function">sort</span><span class="token punctuation">(</span>q<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//ä»å¤§åˆ°å°æ’åº</span><span class="token function">sort</span><span class="token punctuation">(</span>q<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> greater<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//dequeé‡Œé¢çš„ç±»å‹éœ€è¦æ˜¯intå‹</span><span class="token function">sort</span><span class="token punctuation">(</span>q<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">greater</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//é«˜ç‰ˆæœ¬C++æ‰å¯ä»¥ç”¨</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="5-priority-queue"><a href="#5-priority-queue" class="headerlink" title="5. priority_queue"></a>5. priority_queue</h2><h3 id="5-1-ä»‹ç»"><a href="#5-1-ä»‹ç»" class="headerlink" title="5.1 ä»‹ç»"></a>5.1 ä»‹ç»</h3><p>ä¼˜å…ˆé˜Ÿåˆ—æ˜¯åœ¨æ­£å¸¸é˜Ÿåˆ—çš„åŸºç¡€ä¸ŠåŠ äº†ä¼˜å…ˆçº§ï¼Œä¿è¯æ¯æ¬¡çš„é˜Ÿé¦–å…ƒç´ éƒ½æ˜¯ä¼˜å…ˆçº§æœ€å¤§çš„ã€‚</p><p>å¯ä»¥å®ç°æ¯æ¬¡ä»ä¼˜å…ˆé˜Ÿåˆ—ä¸­å–å‡ºçš„å…ƒç´ éƒ½æ˜¯é˜Ÿåˆ—ä¸­<strong>ä¼˜å…ˆçº§æœ€å¤§</strong>çš„ä¸€ä¸ªã€‚</p><p>å®ƒçš„åº•å±‚æ˜¯é€šè¿‡<strong>å †</strong>æ¥å®ç°çš„ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//å¤´æ–‡ä»¶</span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;queue></span></span><span class="token comment" spellcheck="true">//åˆå§‹åŒ–å®šä¹‰</span>priority_queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> q<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-2-å‡½æ•°æ–¹æ³•"><a href="#5-2-å‡½æ•°æ–¹æ³•" class="headerlink" title="5.2 å‡½æ•°æ–¹æ³•"></a>5.2 å‡½æ•°æ–¹æ³•</h3><table><thead><tr><th>ä»£ç </th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>q.top()</code></td><td>è®¿é—®é˜Ÿé¦–å…ƒç´ </td></tr><tr><td><code>q.push()</code></td><td>å…¥é˜Ÿ</td></tr><tr><td><code>q.pop()</code></td><td>å †é¡¶ï¼ˆé˜Ÿé¦–ï¼‰å…ƒç´ å‡ºé˜Ÿ</td></tr><tr><td><code>q.size()</code></td><td>é˜Ÿåˆ—å…ƒç´ ä¸ªæ•°</td></tr><tr><td><code>q.empty()</code></td><td>æ˜¯å¦ä¸ºç©º</td></tr><tr><td><strong>æ³¨æ„</strong>æ²¡æœ‰<code>clear()</code>ï¼</td><td>ä¸æä¾›è¯¥æ–¹æ³•</td></tr><tr><td>ä¼˜å…ˆé˜Ÿåˆ—åªèƒ½é€šè¿‡<code>top()</code>è®¿é—®é˜Ÿé¦–å…ƒç´ ï¼ˆä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ï¼‰</td><td></td></tr></tbody></table><h3 id="5-3-è®¾ç½®ä¼˜å…ˆçº§"><a href="#5-3-è®¾ç½®ä¼˜å…ˆçº§" class="headerlink" title="5.3 è®¾ç½®ä¼˜å…ˆçº§"></a>5.3 è®¾ç½®ä¼˜å…ˆçº§</h3><h4 id="5-3-1-åŸºæœ¬æ•°æ®ç±»å‹çš„ä¼˜å…ˆçº§"><a href="#5-3-1-åŸºæœ¬æ•°æ®ç±»å‹çš„ä¼˜å…ˆçº§" class="headerlink" title="5.3.1 åŸºæœ¬æ•°æ®ç±»å‹çš„ä¼˜å…ˆçº§"></a>5.3.1 åŸºæœ¬æ•°æ®ç±»å‹çš„ä¼˜å…ˆçº§</h4><pre class="line-numbers language-cpp"><code class="language-cpp">priority_queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> pq<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// é»˜è®¤å¤§æ ¹å †, å³æ¯æ¬¡å–å‡ºçš„å…ƒç´ æ˜¯é˜Ÿåˆ—ä¸­çš„æœ€å¤§å€¼</span>priority_queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">,</span> greater<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">></span> q<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å°æ ¹å †, æ¯æ¬¡å–å‡ºçš„å…ƒç´ æ˜¯é˜Ÿåˆ—ä¸­çš„æœ€å°å€¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>å‚æ•°è§£é‡Šï¼š</strong></p><ul><li><p><strong>ç¬¬äºŒä¸ªå‚æ•°ï¼š</strong><br><code>vector&lt; int &gt;</code> æ˜¯ç”¨æ¥æ‰¿è½½åº•å±‚æ•°æ®ç»“æ„å †çš„å®¹å™¨ï¼Œè‹¥ä¼˜å…ˆé˜Ÿåˆ—ä¸­å­˜æ”¾çš„æ˜¯<code>double</code>å‹æ•°æ®ï¼Œå°±è¦å¡«<code>vector&lt; double &gt;</code><br><strong>æ€»ä¹‹å­˜çš„æ˜¯ä»€ä¹ˆç±»å‹çš„æ•°æ®ï¼Œå°±ç›¸åº”çš„å¡«å†™å¯¹åº”ç±»å‹ã€‚åŒæ—¶ä¹Ÿè¦æ”¹åŠ¨ç¬¬ä¸‰ä¸ªå‚æ•°é‡Œé¢çš„å¯¹åº”ç±»å‹ã€‚</strong></p></li><li><p><strong>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š</strong><br><code>less&lt; int &gt;</code>   è¡¨ç¤ºæ•°å­—å¤§çš„ä¼˜å…ˆçº§å¤§ï¼Œå †é¡¶ä¸ºæœ€å¤§çš„æ•°å­—<br><code>greater&lt; int &gt;</code>è¡¨ç¤ºæ•°å­—å°çš„ä¼˜å…ˆçº§å¤§ï¼Œå †é¡¶ä¸ºæœ€å°çš„æ•°å­—<br><strong>intä»£è¡¨çš„æ˜¯æ•°æ®ç±»å‹ï¼Œä¹Ÿè¦å¡«ä¼˜å…ˆé˜Ÿåˆ—ä¸­å­˜å‚¨çš„æ•°æ®ç±»å‹</strong></p></li></ul><p>ä¸‹é¢ä»‹ç»åŸºç¡€æ•°æ®ç±»å‹ä¼˜å…ˆçº§è®¾ç½®çš„å†™æ³•ã€‚</p><p><strong>1. åŸºç¡€å†™æ³•ï¼ˆéå¸¸å¸¸ç”¨ï¼‰</strong></p><pre class="line-numbers language-cpp"><code class="language-cpp">priority_queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> q1<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// é»˜è®¤å¤§æ ¹å †, å³æ¯æ¬¡å–å‡ºçš„å…ƒç´ æ˜¯é˜Ÿåˆ—ä¸­çš„æœ€å¤§å€¼</span>priority_queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">,</span> less<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">></span> q2<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å¤§æ ¹å †, æ¯æ¬¡å–å‡ºçš„å…ƒç´ æ˜¯é˜Ÿåˆ—ä¸­çš„æœ€å¤§å€¼ï¼ŒåŒç¬¬ä¸€è¡Œ</span>priority_queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">,</span> greater<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">></span> q3<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å°æ ¹å †, æ¯æ¬¡å–å‡ºçš„å…ƒç´ æ˜¯é˜Ÿåˆ—ä¸­çš„æœ€å°å€¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>2. è‡ªå®šä¹‰æ’åºï¼ˆä¸å¸¸è§ï¼Œä¸»è¦æ˜¯å†™ç€éº»çƒ¦ï¼‰</strong></p><p>ä¸‹é¢çš„ä»£ç æ¯”è¾ƒé•¿ï¼ŒåŸºç¡€ç±»å‹ä¼˜å…ˆçº§å†™ç€å¤ªéº»çƒ¦ï¼Œç”¨ç¬¬ä¸€ç§å³å¯ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> cmp1 <span class="token punctuation">{</span>    <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span><span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> x <span class="token operator">></span> y<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">struct</span> cmp2 <span class="token punctuation">{</span>    <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span> x<span class="token punctuation">,</span><span class="token keyword">const</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> x <span class="token operator">&lt;</span> y<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>priority_queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">,</span> cmp1<span class="token operator">></span> q1<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å°æ ¹å †</span>priority_queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">,</span> cmp2<span class="token operator">></span> q2<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å¤§æ ¹å †</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h4 id="5-3-2-ç»“æ„ä½“ä¼˜å…ˆçº§è®¾ç½®"><a href="#5-3-2-ç»“æ„ä½“ä¼˜å…ˆçº§è®¾ç½®" class="headerlink" title="5.3.2 ç»“æ„ä½“ä¼˜å…ˆçº§è®¾ç½®"></a>5.3.2 ç»“æ„ä½“ä¼˜å…ˆçº§è®¾ç½®</h4><blockquote><p>å³ä¼˜å…ˆé˜Ÿåˆ—ä¸­å­˜å‚¨ç»“æ„ä½“ç±»å‹ï¼Œå¿…é¡»è¦è®¾ç½®ä¼˜å…ˆçº§ï¼Œå³ç»“æ„ä½“çš„æ¯”è¾ƒè¿ç®—ï¼ˆå› ä¸ºä¼˜å…ˆé˜Ÿåˆ—çš„å †ä¸­è¦æ¯”è¾ƒå¤§å°ï¼Œæ‰èƒ½å°†å¯¹åº”æœ€å¤§æˆ–è€…æœ€å°å…ƒç´ ç§»åˆ°å †é¡¶ï¼‰ã€‚</p></blockquote><p>ä¼˜å…ˆçº§è®¾ç½®å¯ä»¥å®šä¹‰åœ¨<strong>ç»“æ„ä½“å†…</strong>è¿›è¡Œå°äºå·é‡è½½ï¼Œä¹Ÿå¯ä»¥å®šä¹‰åœ¨<strong>ç»“æ„ä½“å¤–</strong>ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//è¦æ’åºçš„ç»“æ„ä½“ï¼ˆå­˜å‚¨åœ¨ä¼˜å…ˆé˜Ÿåˆ—é‡Œé¢çš„ï¼‰</span><span class="token keyword">struct</span> Point<span class="token punctuation">{</span>    <span class="token keyword">int</span> x<span class="token punctuation">,</span>y<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><strong>ç‰ˆæœ¬ä¸€ï¼šè‡ªå®šä¹‰å…¨å±€æ¯”è¾ƒè§„åˆ™</strong></li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//å®šä¹‰çš„æ¯”è¾ƒç»“æ„ä½“</span><span class="token comment" spellcheck="true">//æ³¨æ„ï¼šcmpæ˜¯ä¸ªç»“æ„ä½“ </span><span class="token keyword">struct</span> cmp <span class="token punctuation">{</span><span class="token comment" spellcheck="true">//è‡ªå®šä¹‰å †çš„æ’åºè§„åˆ™ </span>    <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> Point<span class="token operator">&amp;</span> a<span class="token punctuation">,</span><span class="token keyword">const</span> Point<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> a<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>x<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//åˆå§‹åŒ–å®šä¹‰ï¼Œ </span>priority_queue<span class="token operator">&lt;</span>Point<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>Point<span class="token operator">></span><span class="token punctuation">,</span> cmp<span class="token operator">></span> q<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// xå¤§çš„åœ¨å †é¡¶</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><strong>ç‰ˆæœ¬äºŒï¼šç›´æ¥åœ¨ç»“æ„ä½“é‡Œé¢å†™</strong></li></ul><blockquote><p>å› ä¸ºæ˜¯åœ¨ç»“æ„ä½“å†…éƒ¨è‡ªå®šä¹‰çš„è§„åˆ™ï¼Œä¸€æ—¦éœ€è¦æ¯”è¾ƒç»“æ„ä½“ï¼Œè‡ªåŠ¨è°ƒç”¨ç»“æ„ä½“å†…éƒ¨é‡è½½è¿ç®—ç¬¦è§„åˆ™ã€‚</p></blockquote><p>ç»“æ„ä½“å†…éƒ¨æœ‰ä¸¤ç§æ–¹å¼</p><p><strong>æ–¹å¼ä¸€</strong></p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> node <span class="token punctuation">{</span>    <span class="token keyword">int</span> x<span class="token punctuation">,</span> y<span class="token punctuation">;</span>    <span class="token keyword">friend</span> <span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">&lt;</span> <span class="token punctuation">(</span>Point a<span class="token punctuation">,</span> Point b<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">//ä¸ºä¸¤ä¸ªç»“æ„ä½“å‚æ•°ï¼Œç»“æ„ä½“è°ƒç”¨ä¸€å®šè¦å†™ä¸Šfriend</span>        <span class="token keyword">return</span> a<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>x<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æŒ‰xä»å°åˆ°å¤§æ’ï¼Œxå¤§çš„åœ¨å †é¡¶</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ–¹å¼äºŒ</strong></p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> node <span class="token punctuation">{</span>    <span class="token keyword">int</span> x<span class="token punctuation">,</span> y<span class="token punctuation">;</span>    <span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">&lt;</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Point <span class="token operator">&amp;</span>a<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">//ç›´æ¥ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œä¸å¿…è¦å†™friend</span>        <span class="token keyword">return</span> x <span class="token operator">&lt;</span> a<span class="token punctuation">.</span>x<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æŒ‰xå‡åºæ’åˆ—ï¼Œxå¤§çš„åœ¨å †é¡¶</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¼˜å…ˆé˜Ÿåˆ—çš„å®šä¹‰</p><pre class="line-numbers language-cpp"><code class="language-cpp">priority_queue<span class="token operator">&lt;</span>Point<span class="token operator">></span> q<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>æ³¨æ„ï¼š</strong> ä¼˜å…ˆé˜Ÿåˆ—è‡ªå®šä¹‰æ’åºè§„åˆ™å’Œ<code>sort()</code>å‡½æ•°å®šä¹‰<code>cmp</code>å‡½æ•°å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯æœ€åè¿”å›çš„æƒ…å†µæ˜¯<strong>ç›¸å</strong>çš„ã€‚å³ç›¸åŒçš„ç¬¦å·ï¼Œæœ€åå®šä¹‰çš„æ’åˆ—é¡ºåºæ˜¯å®Œå…¨ç›¸åçš„ã€‚<br>æ‰€ä»¥åªéœ€è¦è®°ä½<code>sort</code>çš„æ’åºè§„åˆ™å’Œä¼˜å…ˆé˜Ÿåˆ—çš„æ’åºè§„åˆ™æ˜¯ç›¸åçš„å°±å¯ä»¥äº†ã€‚</p><hr><h3 id="5-4-å­˜å‚¨ç‰¹æ®Šç±»å‹çš„ä¼˜å…ˆçº§"><a href="#5-4-å­˜å‚¨ç‰¹æ®Šç±»å‹çš„ä¼˜å…ˆçº§" class="headerlink" title="5.4 å­˜å‚¨ç‰¹æ®Šç±»å‹çš„ä¼˜å…ˆçº§"></a>5.4 å­˜å‚¨ç‰¹æ®Šç±»å‹çš„ä¼˜å…ˆçº§</h3><h4 id="5-4-1-å­˜å‚¨pairç±»å‹"><a href="#5-4-1-å­˜å‚¨pairç±»å‹" class="headerlink" title="5.4.1 å­˜å‚¨pairç±»å‹"></a>5.4.1 å­˜å‚¨pairç±»å‹</h4><ul><li>æ’åºè§„åˆ™ï¼š<br>é»˜è®¤å…ˆå¯¹<code>pair</code>çš„<code>first</code>è¿›è¡Œé™åºæ’åºï¼Œç„¶åå†å¯¹<code>second</code>é™åºæ’åº<br>å¯¹<code>first</code>å…ˆæ’åºï¼Œå¤§çš„æ’åœ¨å‰é¢ï¼Œå¦‚æœ<code>first</code>å…ƒç´ ç›¸åŒï¼Œå†å¯¹<code>second</code>å…ƒç´ æ’åºï¼Œä¿æŒå¤§çš„åœ¨å‰é¢ã€‚</li></ul><blockquote><p><code>pair</code>è¯·å‚è€ƒä¸‹æ–‡</p></blockquote><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    priority_queue<span class="token operator">&lt;</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">></span>q<span class="token punctuation">;</span>    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        cout <span class="token operator">&lt;&lt;</span> q<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> q<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>second <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>        q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>ç»“æœï¼š<br>8 7<br>7 9<br>7 8</p></blockquote><hr><h2 id="6-map"><a href="#6-map" class="headerlink" title="6. map"></a>6. map</h2><h3 id="6-1-ä»‹ç»"><a href="#6-1-ä»‹ç»" class="headerlink" title="6.1 ä»‹ç»"></a>6.1 ä»‹ç»</h3><p>æ˜ å°„ç±»ä¼¼äºå‡½æ•°çš„å¯¹åº”å…³ç³»ï¼Œæ¯ä¸ª<code>x</code>å¯¹åº”ä¸€ä¸ª<code>y</code>ï¼Œè€Œ<code>map</code>æ˜¯æ¯ä¸ªé”®å¯¹åº”ä¸€ä¸ªå€¼ã€‚ä¼špythonçš„æœ‹å‹å­¦ä¹ åå°±ä¼šçŸ¥é“è¿™å’Œpythonçš„å­—å…¸éå¸¸ç±»ä¼¼ã€‚</p><blockquote><p>æ¯”å¦‚è¯´ï¼šå­¦ä¹  å¯¹åº” çœ‹ä¹¦ï¼Œå­¦ä¹  æ˜¯é”®ï¼Œçœ‹ä¹¦ æ˜¯å€¼ã€‚<br>å­¦ä¹ -&gt;çœ‹ä¹¦<br>ç©è€ å¯¹åº” æ‰“æ¸¸æˆï¼Œç©è€ æ˜¯é”®ï¼Œæ‰“æ¸¸æˆ æ˜¯å€¼ã€‚<br>ç©è€-&gt;æ‰“æ¸¸æˆ</p></blockquote><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//å¤´æ–‡ä»¶</span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;map></span></span><span class="token comment" spellcheck="true">//åˆå§‹åŒ–å®šä¹‰</span>map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span>string<span class="token operator">></span> mp<span class="token punctuation">;</span>map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> mp<span class="token punctuation">;</span>map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span>node<span class="token operator">></span> mp<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//nodeæ˜¯ç»“æ„ä½“ç±»å‹</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>mapç‰¹æ€§ï¼šmapä¼šæŒ‰ç…§é”®çš„é¡ºåºä»å°åˆ°å¤§è‡ªåŠ¨æ’åºï¼Œé”®çš„ç±»å‹å¿…é¡»å¯ä»¥æ¯”è¾ƒå¤§å°</p></blockquote><h3 id="6-2-å‡½æ•°æ–¹æ³•"><a href="#6-2-å‡½æ•°æ–¹æ³•" class="headerlink" title="6.2 å‡½æ•°æ–¹æ³•"></a>6.2 å‡½æ•°æ–¹æ³•</h3><h4 id="6-2-1-å‡½æ•°æ–¹æ³•"><a href="#6-2-1-å‡½æ•°æ–¹æ³•" class="headerlink" title="6.2.1 å‡½æ•°æ–¹æ³•"></a>6.2.1 å‡½æ•°æ–¹æ³•</h4><table><thead><tr><th>ä»£ç </th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>mp.find(key)</code></td><td>è¿”å›é”®ä¸ºkeyçš„æ˜ å°„çš„è¿­ä»£å™¨ $O(logN) $  æ³¨æ„ï¼šç”¨findå‡½æ•°æ¥å®šä½æ•°æ®å‡ºç°ä½ç½®ï¼Œå®ƒè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ã€‚å½“æ•°æ®å­˜åœ¨æ—¶ï¼Œè¿”å›æ•°æ®æ‰€åœ¨ä½ç½®çš„è¿­ä»£å™¨ï¼Œæ•°æ®ä¸å­˜åœ¨æ—¶ï¼Œè¿”å›$mp.end()$</td></tr><tr><td><code>mp.erase(it)</code></td><td>åˆ é™¤è¿­ä»£å™¨å¯¹åº”çš„é”®å’Œå€¼$O(1)$</td></tr><tr><td><code>mp.erase(key)</code></td><td>æ ¹æ®æ˜ å°„çš„é”®åˆ é™¤é”®å’Œå€¼ $O(logN)$</td></tr><tr><td><code>mp.erase(first,last)</code></td><td>åˆ é™¤å·¦é—­å³å¼€åŒºé—´è¿­ä»£å™¨å¯¹åº”çš„é”®å’Œå€¼ $O(last-first)$</td></tr><tr><td><code>mp.size()</code></td><td>è¿”å›æ˜ å°„çš„å¯¹æ•°$ O(1)$</td></tr><tr><td><code>mp.clear()</code></td><td>æ¸…ç©ºmapä¸­çš„æ‰€æœ‰å…ƒç´ $O(N)$</td></tr><tr><td><code>mp.insert()</code></td><td>æ’å…¥å…ƒç´ ï¼Œæ’å…¥æ—¶è¦æ„é€ é”®å€¼å¯¹</td></tr><tr><td><code>mp.empty()</code></td><td>å¦‚æœmapä¸ºç©ºï¼Œè¿”å›trueï¼Œå¦åˆ™è¿”å›false</td></tr><tr><td><code>mp.begin()</code></td><td>è¿”å›æŒ‡å‘mapç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ï¼ˆåœ°å€ï¼‰</td></tr><tr><td><code>mp.end()</code></td><td>è¿”å›æŒ‡å‘mapå°¾éƒ¨çš„è¿­ä»£å™¨ï¼ˆæœ€åä¸€ä¸ªå…ƒç´ çš„<strong>ä¸‹ä¸€ä¸ª</strong>åœ°å€ï¼‰</td></tr><tr><td><code>mp.rbegin()</code></td><td>è¿”å›æŒ‡å‘mapæœ€åä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ï¼ˆåœ°å€ï¼‰</td></tr><tr><td><code>mp.rend()</code></td><td>è¿”å›æŒ‡å‘mapç¬¬ä¸€ä¸ªå…ƒç´ å‰é¢(ä¸Šä¸€ä¸ªï¼‰çš„é€†å‘è¿­ä»£å™¨ï¼ˆåœ°å€ï¼‰</td></tr><tr><td><code>mp.count(key)</code></td><td>æŸ¥çœ‹å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œå› ä¸ºmapä¸­é”®æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥å­˜åœ¨è¿”å›1ï¼Œä¸å­˜åœ¨è¿”å›0</td></tr><tr><td><code>mp.lower_bound()</code></td><td>è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒæŒ‡å‘é”®å€¼&gt;= <strong>key</strong>çš„ç¬¬ä¸€ä¸ªå…ƒç´ </td></tr><tr><td><code>mp.upper_bound()</code></td><td>è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒæŒ‡å‘é”®å€¼&gt; keyçš„ç¬¬ä¸€ä¸ªå…ƒç´ </td></tr></tbody></table><h4 id="6-2-2-æ³¨æ„ç‚¹"><a href="#6-2-2-æ³¨æ„ç‚¹" class="headerlink" title="6.2.2 æ³¨æ„ç‚¹"></a>6.2.2 æ³¨æ„ç‚¹</h4><p><strong>ä¸‹é¢è¯´æ˜éƒ¨åˆ†å‡½æ•°æ–¹æ³•çš„æ³¨æ„ç‚¹</strong></p><blockquote><p>æ³¨æ„ï¼š<br>æŸ¥æ‰¾å…ƒç´ æ˜¯å¦å­˜åœ¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<br>â‘ <code>mp.find()</code> â‘¡ <code>mp.count()</code> â‘¢ <code>mp[key]</code><br>ä½†æ˜¯ç¬¬ä¸‰ç§æƒ…å†µï¼Œå¦‚æœä¸å­˜åœ¨å¯¹åº”çš„<code>key</code>æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªé”®å€¼å¯¹ï¼ˆäº§ç”Ÿä¸€ä¸ªé¢å¤–çš„é”®å€¼å¯¹ç©ºé—´ï¼‰<br>æ‰€ä»¥ä¸ºäº†ä¸å¢åŠ é¢å¤–çš„ç©ºé—´è´Ÿæ‹…ï¼Œæœ€å¥½ä½¿ç”¨å‰ä¸¤ç§æ–¹æ³•</p></blockquote><hr><h4 id="6-2-3-è¿­ä»£å™¨è¿›è¡Œæ­£åå‘éå†"><a href="#6-2-3-è¿­ä»£å™¨è¿›è¡Œæ­£åå‘éå†" class="headerlink" title="6.2.3 è¿­ä»£å™¨è¿›è¡Œæ­£åå‘éå†"></a>6.2.3 è¿­ä»£å™¨è¿›è¡Œæ­£åå‘éå†</h4><ul><li><code>mp.begin()</code>å’Œ<code>mp.end()</code>ç”¨æ³•ï¼š</li></ul><p><strong>ç”¨äºæ­£å‘éå†map</strong></p><pre class="line-numbers language-cpp"><code class="language-cpp">map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> mp<span class="token punctuation">;</span>mp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>mp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>mp<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span><span class="token keyword">auto</span> it <span class="token operator">=</span> mp<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>it <span class="token operator">!=</span> mp<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    cout <span class="token operator">&lt;&lt;</span> it<span class="token operator">-</span><span class="token operator">></span>first <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> it<span class="token operator">-</span><span class="token operator">></span>second <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>    it <span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ç»“æœï¼š</strong></p><pre><code>1 22 33 4</code></pre><ul><li><code>mp.rbegin()</code>å’Œ<code>mp.rend()</code></li></ul><p><strong>ç”¨äºé€†å‘éå†map</strong></p><pre class="line-numbers language-cpp"><code class="language-cpp">map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> mp<span class="token punctuation">;</span>mp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>mp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>mp<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span><span class="token keyword">auto</span> it <span class="token operator">=</span> mp<span class="token punctuation">.</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>it <span class="token operator">!=</span> mp<span class="token punctuation">.</span><span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    cout <span class="token operator">&lt;&lt;</span> it<span class="token operator">-</span><span class="token operator">></span>first <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> it<span class="token operator">-</span><span class="token operator">></span>second <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>    it <span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ç»“æœï¼š</strong></p><pre><code>3 42 31 2</code></pre><hr><h4 id="6-2-4-äºŒåˆ†æŸ¥æ‰¾"><a href="#6-2-4-äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="6.2.4 äºŒåˆ†æŸ¥æ‰¾"></a>6.2.4 äºŒåˆ†æŸ¥æ‰¾</h4><p>äºŒåˆ†æŸ¥æ‰¾<code>lower_bound() upper_bound()</code></p><blockquote><p>mapçš„äºŒåˆ†æŸ¥æ‰¾ä»¥ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆå³é”®ä¸ºå‡†ï¼‰ï¼Œå¯¹<strong>é”®</strong>è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾<br>è¿”å›å€¼ä¸ºmapè¿­ä»£å™¨ç±»å‹</p></blockquote><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span> m<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æœ‰åº</span>    map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token operator">::</span>iterator it1 <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">lower_bound</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cout <span class="token operator">&lt;&lt;</span> it1<span class="token operator">-</span><span class="token operator">></span>first <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//it1->first=2</span>    map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token operator">::</span>iterator it2 <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">upper_bound</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cout <span class="token operator">&lt;&lt;</span> it2<span class="token operator">-</span><span class="token operator">></span>first <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//it2->first=6</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h3 id="6-3-æ·»åŠ å…ƒç´ "><a href="#6-3-æ·»åŠ å…ƒç´ " class="headerlink" title="6.3 æ·»åŠ å…ƒç´ "></a>6.3 æ·»åŠ å…ƒç´ </h3><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//å…ˆå£°æ˜</span>map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span>string<span class="token operator">></span> mp<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li><strong>æ–¹å¼ä¸€ï¼š</strong></li></ul><pre class="line-numbers language-cpp"><code class="language-cpp">mp<span class="token punctuation">[</span><span class="token string">"å­¦ä¹ "</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"çœ‹ä¹¦"</span><span class="token punctuation">;</span>mp<span class="token punctuation">[</span><span class="token string">"ç©è€"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"æ‰“æ¸¸æˆ"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li><strong>æ–¹å¼äºŒï¼šæ’å…¥å…ƒç´ æ„é€ é”®å€¼å¯¹</strong></li></ul><pre class="line-numbers language-cpp"><code class="language-cpp">mp<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"vegetable"</span><span class="token punctuation">,</span><span class="token string">"è”¬èœ"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><strong>æ–¹å¼ä¸‰ï¼š</strong></li></ul><pre class="line-numbers language-cpp"><code class="language-cpp">mp<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>pair<span class="token operator">&lt;</span>string<span class="token punctuation">,</span>string<span class="token operator">></span><span class="token punctuation">(</span><span class="token string">"fruit"</span><span class="token punctuation">,</span><span class="token string">"æ°´æœ"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><strong>æ–¹å¼å››:</strong></li></ul><pre class="line-numbers language-cpp"><code class="language-cpp">mp<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"hahaha"</span><span class="token punctuation">,</span><span class="token string">"wawawa"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h3 id="6-4-è®¿é—®å…ƒç´ "><a href="#6-4-è®¿é—®å…ƒç´ " class="headerlink" title="6.4 è®¿é—®å…ƒç´ "></a>6.4 è®¿é—®å…ƒç´ </h3><h4 id="6-4-1-ä¸‹æ ‡è®¿é—®"><a href="#6-4-1-ä¸‹æ ‡è®¿é—®" class="headerlink" title="6.4.1 ä¸‹æ ‡è®¿é—®"></a>6.4.1 ä¸‹æ ‡è®¿é—®</h4><p>(å¤§éƒ¨åˆ†æƒ…å†µç”¨äºè®¿é—®å•ä¸ªå…ƒç´ )</p><pre class="line-numbers language-cpp"><code class="language-cpp">mp<span class="token punctuation">[</span><span class="token string">"èœå“‡èœ"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"å¼ºå“‡å¼º"</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> mp<span class="token punctuation">[</span><span class="token string">"èœå“‡èœ"</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//åªæ˜¯ç®€å†™çš„ä¸€ä¸ªä¾‹å­ï¼Œç¨‹åºå¹¶ä¸å®Œæ•´</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="6-4-2-éå†è®¿é—®"><a href="#6-4-2-éå†è®¿é—®" class="headerlink" title="6.4.2 éå†è®¿é—®"></a>6.4.2 éå†è®¿é—®</h4><ul><li>æ–¹å¼ä¸€ï¼šè¿­ä»£å™¨è®¿é—®</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp">map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span>string<span class="token operator">></span><span class="token operator">::</span>iterator it<span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span>it <span class="token operator">=</span> mp<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> mp<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//      é”®                 å€¼ </span>    <span class="token comment" spellcheck="true">// itæ˜¯ç»“æ„ä½“æŒ‡é’ˆè®¿é—®æ‰€ä»¥è¦ç”¨ -> è®¿é—®</span>    cout <span class="token operator">&lt;&lt;</span> it<span class="token operator">-</span><span class="token operator">></span>first <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> it<span class="token operator">-</span><span class="token operator">></span>second <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//*itæ˜¯ç»“æ„ä½“å˜é‡ è®¿é—®è¦ç”¨ . è®¿é—®</span>    <span class="token comment" spellcheck="true">//cout&lt;&lt;(*it).first&lt;&lt;" "&lt;&lt;(*it).second;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ–¹å¼äºŒï¼šæ™ºèƒ½æŒ‡é’ˆè®¿é—®</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> i <span class="token operator">:</span> mp<span class="token punctuation">)</span>cout <span class="token operator">&lt;&lt;</span> i<span class="token punctuation">.</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> i<span class="token punctuation">.</span>second <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//é”®ï¼Œå€¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li>æ–¹å¼ä¸‰ï¼šå¯¹æŒ‡å®šå•ä¸ªå…ƒç´ è®¿é—®</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp">map<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">::</span>iterator it <span class="token operator">=</span> mp<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> it <span class="token operator">-</span><span class="token operator">></span> first <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span>  it<span class="token operator">-</span><span class="token operator">></span>second <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li>æ–¹å¼å››ï¼šc++17ç‰¹æ€§æ‰å…·æœ‰</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">:</span> mp<span class="token punctuation">)</span>    cout <span class="token operator">&lt;&lt;</span> x <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> y <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//x,yå¯¹åº”é”®å’Œå€¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="6-5-ä¸unordered-mapçš„æ¯”è¾ƒ"><a href="#6-5-ä¸unordered-mapçš„æ¯”è¾ƒ" class="headerlink" title="6.5 ä¸unordered_mapçš„æ¯”è¾ƒ"></a>6.5 ä¸unordered_mapçš„æ¯”è¾ƒ</h3><p>è¿™é‡Œå°±ä¸å•å¼€ä¸€ä¸ªå¤§ç›®å½•è®²unordered_mapäº†ï¼Œç›´æ¥åœ¨mapé‡Œé¢è®²äº†ã€‚</p><h4 id="6-5-1-å†…éƒ¨å®ç°åŸç†"><a href="#6-5-1-å†…éƒ¨å®ç°åŸç†" class="headerlink" title="6.5.1 å†…éƒ¨å®ç°åŸç†"></a>6.5.1 å†…éƒ¨å®ç°åŸç†</h4><p><strong>map</strong>ï¼šå†…éƒ¨ç”¨<strong>çº¢é»‘æ ‘</strong>å®ç°ï¼Œå…·æœ‰<strong>è‡ªåŠ¨æ’åº</strong>ï¼ˆæŒ‰é”®ä»å°åˆ°å¤§ï¼‰åŠŸèƒ½ã€‚</p><p><strong>unordered_map</strong>ï¼šå†…éƒ¨ç”¨<strong>å“ˆå¸Œè¡¨</strong>å®ç°ï¼Œå†…éƒ¨å…ƒç´ æ— åºæ‚ä¹±ã€‚</p><h4 id="6-5-2-æ•ˆç‡æ¯”è¾ƒ"><a href="#6-5-2-æ•ˆç‡æ¯”è¾ƒ" class="headerlink" title="6.5.2 æ•ˆç‡æ¯”è¾ƒ"></a>6.5.2 æ•ˆç‡æ¯”è¾ƒ</h4><p><strong>map</strong>ï¼š</p><ul><li><p>ä¼˜ç‚¹ï¼šå†…éƒ¨ç”¨çº¢é»‘æ ‘å®ç°ï¼Œå†…éƒ¨å…ƒç´ å…·æœ‰æœ‰åºæ€§ï¼ŒæŸ¥è¯¢åˆ é™¤ç­‰æ“ä½œå¤æ‚åº¦ä¸º$O(logN)$</p></li><li><p>ç¼ºç‚¹ï¼šå ç”¨ç©ºé—´ï¼Œçº¢é»‘æ ‘é‡Œæ¯ä¸ªèŠ‚ç‚¹éœ€è¦ä¿å­˜çˆ¶å­èŠ‚ç‚¹å’Œçº¢é»‘æ€§è´¨ç­‰ä¿¡æ¯ï¼Œç©ºé—´å ç”¨è¾ƒå¤§ã€‚</p></li></ul><p><strong>unordered_map</strong>ï¼š</p><ul><li>ä¼˜ç‚¹ï¼šå†…éƒ¨ç”¨å“ˆå¸Œè¡¨å®ç°ï¼ŒæŸ¥æ‰¾é€Ÿåº¦éå¸¸å¿«ï¼ˆé€‚ç”¨äºå¤§é‡çš„æŸ¥è¯¢æ“ä½œï¼‰ã€‚</li><li>ç¼ºç‚¹ï¼šå»ºç«‹å“ˆå¸Œè¡¨æ¯”è¾ƒè€—æ—¶ã€‚</li></ul><blockquote><p>ä¸¤è€…æ–¹æ³•å‡½æ•°åŸºæœ¬ä¸€æ ·ï¼Œå·®åˆ«ä¸å¤§ã€‚</p><p>æ³¨æ„ï¼š</p><ul><li><p>éšç€å†…éƒ¨å…ƒç´ è¶Šæ¥è¶Šå¤šï¼Œä¸¤ç§å®¹å™¨çš„æ’å…¥åˆ é™¤æŸ¥è¯¢æ“ä½œçš„æ—¶é—´éƒ½ä¼šé€æ¸å˜å¤§ï¼Œæ•ˆç‡é€æ¸å˜ä½ã€‚</p></li><li><p>ä½¿ç”¨<code>[]</code>æŸ¥æ‰¾å…ƒç´ æ—¶ï¼Œå¦‚æœå…ƒç´ ä¸å­˜åœ¨ï¼Œä¸¤ç§å®¹å™¨<strong>éƒ½æ˜¯</strong>åˆ›å»ºä¸€ä¸ªç©ºçš„å…ƒç´ ï¼›å¦‚æœå­˜åœ¨ï¼Œä¼šæ­£å¸¸ç´¢å¼•å¯¹åº”çš„å€¼ã€‚æ‰€ä»¥å¦‚æœæŸ¥è¯¢è¿‡å¤šçš„ä¸å­˜åœ¨çš„å…ƒç´ å€¼ï¼Œå®¹å™¨å†…éƒ¨ä¼šåˆ›å»ºå¤§é‡çš„ç©ºçš„é”®å€¼å¯¹ï¼Œåç»­æŸ¥è¯¢åˆ›å»ºåˆ é™¤æ•ˆç‡ä¼š<strong>å¤§å¤§é™ä½</strong>ã€‚</p></li><li><p>æŸ¥è¯¢å®¹å™¨å†…éƒ¨å…ƒç´ çš„æœ€ä¼˜æ–¹æ³•æ˜¯ï¼šå…ˆåˆ¤æ–­å­˜åœ¨ä¸å¦ï¼Œå†ç´¢å¼•å¯¹åº”å€¼ï¼ˆé€‚ç”¨äºè¿™ä¸¤ç§å®¹å™¨ï¼‰</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">// ä»¥ map ä¸ºä¾‹</span>map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span> mp<span class="token punctuation">;</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">999999999</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>mp<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// æ­¤å¤„åˆ¤æ–­æ˜¯å¦å­˜åœ¨xè¿™ä¸ªé”®</span>    cout <span class="token operator">&lt;&lt;</span> mp<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">// åªæœ‰å­˜åœ¨æ‰ä¼šç´¢å¼•å¯¹åº”çš„å€¼ï¼Œé¿å…ä¸å­˜åœ¨xæ—¶å¤šä½™ç©ºå…ƒç´ çš„åˆ›å»º</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul></blockquote><p>å¦å¤–ï¼š</p><blockquote><p>è¿˜æœ‰ä¸€ç§æ˜ å°„ï¼š<code>multimap</code></p><p>é”®å¯ä»¥é‡å¤ï¼Œå³ä¸€ä¸ªé”®å¯¹åº”å¤šä¸ªå€¼ï¼Œå¦‚è¦äº†è§£ï¼Œå¯ä»¥è‡ªè¡Œæœç´¢ã€‚</p></blockquote><hr><h2 id="7-set"><a href="#7-set" class="headerlink" title="7 set"></a>7 set</h2><h3 id="7-1-ä»‹ç»"><a href="#7-1-ä»‹ç»" class="headerlink" title="7.1 ä»‹ç»"></a>7.1 ä»‹ç»</h3><p>setå®¹å™¨ä¸­çš„å…ƒç´ ä¸ä¼šé‡å¤ï¼Œå½“æ’å…¥é›†åˆä¸­å·²æœ‰çš„å…ƒç´ æ—¶ï¼Œå¹¶ä¸ä¼šæ’å…¥è¿›å»ï¼Œè€Œä¸”setå®¹å™¨é‡Œçš„å…ƒç´ è‡ªåŠ¨ä»å°åˆ°å¤§æ’åºã€‚</p><p>å³ï¼šseté‡Œé¢çš„å…ƒç´ <strong>ä¸é‡å¤ ä¸”æœ‰åº</strong></p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//å¤´æ–‡ä»¶</span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;set></span></span><span class="token comment" spellcheck="true">//åˆå§‹åŒ–å®šä¹‰</span>set<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> s<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="7-2-å‡½æ•°æ–¹æ³•"><a href="#7-2-å‡½æ•°æ–¹æ³•" class="headerlink" title="7.2 å‡½æ•°æ–¹æ³•"></a>7.2 å‡½æ•°æ–¹æ³•</h3><table><thead><tr><th>ä»£ç </th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>s.begin()</code></td><td>è¿”å›setå®¹å™¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€ï¼ˆè¿­ä»£å™¨ï¼‰$O(1)$</td></tr><tr><td><code>s.end()</code></td><td>è¿”å›setå®¹å™¨çš„æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªåœ°å€ï¼ˆè¿­ä»£å™¨ï¼‰$O(1)$</td></tr><tr><td><code>s.rbegin()</code></td><td>è¿”å›é€†åºè¿­ä»£å™¨ï¼ŒæŒ‡å‘å®¹å™¨å…ƒç´ æœ€åä¸€ä¸ªä½ç½®$O(1)$</td></tr><tr><td><code>s.rend()</code></td><td>è¿”å›é€†åºè¿­ä»£å™¨ï¼ŒæŒ‡å‘å®¹å™¨ç¬¬ä¸€ä¸ªå…ƒç´ å‰é¢çš„ä½ç½®$O(1)$</td></tr><tr><td><code>s.clear()</code></td><td>åˆ é™¤setå®¹å™¨ä¸­çš„æ‰€æœ‰çš„å…ƒç´ ,è¿”å›unsigned intç±»å‹$O(N)$</td></tr><tr><td><code>s.empty()</code></td><td>åˆ¤æ–­setå®¹å™¨æ˜¯å¦ä¸ºç©º$O(1)$</td></tr><tr><td><code>s.insert()</code></td><td>æ’å…¥ä¸€ä¸ªå…ƒç´ </td></tr><tr><td><code>s.size()</code></td><td>è¿”å›å½“å‰setå®¹å™¨ä¸­çš„å…ƒç´ ä¸ªæ•°$O(1)$</td></tr><tr><td><code>erase(iterator)</code></td><td>åˆ é™¤å®šä½å™¨iteratoræŒ‡å‘çš„å€¼</td></tr><tr><td><code>erase(first,secondï¼‰</code></td><td>åˆ é™¤å®šä½å™¨firstå’Œsecondä¹‹é—´çš„å€¼</td></tr><tr><td><code>erase(key_value)</code></td><td>åˆ é™¤é”®å€¼key_valueçš„å€¼</td></tr><tr><td>æŸ¥æ‰¾</td><td></td></tr><tr><td><code>s.find(element)</code></td><td>æŸ¥æ‰¾setä¸­çš„æŸä¸€å…ƒç´ ï¼Œæœ‰åˆ™è¿”å›è¯¥å…ƒç´ å¯¹åº”çš„è¿­ä»£å™¨ï¼Œæ— åˆ™è¿”å›ç»“æŸè¿­ä»£å™¨</td></tr><tr><td><code>s.count(element)</code></td><td>æŸ¥æ‰¾setä¸­çš„å…ƒç´ å‡ºç°çš„ä¸ªæ•°ï¼Œç”±äºsetä¸­å…ƒç´ å”¯ä¸€ï¼Œæ­¤å‡½æ•°ç›¸å½“äºæŸ¥è¯¢elementæ˜¯å¦å‡ºç°</td></tr><tr><td><code>s.lower_bound(k)</code></td><td>è¿”å›å¤§äºç­‰äºkçš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨$O(logN)$</td></tr><tr><td><code>s.upper_bound(k)</code></td><td>è¿”å›å¤§äºkçš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨$O(logN)$</td></tr></tbody></table><hr><h3 id="7-3-è®¿é—®"><a href="#7-3-è®¿é—®" class="headerlink" title="7.3 è®¿é—®"></a>7.3 è®¿é—®</h3><ul><li><strong>è¿­ä»£å™¨è®¿é—®</strong></li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">for</span><span class="token punctuation">(</span>set<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">::</span>iterator it <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> s<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it<span class="token operator">++</span><span class="token punctuation">)</span>    cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>it <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li><strong>æ™ºèƒ½æŒ‡é’ˆ</strong></li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> i <span class="token operator">:</span> s<span class="token punctuation">)</span>    cout <span class="token operator">&lt;&lt;</span> i <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li><strong>è®¿é—®æœ€åä¸€ä¸ªå…ƒç´ </strong></li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//ç¬¬ä¸€ç§</span>cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>s<span class="token punctuation">.</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-cpp"><code class="language-cpp"> <span class="token comment" spellcheck="true">//ç¬¬äºŒç§</span>set<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">::</span>iterator iter <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>iter<span class="token operator">--</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span><span class="token operator">*</span>iter<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//æ‰“å°2;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//ç¬¬ä¸‰ç§</span>cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">--</span>s<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><hr><h3 id="7-4-é‡è½½-lt-è¿ç®—ç¬¦"><a href="#7-4-é‡è½½-lt-è¿ç®—ç¬¦" class="headerlink" title="7.4 é‡è½½&lt;è¿ç®—ç¬¦"></a>7.4 é‡è½½&lt;è¿ç®—ç¬¦</h3><ul><li><strong>åŸºç¡€æ•°æ®ç±»å‹</strong></li></ul><p>æ–¹å¼ä¸€ï¼šæ”¹å˜setæ’åºè§„åˆ™ï¼Œsetä¸­é»˜è®¤ä½¿ç”¨lessæ¯”è¾ƒå™¨ï¼Œå³ä»å°åˆ°å¤§æ’åºã€‚ï¼ˆå¸¸ç”¨ï¼‰</p><pre class="line-numbers language-cpp"><code class="language-cpp">set<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> s1<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// é»˜è®¤ä»å°åˆ°å¤§æ’åº</span>set<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> greater<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">></span> s2<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ä»å¤§åˆ°å°æ’åº</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æ–¹å¼äºŒï¼šé‡è½½è¿ç®—ç¬¦ã€‚ï¼ˆå¾ˆéº»çƒ¦ï¼Œä¸å¤ªå¸¸ç”¨ï¼Œæ²¡å¿…è¦ï¼‰</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//é‡è½½ &lt; è¿ç®—ç¬¦</span><span class="token keyword">struct</span> cmp <span class="token punctuation">{</span>    <span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> u<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> v<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>       <span class="token comment" spellcheck="true">// return + è¿”å›æ¡ä»¶</span>       <span class="token keyword">return</span> u <span class="token operator">></span> v<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>set<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> cmp<span class="token operator">></span> s<span class="token punctuation">;</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> i <span class="token operator">:</span> s<span class="token punctuation">)</span>    cout <span class="token operator">&lt;&lt;</span> i <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 10 9 8 7 6 5 4 3 2 1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ–¹å¼ä¸‰ï¼šåˆå§‹åŒ–æ—¶ä½¿ç”¨åŒ¿åå‡½æ•°å®šä¹‰æ¯”è¾ƒè§„åˆ™</p><pre class="line-numbers language-cpp"><code class="language-cpp">set<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> function<span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token operator">>></span> <span class="token function">s</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> i <span class="token operator">></span> j<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ä»å¤§åˆ°å°</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> x <span class="token operator">:</span> s<span class="token punctuation">)</span>    cout <span class="token operator">&lt;&lt;</span> x <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><strong>é«˜çº§æ•°æ®ç±»å‹ï¼ˆç»“æ„ä½“ï¼‰</strong></li></ul><p>ç›´æ¥é‡è½½ç»“æ„ä½“è¿ç®—ç¬¦å³å¯ï¼Œè®©ç»“æ„ä½“å¯ä»¥æ¯”è¾ƒã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Point <span class="token punctuation">{</span>    <span class="token keyword">int</span> x<span class="token punctuation">,</span> y<span class="token punctuation">;</span>    <span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">&lt;</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Point <span class="token operator">&amp;</span>p<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// æŒ‰ç…§ç‚¹çš„æ¨ªåæ ‡ä»å°åˆ°å¤§æ’åº,å¦‚æœæ¨ªåæ ‡ç›¸åŒ,çºµåæ ‡ä»å°åˆ°å¤§</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> p<span class="token punctuation">.</span>x<span class="token punctuation">)</span>            <span class="token keyword">return</span> y <span class="token operator">&lt;</span> p<span class="token punctuation">.</span>y<span class="token punctuation">;</span>        <span class="token keyword">return</span> x <span class="token operator">&lt;</span> p<span class="token punctuation">.</span>x<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>set<span class="token operator">&lt;</span>Point<span class="token operator">></span> s<span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> x<span class="token punctuation">,</span> y<span class="token punctuation">;</span>    cin <span class="token operator">>></span> x <span class="token operator">>></span> y<span class="token punctuation">;</span>    s<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/* è¾“å…¥5 45 23 73 54 8*/</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> i <span class="token operator">:</span> s<span class="token punctuation">)</span>    cout <span class="token operator">&lt;&lt;</span> i<span class="token punctuation">.</span>x <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> i<span class="token punctuation">.</span>y <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* è¾“å‡º3 53 74 85 25 4*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="7-5-å…¶å®ƒset"><a href="#7-5-å…¶å®ƒset" class="headerlink" title="7.5 å…¶å®ƒset"></a>7.5 å…¶å®ƒset</h3><p><code>multiset</code>:å…ƒç´ å¯ä»¥é‡å¤ï¼Œä¸”å…ƒç´ æœ‰åº</p><p><code>unordered_set</code>  ï¼šå…ƒç´ æ— åºä¸”åªèƒ½å‡ºç°ä¸€æ¬¡</p><p><code>unordered_multiset</code> ï¼š  å…ƒç´ æ— åºå¯ä»¥å‡ºç°å¤šæ¬¡</p><hr><h2 id="8-pair"><a href="#8-pair" class="headerlink" title="8 pair"></a>8 pair</h2><h3 id="8-1-ä»‹ç»"><a href="#8-1-ä»‹ç»" class="headerlink" title="8.1 ä»‹ç»"></a>8.1 ä»‹ç»</h3><p>pairåªå«æœ‰ä¸¤ä¸ªå…ƒç´ ï¼Œå¯ä»¥çœ‹ä½œæ˜¯åªæœ‰ä¸¤ä¸ªå…ƒç´ çš„ç»“æ„ä½“ã€‚</p><p><strong>åº”ç”¨ï¼š</strong></p><ul><li>ä»£æ›¿äºŒå…ƒç»“æ„ä½“</li><li>ä½œä¸ºmapé”®å€¼å¯¹è¿›è¡Œæ’å…¥ï¼ˆä»£ç å¦‚ä¸‹ï¼‰</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp">map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span>mp<span class="token punctuation">;</span>mp<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>pair<span class="token operator">&lt;</span>string<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token string">"xingmaqi"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// mp.insert(make_pair("xingmaqi", 1));</span><span class="token comment" spellcheck="true">// mp.insert({"xingmaqi", 1});</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//å¤´æ–‡ä»¶</span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;utility></span></span><span class="token comment" spellcheck="true">//1.åˆå§‹åŒ–å®šä¹‰</span>pair<span class="token operator">&lt;</span>string<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token string">"wangyaqi"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¸¦åˆå§‹å€¼çš„</span>pair<span class="token operator">&lt;</span>string<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> p<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ä¸å¸¦åˆå§‹å€¼çš„</span><span class="token comment" spellcheck="true">//2.èµ‹å€¼</span>p <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"wang"</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">;</span>p <span class="token operator">=</span> <span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"wang"</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>p <span class="token operator">=</span> pair<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token string">"wang"</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="8-2-è®¿é—®"><a href="#8-2-è®¿é—®" class="headerlink" title="8.2 è®¿é—®"></a>8.2 è®¿é—®</h3><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//å®šä¹‰ç»“æ„ä½“æ•°ç»„</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> p<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//å’Œç»“æ„ä½“ç±»ä¼¼ï¼Œfirstä»£è¡¨ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œsecondä»£è¡¨ç¬¬äºŒä¸ªå…ƒç´ </span>    cout <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="9-string"><a href="#9-string" class="headerlink" title="9 string"></a>9 string</h2><h3 id="9-1-ä»‹ç»"><a href="#9-1-ä»‹ç»" class="headerlink" title="9.1 ä»‹ç»"></a>9.1 ä»‹ç»</h3><p>stringæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»ï¼Œå’Œ<code>char</code>å‹å­—ç¬¦ä¸²ç±»ä¼¼ã€‚</p><p>å¯ä»¥æŠŠstringç†è§£ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹ï¼Œåƒintä¸€æ ·å¯ä»¥å®šä¹‰</p><h3 id="9-2-åˆå§‹åŒ–åŠå®šä¹‰"><a href="#9-2-åˆå§‹åŒ–åŠå®šä¹‰" class="headerlink" title="9.2 åˆå§‹åŒ–åŠå®šä¹‰"></a>9.2 åˆå§‹åŒ–åŠå®šä¹‰</h3><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//å¤´æ–‡ä»¶</span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;string></span></span><span class="token comment" spellcheck="true">//1.</span>string str1<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//ç”Ÿæˆç©ºå­—ç¬¦ä¸²</span><span class="token comment" spellcheck="true">//2.</span>string <span class="token function">str2</span><span class="token punctuation">(</span><span class="token string">"123456789"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//ç”Ÿæˆ"1234456789"çš„å¤åˆ¶å“ </span><span class="token comment" spellcheck="true">//3.</span>string <span class="token function">str3</span><span class="token punctuation">(</span><span class="token string">"12345"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ç»“æœä¸º"123" ï¼Œä»0ä½ç½®å¼€å§‹ï¼Œé•¿åº¦ä¸º3</span><span class="token comment" spellcheck="true">//4.</span>string <span class="token function">str4</span><span class="token punctuation">(</span><span class="token string">"123456"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//ç»“æœä¸º"12345" ï¼Œé•¿åº¦ä¸º5</span><span class="token comment" spellcheck="true">//5.</span>string <span class="token function">str5</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//ç»“æœä¸º"22222" ,æ„é€ 5ä¸ªå­—ç¬¦'2'è¿æ¥è€Œæˆçš„å­—ç¬¦ä¸²</span><span class="token comment" spellcheck="true">//6.</span>string <span class="token function">str6</span><span class="token punctuation">(</span>str2<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//ç»“æœä¸º"3456789"ï¼Œæˆªå–ç¬¬ä¸‰ä¸ªå…ƒç´ ï¼ˆ2å¯¹åº”ç¬¬ä¸‰ä½ï¼‰åˆ°æœ€å</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ç®€å•ä½¿ç”¨</strong></p><ul><li>è®¿é—®å•ä¸ªå­—ç¬¦ï¼š</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;string></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    string s <span class="token operator">=</span> <span class="token string">"xing ma qi!!!"</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        cout <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>stringæ•°ç»„ä½¿ç”¨ï¼š</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;string></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    string s<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"loading...  "</span> <span class="token punctuation">;</span>        cout <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> i <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>     <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç»“æœï¼š</p><pre><code>loading...  1loading...  2loading...  3loading...  4loading...  5loading...  6loading...  7loading...  8loading...  9</code></pre><h3 id="9-3-string-ç‰¹æ€§"><a href="#9-3-string-ç‰¹æ€§" class="headerlink" title="9.3 string ç‰¹æ€§"></a>9.3 string ç‰¹æ€§</h3><ul><li><p>æ”¯æŒ<strong>æ¯”è¾ƒ</strong>è¿ç®—ç¬¦<br>stringå­—ç¬¦ä¸²æ”¯æŒå¸¸è§çš„æ¯”è¾ƒæ“ä½œç¬¦<code>ï¼ˆ&gt;,&gt;=,&lt;,&lt;=,==,!=ï¼‰</code>ï¼Œæ”¯æŒ<code>string</code>ä¸<code>C-string</code>çš„æ¯”è¾ƒï¼ˆå¦‚ <code>str &lt; &quot;hello&quot;</code>ï¼‰ã€‚<br>åœ¨ä½¿ç”¨<code>&gt;,&gt;=,&lt;,&lt;=</code>è¿™äº›æ“ä½œç¬¦çš„æ—¶å€™æ˜¯æ ¹æ®â€œå½“å‰å­—ç¬¦ç‰¹æ€§â€å°†å­—ç¬¦æŒ‰ <code>å­—å…¸é¡ºåº</code> è¿›è¡Œé€ä¸€å¾— æ¯”è¾ƒã€‚å­—å…¸æ’åºé å‰çš„å­—ç¬¦å°ï¼Œ æ¯”è¾ƒçš„é¡ºåºæ˜¯ä»å‰å‘åæ¯”è¾ƒï¼Œé‡åˆ°ä¸ç›¸ç­‰çš„å­—ç¬¦å°±æŒ‰è¿™ä¸ªä½ç½®ä¸Šçš„ä¸¤ä¸ªå­—ç¬¦çš„æ¯”è¾ƒç»“æœç¡®å®šä¸¤ä¸ªå­—ç¬¦ä¸²çš„å¤§å°ï¼ˆå‰é¢å‡åé¢ï¼‰ã€‚</p><p>åŒæ—¶ï¼Œ<code>string (&quot;aaaa&quot;) &lt;string(aaaaa)</code>ã€‚</p><ul><li><p>æ”¯æŒ<code>+</code><strong>è¿ç®—</strong>ç¬¦ï¼Œä»£è¡¨æ‹¼æ¥å­—ç¬¦ä¸²<br>stringå­—ç¬¦ä¸²å¯ä»¥æ‹¼æ¥ï¼Œé€šè¿‡â€+â€è¿ç®—ç¬¦è¿›è¡Œæ‹¼æ¥ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp">string s1 <span class="token operator">=</span> <span class="token string">"123"</span><span class="token punctuation">;</span>string s2 <span class="token operator">=</span> <span class="token string">"456"</span><span class="token punctuation">;</span>string s <span class="token operator">=</span> s1 <span class="token operator">+</span> s2<span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//123456</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li></ul><h3 id="9-4-è¯»å…¥è¯¦è§£"><a href="#9-4-è¯»å…¥è¯¦è§£" class="headerlink" title="9.4 è¯»å…¥è¯¦è§£"></a>9.4 è¯»å…¥è¯¦è§£</h3><p><strong>è¯»å…¥å­—ç¬¦ä¸²ï¼Œé‡ç©ºæ ¼ï¼Œå›è½¦ç»“æŸ</strong></p><pre class="line-numbers language-cpp"><code class="language-cpp">string s<span class="token punctuation">;</span>cin <span class="token operator">>></span> s<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p> <strong>è¯»å…¥ä¸€è¡Œå­—ç¬¦ä¸²ï¼ˆåŒ…æ‹¬ç©ºæ ¼ï¼‰ï¼Œé‡å›è½¦ç»“æŸ</strong></p><pre class="line-numbers language-cpp"><code class="language-cpp">string s<span class="token punctuation">;</span><span class="token function">getline</span><span class="token punctuation">(</span>cin<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æ³¨æ„: <code>getline(cin, s)</code>ä¼šè·å–å‰ä¸€ä¸ªè¾“å…¥çš„æ¢è¡Œç¬¦ï¼Œéœ€è¦åœ¨å‰é¢æ·»åŠ è¯»å–æ¢è¡Œç¬¦çš„è¯­å¥ã€‚å¦‚ï¼š<code>getchar()</code> æˆ–<code>cin.get()</code></p><p>é”™è¯¯è¯»å–ï¼š</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> n<span class="token punctuation">;</span>string s<span class="token punctuation">;</span>cin <span class="token operator">>></span> n<span class="token punctuation">;</span><span class="token function">getline</span><span class="token punctuation">(</span>cin<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//æ­¤æ—¶è¯»å–ç›¸å½“äºè¯»å–äº†å‰ä¸€ä¸ªå›è½¦å­—ç¬¦</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ­£ç¡®è¯»å–ï¼š</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> n<span class="token punctuation">;</span>string s<span class="token punctuation">;</span>cin <span class="token operator">>></span> n<span class="token punctuation">;</span><span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//cin.get()</span><span class="token function">getline</span><span class="token punctuation">(</span>cin<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¯æ­£ç¡®è¯»å…¥ä¸‹ä¸€è¡Œçš„è¾“å…¥</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><code>cin</code>ä¸<code>cin.getline()</code>æ··ç”¨</p><p>cinè¾“å…¥å®Œåï¼Œå›è½¦ï¼Œciné‡åˆ°å›è½¦ç»“æŸè¾“å…¥ï¼Œä½†å›è½¦è¿˜åœ¨è¾“å…¥æµä¸­ï¼Œcinå¹¶ä¸ä¼šæ¸…é™¤ï¼Œå¯¼è‡´<code>getline()</code>è¯»å–å›è½¦ï¼Œç»“æŸã€‚<br>éœ€è¦åœ¨cinåé¢åŠ <code>cin.ignore()</code>ï¼›ä¸»åŠ¨åˆ é™¤è¾“å…¥æµä¸­çš„æ¢è¡Œç¬¦ã€‚ï¼ˆä¸å¸¸ç”¨ï¼‰</p></blockquote><p><strong>cinå’Œcoutè§£é”</strong></p><p>ä»£ç ï¼ˆå†™åœ¨mainå‡½æ•°å¼€å¤´ï¼‰ï¼š</p><pre class="line-numbers language-cpp"><code class="language-cpp">ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>cout<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>ä¸ºä»€ä¹ˆè¦è¿›è¡Œ<code>cin</code>å’Œ<code>cout</code>çš„è§£é”ï¼ŒåŸå› æ˜¯ï¼š</p><p>åœ¨ä¸€äº›é¢˜ç›®ä¸­ï¼Œè¯»å…¥çš„<strong>æ•°æ®é‡å¾ˆå¤§</strong>ï¼Œå¾€å¾€è¶…è¿‡äº†1e5ï¼ˆ10^5^ï¼‰çš„æ•°æ®é‡,è€Œ<code>cin</code>å’Œ<code>cout</code>çš„è¯»å…¥è¾“å‡ºçš„é€Ÿåº¦<strong>å¾ˆæ…¢</strong>ï¼ˆæ˜¯å› ä¸º<code>cin</code>å’Œ<code>cout</code>ä¸ºäº†å…¼å®¹Cè¯­è¨€çš„è¯»å…¥è¾“å‡ºåœ¨æ€§èƒ½ä¸Šåšäº†å¦¥åï¼‰ï¼Œè¿œä¸å¦‚<code>scanf</code>å’Œ<code>printf</code>çš„é€Ÿåº¦ï¼Œå…·ä½“åŸå› å¯ä»¥æœç´¢ç›¸å…³çš„åšå®¢è¿›è¡Œäº†è§£ã€‚</p><p><strong>æ‰€ä»¥</strong>å¯¹<code>cin</code>å’Œ<code>cout</code>è¿›è¡Œè§£é”ä½¿<code>cin</code>å’Œ<code>cout</code>çš„é€Ÿåº¦å‡ ä¹æ¥è¿‘<code>scanf</code>å’Œ<code>printf</code>ï¼Œé¿å…è¾“å…¥è¾“å‡ºè¶…æ—¶ã€‚</p></blockquote><p><strong>æ³¨æ„</strong>ï¼š<code>cin cout</code>è§£é”ä½¿ç”¨æ—¶ï¼Œä¸èƒ½ä¸ <code>scanf,getchar, printf,cin.getline()</code>æ··ç”¨ï¼Œä¸€å®šè¦æ³¨æ„ï¼Œä¼šå‡ºé”™ã€‚</p><blockquote><p><strong>stringä¸Cè¯­è¨€å­—ç¬¦ä¸²ï¼ˆC-stringï¼‰çš„åŒºåˆ«</strong></p><ul><li>string<br>æ˜¯C++çš„ä¸€ä¸ªç±»ï¼Œä¸“é—¨å®ç°å­—ç¬¦ä¸²çš„ç›¸å…³æ“ä½œã€‚å…·æœ‰ä¸°å¯Œçš„æ“ä½œæ–¹æ³•ï¼Œæ•°æ®ç±»å‹ä¸º<code>string</code>ï¼Œå­—ç¬¦ä¸²ç»“å°¾æ²¡æœ‰<code>\0</code>å­—ç¬¦</li><li>C-string<br>Cè¯­è¨€ä¸­çš„å­—ç¬¦ä¸²ï¼Œç”¨charæ•°ç»„å®ç°ï¼Œç±»å‹ä¸º<code>const char *</code>,å­—ç¬¦ä¸²ç»“å°¾ä»¥<code>\0</code>ç»“å°¾</li></ul></blockquote><p>ä¸€èˆ¬æ¥è¯´stringå‘charæ•°ç»„è½¬æ¢ä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼Œæ‰€ä»¥ä¸ºäº†èƒ½å¤Ÿå®ç°è½¬æ¢ï¼Œstringæœ‰ä¸€ä¸ªæ–¹æ³•<code>c_str()</code>å®ç°stringå‘charæ•°ç»„çš„è½¬æ¢ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp">string s <span class="token operator">=</span> <span class="token string">"xing ma qi"</span><span class="token punctuation">;</span><span class="token keyword">char</span> s2<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="9-5-å‡½æ•°æ–¹æ³•"><a href="#9-5-å‡½æ•°æ–¹æ³•" class="headerlink" title="9.5 å‡½æ•°æ–¹æ³•"></a>9.5 å‡½æ•°æ–¹æ³•</h3><ul><li><strong>è·å–å­—ç¬¦ä¸²é•¿åº¦</strong></li></ul><table><thead><tr><th>ä»£ç </th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>s.size()</code>å’Œ<code>s.length()</code></td><td>è¿”å›stringå¯¹è±¡çš„å­—ç¬¦ä¸ªæ•°ï¼Œä»–ä»¬æ‰§è¡Œæ•ˆæœç›¸åŒã€‚</td></tr><tr><td><code>s.max_size()</code></td><td>è¿”å›stringå¯¹è±¡æœ€å¤šåŒ…å«çš„å­—ç¬¦æ•°ï¼Œè¶…å‡ºä¼šæŠ›å‡ºlength_errorå¼‚å¸¸</td></tr><tr><td><code>s.capacity()</code></td><td>é‡æ–°åˆ†é…å†…å­˜ä¹‹å‰ï¼Œstringå¯¹è±¡èƒ½åŒ…å«çš„æœ€å¤§å­—ç¬¦æ•°</td></tr></tbody></table><ul><li><strong>æ’å…¥</strong></li></ul><table><thead><tr><th>ä»£ç </th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>s.push_back()</code></td><td>åœ¨æœ«å°¾æ’å…¥</td></tr><tr><td>ä¾‹ï¼š<code>s.push_back(&#39;a&#39;)</code></td><td>æœ«å°¾æ’å…¥ä¸€ä¸ªå­—ç¬¦a</td></tr><tr><td><code>s.insert(pos,element)</code></td><td>åœ¨posä½ç½®æ’å…¥element</td></tr><tr><td>ä¾‹ï¼š<code>s.insert(s.begin(),&#39;1&#39;)</code></td><td>åœ¨ç¬¬ä¸€ä¸ªä½ç½®æ’å…¥1å­—ç¬¦</td></tr><tr><td><code>s.append(str)</code></td><td>åœ¨så­—ç¬¦ä¸²ç»“å°¾æ·»åŠ strå­—ç¬¦ä¸²</td></tr><tr><td>ä¾‹ï¼š<code>s.append(&quot;abc&quot;)</code></td><td>åœ¨så­—ç¬¦ä¸²æœ«å°¾æ·»åŠ å­—ç¬¦ä¸²â€œabcâ€</td></tr></tbody></table><ul><li><strong>åˆ é™¤</strong></li></ul><table><thead><tr><th>ä»£ç </th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>erase(iterator p)</code></td><td>åˆ é™¤å­—ç¬¦ä¸²ä¸­pæ‰€æŒ‡çš„å­—ç¬¦</td></tr><tr><td><code>erase(iterator first, iterator last)</code></td><td>åˆ é™¤å­—ç¬¦ä¸²ä¸­è¿­ä»£å™¨åŒºé—´<code>[first,last)</code>ä¸Šæ‰€æœ‰å­—ç¬¦</td></tr><tr><td><code>erase(pos,  len)</code></td><td>åˆ é™¤å­—ç¬¦ä¸²ä¸­ä»ç´¢å¼•ä½ç½®poså¼€å§‹çš„lenä¸ªå­—ç¬¦</td></tr><tr><td><code>clear()</code></td><td>åˆ é™¤å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—ç¬¦</td></tr></tbody></table><ul><li><strong>å­—ç¬¦æ›¿æ¢</strong></li></ul><table><thead><tr><th>ä»£ç </th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>s.replace(pos,n,str)</code></td><td>æŠŠå½“å‰å­—ç¬¦ä¸²ä»ç´¢å¼•poså¼€å§‹çš„nä¸ªå­—ç¬¦æ›¿æ¢ä¸ºstr</td></tr><tr><td><code>s.replace(pos,n,n1,c)</code></td><td>æŠŠå½“å‰å­—ç¬¦ä¸²ä»ç´¢å¼•poså¼€å§‹çš„nä¸ªå­—ç¬¦æ›¿æ¢ä¸ºn1ä¸ªå­—ç¬¦c</td></tr><tr><td><code>s.replace(it1,it2,str)</code></td><td>æŠŠå½“å‰å­—ç¬¦ä¸²<code>[it1,it2)</code>åŒºé—´æ›¿æ¢ä¸ºstr    <strong>it1 ,it2ä¸ºè¿­ä»£å™¨å“¦</strong></td></tr></tbody></table><ul><li><strong>å¤§å°å†™è½¬æ¢</strong> </li></ul><p>æ³•ä¸€ï¼š</p><table><thead><tr><th>ä»£ç </th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>tolower(s[i])</code></td><td>è½¬æ¢ä¸ºå°å†™</td></tr><tr><td><code>toupper(s[i])</code></td><td>è½¬æ¢ä¸ºå¤§å†™</td></tr></tbody></table><p>æ³•äºŒï¼š</p><p>é€šè¿‡stlçš„<code>transform</code>ç®—æ³•é…åˆ<code>tolower</code> å’Œ<code>toupper</code> å®ç°ã€‚<br>æœ‰4ä¸ªå‚æ•°ï¼Œå‰2ä¸ªæŒ‡å®šè¦è½¬æ¢çš„å®¹å™¨çš„èµ·æ­¢èŒƒå›´ï¼Œç¬¬3ä¸ªå‚æ•°æ˜¯ç»“æœå­˜æ”¾å®¹å™¨çš„èµ·å§‹ä½ç½®ï¼Œç¬¬4ä¸ªå‚æ•°æ˜¯ä¸€å…ƒè¿ç®—ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp">string s<span class="token punctuation">;</span><span class="token function">transform</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">::</span>tolower<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//è½¬æ¢å°å†™</span><span class="token function">transform</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">::</span>toupper<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//è½¬æ¢å¤§å†™</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li><strong>åˆ†å‰²</strong></li></ul><table><thead><tr><th>ä»£ç </th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>s.substr(pos,n)</code></td><td>æˆªå–ä»posç´¢å¼•å¼€å§‹çš„nä¸ªå­—ç¬¦</td></tr></tbody></table><ul><li><strong>æŸ¥æ‰¾</strong></li></ul><table><thead><tr><th>ä»£ç </th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>s.find (str,  pos)</code></td><td>åœ¨å½“å‰å­—ç¬¦ä¸²çš„posç´¢å¼•ä½ç½®ï¼ˆé»˜è®¤ä¸º0ï¼‰å¼€å§‹ï¼ŒæŸ¥æ‰¾å­ä¸²strï¼Œè¿”å›æ‰¾åˆ°çš„ä½ç½®ç´¢å¼•ï¼Œ-1è¡¨ç¤ºæŸ¥æ‰¾ä¸åˆ°å­ä¸²</td></tr><tr><td><code>s.find (c, pos)</code></td><td>åœ¨å½“å‰å­—ç¬¦ä¸²çš„posç´¢å¼•ä½ç½®ï¼ˆé»˜è®¤ä¸º0ï¼‰å¼€å§‹ï¼ŒæŸ¥æ‰¾å­—ç¬¦cï¼Œè¿”å›æ‰¾åˆ°çš„ä½ç½®ç´¢å¼•ï¼Œ-1è¡¨ç¤ºæŸ¥æ‰¾ä¸åˆ°å­—ç¬¦</td></tr><tr><td><code>s.rfind (str, pos)</code></td><td>åœ¨å½“å‰å­—ç¬¦ä¸²çš„posç´¢å¼•ä½ç½®å¼€å§‹ï¼Œåå‘æŸ¥æ‰¾å­ä¸²sï¼Œè¿”å›æ‰¾åˆ°çš„ä½ç½®ç´¢å¼•ï¼Œ-1è¡¨ç¤ºæŸ¥æ‰¾ä¸åˆ°å­ä¸²</td></tr><tr><td><code>s.rfind (c,pos)</code></td><td>åœ¨å½“å‰å­—ç¬¦ä¸²çš„posç´¢å¼•ä½ç½®å¼€å§‹ï¼Œåå‘æŸ¥æ‰¾å­—ç¬¦cï¼Œè¿”å›æ‰¾åˆ°çš„ä½ç½®ç´¢å¼•ï¼Œ-1è¡¨ç¤ºæŸ¥æ‰¾ä¸åˆ°å­—ç¬¦</td></tr><tr><td><code>s.find_first_of (str, pos)</code></td><td>åœ¨å½“å‰å­—ç¬¦ä¸²çš„posç´¢å¼•ä½ç½®ï¼ˆé»˜è®¤ä¸º0ï¼‰å¼€å§‹ï¼ŒæŸ¥æ‰¾å­ä¸²sçš„å­—ç¬¦ï¼Œè¿”å›æ‰¾åˆ°çš„ä½ç½®ç´¢å¼•ï¼Œ-1è¡¨ç¤ºæŸ¥æ‰¾ä¸åˆ°å­—ç¬¦</td></tr><tr><td><code>s.find_first_not_of (str,pos)</code></td><td>åœ¨å½“å‰å­—ç¬¦ä¸²çš„posç´¢å¼•ä½ç½®ï¼ˆé»˜è®¤ä¸º0ï¼‰å¼€å§‹ï¼ŒæŸ¥æ‰¾ç¬¬ä¸€ä¸ªä¸ä½äºå­ä¸²sçš„å­—ç¬¦ï¼Œè¿”å›æ‰¾åˆ°çš„ä½ç½®ç´¢å¼•ï¼Œ-1è¡¨ç¤ºæŸ¥æ‰¾ä¸åˆ°å­—ç¬¦</td></tr><tr><td><code>s.find_last_of(str, pos)</code></td><td>åœ¨å½“å‰å­—ç¬¦ä¸²çš„posç´¢å¼•ä½ç½®å¼€å§‹ï¼ŒæŸ¥æ‰¾æœ€åä¸€ä¸ªä½äºå­ä¸²sçš„å­—ç¬¦ï¼Œè¿”å›æ‰¾åˆ°çš„ä½ç½®ç´¢å¼•ï¼Œ-1è¡¨ç¤ºæŸ¥æ‰¾ä¸åˆ°å­—ç¬¦</td></tr><tr><td><code>s.find_last_not_of ( str, pos)</code></td><td>åœ¨å½“å‰å­—ç¬¦ä¸²çš„posç´¢å¼•ä½ç½®å¼€å§‹ï¼ŒæŸ¥æ‰¾æœ€åä¸€ä¸ªä¸ä½äºå­ä¸²sçš„å­—ç¬¦ï¼Œè¿”å›æ‰¾åˆ°çš„ä½ç½®ç´¢å¼•ï¼Œ-1è¡¨ç¤ºæŸ¥æ‰¾ä¸åˆ°å­ä¸²</td></tr></tbody></table><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;string></span></span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    string <span class="token function">s</span><span class="token punctuation">(</span><span class="token string">"dog bird chicken bird cat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å­—ç¬¦ä¸²æŸ¥æ‰¾-----æ‰¾åˆ°åè¿”å›é¦–å­—æ¯åœ¨å­—ç¬¦ä¸²ä¸­çš„ä¸‹æ ‡</span><span class="token comment" spellcheck="true">// 1. æŸ¥æ‰¾ä¸€ä¸ªå­—ç¬¦ä¸²</span>    cout <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"chicken"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç»“æœæ˜¯ï¼š9</span><span class="token comment" spellcheck="true">// 2. ä»ä¸‹æ ‡ä¸º6å¼€å§‹æ‰¾å­—ç¬¦'i'ï¼Œè¿”å›æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªiçš„ä¸‹æ ‡</span>    cout <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'i'</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç»“æœæ˜¯ï¼š11</span><span class="token comment" spellcheck="true">// 3. ä»å­—ç¬¦ä¸²çš„æœ«å°¾å¼€å§‹æŸ¥æ‰¾å­—ç¬¦ä¸²ï¼Œè¿”å›çš„è¿˜æ˜¯é¦–å­—æ¯åœ¨å­—ç¬¦ä¸²ä¸­çš„ä¸‹æ ‡</span>    cout <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">.</span><span class="token function">rfind</span><span class="token punctuation">(</span><span class="token string">"chicken"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç»“æœæ˜¯ï¼š9</span><span class="token comment" spellcheck="true">// 4. ä»å­—ç¬¦ä¸²çš„æœ«å°¾å¼€å§‹æŸ¥æ‰¾å­—ç¬¦</span>    cout <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">.</span><span class="token function">rfind</span><span class="token punctuation">(</span><span class="token string">'i'</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç»“æœæ˜¯ï¼š18å› ä¸ºæ˜¯ä»æœ«å°¾å¼€å§‹æŸ¥æ‰¾ï¼Œæ‰€ä»¥è¿”å›ç¬¬ä¸€æ¬¡æ‰¾åˆ°çš„å­—ç¬¦</span><span class="token comment" spellcheck="true">// 5. åœ¨è¯¥å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå±äºå­—ç¬¦ä¸²sçš„å­—ç¬¦</span>    cout <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">.</span><span class="token function">find_first_of</span><span class="token punctuation">(</span><span class="token string">"13br98"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç»“æœæ˜¯ï¼š4---b</span><span class="token comment" spellcheck="true">// 6. åœ¨è¯¥å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾ç¬¬ä¸€ä¸ªä¸å±äºå­—ç¬¦ä¸²sçš„å­—ç¬¦------å…ˆåŒ¹é…dogï¼Œç„¶åbirdåŒ¹é…ä¸åˆ°ï¼Œæ‰€ä»¥æ‰“å°4</span>    cout <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">.</span><span class="token function">find_first_not_of</span><span class="token punctuation">(</span><span class="token string">"hello dog 2006"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ç»“æœæ˜¯ï¼š4</span>    cout <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">.</span><span class="token function">find_first_not_of</span><span class="token punctuation">(</span><span class="token string">"dog bird 2006"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// ç»“æœæ˜¯ï¼š9</span><span class="token comment" spellcheck="true">// 7. åœ¨è¯¥å­—ç¬¦ä¸²æœ€åä¸­æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå±äºå­—ç¬¦ä¸²sçš„å­—ç¬¦</span>    cout <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">.</span><span class="token function">find_last_of</span><span class="token punctuation">(</span><span class="token string">"13r98"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç»“æœæ˜¯ï¼š19</span><span class="token comment" spellcheck="true">// 8. åœ¨è¯¥å­—ç¬¦ä¸²æœ€åä¸­æŸ¥æ‰¾ç¬¬ä¸€ä¸ªä¸å±äºå­—ç¬¦ä¸²sçš„å­—ç¬¦------å…ˆåŒ¹é…t--a---cï¼Œç„¶åç©ºæ ¼åŒ¹é…ä¸åˆ°ï¼Œæ‰€ä»¥æ‰“å°21</span>    cout <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">.</span><span class="token function">find_last_not_of</span><span class="token punctuation">(</span><span class="token string">"teac"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç»“æœæ˜¯ï¼š21</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><strong>æ’åº</strong></li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token function">sort</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>s<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//æŒ‰ASCIIç æ’åº</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="10-bitset"><a href="#10-bitset" class="headerlink" title="10 bitset"></a>10 bitset</h2><h3 id="10-1-ä»‹ç»"><a href="#10-1-ä»‹ç»" class="headerlink" title="10.1 ä»‹ç»"></a>10.1 ä»‹ç»</h3><p>bitset åœ¨ bitset å¤´æ–‡ä»¶ä¸­ï¼Œå®ƒç±»ä¼¼æ•°ç»„ï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªå…ƒç´ åªèƒ½æ˜¯ï¼æˆ–ï¼‘ï¼Œæ¯ä¸ªå…ƒç´ åªç”¨ï¼‘bitç©ºé—´</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//å¤´æ–‡ä»¶</span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bitset></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="10-2-åˆå§‹åŒ–å®šä¹‰"><a href="#10-2-åˆå§‹åŒ–å®šä¹‰" class="headerlink" title="10.2 åˆå§‹åŒ–å®šä¹‰"></a>10.2 åˆå§‹åŒ–å®šä¹‰</h3><p>åˆå§‹åŒ–æ–¹æ³•</p><table><thead><tr><th>ä»£ç </th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>bitset &lt; n &gt;a</code></td><td>aæœ‰nä½ï¼Œæ¯ä½éƒ½ä¸º0</td></tr><tr><td><code>bitset &lt; n &gt;a(b)</code></td><td>aæ˜¯unsigned longå‹uçš„ä¸€ä¸ªå‰¯æœ¬</td></tr><tr><td><code>bitset &lt; n &gt;a(s)</code></td><td>aæ˜¯stringå¯¹è±¡sä¸­å«æœ‰çš„ä½ä¸²çš„å‰¯æœ¬</td></tr><tr><td><code>bitset &lt; n &gt;a(s,pos,n)</code></td><td>aæ˜¯sä¸­ä»ä½ç½®poså¼€å§‹çš„nä¸ªä½çš„å‰¯æœ¬</td></tr></tbody></table><blockquote><p>æ³¨æ„ï¼š<code>n</code>å¿…é¡»ä¸ºå¸¸é‡è¡¨è¾¾å¼</p></blockquote><p>æ¼”ç¤ºä»£ç ï¼š</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    bitset<span class="token operator">&lt;</span><span class="token number">4</span><span class="token operator">></span> bitset1<span class="token punctuation">;</span>ã€€ã€€  <span class="token comment" spellcheck="true">//æ— å‚æ„é€ ï¼Œé•¿åº¦ä¸ºï¼”ï¼Œé»˜è®¤æ¯ä¸€ä½ä¸ºï¼</span>    bitset<span class="token operator">&lt;</span><span class="token number">9</span><span class="token operator">></span> <span class="token function">bitset2</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ã€€<span class="token comment" spellcheck="true">//é•¿åº¦ä¸º9ï¼ŒäºŒè¿›åˆ¶ä¿å­˜ï¼Œå‰é¢ç”¨ï¼è¡¥å……</span>    string s <span class="token operator">=</span> <span class="token string">"100101"</span><span class="token punctuation">;</span>    bitset<span class="token operator">&lt;</span><span class="token number">10</span><span class="token operator">></span> <span class="token function">bitset3</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>ã€€ã€€<span class="token comment" spellcheck="true">//é•¿åº¦ä¸º10ï¼Œå‰é¢ç”¨ï¼è¡¥å……</span>    <span class="token keyword">char</span> s2<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"10101"</span><span class="token punctuation">;</span>    bitset<span class="token operator">&lt;</span><span class="token number">13</span><span class="token operator">></span> <span class="token function">bitset4</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span>ã€€ã€€<span class="token comment" spellcheck="true">//é•¿åº¦ä¸º13ï¼Œå‰é¢ç”¨ï¼è¡¥å……</span>    cout <span class="token operator">&lt;&lt;</span> bitset1 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>ã€€ã€€<span class="token comment" spellcheck="true">//0000</span>    cout <span class="token operator">&lt;&lt;</span> bitset2 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>ã€€ã€€<span class="token comment" spellcheck="true">//000001100</span>    cout <span class="token operator">&lt;&lt;</span> bitset3 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>ã€€ã€€<span class="token comment" spellcheck="true">//0000100101</span>    cout <span class="token operator">&lt;&lt;</span> bitset4 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>ã€€<span class="token comment" spellcheck="true">//0000000010101</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h3 id="10-3-ç‰¹æ€§"><a href="#10-3-ç‰¹æ€§" class="headerlink" title="10.3 ç‰¹æ€§"></a>10.3 ç‰¹æ€§</h3><p><code>bitset</code>å¯ä»¥è¿›è¡Œ<strong>ä½æ“ä½œ</strong></p><pre class="line-numbers language-cpp"><code class="language-cpp">bitset<span class="token operator">&lt;</span><span class="token number">4</span><span class="token operator">></span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">"1001"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>bitset<span class="token operator">&lt;</span><span class="token number">4</span><span class="token operator">></span> <span class="token function">bar</span> <span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">"0011"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>foo<span class="token operator">^</span><span class="token operator">=</span>bar<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 1010 (fooå¯¹baræŒ‰ä½å¼‚æˆ–åèµ‹å€¼ç»™foo)</span>cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>foo<span class="token operator">&amp;</span><span class="token operator">=</span>bar<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 0001 (æŒ‰ä½ä¸åèµ‹å€¼ç»™foo)</span>cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>foo<span class="token operator">|</span><span class="token operator">=</span>bar<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 1011 (æŒ‰ä½æˆ–åèµ‹å€¼ç»™foo)</span>cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>foo<span class="token operator">&lt;&lt;=</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 0100 (å·¦ç§»2ä½ï¼Œä½ä½è¡¥0ï¼Œæœ‰è‡ªèº«èµ‹å€¼)</span>cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>foo<span class="token operator">>>=</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 0100 (å³ç§»1ä½ï¼Œé«˜ä½è¡¥0ï¼Œæœ‰è‡ªèº«èµ‹å€¼)</span>cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span><span class="token operator">~</span>bar<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 1100 (æŒ‰ä½å–å)</span>cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>bar<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 0110 (å·¦ç§»ï¼Œä¸èµ‹å€¼)</span>cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>bar<span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 0001 (å³ç§»ï¼Œä¸èµ‹å€¼)</span>cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>foo<span class="token operator">==</span>bar<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// false (1001==0011ä¸ºfalse)</span>cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>foo<span class="token operator">!=</span>bar<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true  (1001!=0011ä¸ºtrue)</span>cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>foo<span class="token operator">&amp;</span>bar<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 0001 (æŒ‰ä½ä¸ï¼Œä¸èµ‹å€¼)</span>cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>foo<span class="token operator">|</span>bar<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 1011 (æŒ‰ä½æˆ–ï¼Œä¸èµ‹å€¼)</span>cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>foo<span class="token operator">^</span>bar<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 1010 (æŒ‰ä½å¼‚æˆ–ï¼Œä¸èµ‹å€¼)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>è®¿é—®</strong></p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//å¯ä»¥é€šè¿‡ [ ] è®¿é—®å…ƒç´ (ç±»ä¼¼æ•°ç»„)ï¼Œæ³¨æ„æœ€ä½ä½ä¸‹æ ‡ä¸ºï¼ï¼Œå¦‚ä¸‹ï¼š</span>bitset<span class="token operator">&lt;</span><span class="token number">4</span><span class="token operator">></span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token string">"1011"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> cout <span class="token operator">&lt;&lt;</span> foo<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>ã€€ã€€<span class="token comment" spellcheck="true">//1</span>cout <span class="token operator">&lt;&lt;</span> foo<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>ã€€ã€€<span class="token comment" spellcheck="true">//0</span>cout <span class="token operator">&lt;&lt;</span> foo<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>ã€€ã€€<span class="token comment" spellcheck="true">//1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h3 id="10-4-æ–¹æ³•å‡½æ•°"><a href="#10-4-æ–¹æ³•å‡½æ•°" class="headerlink" title="10.4 æ–¹æ³•å‡½æ•°"></a>10.4 æ–¹æ³•å‡½æ•°</h3><table><thead><tr><th align="center">ä»£ç </th><th align="center">å«ä¹‰</th></tr></thead><tbody><tr><td align="center"><code>b.any()</code></td><td align="center">bä¸­æ˜¯å¦å­˜åœ¨ç½®ä¸º1çš„äºŒè¿›åˆ¶ä½ï¼Œæœ‰ è¿”å›true</td></tr><tr><td align="center"><code>b.none()</code></td><td align="center">bä¸­æ˜¯å¦æ²¡æœ‰1ï¼Œæ²¡æœ‰ è¿”å›true</td></tr><tr><td align="center"><code>b.count()</code></td><td align="center">bä¸­ä¸º1çš„ä¸ªæ•°</td></tr><tr><td align="center"><code>b.size()</code></td><td align="center">bä¸­äºŒè¿›åˆ¶ä½çš„ä¸ªæ•°</td></tr><tr><td align="center"><code>b.test(pos)</code></td><td align="center">æµ‹è¯•båœ¨posä½ç½®æ˜¯å¦ä¸º1ï¼Œæ˜¯ è¿”å›true</td></tr><tr><td align="center"><code>b[pos]</code></td><td align="center">è¿”å›båœ¨poså¤„çš„äºŒè¿›åˆ¶ä½</td></tr><tr><td align="center"><code>b.set()</code></td><td align="center">æŠŠbä¸­æ‰€æœ‰ä½éƒ½ç½®ä¸º1</td></tr><tr><td align="center"><code>b.set(pos)</code></td><td align="center">æŠŠbä¸­posä½ç½®ç½®ä¸º1</td></tr><tr><td align="center"><code>b.reset()</code></td><td align="center">æŠŠbä¸­æ‰€æœ‰ä½éƒ½ç½®ä¸º0</td></tr><tr><td align="center"><code>b.reset(pos)</code></td><td align="center">æŠŠbä¸­posä½ç½®ç½®ä¸º0</td></tr><tr><td align="center"><code>b.flip()</code></td><td align="center">æŠŠbä¸­æ‰€æœ‰äºŒè¿›åˆ¶ä½å–å</td></tr><tr><td align="center"><code>b.flip(pos)</code></td><td align="center">æŠŠbä¸­posä½ç½®å–å</td></tr><tr><td align="center"><code>b.to_ulong()</code></td><td align="center">ç”¨bä¸­åŒæ ·çš„äºŒè¿›åˆ¶ä½è¿”å›ä¸€ä¸ªunsigned longå€¼</td></tr></tbody></table><hr><h2 id="11-array"><a href="#11-array" class="headerlink" title="11 array"></a>11 array</h2><h3 id="11-1-ä»‹ç»"><a href="#11-1-ä»‹ç»" class="headerlink" title="11.1 ä»‹ç»"></a>11.1 ä»‹ç»</h3><p>å¤´æ–‡ä»¶</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;array></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>array</code>æ˜¯C++11æ–°å¢çš„å®¹å™¨ï¼Œæ•ˆç‡ä¸æ™®é€šæ•°æ®ç›¸å·®æ— å‡ ï¼Œæ¯”<code>vector</code>æ•ˆç‡è¦é«˜ï¼Œè‡ªèº«æ·»åŠ äº†ä¸€äº›æˆå‘˜å‡½æ•°ã€‚</p><p>å’Œå…¶å®ƒå®¹å™¨ä¸åŒï¼Œarray å®¹å™¨çš„å¤§å°æ˜¯<strong>å›ºå®š</strong>çš„ï¼Œæ— æ³•åŠ¨æ€çš„æ‰©å±•æˆ–æ”¶ç¼©ï¼Œ<strong>åªå…è®¸è®¿é—®æˆ–è€…æ›¿æ¢å­˜å‚¨çš„å…ƒç´ ã€‚</strong></p><p><strong>æ³¨æ„ï¼š</strong></p><p><code>array</code>çš„ä½¿ç”¨è¦åœ¨<code>std</code>å‘½åç©ºé—´é‡Œ</p><h3 id="11-2-å£°æ˜ä¸åˆå§‹åŒ–"><a href="#11-2-å£°æ˜ä¸åˆå§‹åŒ–" class="headerlink" title="11.2 å£°æ˜ä¸åˆå§‹åŒ–"></a>11.2 å£°æ˜ä¸åˆå§‹åŒ–</h3><p><strong>åŸºç¡€æ•°æ®ç±»å‹</strong></p><p>å£°æ˜ä¸€ä¸ªå¤§å°ä¸º100çš„<code>int</code>å‹æ•°ç»„ï¼Œå…ƒç´ çš„å€¼ä¸ç¡®å®š</p><pre class="line-numbers language-cpp"><code class="language-cpp">array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token operator">></span> a<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å£°æ˜ä¸€ä¸ªå¤§å°ä¸º100çš„<code>int</code>å‹æ•°ç»„ï¼Œåˆå§‹å€¼å‡ä¸º<code>0</code>(åˆå§‹å€¼ä¸é»˜è®¤å…ƒç´ ç±»å‹ç­‰æ•ˆ)</p><pre class="line-numbers language-cpp"><code class="language-cpp">array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token operator">></span> a<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å£°æ˜ä¸€ä¸ªå¤§å°ä¸º100çš„<code>int</code>å‹æ•°ç»„ï¼Œåˆå§‹åŒ–éƒ¨åˆ†å€¼ï¼Œå…¶ä½™å…¨éƒ¨ä¸º<code>0</code></p><pre class="line-numbers language-cpp"><code class="language-cpp">array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token operator">></span> a<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æˆ–è€…å¯ä»¥ç”¨ç­‰å·</p><pre class="line-numbers language-cpp"><code class="language-cpp">array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>é«˜çº§æ•°æ®ç±»å‹</strong></p><p>ä¸åŒäºæ•°ç»„çš„æ˜¯å¯¹å…ƒç´ ç±»å‹ä¸åšè¦æ±‚ï¼Œå¯ä»¥å¥—ç»“æ„ä½“</p><pre class="line-numbers language-cpp"><code class="language-cpp">array<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">></span> s <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"ha"</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span><span class="token string">"haha"</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>array<span class="token operator">&lt;</span>node<span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">></span> a<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><hr><h3 id="11-3-å­˜å–å…ƒç´ "><a href="#11-3-å­˜å–å…ƒç´ " class="headerlink" title="11.3 å­˜å–å…ƒç´ "></a>11.3 å­˜å–å…ƒç´ </h3><ul><li>ä¿®æ”¹å…ƒç´ </li></ul><pre class="line-numbers language-cpp"><code class="language-cpp">array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li>è®¿é—®å…ƒç´ </li></ul><p>ä¸‹æ ‡è®¿é—®</p><pre class="line-numbers language-cpp"><code class="language-cpp">array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>     cout <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" \n"</span><span class="token punctuation">[</span>i <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>åˆ©ç”¨<code>auto</code>è®¿é—®</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> i <span class="token operator">:</span> a<span class="token punctuation">)</span>    cout <span class="token operator">&lt;&lt;</span> i <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿­ä»£å™¨è®¿é—®</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">auto</span> it <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> a<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it<span class="token operator">++</span><span class="token punctuation">)</span>     cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>it <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p> <code>at()</code>å‡½æ•°è®¿é—®</p><p>ä¸‹æ ‡ä¸º<code>1</code>çš„å…ƒç´ åŠ ä¸Šä¸‹æ ‡ä¸º<code>2</code>çš„å…ƒç´ ï¼Œç­”æ¡ˆä¸º<code>5</code></p><pre class="line-numbers language-cpp"><code class="language-cpp">array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> res <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> a<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> res <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p> <code>get</code>æ–¹æ³•è®¿é—®</p><p>å°†<code>a</code>æ•°ç»„ä¸‹æ ‡ä¸º<code>1</code>ä½ç½®å¤„çš„å€¼æ”¹ä¸º<code>x</code></p><p>æ³¨æ„ï¼šè·å–çš„ä¸‹æ ‡åªèƒ½å†™æ•°å­—ï¼Œä¸èƒ½å¡«å˜é‡</p><pre class="line-numbers language-cpp"><code class="language-cpp">get<span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">></span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">=</span> x<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h3 id="11-4-æˆå‘˜å‡½æ•°"><a href="#11-4-æˆå‘˜å‡½æ•°" class="headerlink" title="11.4 æˆå‘˜å‡½æ•°"></a>11.4 æˆå‘˜å‡½æ•°</h3><table><thead><tr><th>æˆå‘˜å‡½æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td><code>begin()</code></td><td>è¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„è®¿é—®è¿­ä»£å™¨ï¼ˆåœ°å€ï¼‰</td></tr><tr><td><code>end()</code></td><td>è¿”å›å®¹å™¨æœ€åä¸€ä¸ªå…ƒç´ ä¹‹åä¸€ä¸ªä½ç½®çš„è®¿é—®è¿­ä»£å™¨ï¼ˆåœ°å€ï¼‰</td></tr><tr><td><code>rbegin()</code></td><td>è¿”å›æœ€åä¸€ä¸ªå…ƒç´ çš„è®¿é—®è¿­ä»£å™¨ï¼ˆåœ°å€ï¼‰</td></tr><tr><td><code>rend()</code></td><td>è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹å‰ä¸€ä¸ªä½ç½®çš„è®¿é—®è¿­ä»£å™¨ï¼ˆåœ°å€ï¼‰</td></tr><tr><td><code>size()</code></td><td>è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„æ•°é‡ï¼Œå…¶å€¼ç­‰äºåˆå§‹åŒ– array ç±»çš„ç¬¬äºŒä¸ªæ¨¡æ¿å‚æ•°<code>N</code></td></tr><tr><td><code>max_size()</code></td><td>è¿”å›å®¹å™¨å¯å®¹çº³å…ƒç´ çš„æœ€å¤§æ•°é‡ï¼Œå…¶å€¼å§‹ç»ˆç­‰äºåˆå§‹åŒ– array ç±»çš„ç¬¬äºŒä¸ªæ¨¡æ¿å‚æ•° N</td></tr><tr><td><code>empty()</code></td><td>åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</td></tr><tr><td><code>at(n)</code></td><td>è¿”å›å®¹å™¨ä¸­ n ä½ç½®å¤„å…ƒç´ çš„å¼•ç”¨ï¼Œå‡½æ•°ä¼šè‡ªåŠ¨æ£€æŸ¥ n æ˜¯å¦åœ¨æœ‰æ•ˆçš„èŒƒå›´å†…ï¼Œå¦‚æœä¸æ˜¯åˆ™æŠ›å‡º out_of_range å¼‚å¸¸</td></tr><tr><td><code>front()</code></td><td>è¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç›´æ¥å¼•ç”¨ï¼Œå‡½æ•°ä¸é€‚ç”¨äºç©ºçš„ array å®¹å™¨</td></tr><tr><td><code>back()</code></td><td>è¿”å›å®¹å™¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ç›´æ¥å¼•ç”¨ï¼Œå‡½æ•°ä¸é€‚ç”¨äºç©ºçš„ array å®¹å™¨ã€‚</td></tr><tr><td><code>data()</code></td><td>è¿”å›ä¸€ä¸ªæŒ‡å‘å®¹å™¨é¦–ä¸ªå…ƒç´ çš„æŒ‡é’ˆã€‚åˆ©ç”¨è¯¥æŒ‡é’ˆï¼Œå¯å®ç°å¤åˆ¶å®¹å™¨ä¸­æ‰€æœ‰å…ƒç´ ç­‰ç±»ä¼¼åŠŸèƒ½</td></tr><tr><td><code>fill(x)</code></td><td>å°† <code>x</code> è¿™ä¸ªå€¼èµ‹å€¼ç»™å®¹å™¨ä¸­çš„æ¯ä¸ªå…ƒç´ ,ç›¸å½“äºåˆå§‹åŒ–</td></tr><tr><td><code>array1.swap(array2)</code></td><td>äº¤æ¢ array1 å’Œ array2 å®¹å™¨ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œä½†å‰ææ˜¯å®ƒä»¬å…·æœ‰ç›¸åŒçš„é•¿åº¦å’Œç±»å‹</td></tr></tbody></table><hr><h3 id="11-5-éƒ¨åˆ†ç”¨æ³•ç¤ºä¾‹"><a href="#11-5-éƒ¨åˆ†ç”¨æ³•ç¤ºä¾‹" class="headerlink" title="11.5 éƒ¨åˆ†ç”¨æ³•ç¤ºä¾‹"></a>11.5 éƒ¨åˆ†ç”¨æ³•ç¤ºä¾‹</h3><p><code>data()</code></p><p>æŒ‡å‘åº•å±‚å…ƒç´ å­˜å‚¨çš„æŒ‡é’ˆã€‚å¯¹äºéç©ºå®¹å™¨ï¼Œè¿”å›çš„æŒ‡é’ˆä¸é¦–å…ƒç´ åœ°å€æ¯”è¾ƒç›¸ç­‰ã€‚</p><p><code>at()</code></p><p>ä¸‹æ ‡ä¸º<code>1</code>çš„å…ƒç´ åŠ ä¸Šä¸‹æ ‡ä¸º<code>2</code>çš„å…ƒç´ ï¼Œç­”æ¡ˆä¸º<code>5</code></p><pre class="line-numbers language-cpp"><code class="language-cpp">array<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> res <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> a<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> res <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><code>fill()</code></p><p>arrayçš„<code>fill()</code>å‡½æ•°ï¼Œå°†<code>a</code>æ•°ç»„å…¨éƒ¨å…ƒç´ å€¼å˜ä¸º<code>x</code></p><pre class="line-numbers language-cpp"><code class="language-cpp">a<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦å¤–è¿˜æœ‰å…¶å®ƒçš„<code>fill()</code>å‡½æ•°:å°†<code>a</code>æ•°ç»„$[begin,end)$å…¨éƒ¨å€¼å˜ä¸º<code>x</code></p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token function">fill</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>getæ–¹æ³•è·å–å…ƒç´ å€¼</strong></p><p>å°†<code>a</code>æ•°ç»„ä¸‹æ ‡ä¸º<code>1</code>ä½ç½®å¤„çš„å€¼æ”¹ä¸º<code>x</code></p><p>æ³¨æ„:è·å–çš„ä¸‹æ ‡åªèƒ½å†™æ•°å­—ï¼Œä¸èƒ½å¡«å˜é‡</p><pre class="line-numbers language-cpp"><code class="language-cpp">get<span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">></span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">=</span> x<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>æ’åº</strong></p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="12-tuple"><a href="#12-tuple" class="headerlink" title="12 tuple"></a>12 tuple</h2><h3 id="12-1-ä»‹ç»"><a href="#12-1-ä»‹ç»" class="headerlink" title="12.1 ä»‹ç»"></a>12.1 ä»‹ç»</h3><p>tupleæ¨¡æ¿æ˜¯pairçš„æ³›åŒ–ï¼Œå¯ä»¥å°è£…ä¸åŒç±»å‹ä»»æ„æ•°é‡çš„å¯¹è±¡ã€‚</p><p>å¯ä»¥æŠŠtupleç†è§£ä¸ºpairçš„æ‰©å±•ï¼Œtupleå¯ä»¥å£°æ˜äºŒå…ƒç»„ï¼Œä¹Ÿå¯ä»¥å£°æ˜ä¸‰å…ƒç»„ã€‚</p><p>tupleå¯ä»¥ç­‰ä»·ä¸º<strong>ç»“æ„ä½“</strong>ä½¿ç”¨</p><p><strong>å¤´æ–‡ä»¶</strong></p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;tuple></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="12-2-å£°æ˜åˆå§‹åŒ–"><a href="#12-2-å£°æ˜åˆå§‹åŒ–" class="headerlink" title="12.2 å£°æ˜åˆå§‹åŒ–"></a>12.2 å£°æ˜åˆå§‹åŒ–</h3><p>å£°æ˜ä¸€ä¸ªç©ºçš„<code>tuple</code>ä¸‰å…ƒç»„</p><pre class="line-numbers language-cpp"><code class="language-cpp">tuple<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> string<span class="token operator">></span> t1<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>èµ‹å€¼</p><pre class="line-numbers language-cpp"><code class="language-cpp">t1 <span class="token operator">=</span> <span class="token function">make_tuple</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"hahaha"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åˆ›å»ºçš„åŒæ—¶åˆå§‹åŒ–</p><pre class="line-numbers language-cpp"><code class="language-cpp">tuple<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span> <span class="token function">t2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¯ä»¥ä½¿ç”¨pairå¯¹è±¡æ„é€ tupleå¯¹è±¡ï¼Œä½†tupleå¯¹è±¡å¿…é¡»æ˜¯ä¸¤ä¸ªå…ƒç´ </p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">auto</span> p <span class="token operator">=</span> <span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"wang"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>tuple<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span> t3 <span class="token punctuation">{</span>p<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//å°†pairå¯¹è±¡èµ‹ç»™tupleå¯¹è±¡</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="12-3-å…ƒç´ æ“ä½œ"><a href="#12-3-å…ƒç´ æ“ä½œ" class="headerlink" title="12.3 å…ƒç´ æ“ä½œ"></a>12.3 å…ƒç´ æ“ä½œ</h3><p>è·å–tupleå¯¹è±¡<code>t</code>çš„ç¬¬ä¸€ä¸ªå…ƒç´ </p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> first <span class="token operator">=</span> get<span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">></span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¿®æ”¹tupleå¯¹è±¡<code>t</code>çš„ç¬¬ä¸€ä¸ªå…ƒç´ </p><pre class="line-numbers language-cpp"><code class="language-cpp">get<span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">></span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="12-4-å‡½æ•°æ“ä½œ"><a href="#12-4-å‡½æ•°æ“ä½œ" class="headerlink" title="12.4 å‡½æ•°æ“ä½œ"></a>12.4 å‡½æ•°æ“ä½œ</h3><ul><li>è·å–å…ƒç´ ä¸ªæ•°</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp">tuple<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span> <span class="token function">t</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> tuple_size<span class="token operator">&lt;</span><span class="token keyword">decltype</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token operator">></span><span class="token operator">::</span>value <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li>è·å–å¯¹åº”å…ƒç´ çš„å€¼</li></ul><p>é€šè¿‡<code>get&lt;n&gt;(obj)</code>æ–¹æ³•è·å–,<code>n</code>å¿…é¡»ä¸ºæ•°å­—ä¸èƒ½æ˜¯å˜é‡</p><pre class="line-numbers language-cpp"><code class="language-cpp">tuple<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span> <span class="token function">t</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> get<span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">></span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 1</span>cout <span class="token operator">&lt;&lt;</span> get<span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">></span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 2</span>cout <span class="token operator">&lt;&lt;</span> get<span class="token operator">&lt;</span><span class="token number">2</span><span class="token operator">></span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li>é€šè¿‡<code>tie</code>è§£åŒ… è·å–å…ƒç´ å€¼</li></ul><p><code>tie</code>å¯ä»¥è®©tupleå˜é‡ä¸­çš„ä¸‰ä¸ªå€¼ä¾æ¬¡èµ‹åˆ°tieä¸­çš„ä¸‰ä¸ªå˜é‡ä¸­</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> one<span class="token punctuation">,</span> three<span class="token punctuation">;</span>string two<span class="token punctuation">;</span> tuple<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> string<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span> <span class="token function">t</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"hahaha"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">tie</span><span class="token punctuation">(</span>one<span class="token punctuation">,</span> two<span class="token punctuation">,</span> three<span class="token punctuation">)</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> one <span class="token operator">&lt;&lt;</span> two <span class="token operator">&lt;&lt;</span> three <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 1hahaha3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h1 id="STLå‡½æ•°"><a href="#STLå‡½æ•°" class="headerlink" title="STLå‡½æ•°"></a>STLå‡½æ•°</h1><h2 id="accumulate"><a href="#accumulate" class="headerlink" title="accumulate"></a>accumulate</h2><pre><code>accumulate(beg, end, init)</code></pre><p><strong>å¤æ‚åº¦ï¼š</strong> $O(N)$</p><blockquote><p>ä½œç”¨ï¼šå¯¹ä¸€ä¸ªåºåˆ—çš„å…ƒç´ æ±‚å’Œ</p></blockquote><p><code>init</code>ä¸ºå¯¹åºåˆ—å…ƒç´ æ±‚å’Œçš„<strong>åˆå§‹å€¼</strong></p><p>è¿”å›å€¼ç±»å‹ï¼šä¸<code>init</code></p><ul><li><strong>åŸºç¡€ç´¯åŠ æ±‚å’Œï¼š</strong></li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¯¹[0,2]åŒºé—´æ±‚å’Œï¼Œåˆå§‹å€¼ä¸º0ï¼Œç»“æœä¸º0+1+3+5=9</span><span class="token keyword">int</span> res1 <span class="token operator">=</span> <span class="token function">accumulate</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> a <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¯¹[0,3]åŒºé—´æ±‚å’Œï¼Œåˆå§‹å€¼ä¸º5ï¼Œç»“æœä¸º5+1+3+5+9=23</span><span class="token keyword">int</span> res2 <span class="token operator">=</span> <span class="token function">accumulate</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> a <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><strong>è‡ªå®šä¹‰äºŒå…ƒå¯¹è±¡æ±‚å’Œï¼š</strong></li></ul><p>ä½¿ç”¨lambdaè¡¨è¾¾å¼</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span><span class="token keyword">struct</span> node <span class="token punctuation">{</span>    ll num<span class="token punctuation">;</span><span class="token punctuation">}</span>st<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    st<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>num <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">10000000000</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//è¿”å›å€¼ç±»å‹ä¸initä¸€è‡´ï¼ŒåŒæ—¶æ³¨æ„å‚æ•°ç±»å‹ï¼ˆaï¼‰ä¹Ÿè¦ä¸€æ ·</span><span class="token comment" spellcheck="true">//åˆå§‹å€¼ä¸º1ï¼Œç´¯åŠ 1+10000000001+10000000002+10000000003=30000000007</span>ll res <span class="token operator">=</span> <span class="token function">accumulate</span><span class="token punctuation">(</span>st <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> st <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1ll</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>ll a<span class="token punctuation">,</span>node b<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">.</span>num<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="atoi"><a href="#atoi" class="headerlink" title="atoi"></a>atoi</h2><pre><code>atoi(const char *)</code></pre><blockquote><p>å°†å­—ç¬¦ä¸²è½¬æ¢ä¸º<code>int</code>ç±»å‹</p></blockquote><p>æ³¨æ„å‚æ•°ä¸º<code>char</code>å‹æ•°ç»„ï¼Œå¦‚æœéœ€è¦å°†stringç±»å‹è½¬æ¢ä¸ºintç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨<code>stoi</code>å‡½æ•°ï¼ˆå‚è€ƒä¸‹æ–‡ï¼‰ï¼Œæˆ–è€…å°†<code>string</code>ç±»å‹è½¬æ¢ä¸º<code>const char *</code>ç±»å‹ã€‚</p><p>å…³äºè¾“å‡ºæ•°å­—çš„èŒƒå›´ï¼š<br><code>atoi</code><strong>ä¸åš</strong>èŒƒå›´æ£€æŸ¥ï¼Œå¦‚æœè¶…å‡ºä¸Šç•Œï¼Œè¾“å‡ºä¸Šç•Œï¼Œè¶…å‡ºä¸‹ç•Œï¼Œè¾“å‡ºä¸‹ç•Œã€‚<br><code>stoi</code><strong>ä¼šåš</strong>èŒƒå›´æ£€æŸ¥ï¼Œé»˜è®¤å¿…é¡»åœ¨<code>int</code>èŒƒå›´å†…ï¼Œå¦‚æœè¶…å‡ºèŒƒå›´ï¼Œä¼šå‡ºç°REï¼ˆRuntime Errorï¼‰é”™è¯¯ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp">string s <span class="token operator">=</span> <span class="token string">"1234"</span><span class="token punctuation">;</span><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token function">atoi</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 1234</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æˆ–è€…</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">char</span> s<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"1234"</span><span class="token punctuation">;</span><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token function">atoi</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="fill"><a href="#fill" class="headerlink" title="fill"></a>fill</h2><pre><code>fill(beg,end,num)</code></pre><p><strong>å¤æ‚åº¦ï¼š</strong> $O(N)$</p><blockquote><p>å¯¹ä¸€ä¸ªåºåˆ—è¿›è¡Œåˆå§‹åŒ–èµ‹å€¼</p></blockquote><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//å¯¹aæ•°ç»„çš„æ‰€æœ‰å…ƒç´ èµ‹1</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token function">fill</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>a<span class="token operator">+</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>    cout<span class="token operator">&lt;&lt;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&lt;&lt;</span><span class="token string">" "</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//1 1 1 1 1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„åŒºåˆ†memsetï¼š</p><p><code>memset()</code>æ˜¯æŒ‰<strong>å­—èŠ‚</strong>è¿›è¡Œèµ‹å€¼ï¼Œå¯¹äºåˆå§‹åŒ–èµ‹<code>0</code>æˆ–<code>-1</code>æœ‰æ¯”è¾ƒå¥½çš„æ•ˆæœ.</p><p>å¦‚æœèµ‹æŸä¸ªç‰¹å®šçš„æ•°ä¼š<strong>å‡ºé”™</strong>ï¼Œèµ‹å€¼ç‰¹å®šçš„æ•°å»ºè®®ä½¿ç”¨<code>fill()</code></p><h2 id="is-sorted"><a href="#is-sorted" class="headerlink" title="is_sorted"></a>is_sorted</h2><pre><code>is_sorted(beg,end)</code></pre><p><strong>å¤æ‚åº¦ï¼š</strong> $O(N)$</p><blockquote><p>åˆ¤æ–­åºåˆ—æ˜¯å¦æœ‰åºï¼ˆå‡åºï¼‰ï¼Œè¿”å›<code>bool</code>å€¼</p></blockquote><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//å¦‚æœåºåˆ—æœ‰åºï¼Œè¾“å‡ºYES</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">is_sorted</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>a<span class="token operator">+</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>    cout<span class="token operator">&lt;&lt;</span><span class="token string">"YES\n"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="iota"><a href="#iota" class="headerlink" title="iota"></a>iota</h2><pre><code>iota(beg, end)</code></pre><blockquote><p>è®©åºåˆ—é€’å¢èµ‹å€¼</p></blockquote><pre class="line-numbers language-cpp"><code class="language-cpp">vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">iota</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> i <span class="token operator">:</span> a<span class="token punctuation">)</span>    cout <span class="token operator">&lt;&lt;</span> i <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 0 1 2 3 4 5 6 7 8 9</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="lower-bound-upper-bound"><a href="#lower-bound-upper-bound" class="headerlink" title="lower_bound + upper_bound"></a>lower_bound + upper_bound</h2><p><strong>å¤æ‚åº¦ï¼š</strong> $O(logN)$</p><blockquote><p>ä½œç”¨ï¼šäºŒåˆ†æŸ¥æ‰¾</p></blockquote><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//åœ¨aæ•°ç»„ä¸­æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå¤§äºç­‰äºxçš„å…ƒç´ ï¼Œè¿”å›è¯¥å…ƒç´ çš„åœ°å€</span><span class="token function">lower_bound</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> a <span class="token operator">+</span> n<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//åœ¨aæ•°ç»„ä¸­æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå¤§äºxçš„å…ƒç´ ï¼Œè¿”å›è¯¥å…ƒç´ çš„åœ°å€</span><span class="token function">upper_bound</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> a <span class="token operator">+</span> n<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¦‚æœæœªæ‰¾åˆ°ï¼Œè¿”å›å°¾åœ°å€çš„ä¸‹ä¸€ä¸ªä½ç½®çš„åœ°å€</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="max-element-min-element"><a href="#max-element-min-element" class="headerlink" title="max_element+min_element"></a>max_element+min_element</h2><p><strong>å¤æ‚åº¦ï¼š</strong> $O(N)$</p><blockquote><p>æ‰¾æœ€å¤§æœ€å°å€¼</p></blockquote><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//å‡½æ•°éƒ½æ˜¯è¿”å›åœ°å€ï¼Œéœ€è¦åŠ *å–å€¼</span><span class="token keyword">int</span> mx <span class="token operator">=</span> <span class="token operator">*</span><span class="token function">max_element</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> a <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> mn <span class="token operator">=</span> <span class="token operator">*</span><span class="token function">min_element</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> a <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="max-min"><a href="#max-min" class="headerlink" title="max+min"></a>max+min</h2><p><strong>å¤æ‚åº¦ï¼š</strong> $O(1)$</p><blockquote><p>æ‰¾å¤šä¸ªå…ƒç´ çš„æœ€å¤§å€¼å’Œæœ€å°å€¼</p></blockquote><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//æ‰¾aï¼Œbçš„æœ€å¤§å€¼å’Œæœ€å°å€¼</span>mx <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>mn <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//æ‰¾åˆ°a,b,c,dçš„æœ€å¤§å€¼å’Œæœ€å°å€¼</span>mx <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">{</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>mn <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">{</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="minmax"><a href="#minmax" class="headerlink" title="minmax"></a>minmax</h2><pre><code>minmax(a, b)</code></pre><p><strong>å¤æ‚åº¦ï¼š</strong> $O(1)$</p><blockquote><p>è¿”å›ä¸€ä¸ª<code>pair</code>ç±»å‹ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯<code>min(a, b)</code>ï¼Œ ç¬¬äºŒä¸ªå…ƒç´ æ˜¯<code>max(a, b)</code></p></blockquote><pre class="line-numbers language-cpp"><code class="language-cpp">pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span> t <span class="token operator">=</span> <span class="token function">minmax</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// t.first = 2, t.second = 4</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="minmax-element"><a href="#minmax-element" class="headerlink" title="minmax_element"></a>minmax_element</h2><pre><code>minmax_element(beg, end)</code></pre><p><strong>å¤æ‚åº¦ï¼š</strong> $O(N)$</p><blockquote><p>è¿”å›åºåˆ—ä¸­çš„æœ€å°å’Œæœ€å¤§å€¼ç»„æˆpairçš„å¯¹åº”çš„åœ°å€ï¼Œè¿”å›ç±»å‹ä¸º<code>pair&lt;vector&lt;int&gt;::iterator, vector&lt;int&gt;::iterator&gt;</code></p></blockquote><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">a</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">iota</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">auto</span> t <span class="token operator">=</span> <span class="token function">minmax_element</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// è¿”å›çš„æ˜¯æœ€å°å€¼å’Œæœ€å¤§å€¼å¯¹åº”çš„åœ°å€</span><span class="token comment" spellcheck="true">// *t.first = 1, *t.second = 10 è¾“å‡ºå¯¹åº”æœ€å°æœ€å¤§å€¼æ—¶éœ€è¦ä½¿ç”¨æŒ‡é’ˆ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="nth-element"><a href="#nth-element" class="headerlink" title="nth_element"></a>nth_element</h2><pre><code>nth_element(beg, nth, end)</code></pre><p><strong>å¤æ‚åº¦ï¼š</strong> å¹³å‡$O(N)$</p><blockquote><p>å¯»æ‰¾ç¬¬åºåˆ—ç¬¬nå°çš„å€¼</p></blockquote><p><code>nth</code>ä¸ºä¸€ä¸ªè¿­ä»£å™¨ï¼ŒæŒ‡å‘åºåˆ—ä¸­çš„ä¸€ä¸ªå…ƒç´ ã€‚ç¬¬nå°çš„å€¼æ°å¥½åœ¨<code>nth</code>ä½ç½®ä¸Šã€‚</p><p>æ‰§è¡Œ<code>nth_element()</code>ä¹‹åï¼Œåºåˆ—ä¸­çš„å…ƒç´ ä¼šå›´ç»•nthè¿›è¡Œåˆ’åˆ†ï¼š<strong>nthä¹‹å‰çš„å…ƒç´ éƒ½å°äºç­‰äºå®ƒï¼Œè€Œä¹‹åçš„å…ƒç´ éƒ½å¤§äºç­‰äºå®ƒ</strong></p><p><strong>å®ä¾‹ï¼šæ±‚åºåˆ—ä¸­çš„ç¬¬3å°çš„å…ƒç´ </strong></p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token function">nth_element</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> a <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span> a <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="next-permutation"><a href="#next-permutation" class="headerlink" title="next_permutation"></a>next_permutation</h2><pre><code>next_permutation(beg, end)</code></pre><p><strong>å¤æ‚åº¦ï¼š</strong> $O(N)$</p><blockquote><p>æ±‚åºåˆ—çš„ä¸‹ä¸€ä¸ªæ’åˆ—ï¼Œä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯å­—å…¸åºå¤§ä¸€å·çš„æ’åˆ—</p></blockquote><p>è¿”å›<code>true</code>æˆ–<code>false</code></p><ul><li><p><code>next_permutation(beg,end)</code></p><p>å¦‚æœæ˜¯æœ€åä¸€ä¸ªæ’åˆ—ï¼Œè¿”å›<code>false</code>,å¦åˆ™æ±‚å‡ºä¸‹ä¸€ä¸ªåºåˆ—åï¼Œè¿”å›<code>true</code></p></li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//å¯¹aåºåˆ—è¿›è¡Œé‡æ’</span><span class="token function">next_permutation</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> a <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>åº”ç”¨ï¼šæ±‚æ‰€æœ‰çš„æ’åˆ—</strong></p><p>è¾“å‡º<code>a</code>çš„æ‰€æœ‰æ’åˆ—</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//æ•°ç»„aä¸ä¸€å®šæ˜¯æœ€å°å­—å…¸åºåºåˆ—ï¼Œæ‰€ä»¥å°†å®ƒæ’åº</span><span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> a <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">do</span><span class="token punctuation">{</span>     <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">next_permutation</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> a <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>prev_permutation(beg,end)</code></li></ul><blockquote><p>æ±‚å‡ºå‰ä¸€ä¸ªæ’åˆ—ï¼Œå¦‚æœåºåˆ—ä¸ºæœ€å°çš„æ’åˆ—ï¼Œå°†å…¶é‡æ’ä¸ºæœ€å¤§çš„æ’åˆ—ï¼Œè¿”å›false</p></blockquote><h2 id="partial-sort"><a href="#partial-sort" class="headerlink" title="partial_sort"></a>partial_sort</h2><pre><code>partial_sort(beg, mid, end)</code></pre><p><strong>å¤æ‚åº¦ï¼š</strong> å¤§æ¦‚$O(N logM)$ <code>M</code>ä¸ºè·ç¦»</p><blockquote><p>éƒ¨åˆ†æ’åº,æ’åºmid-begä¸ªå…ƒç´ ï¼Œmidä¸ºè¦æ’åºåŒºé—´å…ƒç´ çš„å°¾åçš„ä¸€ä¸ªä½ç½®</p><p>ä»begåˆ°mid<strong>å‰</strong>çš„å…ƒç´ éƒ½æ’å¥½åº</p></blockquote><p>å¯¹aæ•°ç»„å‰5ä¸ªå…ƒç´ æ’åºæŒ‰ä»å°åˆ°å¤§æ’åº</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token function">partial_sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> a <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> a <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>     cout <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">' '</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//1 2 3 4 5 9 8 10 7 6</span><span class="token comment" spellcheck="true">//å‰äº”ä¸ªå…ƒç´ éƒ½æœ‰åº</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¹Ÿå¯ä»¥æ·»åŠ è‡ªå®šä¹‰æ’åºè§„åˆ™ï¼š</p><p> <code>partial_sort(beg,mid,end,cmp)</code></p><p>å¯¹açš„å‰äº”ä¸ªå…ƒç´ éƒ½æ˜¯é™åºæ’åˆ—</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token function">partial_sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> a <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> a <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">,</span> greater<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>     cout <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">' '</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//10 9 8 7 6 1 2 4 5 3</span><span class="token comment" spellcheck="true">//å‰äº”ä¸ªå…ƒç´ é™åºæœ‰åº</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="random-shuffle"><a href="#random-shuffle" class="headerlink" title="random_shuffle"></a>random_shuffle</h2><p><strong>å¤æ‚åº¦ï¼š</strong> $O(N)$</p><blockquote><ol><li>éšæœºæ‰“ä¹±åºåˆ—çš„é¡ºåº</li><li>åœ¨ <code>C++14</code> ä¸­è¢«å¼ƒç”¨ï¼Œåœ¨ <code>C++17</code> ä¸­è¢«åºŸé™¤ï¼ŒC++11ä¹‹ååº”å°½é‡ä½¿ç”¨<code>shuffle</code>æ¥ä»£æ›¿ã€‚</li></ol></blockquote><pre class="line-numbers language-cpp"><code class="language-cpp">vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">b</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">iota</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// åºåˆ—bé€’å¢èµ‹å€¼ 1, 2, 3, 4,...</span><span class="token comment" spellcheck="true">//å¯¹aæ•°ç»„éšæœºé‡æ’</span><span class="token function">random_shuffle</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> a <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// C++11ä¹‹åå°½é‡ä½¿ç”¨shuffle</span><span class="token function">shuffle</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="reverse"><a href="#reverse" class="headerlink" title="reverse"></a>reverse</h2><pre><code>reverse(beg,end)</code></pre><p><strong>å¤æ‚åº¦ï¼š</strong> $O(N)$</p><blockquote><p>å¯¹åºåˆ—è¿›è¡Œç¿»è½¬</p></blockquote><pre class="line-numbers language-cpp"><code class="language-cpp">string s <span class="token operator">=</span> <span class="token string">"abcde"</span><span class="token punctuation">;</span><span class="token function">reverse</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¯¹sè¿›è¡Œç¿»è½¬</span>cout <span class="token operator">&lt;&lt;</span> s <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//edcba</span><span class="token comment" spellcheck="true">//å¯¹aæ•°ç»„è¿›è¡Œç¿»è½¬</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token function">reverse</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> a <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//4321</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h2><p><strong>å¤æ‚åº¦ï¼š</strong> $O(N logN)$</p><blockquote><p>ä½œç”¨ï¼šå¯¹ä¸€ä¸ªåºåˆ—è¿›è¡Œæ’åº</p></blockquote><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//åŸå‹ï¼š</span><span class="token function">sort</span><span class="token punctuation">(</span>beg<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">sort</span><span class="token punctuation">(</span>beg<span class="token punctuation">,</span> end<span class="token punctuation">,</span> cmp<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//å¯¹aæ•°ç»„çš„[1,n]ä½ç½®è¿›è¡Œä»å°åˆ°å¤§æ’åº</span><span class="token function">sort</span><span class="token punctuation">(</span>a <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> a <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¯¹aæ•°ç»„çš„[0,n-1]ä½ç½®ä»å¤§åˆ°å°æ’åº</span><span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> a <span class="token operator">+</span> n<span class="token punctuation">,</span> greater<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¯¹aæ•°ç»„çš„[0,n-1]ä½ç½®ä»å°åˆ°å¤§æ’åº</span><span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> a <span class="token operator">+</span> n<span class="token punctuation">,</span> less<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//è‡ªå®šä¹‰æ’åºï¼Œå®šä¹‰æ¯”è¾ƒå‡½æ•°</span><span class="token keyword">bool</span> <span class="token function">cmp</span><span class="token punctuation">(</span>node a<span class="token punctuation">,</span>node b<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//æŒ‰ç»“æ„ä½“é‡Œé¢çš„xå€¼é™åºæ’åˆ—</span>    <span class="token keyword">return</span> a<span class="token punctuation">.</span>x <span class="token operator">></span> b<span class="token punctuation">.</span>x<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">sort</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> node <span class="token operator">+</span> n<span class="token punctuation">,</span> cmp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// åªèƒ½æ¥å— ä»¥å‡½æ•°ä¸ºå½¢å¼çš„è‡ªå®šä¹‰æ’åºè§„åˆ™ï¼Œæ— æ³•æ¥å—ä»¥ç»“æ„ä½“ä¸ºå½¢å¼çš„è‡ªå®šä¹‰æ’åºè§„åˆ™</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="stable-sort"><a href="#stable-sort" class="headerlink" title="stable_sort"></a>stable_sort</h2><p><strong>å¤æ‚åº¦ï¼š</strong> $O(N logN)$</p><blockquote><p>åŠŸèƒ½å’Œsort()åŸºæœ¬ä¸€æ ·</p><p>åŒºåˆ«åœ¨äº<code>stable_sort()</code>èƒ½å¤Ÿä¿è¯ç›¸ç­‰å…ƒç´ çš„ç›¸å¯¹ä½ç½®ï¼Œæ’åºæ—¶ä¸ä¼šæ”¹å˜ç›¸ç­‰å…ƒç´ çš„ç›¸å¯¹ä½ç½®</p></blockquote><p>ä½¿ç”¨ç”¨æ³•å’Œ<code>sort()</code>ä¸€æ ·,è§ä¸Š</p><h2 id="stoi"><a href="#stoi" class="headerlink" title="stoi"></a>stoi</h2><pre><code>stoi(const string*)</code></pre><blockquote><p>å°†å¯¹åº”stringç±»å‹å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—</p></blockquote><p>æ³¨æ„å‚æ•°ä¸º<code>string</code>å­—ç¬¦ä¸²ç±»å‹ã€‚</p><p>å…³äºè¾“å‡ºæ•°å­—çš„èŒƒå›´ï¼š<br><code>stoi</code><strong>ä¼šåš</strong>èŒƒå›´æ£€æŸ¥ï¼Œé»˜è®¤å¿…é¡»åœ¨<code>int</code>èŒƒå›´å†…ï¼Œå¦‚æœè¶…å‡ºèŒƒå›´ï¼Œä¼šå‡ºç°REï¼ˆRuntime Errorï¼‰é”™è¯¯ã€‚<br><code>atoi</code><strong>ä¸åš</strong>èŒƒå›´æ£€æŸ¥ï¼Œå¦‚æœè¶…å‡ºä¸Šç•Œï¼Œè¾“å‡ºä¸Šç•Œï¼Œè¶…å‡ºä¸‹ç•Œï¼Œè¾“å‡ºä¸‹ç•Œã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp">string s <span class="token operator">=</span> <span class="token string">"1234"</span><span class="token punctuation">;</span><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token function">atoi</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 1234</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="transform"><a href="#transform" class="headerlink" title="transform"></a>transform</h2><p><strong>å¤æ‚åº¦ï¼š</strong> $O(N)$</p><blockquote><p>ä½œç”¨ï¼šä½¿ç”¨ç»™å®šæ“ä½œï¼Œå°†ç»“æœå†™åˆ°destä¸­</p></blockquote><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//åŸå‹ï¼š</span><span class="token function">transform</span><span class="token punctuation">(</span>beg<span class="token punctuation">,</span> end<span class="token punctuation">,</span> dest<span class="token punctuation">,</span> unaryOp<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//å°†åºåˆ—å¼€å§‹åœ°å€begåˆ°ç»“æŸåœ°å€endå¤§å°å†™è½¬æ¢ï¼ŒæŠŠç»“æœå­˜åˆ°èµ·å§‹åœ°å€ä¸ºdestçš„åºåˆ—ä¸­</span><span class="token function">transform</span><span class="token punctuation">(</span>beg<span class="token punctuation">,</span> end<span class="token punctuation">,</span> dest<span class="token punctuation">,</span> <span class="token operator">::</span>tolower<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">transform</span><span class="token punctuation">(</span>beg<span class="token punctuation">,</span> end<span class="token punctuation">,</span> dest<span class="token punctuation">,</span> <span class="token operator">::</span>toupper<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="to-string"><a href="#to-string" class="headerlink" title="to_string"></a>to_string</h2><blockquote><p>å°†æ•°å­—è½¬åŒ–ä¸ºå­—ç¬¦ä¸²,æ”¯æŒå°æ•°ï¼ˆdoubleï¼‰</p></blockquote><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">12345678</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">to_string</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">'\n'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="unique"><a href="#unique" class="headerlink" title="unique"></a>unique</h2><pre><code>unique(beg, end)</code></pre><p><strong>å¤æ‚åº¦ï¼š</strong> $O(N)$</p><blockquote><p>æ¶ˆé™¤é‡å¤å…ƒç´ ï¼Œè¿”å›æ¶ˆé™¤å®Œé‡å¤å…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®çš„åœ°å€</p><p>å¦‚ï¼š<code>a[] = {1, 3, 2, 3, 6}</code>;</p><p>uniqueä¹‹åaæ•°ç»„ä¸º<code>{1, 2, 3, 6, 3}</code>å‰é¢ä¸ºæ— é‡å¤å…ƒç´ çš„æ•°ç»„ï¼Œåé¢åˆ™æ˜¯é‡å¤å…ƒç´ ç§»åˆ°åé¢ï¼Œè¿”å›<code>a[4]</code>ä½ç½®çš„åœ°å€ï¼ˆä¸é‡å¤å…ƒç´ çš„å°¾ååœ°å€ï¼‰</p></blockquote><p>æ¶ˆé™¤é‡å¤å…ƒç´ ä¸€èˆ¬éœ€è¦åŸåºåˆ—æ˜¯<strong>æœ‰åºåºåˆ—</strong></p><p><strong>è¿ç”¨ï¼šç¦»æ•£åŒ–</strong></p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    cin <span class="token operator">>></span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    b<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å°†aæ•°ç»„å¤åˆ¶åˆ°bæ•°ç»„</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// æ’åºå bï¼š{1, 2, 3, 3, 6}</span><span class="token function">sort</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> b <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¯¹bæ•°ç»„æ’åº</span><span class="token comment" spellcheck="true">// æ¶ˆé™¤é‡å¤å…ƒç´ bï¼š{1, 2, 3, 6, 3} è¿”å›çš„åœ°å€ä¸ºæœ€åä¸€ä¸ªå…ƒç´ 3çš„åœ°å€ </span><span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token function">unique</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> b <span class="token operator">+</span> n<span class="token punctuation">)</span> <span class="token operator">-</span> b<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æ¶ˆé™¤ b çš„é‡å¤å…ƒç´ ï¼Œå¹¶è·å–é•¿åº¦</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//å› ä¸ºbæœ‰åºï¼ŒæŸ¥æ‰¾åˆ°çš„ä¸‹æ ‡å°±æ˜¯å¯¹åº”çš„ ç›¸å¯¹å¤§å°ï¼ˆç¦»æ•£åŒ–åçš„å€¼ï¼‰</span>    <span class="token keyword">int</span> pos <span class="token operator">=</span> <span class="token function">lower_bound</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> b <span class="token operator">+</span> len<span class="token punctuation">,</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> b<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//åœ¨bæ•°ç»„ä¸­äºŒåˆ†æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå¤§äºç­‰äºa[i]çš„ä¸‹æ ‡</span>    a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> pos<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ç¦»æ•£åŒ–èµ‹å€¼</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="gcd"><a href="#gcd" class="headerlink" title="__gcd"></a>__gcd</h2><pre><code>__gcd(a,b)</code></pre><blockquote><p>æ±‚aå’Œbçš„æœ€å¤§å…¬çº¦æ•°</p></blockquote><p><code>__gcd(12,15) = 3</code></p><p><code>__gcd(21,0) = 21</code></p><h2 id="lg"><a href="#lg" class="headerlink" title="__lg"></a>__lg</h2><pre><code>__lg(a)</code></pre><blockquote><ol><li>æ±‚ä¸€ä¸ªæ•°äºŒè¿›åˆ¶ä¸‹æœ€é«˜ä½ä½äºç¬¬å‡ ä½ï¼ˆä»<strong>ç¬¬0ä½</strong>å¼€å§‹ï¼‰ï¼ˆæˆ–äºŒè¿›åˆ¶æ•°ä¸‹æœ‰å‡ ä½ï¼‰</li><li><code>__lg(x)</code>ç›¸å½“äºè¿”å›$\lfloor log_2 x \rfloor$</li><li>å¤æ‚åº¦$O(1)$</li></ol></blockquote><p><code>__lg(8) = 3</code></p><p><code>__lg(15) = 3</code></p><h2 id="builtin-å†…ç½®ä½è¿ç®—å‡½æ•°"><a href="#builtin-å†…ç½®ä½è¿ç®—å‡½æ•°" class="headerlink" title="__builtin_ å†…ç½®ä½è¿ç®—å‡½æ•°"></a>__builtin_ å†…ç½®ä½è¿ç®—å‡½æ•°</h2><p>å†…ç½®å‡½æ•°æœ‰ç›¸åº”çš„<code>unsigned lnt</code>å’Œ<code>unsigned long long</code>ç‰ˆæœ¬ï¼Œ<code>unsigned long long</code>åªéœ€è¦åœ¨å‡½æ•°ååé¢åŠ ä¸Š<code>ll</code>å°±å¯ä»¥äº†ï¼Œæ¯”å¦‚<code>__builtin_clzll(x)</code>,é»˜è®¤æ˜¯32ä½<code>unsigned int</code></p><h3 id="builtin-ffs"><a href="#builtin-ffs" class="headerlink" title="__builtin_ffs"></a>__builtin_ffs</h3><pre><code>__builtin_ffs(x)</code></pre><blockquote><p>äºŒè¿›åˆ¶ä¸­å¯¹åº”æœ€åä¸€ä½<code>1</code>çš„ä½æ•°ï¼Œæ¯”å¦‚<code>4</code>ä¼šè¿”å›<code>3</code>ï¼ˆ100ï¼‰</p></blockquote><h3 id="builtin-popcount"><a href="#builtin-popcount" class="headerlink" title="__builtin_popcount"></a>__builtin_popcount</h3><pre><code>__builtin_popcount(x)</code></pre><blockquote><p><code>x</code>ä¸­<code>1</code>çš„ä¸ªæ•°</p></blockquote><h3 id="builtin-ctz"><a href="#builtin-ctz" class="headerlink" title="__builtin_ctz"></a>__builtin_ctz</h3><pre><code>__builtin_ctz(x)</code></pre><blockquote><p><code>x</code>æœ«å°¾<code>0</code>çš„ä¸ªæ•°ï¼ˆ<code>count tail zero</code>ï¼‰</p></blockquote><h3 id="builtin-clz"><a href="#builtin-clz" class="headerlink" title="__builtin_clz"></a>__builtin_clz</h3><pre><code>__builtin_clz(x)</code></pre><blockquote><p><code>x</code>å‰å¯¼<code>0</code>çš„ä¸ªæ•°ï¼ˆ<code>count leading zero</code>ï¼‰</p></blockquote><pre class="line-numbers language-cpp"><code class="language-cpp">cout <span class="token operator">&lt;&lt;</span> <span class="token function">__builtin_clz</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 26</span><span class="token comment" spellcheck="true">//å› ä¸ºå…±æœ‰6ä½,é»˜è®¤æ•°æ®èŒƒå›´ä¸º32ä½ï¼Œ32 - 6 = 26</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="builtin-parity"><a href="#builtin-parity" class="headerlink" title="__builtin_parity"></a>__builtin_parity</h3><pre><code>__builtin_parity(x)</code></pre><blockquote><p><code>x</code>ä¸­1çš„ä¸ªæ•°çš„å¥‡å¶æ€§ï¼Œ å¥‡æ•°è¾“å‡º<code>1</code>ï¼Œå¶æ•°è¾“å‡º<code>0</code></p></blockquote><blockquote><p>å¯å‚è€ƒé“¾æ¥ï¼š</p><ol><li><a href="https://www.luogu.com.cn/blog/AccRobin/grammar-candies" target="_blank" rel="noopener">C++è¯­æ³•ç³–</a> <a href="https://www.luogu.com.cn/blog/AccRobin/grammar-candies" target="_blank" rel="noopener">https://www.luogu.com.cn/blog/AccRobin/grammar-candies</a></li></ol></blockquote><p>å¯èƒ½æœ‰äº›äººéœ€è¦PDFæ–‡ä»¶ï¼Œå…¬ä¼—å·ã€è¡Œç æ£‹ã€‘å›å¤ STL è·å–ï¼ŒæŠ±æ­‰ğŸ˜­</p><blockquote><p>2023.03.28 å·²æ›´æ–°PDFæ–‡ä»¶ï¼ˆé™¤å»äº†æ°´å°ï¼Œå†…å®¹è¿›è¡Œäº†éƒ¨åˆ†æ’ç‰ˆè°ƒæ•´å’Œæ›´æ–°ï¼‰</p></blockquote><p><img src="https://wyqz.top/medias/gzh.jpg" alt></p>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ æ€»ç»“ </tag>
            
            <tag> C++ </tag>
            
            <tag> STL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CF1055C Lucky Days|è£´èœ€å®šç†</title>
      <link href="/p/4188452413.html"/>
      <url>/p/4188452413.html</url>
      
        <content type="html"><![CDATA[<h1 id="Lucky-Days"><a href="#Lucky-Days" class="headerlink" title="Lucky Days"></a><a href="https://codeforces.com/problemset/problem/1055/C" target="_blank" rel="noopener">Lucky Days</a></h1><blockquote><p>ç»™å®š $l_a,r_a,t_a,l_b,r_b,t_b$ï¼Œå¯¹äºæ‰€æœ‰çš„éè´Ÿæ•´æ•° $k$ï¼Œå°†åŒºé—´ $[l_a+kt_a,r_a+kt_a]$ æ‰“ä¸Šæ ‡è®° $1$ï¼Œå°†åŒºé—´ $[l_b+kt_b,r_b+kt_b]$ æ‰“ä¸Šæ ‡è®° $2$ã€‚æ±‚å‡ºæœ€é•¿çš„è¿ç»­åŒºé—´ä½¿å¾—è¯¥åŒºé—´ä¸­çš„æ‰€æœ‰ä½ç½®éƒ½è¢«åŒæ—¶æ‰“ä¸Šçš„ $1,2$ æ ‡è®°ã€‚</p></blockquote><p>æ ·ä¾‹ä¸€</p><pre><code>0 2 51 3 5</code></pre><pre><code>2</code></pre><p>æ ·ä¾‹äºŒ</p><pre><code>0 1 32 3 6</code></pre><pre><code>1</code></pre><p><img src="https://cdn.luogu.com.cn/upload/vjudge_pic/CF1055C/19d7a3762431cf8ed7d41c7aa787eb194dc6ab47.png" alt="æ ·ä¾‹ä¸€"></p><p><img src="https://cdn.luogu.com.cn/upload/vjudge_pic/CF1055C/dee255111b7c12483568555df6c88766f900f855.png" alt="æ ·ä¾‹äºŒ"></p><hr><h1 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h1><p>é¢˜ç›®è¦æ±‚ä¸¤ä¸ªåŒºé—´çš„é‡åˆåº¦æœ€å¤§çš„é•¿åº¦ã€‚</p><p>é¦–å…ˆç¬¬ä¸€ä¸ªç‚¹æˆ‘ä»¬è¦æƒ³åˆ°ï¼šè¦æƒ³ä½¿ä¸¤ä¸ªåŒºé—´çš„é‡åˆåº¦æœ€é«˜ï¼Œéœ€è¦è®©ä¸¤ä¸ªåŒºé—´å°½å¯èƒ½é€¼è¿‘ã€‚æœ€ä¼˜çš„æƒ…å†µå°±æ˜¯ä¸¤ä¸ªåŒºé—´çš„<strong>å·¦ç«¯ç‚¹å°½å¯èƒ½ç›¸ç­‰</strong>ï¼Œè¿™æ ·é‡åˆåº¦æ˜¯æœ€å¤§çš„ã€‚</p><p>å³ä½¿ $la + x * ta = lb + y * tb$</p><p>å°†å¼å­è¿›è¡Œç§»é¡¹å¾— $x * ta - y * tb = lb - la$ ï¼ˆæ­¤æ—¶æˆ‘ä»¬å‡è®¾$la &lt; lb$ï¼Œä»£ç ä¸­å·²åšç›¸å…³çš„æ“ä½œï¼Œè¿™æ ·åªæ˜¯ä¸ºäº†æ–¹ä¾¿ï¼‰</p><p>æˆ‘ä»¬éœ€è¦çœ‹å¼å­æ˜¯å¦æœ‰è§£ï¼Œå¼å­ç»“æ„å’Œ<strong>è£´èœ€å®šç†</strong>æ¯”è¾ƒåƒï¼Œæ‹¿å‡ºæ¥è¿›è¡Œå¯¹æ¯”ã€‚</p><p>è£´èœ€å®šç† ï¼š å­˜åœ¨æ•´æ•° $x, y$ï¼Œæ»¡è¶³$a * x + b * y = gcd(a,b)$</p><p> è¯¥å¼å­è¿›è¡Œ$y$ç¬¦å·å˜ä¸ºæ­£ï¼Œè¡¨ç¤º$y$æ˜¯æ•´æ•°ï¼Œåˆ™ $x * ta + y * tb = lb - la$</p><p>æˆ‘ä»¬ä»¤$d = gcd(ta, tb)$</p><p>é‚£ä¹ˆå¯ä»¥å‘ç°å¦‚æœ$d | (lb - la)$ï¼Œåˆ™è¯¥å¼å­æœ‰è§£ï¼Œå·¦ç«¯ç‚¹å¯ä»¥é‡åˆã€‚</p><hr><p>ä½†æ˜¯å¦‚æœå·¦ç«¯ç‚¹ä¸èƒ½é‡åˆæ€ä¹ˆåŠï¼Œå°½å¯èƒ½é€¼è¿‘å°±è¡Œã€‚</p><p>æ­¤æ—¶åˆ«å¿˜äº†å¼å­å³è¾¹çš„$lb-la$ä»£è¡¨çš„æ˜¯ä»€ä¹ˆï¼Œæ˜¯ <strong>åŒºé—´aå·¦ç«¯ç‚¹ç§»åŠ¨çš„è·ç¦»</strong>ï¼Œé‚£ä¹ˆå› ä¸º$x * ta + y <em> tb = d$æ˜¯å­˜åœ¨è§£çš„ï¼Œåˆ™<em>*åŒºé—´aç§»åŠ¨çš„è·ç¦»å¯è¿›ä¸€æ­¥å˜ä¸º</em></em> $d$ ã€‚</p><blockquote><p> æ³¨æ„ï¼šæˆ‘è¯´çš„åŒºé—´aå¯ä»¥ç§»åŠ¨ï¼Œæ˜¯æŒ‡çš„ä¸€å®šå­˜åœ¨æŸç§çŠ¶æ€ï¼Œä¸Šä¸‹ä¸¤ä¸ªäººæœ‰ä¸¤ä¸ªåŒºé—´çš„è·ç¦»å‘ç”Ÿäº†å˜åŒ–ï¼Œå«ä¸ºåŒºé—´ç§»åŠ¨æ›´å®¹æ˜“ç†è§£ã€‚å¦‚</p><p>$ta = 3,[1,4]-&gt;[4,7]-&gt;[7,10]-&gt;[10,13]$</p><p>$tb = 4,[3,5]-&gt;[7,9]-&gt;[11,13]$</p><p>$[1,4][3,5]$å·¦ç«¯ç‚¹ç›¸å·®$2$ï¼Œè¿™æ˜¯ä¸€ç§åŒºé—´çŠ¶æ€ï¼Œé€šè¿‡ç§»åŠ¨ï¼Œä¼šå‡ºç°å¦ä¸€ç§åŒºé—´çŠ¶æ€$[10,13][11,13]$å·¦ç«¯ç‚¹ç›¸å·®$1$ã€‚ç§»åŠ¨äº†ä¸€æ­¥ï¼ˆ$d = gcd(3,4) = 1$ï¼‰</p></blockquote><p>å·¦ç«¯ç‚¹ä¸é‡åˆå°±å°½å¯èƒ½é€¼è¿‘ã€‚</p><p>æœ‰ä¸¤ç§çŠ¶æ€å¯èƒ½æ˜¯åˆé€‚çš„ã€‚</p><blockquote><p>$dis$ä»£è¡¨aåŒºé—´å·¦ç«¯ç‚¹ä¸båŒºé—´å·¦ç«¯ç‚¹ç›¸å·®çš„æœ€å°è·ç¦»ï¼ˆaåŒºé—´å·¦ç«¯ç‚¹æˆ‘è®¤ä¸ºå°äºç­‰äºbåŒºé—´å·¦ç«¯ç‚¹ï¼‰ï¼Œå³$dis = (lb - la) \% d$</p></blockquote><ul><li><p>åŒºé—´aå·¦ç«¯ç‚¹ç§»åŠ¨åˆ°å’ŒåŒºé—´bå·¦ç«¯ç‚¹ç›¸å·®$(lb-la) \% d$ï¼Œå¯èƒ½æ˜¯è·ç¦»æœ€è¿‘çš„</p><ul><li>$min(rb - lb + 1, ra - la + 1 - dis)$</li></ul></li><li><p>ç„¶åæ˜¯ä¸Šé¢çš„æƒ…å†µåœ¨å¾€åç§»ä¸€æ­¥ï¼Œå³åŒºé—´aå·¦ç«¯ç‚¹è¶…è¿‡åŒºé—´bå·¦ç«¯ç‚¹$d-(lb-la)%d$</p><ul><li>$dis = d - dis$ </li><li>$min(ra - la + 1, rb - lb + 1 - dis)$</li></ul></li></ul><blockquote><p>ä¸¤ä¸ªè®¡ç®—è¯·ç”»å›¾é¢†æ‚Ÿè®¡ç®—æ–¹æ³•ã€‚</p><p>è®¡ç®—ï¼šå·¦ç«¯ç‚¹é‡åˆçš„æƒ…å†µå¯ä»¥åˆå¹¶åœ¨å·¦ç«¯ç‚¹èƒ½åˆå¹¶çš„ä»£ç é‡Œé¢ï¼Œå³å·¦ç«¯ç‚¹åˆå¹¶æ˜¯å·¦ç«¯ç‚¹ä¸åˆå¹¶çš„ç‰¹æ®Šæƒ…å†µã€‚</p></blockquote><h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// [l[a] + k * ta, r[a] + k * ta]</span><span class="token comment" spellcheck="true">// 3 [1, 4] [4, 7] [7, 10] [10, 13] [13, 16] ---</span><span class="token comment" spellcheck="true">// 4 [3, 5] [7, 9] [11, 13]         [15, 17] ---</span><span class="token comment" spellcheck="true">// èµ·ç‚¹å°½å¯èƒ½ç›¸åŒ</span><span class="token comment" spellcheck="true">// è£´èœ€å®šç†ï¼šå­˜åœ¨x,y ä½¿ ax + by = gcd(a, b)</span><span class="token comment" spellcheck="true">// la + x * ta = lb + y * tb</span><span class="token comment" spellcheck="true">// x * ta - y * tb = lb - la</span><span class="token comment" spellcheck="true">// gcd(ta, tb) | (lb - la)æœ‰è§£</span><span class="token comment" spellcheck="true">// d = gcd(ta, tb) çœ‹æˆç›¸å¯¹ç§»åŠ¨çš„è·ç¦»</span><span class="token comment" spellcheck="true">// la -> la + d -> la + k * d    lb</span><span class="token comment" spellcheck="true">// å·® = lb - la </span><span class="token comment" spellcheck="true">// dis = (lb - la) % d</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> la<span class="token punctuation">,</span> ra<span class="token punctuation">,</span> ta<span class="token punctuation">,</span> lb<span class="token punctuation">,</span> rb<span class="token punctuation">,</span> tb<span class="token punctuation">;</span>    cin <span class="token operator">>></span> la <span class="token operator">>></span> ra <span class="token operator">>></span> ta <span class="token operator">>></span> lb <span class="token operator">>></span> rb <span class="token operator">>></span> tb<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>la <span class="token operator">></span> lb<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">swap</span><span class="token punctuation">(</span>la<span class="token punctuation">,</span> lb<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">swap</span><span class="token punctuation">(</span>ra<span class="token punctuation">,</span> rb<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">swap</span><span class="token punctuation">(</span>ta<span class="token punctuation">,</span> tb<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> d <span class="token operator">=</span> <span class="token function">__gcd</span><span class="token punctuation">(</span>ta<span class="token punctuation">,</span> tb<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> dis <span class="token operator">=</span> <span class="token punctuation">(</span>lb <span class="token operator">-</span> la<span class="token punctuation">)</span> <span class="token operator">%</span> d<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å·¦ç«¯ç‚¹çš„å·®</span>    <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    ans <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>rb <span class="token operator">-</span> lb <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> ra <span class="token operator">-</span> la <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">-</span> dis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    dis <span class="token operator">=</span> d <span class="token operator">-</span> dis<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å‘å³ç§»åŠ¨ä¸€æ­¥</span>    ans <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>ra <span class="token operator">-</span> la <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> rb <span class="token operator">-</span> lb <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">-</span> dis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cout <span class="token operator">&lt;&lt;</span> ans <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// cin >> t;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°è®º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°è®º </tag>
            
            <tag> è£´èœ€å®šç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nginxçŸ¥è¯†æ€»ç»“</title>
      <link href="/p/386249329.html"/>
      <url>/p/386249329.html</url>
      
        <content type="html"><![CDATA[<h1 id="å¼€å…³nginx"><a href="#å¼€å…³nginx" class="headerlink" title="å¼€å…³nginx"></a>å¼€å…³nginx</h1><p><code>Ubuntu</code>ä¸‹ï¼š</p><p>æ‰“å¼€<code>nginx</code>æœåŠ¡ï¼Œéœ€è¦åœ¨rootæƒé™ä¸‹ï¼ˆdockerå®¹å™¨ä¸‹ä¹Ÿå¯ä»¥ç”¨ï¼‰</p><pre class="line-numbers language-bash"><code class="language-bash">/etc/init.d/nginx start<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>é‡å¯nginx</p><pre class="line-numbers language-bash"><code class="language-bash">/sbin/nginx -s reload<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="nginxé…ç½®"><a href="#nginxé…ç½®" class="headerlink" title="nginxé…ç½®"></a>nginxé…ç½®</h1><h2 id="httpå—"><a href="#httpå—" class="headerlink" title="httpå—"></a>httpå—</h2><h3 id="serveråŒº"><a href="#serveråŒº" class="headerlink" title="serveråŒº"></a>serveråŒº</h3><p>è¿›è¡Œç«¯å£ç›‘å¬ï¼Œè½¬å‘æµé‡</p><ul><li>è®¿é—®80ç«¯å£ï¼Œå³æµè§ˆå™¨ç›´æ¥è¾“å…¥åœ°å€ï¼Œè®¿é—®ç½‘é¡µï¼Œå†…å®¹ä½äº<code>/home/hexo/blog</code>å¤„</li></ul><pre class="line-numbers language-bash"><code class="language-bash">http<span class="token punctuation">{</span>    server<span class="token punctuation">{</span>        listen 80<span class="token punctuation">;</span> <span class="token comment" spellcheck="true"># ç›‘å¬80ç«¯å£</span>        server_name 101.35.203.216<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">#è®¿é—®è¾“çš„åœ°å€ï¼Œå¯ä»¥å¡«åŸŸå</span>        root /home/hexo/blog<span class="token punctuation">;</span> <span class="token comment" spellcheck="true"># è®¿é—®æ–‡ä»¶çš„ç›®å½•</span>        location / <span class="token punctuation">{</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>åŸŸåè½¬å‘ï¼Œå³è®¿é—®<code>game.wyqz.top</code>åŸŸåï¼Œè½¬å‘åˆ°æœ¬åœ°<code>10000</code>ç«¯å£ã€‚</li></ul><p><code>game.wyqz.top</code>åŸŸåè§£æåˆ°çš„æ˜¯æœåŠ¡å™¨IPåœ°å€ï¼Œç­‰äºè¯´è®¿é—®çš„è¿˜æ˜¯80ç«¯å£ï¼Œæˆ‘ä»¬é€šè¿‡åŸŸååŒ¹é…ï¼Œå°†å…¶è½¬å‘åˆ°åŸŸåå¯¹åº”çš„ç«¯å£å¤„ã€‚</p><pre class="line-numbers language-bash"><code class="language-bash">http<span class="token punctuation">{</span>    server    <span class="token punctuation">{</span>        listen 80<span class="token punctuation">;</span>        server_name game.wyqz.top<span class="token punctuation">;</span>        location / <span class="token punctuation">{</span>        proxy_pass  http://127.0.0.1:10000<span class="token punctuation">;</span> <span class="token comment" spellcheck="true"># è½¬å‘è§„åˆ™</span>        proxy_set_header Host <span class="token variable">$proxy_host</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true"># ä¿®æ”¹è½¬å‘è¯·æ±‚å¤´ï¼Œè®©10000ç«¯å£çš„åº”ç”¨å¯ä»¥å—åˆ°çœŸå®çš„è¯·æ±‚</span>        proxy_set_header X-Real-IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>        proxy_set_header X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        access_log  /www/wwwlogs/access.log<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>é‡å®šå‘ï¼Œå³é€šè¿‡80ç«¯å£è®¿é—®<code>vj.wyqz.top</code>åŸŸåï¼ˆ80ç«¯å£æ˜¯httpè®¿é—®ï¼‰ï¼Œç›´æ¥returnä¸€ä¸ªåœ°å€ï¼Œå³å¯¹åº”çš„<strong>https</strong>åœ°å€ï¼Œå®ç°<strong>https</strong>è®¿é—®ã€‚</li></ul><pre class="line-numbers language-bash"><code class="language-bash">http<span class="token punctuation">{</span>    server<span class="token punctuation">{</span>        listen 80<span class="token punctuation">;</span>        server_name vj.wyqz.top<span class="token punctuation">;</span>        <span class="token keyword">return</span>  301 https://<span class="token variable">$host</span><span class="token variable">$request_uri</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">#é‡å®šå‘è‡³httpsè®¿é—®ã€‚</span>        location / <span class="token punctuation">{</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>httpsé…ç½®</li></ul><pre class="line-numbers language-bash"><code class="language-bash">server <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true"># æœåŠ¡å™¨ç«¯å£ä½¿ç”¨443ï¼Œå¼€å¯ssl, è¿™é‡Œsslå°±æ˜¯ä¸Šé¢å®‰è£…çš„sslæ¨¡å—</span>    listen       443 ssl<span class="token punctuation">;</span>    root /home/hexo/blog<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true"># åŸŸåï¼Œå¤šä¸ªä»¥ç©ºæ ¼åˆ†å¼€</span>    server_name  wyqz.top www.wyqz.top<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true"># sslè¯ä¹¦åœ°å€</span>    ssl_certificate     /etc/nginx/ssl.pem<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true"># pemæ–‡ä»¶çš„è·¯å¾„</span>    ssl_certificate_key  /etc/nginx/ssl.key<span class="token punctuation">;</span> <span class="token comment" spellcheck="true"># keyæ–‡ä»¶çš„è·¯å¾„</span>    <span class="token comment" spellcheck="true"># ssléªŒè¯ç›¸å…³é…ç½®</span>    ssl_session_timeout  5m<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">#ç¼“å­˜æœ‰æ•ˆæœŸ</span>    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:<span class="token operator">!</span>NULL:<span class="token operator">!</span>aNULL:<span class="token operator">!</span>MD5:<span class="token operator">!</span>ADH:<span class="token operator">!</span>RC4<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">#åŠ å¯†ç®—æ³•</span>    ssl_protocols TLSv1 TLSv1.1 TLSv1.2<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">#å®‰å…¨é“¾æ¥å¯é€‰çš„åŠ å¯†åè®®</span>    ssl_prefer_server_ciphers on<span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">#ä½¿ç”¨æœåŠ¡å™¨ç«¯çš„é¦–é€‰ç®—æ³•</span>    location / <span class="token punctuation">{</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h1><ul><li>server_name å€¼ä¸º<code>_</code>æ—¶ï¼ŒåŒ¹é…ä»»ä½•åŸŸåã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CF1076E.Vasya and a Tree|æ ‘ä¸Šå·®åˆ†</title>
      <link href="/p/3632168690.html"/>
      <url>/p/3632168690.html</url>
      
        <content type="html"><![CDATA[<h1 id="CF-1076E-Vasya-and-a-Tree-æ ‘ä¸Šå·®åˆ†"><a href="#CF-1076E-Vasya-and-a-Tree-æ ‘ä¸Šå·®åˆ†" class="headerlink" title="CF 1076E. Vasya and a Tree|æ ‘ä¸Šå·®åˆ†"></a>CF 1076E. Vasya and a Tree|æ ‘ä¸Šå·®åˆ†</h1><h2 id="é¢˜æ„"><a href="#é¢˜æ„" class="headerlink" title="é¢˜æ„"></a>é¢˜æ„</h2><blockquote><p>ä¸€æ£µæ ‘ï¼Œå®ƒæœ‰nä¸ªèŠ‚ç‚¹ï¼Œ1å·èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹ï¼Œåˆå§‹æ‰€æœ‰ç‚¹çš„æƒå€¼ä¸º0ã€‚</p><p>å®šä¹‰ä»¥ä¸‹ä¸¤ä¸ªä¸œè¥¿ï¼š</p><ul><li><p>å‡½æ•°$d(i,j)$ : æŒ‡èŠ‚ç‚¹$i$åˆ°$j$æ‰€ç»è¿‡è¾¹çš„æ•°é‡ã€‚</p></li><li><p>$x$èŠ‚ç‚¹çš„$k$çº§å­æ ‘ï¼ŒæŒ‡æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ç‚¹çš„é›†åˆï¼š</p><p>â‘  xä¸ºè¯¥ç‚¹çš„ç¥–å…ˆï¼Œè§„å®šè‡ªå·±ä¹Ÿæ˜¯è‡ªå·±çš„ç¥–å…ˆã€‚</p><p>â‘¡$d(i,j) \leq k$ã€‚</p></li></ul><p>$m$æ¡è¦æ±‚è¦ä½ æ¥è§£å†³ï¼š</p><p>ç»™å‡º$v,d,x$ï¼Œå°†ä»¥$v$èŠ‚ç‚¹çš„$d$çº§å­æ ‘çš„æƒå€¼åŠ ä¸Š$x$ã€‚</p><p>å½“å¤„ç†å®Œæ‰€æœ‰çš„è¦æ±‚æ—¶ï¼Œè¾“å‡ºæ‰€æœ‰ç‚¹çš„æƒå€¼ã€‚</p></blockquote><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>é¢˜ç›®è¦æ±‚å¯¹ä¸€æ®µæ·±åº¦çš„æŸèŠ‚ç‚¹çš„å­æ ‘è¿›è¡ŒåŠ å’Œæ“ä½œï¼Œè¿™ç§æ“ä½œç±»ä¼¼å•çº¯çš„ä¸€ç»´å‰ç¼€å’Œå·®åˆ†æ“ä½œï¼Œæ‰€ä»¥å¯ä»¥åœ¨æ ‘ä¸Šè¿›è¡Œå·®åˆ†æ“ä½œã€‚</p><p>é¦–å…ˆå°±æ˜¯å°†æ‰€æœ‰çš„æ“ä½œç¦»çº¿ä¸‹æ¥ï¼Œå°†æ‰€æœ‰æ“ä½œæŒ‚åœ¨èŠ‚ç‚¹ä¸Šã€‚å¯¹åº”ä¸‹é¢çš„ä»£ç </p><pre class="line-numbers language-cpp"><code class="language-cpp">vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">>></span><span class="token operator">></span> <span class="token function">q</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> u<span class="token punctuation">,</span> d<span class="token punctuation">,</span> v<span class="token punctuation">;</span>    cin <span class="token operator">>></span> u <span class="token operator">>></span> d <span class="token operator">>></span> v<span class="token punctuation">;</span>    q<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token punctuation">{</span>d<span class="token punctuation">,</span> v<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><p>æ¥ä¸‹æ¥çš„å…³é”®ç‚¹å°±æ˜¯å¦‚ä½•åœ¨æ ‘ä¸Šè¿›è¡Œå·®åˆ†æ“ä½œï¼ˆå¯¹åº”ä¸€ç»´å·®åˆ† åŒºé—´å·¦ç«¯ç‚¹çš„åŠ  å’Œ åŒºé—´å³ç«¯ç‚¹çš„å‡ï¼‰ã€‚</p><p>å› ä¸ºæ ‘ä¸­çš„éå†æ˜¯åŸºäºDFSåºçš„ï¼Œ<strong>è®¿é—®ä¸€ä¸ªå­æ ‘è¿‡åæ‰ä¼šè®¿é—®åˆ°å¦ä¸€æ£µå­æ ‘</strong>ã€‚</p><p>æˆ‘ä»¬åœ¨DFSè¿‡ç¨‹ä¸­ç»´æŠ¤å·®åˆ†æ•°ç»„ï¼ˆ$b[i]$ï¼‰ï¼ŒDFSæ—¶æºå¸¦ä¸€ä¸ªå‰ç¼€å’Œï¼ˆ$sum$ï¼‰å˜é‡ï¼Œæ¯è®¿é—®åˆ°ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œå…ˆéå†è¯¥èŠ‚ç‚¹çš„æ‰€æœ‰æ“ä½œï¼Œå°†å‰ç¼€å’Œï¼ˆå…¶å®å°±æ˜¯è¯¥è·¯å¾„ä¸Šå·®åˆ†æ•°ç»„çš„å‰ç¼€å’Œï¼Œç­‰äºå½“å‰èŠ‚ç‚¹çš„å€¼ï¼‰åŠ ä¸Šæ“ä½œçš„å€¼ï¼Œç„¶åæ ‡è®°å·®åˆ†æ•°ç»„ç»“æŸçš„ä½ç½®ï¼ˆå°±æ˜¯åœ¨è¯¥ä½ç½®å‡å»æ“ä½œçš„é‚£ä¸ªå€¼ï¼‰ã€‚</p><p>å½“å›æº¯çš„æ—¶å€™ï¼Œåˆ é™¤ä¹‹å‰æ‰“çš„æ ‡è®°ã€‚æ ‘éå†æ˜¯DFSåºçš„ï¼Œåˆ é™¤ä¹‹åæ‰ä¼šè®¿é—®åˆ°å¦ä¸€æ£µæ ‘ç›¸åŒçš„æ·±åº¦èŠ‚ç‚¹ï¼Œä¸ä¼šå½±å“$b[i]$çš„å€¼ã€‚</p><blockquote><p>$b[i]$ : ä»£è¡¨æ·±åº¦ä¸º$i$çš„èŠ‚ç‚¹çš„æ ‡è®°å€¼</p></blockquote><p>æ ‡è®°ï¼š</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">if</span><span class="token punctuation">(</span>dep<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> d <span class="token operator">&lt;</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>    b<span class="token punctuation">[</span>dep<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> d <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> v<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//mark</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>åˆ é™¤æ ‡è®°ï¼š</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token punctuation">[</span>d<span class="token punctuation">,</span> v<span class="token punctuation">]</span> <span class="token operator">:</span> q<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>dep<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> d <span class="token operator">&lt;</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>        b<span class="token punctuation">[</span>dep<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> d <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> v<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> n<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> <span class="token function">g</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">dep</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> u<span class="token punctuation">,</span> v<span class="token punctuation">;</span>        cin <span class="token operator">>></span> u <span class="token operator">>></span> v<span class="token punctuation">;</span>        g<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>        g<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> m<span class="token punctuation">;</span>    cin <span class="token operator">>></span> m<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">>></span><span class="token operator">></span> <span class="token function">q</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> u<span class="token punctuation">,</span> d<span class="token punctuation">,</span> v<span class="token punctuation">;</span>        cin <span class="token operator">>></span> u <span class="token operator">>></span> d <span class="token operator">>></span> v<span class="token punctuation">;</span>        q<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token punctuation">{</span>d<span class="token punctuation">,</span> v<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token number">3e5</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> <span class="token function">ans</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    function<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> ll<span class="token punctuation">)</span><span class="token operator">></span> dfs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> fa<span class="token punctuation">,</span> ll sum<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åŠ ä¸Šæ ‡è®°å€¼</span>        sum <span class="token operator">+</span><span class="token operator">=</span> b<span class="token punctuation">[</span>dep<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// minus</span>        <span class="token comment" spellcheck="true">// æšä¸¾èŠ‚ç‚¹æ“ä½œ</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token punctuation">[</span>d<span class="token punctuation">,</span> v<span class="token punctuation">]</span> <span class="token operator">:</span> q<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            sum <span class="token operator">+</span><span class="token operator">=</span> v<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ç´¯åŠ </span>            <span class="token keyword">if</span><span class="token punctuation">(</span>dep<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> d <span class="token operator">&lt;</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>                b<span class="token punctuation">[</span>dep<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> d <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> v<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//mark</span>        <span class="token punctuation">}</span>        ans<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> sum<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> v <span class="token operator">:</span> g<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>v <span class="token operator">==</span> fa<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>            dep<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> dep<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token function">dfs</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> u<span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// åˆ é™¤æ ‡è®°</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token punctuation">[</span>d<span class="token punctuation">,</span> v<span class="token punctuation">]</span> <span class="token operator">:</span> q<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>dep<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> d <span class="token operator">&lt;</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>                b<span class="token punctuation">[</span>dep<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> d <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> v<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        cout <span class="token operator">&lt;&lt;</span> ans<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" \n"</span><span class="token punctuation">[</span>i <span class="token operator">==</span> n<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ ‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CF </tag>
            
            <tag> DFS </tag>
            
            <tag> æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ACMæ¨¡æ¿</title>
      <link href="/p/3941430957.html"/>
      <url>/p/3941430957.html</url>
      
        <content type="html"><![CDATA[<p><strong>ç›®å½•</strong></p><p>[TOC]</p><hr><h1 id="1-æ‚é¡¹"><a href="#1-æ‚é¡¹" class="headerlink" title="1 æ‚é¡¹"></a>1 æ‚é¡¹</h1><h2 id="1-1-int128"><a href="#1-1-int128" class="headerlink" title="1.1 __int128"></a>1.1 __int128</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">inline</span> __int128 <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    __int128 x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> f <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> ch<span class="token punctuation">;</span>    ch <span class="token operator">=</span> <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>ch<span class="token operator">&lt;</span><span class="token string">'0'</span> <span class="token operator">||</span> ch<span class="token operator">></span><span class="token string">'9'</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>ch<span class="token operator">==</span><span class="token string">'-'</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            f <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>            ch <span class="token operator">=</span> <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>ch<span class="token operator">>=</span><span class="token string">'0'</span> <span class="token operator">and</span> ch<span class="token operator">&lt;=</span><span class="token string">'9'</span><span class="token punctuation">)</span> x <span class="token operator">=</span> x<span class="token operator">*</span><span class="token number">10</span><span class="token operator">+</span>ch<span class="token operator">-</span><span class="token string">'0'</span><span class="token punctuation">,</span>ch<span class="token operator">=</span><span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> x<span class="token operator">*</span>f<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span>__int128 x<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span>     <span class="token punctuation">{</span>        <span class="token function">putchar</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        x <span class="token operator">=</span> <span class="token operator">-</span>x<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">></span> <span class="token number">9</span><span class="token punctuation">)</span> <span class="token function">print</span><span class="token punctuation">(</span>x<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">putchar</span><span class="token punctuation">(</span>x<span class="token operator">%</span><span class="token number">10</span><span class="token operator">+</span><span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>std<span class="token operator">::</span>istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">>></span><span class="token punctuation">(</span>std<span class="token operator">::</span>istream<span class="token operator">&amp;</span>in<span class="token punctuation">,</span> __int128 <span class="token operator">&amp;</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">char</span> c<span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span>c <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c <span class="token operator">!=</span> <span class="token string">'-'</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isdigit</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token string">'-'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token string">'0'</span> <span class="token operator">-</span> <span class="token punctuation">(</span>c <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">isdigit</span><span class="token punctuation">(</span>c <span class="token operator">=</span> <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>x <span class="token operator">=</span> x <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token string">'0'</span> <span class="token operator">-</span> c<span class="token punctuation">;</span><span class="token punctuation">}</span>  <span class="token keyword">else</span> <span class="token punctuation">{</span>x <span class="token operator">=</span> c <span class="token operator">-</span> <span class="token string">'0'</span><span class="token punctuation">;</span> <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">isdigit</span><span class="token punctuation">(</span>c <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>x <span class="token operator">=</span> x <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">-</span> <span class="token string">'0'</span> <span class="token operator">+</span> c<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> in<span class="token punctuation">;</span><span class="token punctuation">}</span>std<span class="token operator">::</span>ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span> <span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>std<span class="token operator">::</span>ostream<span class="token operator">&amp;</span>out<span class="token punctuation">,</span> __int128 x<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>out <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span><span class="token punctuation">;</span> out <span class="token operator">&lt;&lt;</span> <span class="token operator">-</span>x<span class="token punctuation">;</span> <span class="token keyword">return</span> out<span class="token punctuation">;</span><span class="token punctuation">}</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>out <span class="token operator">&lt;&lt;</span> <span class="token string">"0"</span><span class="token punctuation">;</span> <span class="token keyword">return</span> out<span class="token punctuation">;</span><span class="token punctuation">}</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">></span> <span class="token number">10</span><span class="token punctuation">)</span> out <span class="token operator">&lt;&lt;</span> x <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span>  out <span class="token operator">&lt;&lt;</span> <span class="token string">"0123456789"</span><span class="token punctuation">[</span>x <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> out<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="1-2-STL"><a href="#1-2-STL" class="headerlink" title="1.2 STL"></a>1.2 STL</h2><h3 id="bitset"><a href="#bitset" class="headerlink" title="bitset"></a>bitset</h3><pre class="line-numbers language-cpp"><code class="language-cpp">bitset<span class="token operator">&lt;</span><span class="token number">5</span><span class="token operator">></span>b<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//åæ ‡ä»åå¾€å‰è®¡æ•°ï¼Œé«˜ä½åœ¨å‰</span>bitset<span class="token operator">&lt;</span><span class="token number">5</span><span class="token operator">></span><span class="token function">b</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>bitset<span class="token operator">&lt;</span><span class="token number">5</span><span class="token operator">></span><span class="token function">b</span><span class="token punctuation">(</span><span class="token string">"1101"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>b<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//countå‡½æ•°ç”¨æ¥æ±‚bitsetä¸­1çš„ä½æ•°ï¼Œä¸€å…±3</span>b<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//sizeå‡½æ•°ç”¨æ¥æ±‚bitsetçš„å¤§å°ï¼Œä¸€å…±5</span>b<span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//anyå‡½æ•°æ£€æŸ¥bitsetä¸­æ˜¯å¦æœ‰ï¼‘</span>b<span class="token punctuation">.</span><span class="token function">none</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//noneå‡½æ•°æ£€æŸ¥bitsetä¸­æ˜¯å¦æ²¡æœ‰ï¼‘</span>b<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//allå‡½æ•°æ£€æŸ¥bitsetä¸­æ˜¯å…¨éƒ¨ä¸ºï¼‘</span>foo<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//flipå‡½æ•°ä¸æŒ‡å®šå‚æ•°æ—¶ï¼Œå°†bitsetæ¯ä¸€ä½å…¨éƒ¨å–å</span>foo<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//setå‡½æ•°ä¸æŒ‡å®šå‚æ•°æ—¶ï¼Œå°†bitsetçš„æ¯ä¸€ä½å…¨éƒ¨ç½®ä¸ºï¼‘</span>foo<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//resetå‡½æ•°ä¸ä¼ å‚æ•°æ—¶å°†bitsetçš„æ¯ä¸€ä½å…¨éƒ¨ç½®ä¸ºï¼</span>string s <span class="token operator">=</span> foo<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å°†bitsetè½¬æ¢æˆstringç±»å‹</span><span class="token keyword">unsigned</span> <span class="token keyword">long</span> a <span class="token operator">=</span> foo<span class="token punctuation">.</span><span class="token function">to_ulong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å°†bitsetè½¬æ¢æˆunsigned longç±»å‹</span><span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token keyword">long</span> b <span class="token operator">=</span> foo<span class="token punctuation">.</span><span class="token function">to_ullong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å°†bitsetè½¬æ¢æˆunsigned long longç±»å‹ </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="1-3-å–æ¨¡"><a href="#1-3-å–æ¨¡" class="headerlink" title="1.3 å–æ¨¡"></a>1.3 å–æ¨¡</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">// assume -P &lt;= x &lt; 2P</span><span class="token keyword">int</span> <span class="token function">norm</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        x <span class="token operator">+</span><span class="token operator">=</span> mod<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">>=</span> mod<span class="token punctuation">)</span> <span class="token punctuation">{</span>        x <span class="token operator">-</span><span class="token operator">=</span> mod<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> x<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span>T <span class="token function">power</span><span class="token punctuation">(</span>T a<span class="token punctuation">,</span> ll b<span class="token punctuation">)</span> <span class="token punctuation">{</span>    T res <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> b<span class="token punctuation">;</span> b <span class="token operator">/</span><span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> a <span class="token operator">*</span><span class="token operator">=</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            res <span class="token operator">*</span><span class="token operator">=</span> a<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">struct</span> Z <span class="token punctuation">{</span>    <span class="token keyword">int</span> x<span class="token punctuation">;</span>    <span class="token function">Z</span><span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token function">norm</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token function">Z</span><span class="token punctuation">(</span>ll x<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token function">norm</span><span class="token punctuation">(</span>x <span class="token operator">%</span> mod<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">int</span> <span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> x<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Z <span class="token keyword">operator</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">Z</span><span class="token punctuation">(</span><span class="token function">norm</span><span class="token punctuation">(</span>mod <span class="token operator">-</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Z <span class="token function">inv</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>        <span class="token function">assert</span><span class="token punctuation">(</span>x <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">power</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">,</span> mod <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Z <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">*</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        x <span class="token operator">=</span> <span class="token function">ll</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">*</span> rhs<span class="token punctuation">.</span>x <span class="token operator">%</span> mod<span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Z <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">+</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        x <span class="token operator">=</span> <span class="token function">norm</span><span class="token punctuation">(</span>x <span class="token operator">+</span> rhs<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Z <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">-</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        x <span class="token operator">=</span> <span class="token function">norm</span><span class="token punctuation">(</span>x <span class="token operator">-</span> rhs<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Z <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">/</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">*</span><span class="token operator">=</span> rhs<span class="token punctuation">.</span><span class="token function">inv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> Z <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>lhs<span class="token punctuation">,</span> <span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Z res <span class="token operator">=</span> lhs<span class="token punctuation">;</span>        res <span class="token operator">*</span><span class="token operator">=</span> rhs<span class="token punctuation">;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> Z <span class="token keyword">operator</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>lhs<span class="token punctuation">,</span> <span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Z res <span class="token operator">=</span> lhs<span class="token punctuation">;</span>        res <span class="token operator">+</span><span class="token operator">=</span> rhs<span class="token punctuation">;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> Z <span class="token keyword">operator</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>lhs<span class="token punctuation">,</span> <span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Z res <span class="token operator">=</span> lhs<span class="token punctuation">;</span>        res <span class="token operator">-</span><span class="token operator">=</span> rhs<span class="token punctuation">;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> Z <span class="token keyword">operator</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token keyword">const</span> Z <span class="token operator">&amp;</span>lhs<span class="token punctuation">,</span> <span class="token keyword">const</span> Z <span class="token operator">&amp;</span>rhs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Z res <span class="token operator">=</span> lhs<span class="token punctuation">;</span>        res <span class="token operator">/</span><span class="token operator">=</span> rhs<span class="token punctuation">;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> std<span class="token operator">::</span>istream <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">>></span><span class="token punctuation">(</span>std<span class="token operator">::</span>istream <span class="token operator">&amp;</span>is<span class="token punctuation">,</span> Z <span class="token operator">&amp;</span>a<span class="token punctuation">)</span> <span class="token punctuation">{</span>        ll v<span class="token punctuation">;</span>        is <span class="token operator">>></span> v<span class="token punctuation">;</span>        a <span class="token operator">=</span> <span class="token function">Z</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> is<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> std<span class="token operator">::</span>ostream <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>std<span class="token operator">::</span>ostream <span class="token operator">&amp;</span>os<span class="token punctuation">,</span> <span class="token keyword">const</span> Z <span class="token operator">&amp;</span>a<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> os <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="1-4-éšæœºæ•°"><a href="#1-4-éšæœºæ•°" class="headerlink" title="1.4 éšæœºæ•°"></a>1.4 éšæœºæ•°</h2><pre class="line-numbers language-cpp"><code class="language-cpp">mt19937 <span class="token function">rng</span><span class="token punctuation">(</span>chrono<span class="token operator">::</span>steady_clock<span class="token operator">::</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">time_since_epoch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ll <span class="token function">rnd</span><span class="token punctuation">(</span>ll l<span class="token punctuation">,</span> ll r<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> uniform_int_distribution<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">(</span>rng<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="1-5-Hash"><a href="#1-5-Hash" class="headerlink" title="1.5 Hash"></a>1.5 Hash</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> hash_map <span class="token punctuation">{</span>    <span class="token keyword">struct</span> data <span class="token punctuation">{</span>        <span class="token keyword">long</span> <span class="token keyword">long</span> u<span class="token punctuation">;</span>        <span class="token keyword">int</span> v<span class="token punctuation">,</span> nxt<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    data e<span class="token punctuation">[</span>SZ <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> cnt<span class="token punctuation">,</span> h<span class="token punctuation">[</span>SZ<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// SZ ä¸ºconst intçš„å¤§å°</span>    <span class="token function">hash_map</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token function">memset</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> <span class="token function">hash</span> <span class="token punctuation">(</span><span class="token keyword">long</span> <span class="token keyword">long</span> u<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>u <span class="token operator">%</span> SZ <span class="token operator">+</span> SZ<span class="token punctuation">)</span> <span class="token operator">%</span> SZ<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token keyword">long</span> <span class="token keyword">long</span> u<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token function">hash</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">~</span>i<span class="token punctuation">;</span> i <span class="token operator">=</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>nxt<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>u <span class="token operator">==</span> u<span class="token punctuation">)</span> <span class="token keyword">return</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        e<span class="token punctuation">[</span>cnt<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">{</span>u<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> h<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        h<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> cnt<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> e<span class="token punctuation">[</span>cnt <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="2-æ•°æ®ç»“æ„"><a href="#2-æ•°æ®ç»“æ„" class="headerlink" title="2 æ•°æ®ç»“æ„"></a>2 æ•°æ®ç»“æ„</h1><h2 id="2-1-çº¿æ®µæ ‘"><a href="#2-1-çº¿æ®µæ ‘" class="headerlink" title="2.1 çº¿æ®µæ ‘"></a>2.1 çº¿æ®µæ ‘</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> SegmentTree<span class="token punctuation">{</span>    ll sum<span class="token punctuation">,</span> add<span class="token punctuation">;</span><span class="token punctuation">}</span>tr<span class="token punctuation">[</span>N <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">pushdown</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>    tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>add <span class="token operator">+</span><span class="token operator">=</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>add<span class="token punctuation">;</span>    tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>add <span class="token operator">+</span><span class="token operator">=</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>add<span class="token punctuation">;</span>    tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1ll</span> <span class="token operator">*</span> <span class="token punctuation">(</span>mid <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>add<span class="token punctuation">;</span>    tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1ll</span> <span class="token operator">*</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> mid<span class="token punctuation">)</span> <span class="token operator">*</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>add<span class="token punctuation">;</span>    tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>add <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">pushup</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">)</span><span class="token punctuation">{</span>    tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">=</span> tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">+</span> tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sum<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">==</span> r<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">=</span> b<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token function">build</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> mid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">build</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">,</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pushup</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">modify</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">,</span> <span class="token keyword">int</span> d<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// if(l > y || r &lt; x) return;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">>=</span> x <span class="token operator">and</span> r <span class="token operator">&lt;=</span> y<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1ll</span> <span class="token operator">*</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> d<span class="token punctuation">;</span>        tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>add <span class="token operator">+</span><span class="token operator">=</span> d<span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">pushdown</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> l<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">&lt;=</span> mid<span class="token punctuation">)</span> <span class="token function">modify</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> mid<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>y <span class="token operator">></span> mid<span class="token punctuation">)</span> <span class="token function">modify</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">,</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pushup</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>ll <span class="token function">query</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// if(l > y || r &lt; x) return 0;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">>=</span> x <span class="token operator">and</span> r <span class="token operator">&lt;=</span> y<span class="token punctuation">)</span>        <span class="token keyword">return</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>sum<span class="token punctuation">;</span>    <span class="token function">pushdown</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> l<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>    ll res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">&lt;=</span> mid<span class="token punctuation">)</span> res <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> mid<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>y <span class="token operator">></span> mid<span class="token punctuation">)</span> res <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">,</span> mid <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">,</span> r<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-2-RMQ-STè¡¨"><a href="#2-2-RMQ-STè¡¨" class="headerlink" title="2.2 RMQ/STè¡¨"></a>2.2 RMQ/STè¡¨</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> f<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">,</span> lg<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> a<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>    lg<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        lg<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> lg<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i <span class="token operator">&amp;</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> lg<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> j<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> f<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> k <span class="token operator">=</span> lg<span class="token punctuation">[</span>r <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> f<span class="token punctuation">[</span>r <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> k<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-3-å¹¶æŸ¥é›†"><a href="#2-3-å¹¶æŸ¥é›†" class="headerlink" title="2.3 å¹¶æŸ¥é›†"></a>2.3 å¹¶æŸ¥é›†</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> DSU<span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> f<span class="token punctuation">,</span> sz<span class="token punctuation">;</span>    <span class="token function">DSU</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">sz</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">iota</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> f<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">int</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> f<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span>        <span class="token keyword">return</span> f<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">bool</span> <span class="token function">same</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">find</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token function">find</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        x <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        y <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> y<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sz<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">&lt;</span> sz<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>        f<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>        sz<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> sz<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span>        sz<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-4-æ ‘çŠ¶æ•°ç»„"><a href="#2-4-æ ‘çŠ¶æ•°ç»„" class="headerlink" title="2.4 æ ‘çŠ¶æ•°ç»„"></a>2.4 æ ‘çŠ¶æ•°ç»„</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span><span class="token keyword">struct</span> Fenwick<span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span>T<span class="token operator">></span> tr<span class="token punctuation">;</span>    <span class="token keyword">const</span> <span class="token keyword">int</span> n<span class="token punctuation">;</span>    <span class="token function">Fenwick</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">n</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">tr</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> T d<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> x <span class="token operator">+</span><span class="token operator">=</span> x <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token operator">-</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>            tr<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> d<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    T <span class="token function">sum</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        T res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span> x<span class="token punctuation">;</span> x <span class="token operator">-</span><span class="token operator">=</span> x <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token operator">-</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>            res <span class="token operator">+</span><span class="token operator">=</span> tr<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    T <span class="token function">RangeSum</span><span class="token punctuation">(</span><span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">sum</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">sum</span><span class="token punctuation">(</span>l <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-5-åˆ†å—"><a href="#2-5-åˆ†å—" class="headerlink" title="2.5 åˆ†å—"></a>2.5 åˆ†å—</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Part<span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> a<span class="token punctuation">,</span> s<span class="token punctuation">,</span> add<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> L<span class="token punctuation">,</span> R<span class="token punctuation">,</span> id<span class="token punctuation">;</span>    <span class="token keyword">int</span> n<span class="token punctuation">,</span> t<span class="token punctuation">;</span>    <span class="token function">Part</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">n</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        L<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>        R<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>        id<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>        a<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>        s<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>        add<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        t <span class="token operator">=</span> <span class="token function">sqrt</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> t<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            L<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            R<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i <span class="token operator">*</span> t<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>R<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">&lt;</span> n<span class="token punctuation">)</span> t<span class="token operator">++</span><span class="token punctuation">,</span> L<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">=</span> R<span class="token punctuation">[</span>t <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> R<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">=</span> n<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> t<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> L<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> R<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>                id<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">,</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">modify</span><span class="token punctuation">(</span><span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">,</span> ll d<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> p <span class="token operator">=</span> id<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">,</span> q <span class="token operator">=</span> id<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>p <span class="token operator">==</span> q<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> l<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> r<span class="token punctuation">;</span> i <span class="token operator">++</span><span class="token punctuation">)</span>                a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> d<span class="token punctuation">;</span>            s<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> d <span class="token operator">*</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">else</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> p <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> q <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>                add<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> d<span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> l<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> R<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>                a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> d<span class="token punctuation">;</span>            s<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> d <span class="token operator">*</span> <span class="token punctuation">(</span>R<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> L<span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> r<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>                a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> d<span class="token punctuation">;</span>            s<span class="token punctuation">[</span>q<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> d <span class="token operator">*</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> L<span class="token punctuation">[</span>q<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    ll <span class="token function">query</span><span class="token punctuation">(</span><span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> p <span class="token operator">=</span> id<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">,</span> q <span class="token operator">=</span> id<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">;</span>        ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>q <span class="token operator">==</span> p<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> l<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> r<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>                ans <span class="token operator">+</span><span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            ans <span class="token operator">+</span><span class="token operator">=</span> add<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">else</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> p <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> q <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>                ans <span class="token operator">+</span><span class="token operator">=</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> add<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>R<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> L<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> l<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> R<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>                ans <span class="token operator">+</span><span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            ans <span class="token operator">+</span><span class="token operator">=</span> add<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>R<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> L<span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> r<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>                ans <span class="token operator">+</span><span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            ans <span class="token operator">+</span><span class="token operator">=</span> add<span class="token punctuation">[</span>q<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> L<span class="token punctuation">[</span>q<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-6-ä¸»å¸­æ ‘"><a href="#2-6-ä¸»å¸­æ ‘" class="headerlink" title="2.6 ä¸»å¸­æ ‘"></a>2.6 ä¸»å¸­æ ‘</h2><p>æ±‚ç¬¬kå°æ•°</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> lc<span class="token punctuation">[</span>N <span class="token operator">&lt;&lt;</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rc<span class="token punctuation">[</span>N <span class="token operator">&lt;&lt;</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rt<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> tot<span class="token punctuation">;</span>ll sum<span class="token punctuation">[</span>N <span class="token operator">&lt;&lt;</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> root <span class="token operator">=</span> <span class="token operator">++</span>tot<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">&lt;</span> r<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>        lc<span class="token punctuation">[</span>root<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">build</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> mid<span class="token punctuation">)</span><span class="token punctuation">;</span>        rc<span class="token punctuation">[</span>root<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">build</span><span class="token punctuation">(</span>mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> root<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">modify</span><span class="token punctuation">(</span><span class="token keyword">int</span> last<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> root <span class="token operator">=</span> <span class="token operator">++</span>tot<span class="token punctuation">;</span>    lc<span class="token punctuation">[</span>root<span class="token punctuation">]</span> <span class="token operator">=</span> lc<span class="token punctuation">[</span>last<span class="token punctuation">]</span><span class="token punctuation">,</span> rc<span class="token punctuation">[</span>root<span class="token punctuation">]</span> <span class="token operator">=</span> rc<span class="token punctuation">[</span>last<span class="token punctuation">]</span><span class="token punctuation">,</span> sum<span class="token punctuation">[</span>root<span class="token punctuation">]</span> <span class="token operator">=</span> sum<span class="token punctuation">[</span>last<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">&lt;</span> r<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">&lt;=</span> mid<span class="token punctuation">)</span> lc<span class="token punctuation">[</span>root<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">modify</span><span class="token punctuation">(</span>lc<span class="token punctuation">[</span>root<span class="token punctuation">]</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> mid<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> rc<span class="token punctuation">[</span>root<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">modify</span><span class="token punctuation">(</span>rc<span class="token punctuation">[</span>root<span class="token punctuation">]</span><span class="token punctuation">,</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> root<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// è¿”å›çš„æ˜¯ç¬¬kå°æ•°çš„å¯¹åº”çš„æ•°çš„ç­‰çº§ï¼ˆåœ¨æ‰€æœ‰æ•°ä¸­çš„ç­‰çº§ï¼‰</span><span class="token keyword">int</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> v<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">>=</span> r<span class="token punctuation">)</span> <span class="token keyword">return</span> l<span class="token punctuation">;</span>    <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> x <span class="token operator">=</span> sum<span class="token punctuation">[</span>lc<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">-</span> sum<span class="token punctuation">[</span>lc<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">&lt;=</span> x<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">query</span><span class="token punctuation">(</span>lc<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">,</span> lc<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> mid<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token function">query</span><span class="token punctuation">(</span>rc<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">,</span> rc<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">,</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> k <span class="token operator">-</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> a<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> b<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n <span class="token operator">>></span> m<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        cin <span class="token operator">>></span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        b<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">sort</span><span class="token punctuation">(</span>b <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> b <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token function">unique</span><span class="token punctuation">(</span>b <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> b <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> n<span class="token punctuation">)</span> <span class="token operator">-</span> b <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>    rt<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> p <span class="token operator">=</span> <span class="token function">lower_bound</span><span class="token punctuation">(</span>b <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> b <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> len<span class="token punctuation">,</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> b<span class="token punctuation">;</span>        rt<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">modify</span><span class="token punctuation">(</span>rt<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> len<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>m<span class="token operator">--</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> l<span class="token punctuation">,</span> r<span class="token punctuation">,</span> k<span class="token punctuation">;</span>        cin <span class="token operator">>></span> l <span class="token operator">>></span> r <span class="token operator">>></span> k<span class="token punctuation">;</span>        cout <span class="token operator">&lt;&lt;</span> b<span class="token punctuation">[</span><span class="token function">query</span><span class="token punctuation">(</span>rt<span class="token punctuation">[</span>l <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rt<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> len<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="3-æ•°å­¦"><a href="#3-æ•°å­¦" class="headerlink" title="3 æ•°å­¦"></a>3 æ•°å­¦</h1><h2 id="3-1-é«˜ç²¾åº¦"><a href="#3-1-é«˜ç²¾åº¦" class="headerlink" title="3.1 é«˜ç²¾åº¦"></a>3.1 é«˜ç²¾åº¦</h2><p>æ•°ç»„å­˜å‚¨å‡ä¸ºå€’åºå­˜å‚¨</p><p><strong>é«˜ç²¾åŠ </strong></p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">// C = A + B, A >= 0, B >= 0</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">add</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">&amp;</span>A<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">&amp;</span>B<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>A<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> B<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">add</span><span class="token punctuation">(</span>B<span class="token punctuation">,</span> A<span class="token punctuation">)</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> C<span class="token punctuation">;</span>    <span class="token keyword">int</span> t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> A<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">++</span> <span class="token punctuation">)</span>    <span class="token punctuation">{</span>        t <span class="token operator">+</span><span class="token operator">=</span> A<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> B<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> t <span class="token operator">+</span><span class="token operator">=</span> B<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        C<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>t <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t <span class="token operator">/</span><span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">)</span> C<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> C<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é«˜ç²¾å‡</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">// C = A - B, æ»¡è¶³A >= B, A >= 0, B >= 0</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">sub</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">&amp;</span>A<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">&amp;</span>B<span class="token punctuation">)</span><span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> C<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> A<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">++</span> <span class="token punctuation">)</span>    <span class="token punctuation">{</span>        t <span class="token operator">=</span> A<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> t<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> B<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> t <span class="token operator">-</span><span class="token operator">=</span> B<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        C<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>C<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> C<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> C<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> C<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é«˜ç²¾ä¹˜ä½ç²¾</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">// C = A * b, A >= 0, b >= 0</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">mul</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">&amp;</span>A<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> C<span class="token punctuation">;</span>    <span class="token keyword">int</span> t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> A<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> t<span class="token punctuation">;</span> i <span class="token operator">++</span> <span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> A<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> t <span class="token operator">+</span><span class="token operator">=</span> A<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> b<span class="token punctuation">;</span>        C<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>t <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t <span class="token operator">/</span><span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//å»é™¤å‰å¯¼é›¶</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>C<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> C<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> C<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> C<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é«˜ç²¾ä¹˜é«˜ç²¾</p><p>ç‰ˆæœ¬ä¸€</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> a<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>b<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>c<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>na<span class="token punctuation">,</span>nb<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">mul</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//na nb ä¸ºæ•°ä½é•¿åº¦ï¼Œa[],b[]å‡å€’åºå­˜å‚¨ </span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>na<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span>nb<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            c<span class="token punctuation">[</span>i<span class="token operator">+</span>j<span class="token number">-1</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">*</span>b<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            c<span class="token punctuation">[</span>i<span class="token operator">+</span>j<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> c<span class="token punctuation">[</span>i<span class="token operator">+</span>j<span class="token number">-1</span><span class="token punctuation">]</span><span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">;</span>            c<span class="token punctuation">[</span>i<span class="token operator">+</span>j<span class="token number">-1</span><span class="token punctuation">]</span> <span class="token operator">%</span><span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//åˆ é™¤å‰å¯¼é›¶ </span>    <span class="token keyword">int</span> nc <span class="token operator">=</span> na <span class="token operator">+</span> nb<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>nc<span class="token operator">></span><span class="token number">1</span> <span class="token operator">and</span> <span class="token operator">!</span>c<span class="token punctuation">[</span>nc<span class="token punctuation">]</span><span class="token punctuation">)</span> nc<span class="token operator">--</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//    for(int i=nc;i>=1;i--) cout&lt;&lt;c[i] ;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç‰ˆæœ¬äºŒ</p><pre class="line-numbers language-cpp"><code class="language-cpp">vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">mul</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> a<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> b<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> t <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>    <span class="token keyword">int</span> na <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nb <span class="token operator">=</span> b<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">c</span><span class="token punctuation">(</span>na <span class="token operator">+</span> nb<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> na<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nb<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            c<span class="token punctuation">[</span>i <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> b<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            c<span class="token punctuation">[</span>i <span class="token operator">+</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> c<span class="token punctuation">[</span>i <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span>            c<span class="token punctuation">[</span>i <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">%</span><span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>         <span class="token punctuation">}</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">and</span> c<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> c<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> c<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-2-è´¨æ•°"><a href="#3-2-è´¨æ•°" class="headerlink" title="3.2 è´¨æ•°"></a>3.2 è´¨æ•°</h2><h3 id="3-2-1-è´¨å› æ•°åˆ†è§£"><a href="#3-2-1-è´¨å› æ•°åˆ†è§£" class="headerlink" title="3.2.1 è´¨å› æ•°åˆ†è§£"></a>3.2.1 è´¨å› æ•°åˆ†è§£</h3><p>è¯•é™¤æ³• $O(\sqrt N)$</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">// p[] : å­˜å‚¨è´¨å› å­</span><span class="token comment" spellcheck="true">// c[] : å­˜å‚¨è´¨å› å­å¯¹åº”çš„æ¬¡æ•°</span><span class="token keyword">void</span> <span class="token function">divide</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>    m <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">*</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">%</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            p<span class="token punctuation">[</span><span class="token operator">++</span>m<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> c<span class="token punctuation">[</span>m<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>n <span class="token operator">%</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> n <span class="token operator">/</span><span class="token operator">=</span> i<span class="token punctuation">,</span> c<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>     <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> p<span class="token punctuation">[</span><span class="token operator">++</span>m<span class="token punctuation">]</span> <span class="token operator">=</span> n<span class="token punctuation">,</span> c<span class="token punctuation">[</span>m<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// næ˜¯è´¨æ•°</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-2-2-æ¬§æ‹‰ç­›"><a href="#3-2-2-æ¬§æ‹‰ç­›" class="headerlink" title="3.2.2 æ¬§æ‹‰ç­›"></a>3.2.2 æ¬§æ‹‰ç­›</h3><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> primes<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> cnt<span class="token punctuation">;</span><span class="token keyword">bool</span> st<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// trueï¼šç­›æ‰çš„åˆæ•° false ï¼šä¸ºè´¨æ•°</span><span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>st<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> primes<span class="token punctuation">[</span>cnt<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> primes<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">*</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            st<span class="token punctuation">[</span>primes<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">*</span> i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">%</span> primes<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-3-æ‰©å±•æ¬§å‡ é‡Œå¾—"><a href="#3-3-æ‰©å±•æ¬§å‡ é‡Œå¾—" class="headerlink" title="3.3  æ‰©å±•æ¬§å‡ é‡Œå¾—"></a>3.3  æ‰©å±•æ¬§å‡ é‡Œå¾—</h2><p>è´¹é©¬å°å®šç† ï¼š $gcd(a,p) \equiv 1$ï¼Œåˆ™ $a^{p-1} \equiv 1(mod \ p), a ^ p \equiv a(mod \ p)$</p><p>$ax+by=c$  æœ‰è§£æ¡ä»¶ï¼š$d|c$</p><p>$ax+by=d$ æ±‚å‡ºç‰¹è§£$x_0,y_0$ åï¼Œä¸¤è¾¹åŒæ—¶ä¹˜ $\frac{c}{d}$ å³å¯æ¨å‡º $ax+by = c$ çš„ç‰¹è§£</p><p>ç‰¹è§£ï¼š$\frac{c}{d}x_0, \frac{c}{d}y_0$ ï¼Œ ï¼ˆ$x_0, y_0$ ä¸º $ax + by = d$ çš„ç‰¹è§£ï¼‰</p><p>é€šè§£ï¼š$\begin{cases} x = \frac{c}{d}x_0 + k \frac{b}{d} \\ y =\frac{c}{d} y_0 - k\frac{a}{d} \end{cases}$ï¼ˆå‘¨æœŸè¿˜æ˜¯ä¸º$\frac{b}{d},\frac{a}{d}$ï¼‰</p><p>é€šè§£æ˜¯æ‰€æœ‰æ¨¡$b/gcd(a,b)$ä¸xåŒä½™çš„å€¼</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//è¿”å›çš„æ˜¯gcd(a,b) æ±‚å‡ºä¸€ç»„ç‰¹è§£(x0, y0)</span>ll <span class="token function">exgcd</span><span class="token punctuation">(</span>ll a<span class="token punctuation">,</span>ll b<span class="token punctuation">,</span>ll <span class="token operator">&amp;</span>x<span class="token punctuation">,</span>ll <span class="token operator">&amp;</span>y<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>b<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token keyword">return</span> a<span class="token punctuation">;</span><span class="token punctuation">}</span>    ll g <span class="token operator">=</span> <span class="token function">exgcd</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> a <span class="token operator">%</span> b<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>    ll temp <span class="token operator">=</span> x<span class="token punctuation">;</span>    x <span class="token operator">=</span> y<span class="token punctuation">;</span>    y <span class="token operator">=</span> temp <span class="token operator">-</span> <span class="token punctuation">(</span>a <span class="token operator">/</span> b<span class="token punctuation">)</span> <span class="token operator">*</span> y<span class="token punctuation">;</span>    <span class="token keyword">return</span> g<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é€†å…ƒ</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> inv<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// é€†å…ƒæ•°ç»„</span><span class="token comment" spellcheck="true">// çº¿æ€§æ±‚é€†å…ƒ</span>inv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> inv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    inv<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> inv<span class="token punctuation">[</span>mod <span class="token operator">%</span> i<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>mod <span class="token operator">-</span> mod <span class="token operator">/</span> i<span class="token punctuation">)</span> <span class="token operator">%</span> mod<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// é˜¶ä¹˜é€†å…ƒ</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    inv<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> inv<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> inv<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">%</span> mod<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-4-æ¬§æ‹‰å‡½æ•°"><a href="#3-4-æ¬§æ‹‰å‡½æ•°" class="headerlink" title="3.4 æ¬§æ‹‰å‡½æ•°"></a>3.4 æ¬§æ‹‰å‡½æ•°</h2><p>æ¬§æ‹‰å®šç†ï¼š $gcd(a, n) =1, åˆ™ a^{\varphi (n)} \equiv 1(mod \ n)$</p><p>æ‰©å±•æ¬§æ‹‰å®šç†ï¼š</p><p>$ a^b \equiv \begin{cases} a^{b \ \bmod\  \varphi(m)}, &amp;\gcd(a,m) = 1, \\ a^b, &amp;\gcd(a,m)\ne 1, b &lt; \varphi(m), \\ a^{(b \  \bmod \  \varphi(m)) + \varphi(m)}, &amp;\gcd(a,m)\ne 1, b \ge \varphi(m). \end{cases} \pmod m $</p><p>å•ä¸ªæ¬§æ‹‰å‡½æ•°çš„å€¼ $O(\sqrt N)$</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">euler_phi</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">int</span> ans <span class="token operator">=</span> n<span class="token punctuation">;</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">*</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">%</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>       ans <span class="token operator">=</span> ans <span class="token operator">/</span> i <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">while</span> <span class="token punctuation">(</span>n <span class="token operator">%</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> n <span class="token operator">/</span><span class="token operator">=</span> i<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> ans <span class="token operator">=</span> ans <span class="token operator">/</span> n <span class="token operator">*</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¤šä¸ªæ¬§æ‹‰å‡½æ•°çš„å€¼ $O(N)$</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> primes<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> phi<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> cnt<span class="token punctuation">;</span><span class="token keyword">bool</span> st<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>    phi<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i <span class="token operator">++</span> <span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>st<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            primes<span class="token punctuation">[</span>cnt <span class="token operator">++</span> <span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>            phi<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> primes<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">*</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> j <span class="token operator">++</span> <span class="token punctuation">)</span>        <span class="token punctuation">{</span>            st<span class="token punctuation">[</span>i <span class="token operator">*</span> primes<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> primes<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                phi<span class="token punctuation">[</span>i <span class="token operator">*</span> primes<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> phi<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> primes<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            phi<span class="token punctuation">[</span>i <span class="token operator">*</span> primes<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> phi<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>primes<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-5-çŸ©é˜µä¹˜æ³•"><a href="#3-5-çŸ©é˜µä¹˜æ³•" class="headerlink" title="3.5 çŸ©é˜µä¹˜æ³•"></a>3.5 çŸ©é˜µä¹˜æ³•</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//aæ˜¯ç¬¬ä¸€ä¸ªä¹˜æ•°ï¼Œbæ˜¯ç¬¬äºŒä¸ªä¹˜æ•°ï¼Œtæ˜¯ç»“æœæœ€åå­˜å‚¨çš„æ•°ç»„</span><span class="token keyword">void</span> <span class="token function">mul</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">int</span> t<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">static</span> <span class="token keyword">int</span> c<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>N<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>N<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>k<span class="token operator">&lt;</span>N<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span>                c<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span>c<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1ll</span> <span class="token operator">*</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">*</span>b<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span>m<span class="token punctuation">)</span><span class="token operator">%</span>m<span class="token punctuation">;</span>    <span class="token function">memcpy</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>c<span class="token punctuation">,</span><span class="token keyword">sizeof</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¤åˆ¶æ•°ç»„</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-6-é«˜æ–¯æ¶ˆå…ƒ"><a href="#3-6-é«˜æ–¯æ¶ˆå…ƒ" class="headerlink" title="3.6 é«˜æ–¯æ¶ˆå…ƒ"></a>3.6 é«˜æ–¯æ¶ˆå…ƒ</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">double</span> b<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">gauss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//åŒ–ä¸ºä¸Šä¸‰è§’çŸ©é˜µ</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> r<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>c<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>c<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>r<span class="token operator">++</span><span class="token punctuation">,</span>c<span class="token operator">++</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//ä¸»å¾ªç¯æ¯æ¬¡æŸ¥ä¸€ä¸ªå¯¹è§’å…ƒç´ ã€‚æŒ‰åˆ—æŸ¥ï¼Œä¸»è¦è¦çœ‹å¯¹è§’å…ƒç´ ï¼Œr=c</span>    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//æ‰¾ä¸»å…ƒï¼Œæ‰¾è¯¥åˆ—ç»å¯¹å€¼æœ€å¤§çš„ä¸€ä¸ªæ•°ï¼Œå°†é‚£è¡Œå’Œæœ¬è¡Œäº¤æ¢</span>        <span class="token keyword">int</span> t <span class="token operator">=</span> r<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>r<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">fabs</span><span class="token punctuation">(</span>b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token function">fabs</span><span class="token punctuation">(</span>b<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                t <span class="token operator">=</span> i<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//äº¤æ¢ï¼Œè¡Œçš„äº¤æ¢</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>c<span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token function">swap</span><span class="token punctuation">(</span>b<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>b<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//ä¸»å…ƒå½’ä¸€ï¼Œå°†å¯¹è§’å…ƒç´ åŒ–ä¸º1ï¼Œå³è¯¥è¡Œæ‰€æœ‰å€¼é™¤ä»¥è¯¥è¡Œå¯¹åº”çš„å¯¹è§’å…ƒç´ </span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">>=</span>c<span class="token punctuation">;</span><span class="token operator">--</span>i<span class="token punctuation">)</span>    b<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">/</span><span class="token operator">=</span> b<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//æ¶ˆå…ƒï¼Œå³å¯¹è§’å…ƒç´ ä¸‹é¢çš„å€¼éƒ½è¦å˜ä¸º0ï¼Œé‚£ä¹ˆéœ€è¦ä¸‹é¢çš„æ¯ä¸€è¡Œçš„æ‰€æœ‰å€¼å‡å»å¯¹è§’å…ƒç´ é‚£ä¸€è¡Œå…ƒç´ çš„ä¸€ä¸ªå€æ•°ï¼ˆb[i][c]ï¼‰</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>r<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">>=</span>c<span class="token punctuation">;</span>j<span class="token operator">--</span><span class="token punctuation">)</span>                b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> b<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">*</span> b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//åŒ–ä¸ºå¯¹è§’é˜µï¼ˆåªæœ‰å¯¹è§’çº¿æœ‰å…ƒç´ ä¸”ä¸º1ï¼‰</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>n<span class="token punctuation">;</span>i<span class="token operator">>=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//æŒ‰åˆ—æ¶ˆï¼Œå¯¹è§’å…ƒç´ è¡Œ=åˆ—</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span>i<span class="token number">-1</span><span class="token punctuation">;</span>j<span class="token operator">>=</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//æ¶ˆå»ç¬¬iè¡Œä¸Šé¢æ‰€æœ‰çš„å…ƒç´ </span>        <span class="token punctuation">{</span>            b<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">*</span>b<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//åªå¯¹å³è¾¹çš„å€¼åšå˜åŒ–</span>            b<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æœ€åä¸€å®šæ¶ˆå®Œä¸º0</span>        <span class="token punctuation">}</span> <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¡ç‰¹å…°æ•°åˆ— $Cat_n = \frac{C_{2n}^{n}}{n + 1}$ $,\hspace{2em} $ é”™æ’æ•°$d[i] = (i - 1)*(d[i - 1] + d[i - 2])$</p><h2 id="3-7-ä¸­å›½å‰©ä½™å®šç†"><a href="#3-7-ä¸­å›½å‰©ä½™å®šç†" class="headerlink" title="3.7 ä¸­å›½å‰©ä½™å®šç†"></a>3.7 ä¸­å›½å‰©ä½™å®šç†</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">// x = a[i] (mod mi[i])</span><span class="token comment" spellcheck="true">// Mi[i] = mu / mi[i]</span>ll Mi<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> mi<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> mu <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>ll <span class="token function">crt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        mu <span class="token operator">*</span><span class="token operator">=</span> mi<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        Mi<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> mu <span class="token operator">/</span> mi<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        ll x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token function">exgcd</span><span class="token punctuation">(</span>Mi<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> mi<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>        ans <span class="token operator">+</span><span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> Mi<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>x <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> x <span class="token operator">+</span> mi<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">:</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> ans <span class="token operator">%</span> mu<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ‰©å±•CRT</strong></p><p>$x\equiv c_{1}\left( mod\ m_{1}\right) \\ x\equiv c_{2}\left( mod\ m_{2}\right)$</p><p>å¾—åˆ°</p><p>$c=(inv(\frac{m_1}{(m_1,m_2)},\frac{m_2}{(m_1,m_2)}) \mathop{*} \frac{(c_2-c_1)}{(m_1,m_2)})\mathop{\%}\frac{m_2}{(m_1,m_2)}*m_1+c_1$</p><p>$m={m_1m_2\over (m_1,m_2)}$</p><pre class="line-numbers language-cpp"><code class="language-cpp">ll <span class="token function">mul</span><span class="token punctuation">(</span>ll a<span class="token punctuation">,</span>ll b<span class="token punctuation">,</span>ll mod<span class="token punctuation">)</span><span class="token punctuation">{</span>    ll res<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>b<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>b<span class="token operator">&amp;</span><span class="token number">1</span><span class="token punctuation">)</span> res<span class="token operator">=</span><span class="token punctuation">(</span>res<span class="token operator">+</span>a<span class="token punctuation">)</span><span class="token operator">%</span>mod<span class="token punctuation">;</span>        a<span class="token operator">=</span><span class="token punctuation">(</span>a<span class="token operator">+</span>a<span class="token punctuation">)</span><span class="token operator">%</span>mod<span class="token punctuation">;</span>        b<span class="token operator">>>=</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">}</span>ll <span class="token function">exgcd</span><span class="token punctuation">(</span>ll a<span class="token punctuation">,</span> ll b<span class="token punctuation">,</span> ll <span class="token operator">&amp;</span>x<span class="token punctuation">,</span> ll <span class="token operator">&amp;</span>y<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token keyword">return</span> a<span class="token punctuation">;</span><span class="token punctuation">}</span>    ll r <span class="token operator">=</span> <span class="token function">exgcd</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> a <span class="token operator">%</span> b<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> tmp<span class="token punctuation">;</span>    tmp <span class="token operator">=</span> x<span class="token punctuation">;</span> x <span class="token operator">=</span> y<span class="token punctuation">;</span> y <span class="token operator">=</span> tmp <span class="token operator">-</span> <span class="token punctuation">(</span>a <span class="token operator">/</span> b<span class="token punctuation">)</span> <span class="token operator">*</span> y<span class="token punctuation">;</span>    <span class="token keyword">return</span> r<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// x = bi[i](mod ai[i])</span>ll <span class="token function">excrt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ll x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> k<span class="token punctuation">;</span>    ll M <span class="token operator">=</span> bi<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>ans <span class="token operator">=</span> ai<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ç¬¬ä¸€ä¸ªæ–¹ç¨‹çš„è§£ç‰¹åˆ¤</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        ll a <span class="token operator">=</span> M<span class="token punctuation">,</span>b <span class="token operator">=</span> bi<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token punctuation">(</span>ai<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> ans <span class="token operator">%</span> b <span class="token operator">+</span> b<span class="token punctuation">)</span> <span class="token operator">%</span> b<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//axâ‰¡c(mod b)</span>        ll gcd<span class="token operator">=</span><span class="token function">exgcd</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span>bg<span class="token operator">=</span>b<span class="token operator">/</span>gcd<span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>c<span class="token operator">%</span>gcd<span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//åˆ¤æ–­æ˜¯å¦æ— è§£</span>        x<span class="token operator">=</span><span class="token function">mul</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>c<span class="token operator">/</span>gcd<span class="token punctuation">,</span>bg<span class="token punctuation">)</span><span class="token punctuation">;</span>        ans<span class="token operator">+</span><span class="token operator">=</span>x<span class="token operator">*</span>M<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æ›´æ–°å‰kä¸ªæ–¹ç¨‹ç»„çš„ç­”æ¡ˆ</span>        M<span class="token operator">*</span><span class="token operator">=</span>bg<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//Mä¸ºå‰kä¸ªmçš„lcm</span>        ans<span class="token operator">=</span><span class="token punctuation">(</span>ans<span class="token operator">%</span>M<span class="token operator">+</span>M<span class="token punctuation">)</span><span class="token operator">%</span>M<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>ans<span class="token operator">%</span>M<span class="token operator">+</span>M<span class="token punctuation">)</span><span class="token operator">%</span>M<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="4-å›¾è®º"><a href="#4-å›¾è®º" class="headerlink" title="4.å›¾è®º"></a>4.å›¾è®º</h1><p>é“¾å¼å‰å‘æ˜Ÿï¼š</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> h<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>ne<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>e<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>idx<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æ³¨æ„åˆå§‹åŒ– h ä¸º -1 </span><span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{</span>    e<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token operator">=</span>b<span class="token punctuation">,</span>ne<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token operator">=</span>h<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">,</span>h<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token operator">=</span>idx<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-1-æœ€çŸ­è·¯"><a href="#4-1-æœ€çŸ­è·¯" class="headerlink" title="4.1 æœ€çŸ­è·¯"></a>4.1 æœ€çŸ­è·¯</h2><h3 id="4-1-1-floyd"><a href="#4-1-1-floyd" class="headerlink" title="4.1.1 floyd"></a>4.1.1 floyd</h3><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> d<span class="token punctuation">[</span><span class="token number">105</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">105</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">;</span><span class="token function">memset</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span><span class="token number">0x3f</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>k<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//kåœ¨æœ€å¤–å±‚ï¼Œ</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">!=</span><span class="token number">0x3f3f3f3f</span><span class="token punctuation">)</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span> d<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>                    d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span> d<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-1-2-dijkstra"><a href="#4-1-2-dijkstra" class="headerlink" title="4.1.2 dijkstra"></a>4.1.2 dijkstra</h3><pre class="line-numbers language-cpp"><code class="language-cpp">vector<span class="token operator">&lt;</span>pii<span class="token operator">></span>e<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>ll dis<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>n<span class="token punctuation">,</span>m<span class="token punctuation">;</span>  <span class="token keyword">bool</span> vis<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">void</span> <span class="token function">dijkstra</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    priority_queue<span class="token operator">&lt;</span>pii<span class="token operator">></span>q<span class="token punctuation">;</span>    dis<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">-</span>dis<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span>x<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        pii t <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å‡ºé˜Ÿæ‰¾åˆ°æœ€å°è·ç¦»çš„ç‚¹</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>vis<span class="token punctuation">[</span>t<span class="token punctuation">.</span>se<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>        vis<span class="token punctuation">[</span>t<span class="token punctuation">.</span>se<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>e<span class="token punctuation">[</span>t<span class="token punctuation">.</span>se<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> v <span class="token operator">=</span> e<span class="token punctuation">[</span>t<span class="token punctuation">.</span>se<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>fi<span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>dis<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">></span> dis<span class="token punctuation">[</span>t<span class="token punctuation">.</span>se<span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">[</span>t<span class="token punctuation">.</span>se<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>se<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                dis<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> dis<span class="token punctuation">[</span>t<span class="token punctuation">.</span>se<span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">[</span>t<span class="token punctuation">.</span>se<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>se<span class="token punctuation">;</span>                q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">-</span>dis<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">,</span>v<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    cin<span class="token operator">>></span>n<span class="token operator">>></span>m<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>N<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> dis<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> inf<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>m<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">;</span>        cin<span class="token operator">>></span>a<span class="token operator">>></span>b<span class="token operator">>></span>c<span class="token punctuation">;</span>        e<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token punctuation">{</span>b<span class="token punctuation">,</span>c<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        e<span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token punctuation">{</span>a<span class="token punctuation">,</span>c<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">dijkstra</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-1-3-spfa"><a href="#4-1-3-spfa" class="headerlink" title="4.1.3 spfa"></a>4.1.3 spfa</h3><p>å¯¹è¾¹ä¸æ–­æ¾å¼›ä¼˜åŒ–ï¼Œå¦‚æœè¯¥ç‚¹è¢«æ¾å¼›å°±åŠ å…¥é˜Ÿåˆ—ï¼ŒåŒæ—¶æ ‡è®°æ•°ç»„è®°ä¸ºtrueï¼Œæ ‡è®°æ•°ç»„ä»£è¡¨è¯¥ç‚¹æ˜¯å¦åœ¨é˜Ÿåˆ—ä¸­ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//Nä¸ºç‚¹ Mä¸ºè¾¹</span><span class="token keyword">int</span> e<span class="token punctuation">[</span>M<span class="token punctuation">]</span><span class="token punctuation">,</span>h<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>w<span class="token punctuation">[</span>M<span class="token punctuation">]</span><span class="token punctuation">,</span>ne<span class="token punctuation">[</span>M<span class="token punctuation">]</span><span class="token punctuation">,</span>idx<span class="token punctuation">;</span><span class="token keyword">int</span> dis<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> cnt<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">bool</span> inq<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">,</span>s<span class="token punctuation">,</span>d<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//s,dä¸ºèµ·ç‚¹å’Œç»ˆç‚¹</span><span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">,</span><span class="token keyword">int</span> c<span class="token punctuation">)</span><span class="token punctuation">{</span>    e<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token operator">=</span>b<span class="token punctuation">,</span>w<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token operator">=</span>c<span class="token punctuation">,</span>ne<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token operator">=</span>h<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">,</span>h<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token operator">=</span>idx<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">bool</span> <span class="token function">spfa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span>q<span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>dis<span class="token punctuation">,</span><span class="token number">0x3f</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span> dis<span class="token punctuation">)</span><span class="token punctuation">;</span>    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>    inq<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>dis<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> u <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        inq<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token operator">~</span>i<span class="token punctuation">;</span>i<span class="token operator">=</span>ne<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> v <span class="token operator">=</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>dis<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">></span> dis<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                dis<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> dis<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                cnt<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> cnt<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// åˆ¤è´Ÿç¯</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>cnt<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">>=</span> n<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¤§äºç­‰äºèŠ‚ç‚¹ä¸ªæ•°</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>inq<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    inq<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    cin<span class="token operator">>></span>n<span class="token operator">>></span>m<span class="token operator">>></span>s<span class="token operator">>></span>d<span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>m<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">;</span>        cin<span class="token operator">>></span>a<span class="token operator">>></span>b<span class="token operator">>></span>c<span class="token punctuation">;</span>        <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">add</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span>a<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">spfa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cout<span class="token operator">&lt;&lt;</span>dis<span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token operator">&lt;&lt;</span><span class="token string">'\n'</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-1-4-å·®åˆ†çº¦æŸ"><a href="#4-1-4-å·®åˆ†çº¦æŸ" class="headerlink" title="4.1.4 å·®åˆ†çº¦æŸ"></a>4.1.4 å·®åˆ†çº¦æŸ</h3><p>$x_u + w \ge x_v$ è½¬åŒ–ä¸ºæœ€çŸ­è·¯ä¸­çš„ $dis[u] + w \ge dis[v]$ </p><ul><li>ç”¨SPFAæ—¶éœ€è¦å»ºç«‹ä¸€ä¸ªæ€»æºç‚¹ä»£è¡¨ä¸€ä¸ªå€¼ï¼Œä½¿æ‰€æœ‰ç‚¹å¯è¾¾ï¼Œå¯é€šè¿‡è¿™ä¸ªç‚¹è¿è¾¹é™åˆ¶æ¯ä¸ªå˜é‡çš„æœ€å¤§å€¼å’Œæœ€å°å€¼</li><li>æ±‚æœ€å¤§å€¼ç”¨æœ€çŸ­è·¯ï¼Œæ±‚æœ€å°å€¼ç”¨æœ€é•¿è·¯</li><li>$x_a + c = x_b$ åŠ è¾¹ $(a, b, c), (b, a, -c)$</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">*</span> N<span class="token punctuation">;</span><span class="token keyword">int</span> e<span class="token punctuation">[</span>M<span class="token punctuation">]</span><span class="token punctuation">,</span> h<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> ne<span class="token punctuation">[</span>M<span class="token punctuation">]</span><span class="token punctuation">,</span> w<span class="token punctuation">[</span>M<span class="token punctuation">]</span><span class="token punctuation">,</span> idx<span class="token punctuation">,</span> cnt<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>ll dis<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">bool</span> st<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">bool</span> <span class="token function">spfa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    stack<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> q<span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>dis<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0x3f</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span> dis<span class="token punctuation">)</span><span class="token punctuation">;</span>    dis<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    st<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> t <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        st<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">~</span>i<span class="token punctuation">;</span> i <span class="token operator">=</span> ne<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> v <span class="token operator">=</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>dis<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">+</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> dis<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                dis<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> dis<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">+</span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                cnt<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> cnt<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// åˆ¤è´Ÿç¯</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>cnt<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">>=</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>st<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>                 <span class="token punctuation">{</span>                    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>                    st<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-2-æœ€å°ç”Ÿæˆæ ‘"><a href="#4-2-æœ€å°ç”Ÿæˆæ ‘" class="headerlink" title="4.2 æœ€å°ç”Ÿæˆæ ‘"></a>4.2 æœ€å°ç”Ÿæˆæ ‘</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> DSU<span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> f<span class="token punctuation">,</span> sz<span class="token punctuation">;</span>    <span class="token function">DSU</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">sz</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">iota</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> f<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">int</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> f<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span>        <span class="token keyword">return</span> f<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">bool</span> <span class="token function">same</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">find</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token function">find</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        x <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        y <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> y<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sz<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">&lt;</span> sz<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>        f<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>        sz<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> sz<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span>        sz<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">105</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> inf <span class="token operator">=</span> <span class="token number">0x3f3f3f3f</span><span class="token punctuation">;</span><span class="token keyword">int</span> g<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>dis<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>res<span class="token punctuation">;</span>ll c<span class="token punctuation">,</span>n<span class="token punctuation">,</span>m<span class="token punctuation">;</span><span class="token keyword">bool</span> vis<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">struct</span> edge<span class="token punctuation">{</span><span class="token keyword">int</span> u<span class="token punctuation">,</span>v<span class="token punctuation">,</span>w<span class="token punctuation">;</span><span class="token punctuation">}</span>e<span class="token punctuation">[</span><span class="token number">200005</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> f<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token operator">==</span>x <span class="token operator">?</span> x<span class="token operator">:</span> <span class="token punctuation">(</span>f<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">bool</span> <span class="token function">cmp</span><span class="token punctuation">(</span>edge a<span class="token punctuation">,</span>edge b<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> a<span class="token punctuation">.</span>w<span class="token operator">&lt;</span>b<span class="token punctuation">.</span>w<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">kruskal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> f<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>    <span class="token function">sort</span><span class="token punctuation">(</span>e<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>e<span class="token operator">+</span><span class="token number">1</span><span class="token operator">+</span>m<span class="token punctuation">,</span>cmp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>m<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token operator">==</span>b<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>        <span class="token operator">++</span>cnt<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//è¾¹æ•°åŠ ä¸€</span>        f<span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//åˆå¹¶ç‚¹çš„é›†åˆ</span>        ans <span class="token operator">+</span><span class="token operator">=</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>w<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">prim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>g<span class="token punctuation">,</span>inf<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//åˆå§‹åŒ–æ•°ç»„ä¸ºinf</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> g<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> dis<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> inf<span class="token punctuation">,</span>vis<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> t <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//æ‰¾è·ç¦»æœ€å°ç”Ÿæˆæ ‘é›†åˆçš„è·ç¦»æœ€è¿‘çš„ç‚¹</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>vis<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>t<span class="token operator">==</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span> dis<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">></span> dis<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> t <span class="token operator">=</span> j<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&amp;&amp;</span> dis<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">==</span>inf<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            res <span class="token operator">=</span> inf<span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> res <span class="token operator">+</span><span class="token operator">=</span> dis<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span>        vis<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å°†è¯¥ç‚¹åŠ åˆ°æœ€å°ç”Ÿæˆæ ‘çš„é›†åˆ</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span> dis<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>dis<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>g<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>cin<span class="token operator">>></span>n<span class="token operator">>></span>m<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>m<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> u<span class="token punctuation">,</span>v<span class="token punctuation">,</span>w<span class="token punctuation">;</span>            cin<span class="token operator">>></span>u<span class="token operator">>></span>v<span class="token operator">>></span>w<span class="token punctuation">;</span>            g<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> g<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span>g<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token function">prim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-3-LCA"><a href="#4-3-LCA" class="headerlink" title="4.3 LCA"></a>4.3 LCA</h2><p><strong>æ ‘ä¸Šå€å¢æ³•</strong></p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">// f[i][j]ï¼šièŠ‚ç‚¹å‘æ ¹èµ°2^jåˆ°è¾¾çš„èŠ‚ç‚¹</span><span class="token comment" spellcheck="true">// åˆå§‹åŒ– f[i][0] : çˆ¶èŠ‚ç‚¹</span><span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> k<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> f<span class="token punctuation">[</span>f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">lca</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">></span> d<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ä¿è¯xæ·±åº¦å°äºç­‰äºy</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> k<span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//yèµ°åˆ°å’ŒxåŒä¸€æ·±åº¦</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>f<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">>=</span> d<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span>            y <span class="token operator">=</span> f<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> y<span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> k<span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//x,yä¸€èµ·å‘ä¸Šèµ°</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> f<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            x <span class="token operator">=</span> f<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> y <span class="token operator">=</span> f<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> f<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ ‘é“¾å‰–åˆ†æ±‚lca</strong></p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">namespace</span> lca <span class="token punctuation">{</span>    <span class="token keyword">int</span> dep<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> son<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> sz<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> top<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> fa<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">dfs1</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>        sz<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        son<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> p <span class="token operator">:</span> e<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> fa<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>            fa<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span> dep<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> dep<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token function">dfs1</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>            sz<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> sz<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>son<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span> sz<span class="token punctuation">[</span>son<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> sz<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">)</span>                son<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> p<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">dfs2</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> tv<span class="token punctuation">)</span> <span class="token punctuation">{</span>        top<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> tv<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>son<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token function">dfs2</span><span class="token punctuation">(</span>son<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span> tv<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> p <span class="token operator">:</span> e<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> fa<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">||</span> p <span class="token operator">==</span> son<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token function">dfs2</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>        fa<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> dep<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token function">dfs1</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">dfs2</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> <span class="token function">lca</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">!=</span> top<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>dep<span class="token punctuation">[</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">>=</span> dep<span class="token punctuation">[</span>top<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> x <span class="token operator">=</span> fa<span class="token punctuation">[</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">else</span> y <span class="token operator">=</span> fa<span class="token punctuation">[</span>top<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> dep<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">&lt;</span> dep<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">?</span> x <span class="token operator">:</span> y<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Tree <span class="token punctuation">{</span>    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> sz<span class="token punctuation">,</span> top<span class="token punctuation">,</span> dep<span class="token punctuation">,</span> parent<span class="token punctuation">,</span> in<span class="token punctuation">;</span>    <span class="token keyword">int</span> cur<span class="token punctuation">;</span>    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> e<span class="token punctuation">;</span>    <span class="token function">Tree</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">sz</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">top</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">dep</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">parent</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">e</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">in</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cur</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>        e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>        e<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">dfsSz</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">dfsHLD</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">dfsSz</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>            e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>std<span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> parent<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        sz<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">&amp;</span>v <span class="token operator">:</span> e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            parent<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> u<span class="token punctuation">;</span>            dep<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> dep<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token function">dfsSz</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>            sz<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> sz<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>sz<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">></span> sz<span class="token punctuation">[</span>e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                std<span class="token operator">::</span><span class="token function">swap</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">dfsHLD</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">)</span> <span class="token punctuation">{</span>        in<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> cur<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> v <span class="token operator">:</span> e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">==</span> e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                top<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> top<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                top<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> v<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token function">dfsHLD</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> <span class="token function">lca</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>top<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">!=</span> top<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>dep<span class="token punctuation">[</span>top<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">></span> dep<span class="token punctuation">[</span>top<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                u <span class="token operator">=</span> parent<span class="token punctuation">[</span>top<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                v <span class="token operator">=</span> parent<span class="token punctuation">[</span>top<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>dep<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">&lt;</span> dep<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> u<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> v<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-4-æ ‘é“¾å‰–åˆ†"><a href="#4-4-æ ‘é“¾å‰–åˆ†" class="headerlink" title="4.4 æ ‘é“¾å‰–åˆ†"></a>4.4 æ ‘é“¾å‰–åˆ†</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> N<span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">,</span> r<span class="token punctuation">,</span> p<span class="token punctuation">;</span><span class="token keyword">int</span> w<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">struct</span> Segment<span class="token punctuation">{</span>    ll add<span class="token punctuation">,</span> sum<span class="token punctuation">;</span><span class="token punctuation">}</span>tr<span class="token punctuation">[</span>N <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> dep<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> fa<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> son<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> sz<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> cnt<span class="token punctuation">,</span> nw<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> top<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> id<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> e<span class="token punctuation">[</span>M<span class="token punctuation">]</span><span class="token punctuation">,</span> h<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> ne<span class="token punctuation">[</span>M<span class="token punctuation">]</span><span class="token punctuation">,</span> idx<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{</span>    e<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> b<span class="token punctuation">,</span> ne<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> h<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">,</span> h<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> idx<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">pushup</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">)</span><span class="token punctuation">{</span>    tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">=</span> <span class="token punctuation">(</span>tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">+</span> tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sum<span class="token punctuation">)</span> <span class="token operator">%</span> p<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">pushdown</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>add<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>add <span class="token operator">+</span><span class="token operator">=</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>add<span class="token punctuation">;</span>        tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1ll</span> <span class="token operator">*</span> <span class="token punctuation">(</span>mid <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>add<span class="token punctuation">;</span>        tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">%</span><span class="token operator">=</span> p<span class="token punctuation">;</span>        tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>add <span class="token operator">+</span><span class="token operator">=</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>add<span class="token punctuation">;</span>        tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1ll</span> <span class="token operator">*</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> mid<span class="token punctuation">)</span> <span class="token operator">*</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>add<span class="token punctuation">;</span>        tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">%</span><span class="token operator">=</span> p<span class="token punctuation">;</span>        tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>add <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">==</span> r<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">=</span> nw<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">></span> p<span class="token punctuation">)</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">%</span><span class="token operator">=</span> p<span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token function">build</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> mid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">build</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">,</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pushup</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">modify</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">,</span> <span class="token keyword">int</span> d<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">>=</span> x <span class="token operator">&amp;&amp;</span> r <span class="token operator">&lt;=</span> y<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1ll</span> <span class="token operator">*</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> d<span class="token punctuation">;</span>        tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">%</span><span class="token operator">=</span> p<span class="token punctuation">;</span>        tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>add <span class="token operator">+</span><span class="token operator">=</span> d<span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">pushdown</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> l<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">&lt;=</span> mid<span class="token punctuation">)</span> <span class="token function">modify</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> mid<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>y <span class="token operator">></span> mid<span class="token punctuation">)</span> <span class="token function">modify</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">,</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pushup</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>ll <span class="token function">query</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">>=</span> x <span class="token operator">&amp;&amp;</span> r <span class="token operator">&lt;=</span> y<span class="token punctuation">)</span>        <span class="token keyword">return</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">%</span> p<span class="token punctuation">;</span>    <span class="token function">pushdown</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> l<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>    ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">&lt;=</span> mid<span class="token punctuation">)</span> ans <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> mid<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">%</span> p<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>y <span class="token operator">></span> mid<span class="token punctuation">)</span> ans <span class="token operator">=</span> <span class="token punctuation">(</span>ans <span class="token operator">+</span> <span class="token function">query</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">,</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> p<span class="token punctuation">;</span>    <span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//é¢„å¤„ç†dep[],fa[],sz[],son[](é‡å„¿å­èŠ‚ç‚¹)</span><span class="token keyword">void</span> <span class="token function">dfs1</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> f<span class="token punctuation">,</span> <span class="token keyword">int</span> depth<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//x : å½“å‰èŠ‚ç‚¹, fï¼šçˆ¶äº², depthï¼šæ·±åº¦</span><span class="token punctuation">{</span>    dep<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> depth<span class="token punctuation">;</span>    fa<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> f<span class="token punctuation">;</span>    sz<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> mxson <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">~</span>i<span class="token punctuation">;</span> i <span class="token operator">=</span> ne<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> y <span class="token operator">=</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>y <span class="token operator">==</span> f<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>        <span class="token function">dfs1</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> x<span class="token punctuation">,</span> depth <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        sz<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> sz<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sz<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">></span> mxson<span class="token punctuation">)</span><span class="token comment" spellcheck="true">// è®°å½•é‡å„¿å­ç¼–å·</span>        <span class="token punctuation">{</span>            son<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> y<span class="token punctuation">;</span>            mxson <span class="token operator">=</span> sz<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// æ ‡æ–°åºå· æ±‚id[], nw[], top[] æ–°id-æ–°èŠ‚ç‚¹æƒé‡-é“¾é¡¶ç«¯</span><span class="token keyword">void</span> <span class="token function">dfs2</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> topf<span class="token punctuation">)</span><span class="token punctuation">{</span>    id<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">++</span>cnt<span class="token punctuation">;</span>    nw<span class="token punctuation">[</span>cnt<span class="token punctuation">]</span> <span class="token operator">=</span> w<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>    top<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> topf<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>son<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æ— å„¿å­è¿”å›</span>    <span class="token function">dfs2</span><span class="token punctuation">(</span>son<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span> topf<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">~</span>i<span class="token punctuation">;</span> i <span class="token operator">=</span> ne<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> y <span class="token operator">=</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>y <span class="token operator">==</span> fa<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">||</span> y <span class="token operator">==</span> son<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">continue</span><span class="token punctuation">;</span>        <span class="token function">dfs2</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>ll <span class="token function">queryRange</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">{</span>    ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">!=</span> top<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//ä¸åœ¨åŒä¸€æ¡é“¾ä¸Š</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>dep<span class="token punctuation">[</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> dep<span class="token punctuation">[</span>top<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>        ans <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> id<span class="token punctuation">[</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ans <span class="token operator">%</span><span class="token operator">=</span> p<span class="token punctuation">;</span>        x <span class="token operator">=</span> fa<span class="token punctuation">[</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>dep<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">></span> dep<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>    ans <span class="token operator">=</span> <span class="token punctuation">(</span>ans <span class="token operator">+</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span> id<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> p<span class="token punctuation">;</span>    <span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">modifyRange</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">,</span> <span class="token keyword">int</span> d<span class="token punctuation">)</span><span class="token punctuation">{</span>    d <span class="token operator">%</span><span class="token operator">=</span> p<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">!=</span> top<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>dep<span class="token punctuation">[</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> dep<span class="token punctuation">[</span>top<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">modify</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> id<span class="token punctuation">[</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>        x <span class="token operator">=</span> fa<span class="token punctuation">[</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>dep<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">></span> dep<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">modify</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span> id<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>ll <span class="token function">querySon</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span> sz<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">modifySon</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> d<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">modify</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span> sz<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-5-tarjan"><a href="#4-5-tarjan" class="headerlink" title="4.5 tarjan"></a>4.5 tarjan</h2><h3 id="4-5-1-æ— å‘å›¾"><a href="#4-5-1-æ— å‘å›¾" class="headerlink" title="4.5.1 æ— å‘å›¾"></a>4.5.1 æ— å‘å›¾</h3><p>ç‚¹åŒï¼Œæ±‚å‰²ç‚¹</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">// æ— å‘å›¾æ±‚å‰²ç‚¹ ç‚¹åŒ</span><span class="token keyword">int</span> low<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> dfn<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> stk<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> top<span class="token punctuation">,</span> ts<span class="token punctuation">,</span> dcc_cnt<span class="token punctuation">,</span> root <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> dcc<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ç‚¹åŒè¿é€šåˆ†é‡æ•°ç»„</span><span class="token keyword">bool</span> cut<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// æ˜¯å¦ä¸ºå‰²ç‚¹</span><span class="token keyword">void</span> <span class="token function">tarjan</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">)</span><span class="token punctuation">{</span>    dfn<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> low<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">++</span>ts<span class="token punctuation">;</span>    stk<span class="token punctuation">[</span><span class="token operator">++</span>top<span class="token punctuation">]</span> <span class="token operator">=</span> u<span class="token punctuation">;</span>    <span class="token keyword">int</span> flag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> v <span class="token operator">:</span> e<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>dfn<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">tarjan</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>            low<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>low<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">,</span> low<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>dfn<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> low<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                flag<span class="token operator">++</span><span class="token punctuation">;</span>                dcc_cnt<span class="token operator">++</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>u <span class="token operator">!=</span> root <span class="token operator">||</span> flag <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> cut<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> x<span class="token punctuation">;</span>                <span class="token keyword">do</span>                <span class="token punctuation">{</span>                    x <span class="token operator">=</span> stk<span class="token punctuation">[</span>top<span class="token operator">--</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                    dcc<span class="token punctuation">[</span>dcc_cnt<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span><span class="token keyword">while</span><span class="token punctuation">(</span>x <span class="token operator">!=</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>                dcc<span class="token punctuation">[</span>dcc_cnt<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">else</span> low<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>low<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">,</span> dfn<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-5-2-æœ‰å‘å›¾"><a href="#4-5-2-æœ‰å‘å›¾" class="headerlink" title="4.5.2 æœ‰å‘å›¾"></a>4.5.2 æœ‰å‘å›¾</h3><p>ç¼©ç‚¹</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">// stkæ ˆ, scnt:å¼ºè¿é€šåˆ†é‡çš„ç¼–å·, c[i]:ièŠ‚ç‚¹å¯¹åº”çš„å¼ºè¿é€šåˆ†é‡ç¼–å·</span><span class="token keyword">int</span> stk<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> dfn<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> low<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> c<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> tid<span class="token punctuation">,</span> top<span class="token punctuation">,</span> scnt<span class="token punctuation">;</span><span class="token keyword">bool</span> ins<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">tarjan</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">)</span><span class="token punctuation">{</span>    dfn<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> low<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">++</span>tid<span class="token punctuation">;</span>    stk<span class="token punctuation">[</span><span class="token operator">++</span>top<span class="token punctuation">]</span> <span class="token operator">=</span> u<span class="token punctuation">,</span> ins<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">~</span>i<span class="token punctuation">;</span> i <span class="token operator">=</span> ne<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> v <span class="token operator">=</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>dfn<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">tarjan</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>            low<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>low<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">,</span> low<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>ins<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>            low<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>low<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">,</span> dfn<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>dfn<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">==</span> low<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token operator">++</span>scnt<span class="token punctuation">;</span>        <span class="token keyword">int</span> v<span class="token punctuation">;</span>        <span class="token keyword">do</span>        <span class="token punctuation">{</span>            v <span class="token operator">=</span> stk<span class="token punctuation">[</span>top<span class="token operator">--</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ins<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            c<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> scnt<span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// sz[scnt]++;</span>        <span class="token punctuation">}</span><span class="token keyword">while</span><span class="token punctuation">(</span>u <span class="token operator">!=</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="5-å­—ç¬¦ä¸²"><a href="#5-å­—ç¬¦ä¸²" class="headerlink" title="5 å­—ç¬¦ä¸²"></a>5 å­—ç¬¦ä¸²</h1><h2 id="5-1-hash"><a href="#5-1-hash" class="headerlink" title="5.1 hash"></a>5.1 hash</h2><p>$$<br>f[i] = f[i - 1] <em> 131 + (s[i] - â€˜aâ€™); \<br>hash(l,r) = f[r] - f[l - 1] </em> 131^{r - l + 1};<br>$$</p><h2 id="5-2-KMP"><a href="#5-2-KMP" class="headerlink" title="5.2 KMP"></a>5.2 KMP</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">char</span> s<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> p<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> ne<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>cin <span class="token operator">>></span> s <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">>></span> p <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>s <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> m <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>j <span class="token operator">&amp;&amp;</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> p<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> j <span class="token operator">=</span> ne<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å›é€€</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> p<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> j<span class="token operator">++</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æœ€é•¿å…¬å…±å‰åç¼€æœ€å¤šå¢åŠ ä¸€</span>    ne<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> j<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¯¹å½“å‰ä¸‹æ ‡çš„nextæ•°ç»„èµ‹å€¼ä¸ºæœ€é•¿é•¿åº¦</span><span class="token punctuation">}</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>j <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>j <span class="token operator">==</span> n <span class="token operator">||</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> p<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> j <span class="token operator">=</span> ne<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> p<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> j<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">==</span> m<span class="token punctuation">)</span>     <span class="token punctuation">{</span>        j <span class="token operator">=</span> ne<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//åŒ¹é…æˆåŠŸï¼Œåé¢å¿…ç„¶ä¸èƒ½å†åŒ¹é…ï¼Œæ‰€ä»¥å›é€€ä¸€æ­¥ </span>        <span class="token comment" spellcheck="true">//åŒ¹é…æˆåŠŸåçš„é€»è¾‘</span>        cout <span class="token operator">&lt;&lt;</span> i <span class="token operator">-</span> m <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/* * p:     a b a b a * i:     1 2 3 4 5 * ne[i]: 0 0 1 2 3 */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-3-Trie"><a href="#5-3-Trie" class="headerlink" title="5.3 Trie"></a>5.3 Trie</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Trie<span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> trie<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> cnt<span class="token punctuation">;</span>    <span class="token keyword">int</span> idx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token function">Trie</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        trie<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token number">26</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        cnt<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span>string s<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> p <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> x <span class="token operator">=</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token string">'a'</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>trie<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span> trie<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">++</span>idx<span class="token punctuation">;</span>            p <span class="token operator">=</span> trie<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        cnt<span class="token punctuation">[</span>p<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> <span class="token function">find</span><span class="token punctuation">(</span>string s<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> p <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">int</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> x <span class="token operator">=</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token string">'a'</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>trie<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>            p <span class="token operator">=</span> trie<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> cnt<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-4-Manacher"><a href="#5-4-Manacher" class="headerlink" title="5.4 Manacher"></a>5.4 Manacher</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">char</span> Ma<span class="token punctuation">[</span>N<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> Mp<span class="token punctuation">[</span>N<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">Manacher</span><span class="token punctuation">(</span><span class="token keyword">char</span> s<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> l<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token operator">=</span><span class="token function">strlen</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>    Ma<span class="token punctuation">[</span>l<span class="token operator">++</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">'$'</span><span class="token punctuation">;</span>    Ma<span class="token punctuation">[</span>l<span class="token operator">++</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">'#'</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>len<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        Ma<span class="token punctuation">[</span>l<span class="token operator">++</span><span class="token punctuation">]</span><span class="token operator">=</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        Ma<span class="token punctuation">[</span>l<span class="token operator">++</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">'#'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Ma<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> mx<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>id<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//mxæ˜¯æœ€å³ç«¯ï¼Œidæ˜¯ä¸­é—´å€¼</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>l<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        Mp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>mx<span class="token operator">></span>i<span class="token operator">?</span><span class="token function">min</span><span class="token punctuation">(</span>Mp<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>id<span class="token operator">-</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>mx<span class="token operator">-</span>i<span class="token punctuation">)</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>Ma<span class="token punctuation">[</span>i<span class="token operator">+</span>Mp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">==</span>Ma<span class="token punctuation">[</span>i<span class="token operator">-</span>Mp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>Mp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">+</span>Mp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">></span>mx<span class="token punctuation">)</span><span class="token punctuation">{</span>            mx<span class="token operator">=</span>i<span class="token operator">+</span>Mp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            id<span class="token operator">=</span>i<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/* * abaaba * i:     0 1 2 3 4 5 6 7 8 9 10 11 12 13 * Ma[i]: $ # a # b # a # a # b  #  a  # * Mp[i]: 1 1 2 1 4 1 2 7 2 1 4  1  2  1 */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-5-SAMåç¼€è‡ªåŠ¨æœº"><a href="#5-5-SAMåç¼€è‡ªåŠ¨æœº" class="headerlink" title="5.5 SAMåç¼€è‡ªåŠ¨æœº"></a>5.5 SAMåç¼€è‡ªåŠ¨æœº</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> SuffixAutomaton <span class="token punctuation">{</span>    <span class="token keyword">static</span> <span class="token keyword">constexpr</span> <span class="token keyword">int</span> ALPHABET_SIZE <span class="token operator">=</span> <span class="token number">26</span><span class="token punctuation">,</span> N <span class="token operator">=</span> <span class="token number">1e5</span><span class="token punctuation">;</span>    <span class="token keyword">struct</span> Node <span class="token punctuation">{</span>        <span class="token keyword">int</span> len<span class="token punctuation">;</span>        <span class="token keyword">int</span> link<span class="token punctuation">;</span>        <span class="token keyword">int</span> next<span class="token punctuation">[</span>ALPHABET_SIZE<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token function">Node</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">len</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">link</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> next<span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token punctuation">}</span> t<span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> N<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> cntNodes<span class="token punctuation">;</span>    <span class="token function">SuffixAutomaton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        cntNodes <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        std<span class="token operator">::</span><span class="token function">fill</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">,</span> t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>next <span class="token operator">+</span> ALPHABET_SIZE<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>len <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span>string s<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> p <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> x <span class="token operator">:</span> s<span class="token punctuation">)</span>            p <span class="token operator">=</span> <span class="token function">extend</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> x <span class="token operator">-</span> <span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>    <span class="token keyword">int</span> <span class="token function">extend</span><span class="token punctuation">(</span><span class="token keyword">int</span> p<span class="token punctuation">,</span> <span class="token keyword">int</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span> q <span class="token operator">=</span> t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">.</span>len <span class="token operator">==</span> t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> q<span class="token punctuation">;</span>            <span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token operator">++</span>cntNodes<span class="token punctuation">;</span>            t<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">.</span>len <span class="token operator">=</span> t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            t<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">.</span>link <span class="token operator">=</span> t<span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">.</span>link<span class="token punctuation">;</span>            std<span class="token operator">::</span><span class="token function">copy</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">,</span> t<span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">.</span>next <span class="token operator">+</span> ALPHABET_SIZE<span class="token punctuation">,</span> t<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>            t<span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">.</span>link <span class="token operator">=</span> r<span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">[</span>c<span class="token punctuation">]</span> <span class="token operator">==</span> q<span class="token punctuation">)</span> <span class="token punctuation">{</span>                t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">[</span>c<span class="token punctuation">]</span> <span class="token operator">=</span> r<span class="token punctuation">;</span>                p <span class="token operator">=</span> t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>link<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> r<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">int</span> cur <span class="token operator">=</span> <span class="token operator">++</span>cntNodes<span class="token punctuation">;</span>        t<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>len <span class="token operator">=</span> t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>next<span class="token punctuation">[</span>c<span class="token punctuation">]</span> <span class="token operator">=</span> cur<span class="token punctuation">;</span>            p <span class="token operator">=</span> t<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>link<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        t<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span>link <span class="token operator">=</span> <span class="token function">extend</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> cur<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>sam<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="6-è®¡ç®—å‡ ä½•"><a href="#6-è®¡ç®—å‡ ä½•" class="headerlink" title="6. è®¡ç®—å‡ ä½•"></a>6. è®¡ç®—å‡ ä½•</h1><h2 id="6-1-ç‚¹"><a href="#6-1-ç‚¹" class="headerlink" title="6.1 ç‚¹"></a>6.1 ç‚¹</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">sgn</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">fabs</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token operator">&lt;</span>eps<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">double</span> <span class="token function">cmp</span><span class="token punctuation">(</span><span class="token keyword">double</span> a<span class="token punctuation">,</span><span class="token keyword">double</span> b<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token function">sgn</span><span class="token punctuation">(</span>a<span class="token operator">-</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">double</span> <span class="token function">sqr</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> x<span class="token operator">*</span>x<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">double</span> <span class="token function">inmid</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span><span class="token keyword">double</span> l<span class="token punctuation">,</span><span class="token keyword">double</span> r<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token function">sgn</span><span class="token punctuation">(</span>x<span class="token operator">-</span>l<span class="token punctuation">)</span><span class="token operator">>=</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span><span class="token function">sgn</span><span class="token punctuation">(</span>r<span class="token operator">-</span>x<span class="token punctuation">)</span><span class="token operator">>=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">struct</span> Point<span class="token punctuation">{</span>    <span class="token keyword">double</span> x<span class="token punctuation">,</span>y<span class="token punctuation">;</span>    <span class="token function">Point</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token function">Point</span><span class="token punctuation">(</span><span class="token keyword">double</span> xx<span class="token punctuation">,</span><span class="token keyword">double</span> yy<span class="token punctuation">)</span><span class="token punctuation">{</span>x<span class="token operator">=</span>xx<span class="token punctuation">;</span>y<span class="token operator">=</span>yy<span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%Lf %Lf"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>x<span class="token punctuation">,</span><span class="token operator">&amp;</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">output</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%.0f %.0f\n"</span><span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> Point <span class="token operator">&amp;</span>p<span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token function">sgn</span><span class="token punctuation">(</span>x<span class="token operator">-</span>p<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span><span class="token function">sgn</span><span class="token punctuation">(</span>y<span class="token operator">-</span>p<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Point <span class="token operator">&amp;</span>p<span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token function">sgn</span><span class="token punctuation">(</span>x<span class="token operator">-</span>p<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token operator">!=</span><span class="token number">0</span><span class="token operator">||</span><span class="token function">sgn</span><span class="token punctuation">(</span>y<span class="token operator">-</span>p<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">&lt;</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Point <span class="token operator">&amp;</span>p<span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">sgn</span><span class="token punctuation">(</span>x<span class="token operator">-</span>p<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">||</span><span class="token punctuation">(</span><span class="token function">sgn</span><span class="token punctuation">(</span>x<span class="token operator">-</span>p<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span><span class="token function">sgn</span><span class="token punctuation">(</span>y<span class="token operator">-</span>p<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Point <span class="token keyword">operator</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Point <span class="token operator">&amp;</span>p<span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">{</span>x<span class="token operator">+</span>p<span class="token punctuation">.</span>x<span class="token punctuation">,</span>y<span class="token operator">+</span>p<span class="token punctuation">.</span>y<span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Point <span class="token keyword">operator</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">const</span> Point <span class="token operator">&amp;</span>p<span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">{</span>x<span class="token operator">-</span>p<span class="token punctuation">.</span>x<span class="token punctuation">,</span>y<span class="token operator">-</span>p<span class="token punctuation">.</span>y<span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Point <span class="token keyword">operator</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">double</span> k<span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">{</span>x<span class="token operator">*</span>k<span class="token punctuation">,</span>y<span class="token operator">*</span>k<span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Point <span class="token keyword">operator</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">double</span> <span class="token operator">&amp;</span>k<span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">{</span>x<span class="token operator">/</span>k<span class="token punctuation">,</span>y<span class="token operator">/</span>k<span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">double</span> <span class="token function">dot</span><span class="token punctuation">(</span>Point p<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span><span class="token keyword">return</span> p<span class="token punctuation">.</span>x<span class="token operator">*</span>x<span class="token operator">+</span>p<span class="token punctuation">.</span>y<span class="token operator">*</span>y<span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token keyword">double</span> <span class="token function">cross</span><span class="token punctuation">(</span>Point p<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token keyword">return</span> x <span class="token operator">*</span> p<span class="token punctuation">.</span>y <span class="token operator">-</span> y <span class="token operator">*</span> p<span class="token punctuation">.</span>x<span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token keyword">double</span> <span class="token function">dis</span><span class="token punctuation">(</span>Point p<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token function">sqr</span><span class="token punctuation">(</span>x <span class="token operator">-</span> p<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">sqr</span><span class="token punctuation">(</span>y <span class="token operator">-</span> p<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token keyword">double</span> <span class="token function">abs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token function">hypot</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token keyword">double</span> <span class="token function">abs2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token function">sqr</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">sqr</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token keyword">double</span> <span class="token function">rad</span><span class="token punctuation">(</span>Point a<span class="token punctuation">,</span>Point b<span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">{</span>        Point k1<span class="token operator">=</span>a<span class="token operator">-</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>k2<span class="token operator">=</span>b<span class="token operator">-</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">atan2l</span><span class="token punctuation">(</span>k1<span class="token punctuation">.</span><span class="token function">cross</span><span class="token punctuation">(</span>k2<span class="token punctuation">)</span><span class="token punctuation">,</span> k1<span class="token punctuation">.</span><span class="token function">dot</span><span class="token punctuation">(</span>k2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¨¡æ¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022æ­ç”µå¤šæ ¡2 Static Query on Tree|æ ‘é“¾å‰–åˆ†</title>
      <link href="/p/3388199031.html"/>
      <url>/p/3388199031.html</url>
      
        <content type="html"><![CDATA[<h1 id="Static-Query-on-Tree"><a href="#Static-Query-on-Tree" class="headerlink" title="Static Query on Tree"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=7150" target="_blank" rel="noopener">Static Query on Tree</a></h1><p>ä¸‹é¢ä»‹ç»æ ‘é“¾å‰–åˆ†åšæ³•ï¼ˆå³é¢˜è§£çš„ç¬¬äºŒç§åšæ³•ï¼‰</p><p><img src="3388199031/image-20220722223108042.png" alt="é¢˜ç›®æè¿°"></p><blockquote><p>é¢˜ç›®å¤§æ„ï¼š</p><p>ä¸€æ£µå†…å‘æ ‘ï¼Œä¸‰ä¸ªé›†åˆAï¼ŒBï¼ŒCï¼Œæ¯ä¸ªé›†åˆé‡Œé¢æœ‰ä¸€äº›ç‚¹ï¼Œæ±‚ç‰¹å®šç‚¹çš„ä¸ªæ•°ï¼Œæ»¡è¶³ä»Aé›†åˆå’ŒBé›†åˆå¯ä»¥åˆ°è¾¾è¯¥ç‰¹å®šç‚¹ï¼Œä¸”å¯ä»¥ä»è¯¥ç‰¹å®šç‚¹åˆ°è¾¾Cé›†åˆã€‚</p></blockquote><p>å¯ä»¥æŠŠä»Aé›†åˆåˆ°è¾¾æ ¹èŠ‚ç‚¹è·¯å¾„ä¸­éƒ½æ‰“ä¸ŠAæ ‡è®°ï¼ŒæŠŠä»Bé›†åˆåˆ°è¾¾æ ¹èŠ‚ç‚¹è·¯å¾„ä¸­éƒ½æ‰“ä¸ŠBæ ‡è®°ï¼Œé‚£ä¹ˆæ ‘ä¸­è¢«æ‰“ä¸ŠAå’ŒBæ ‡è®°çš„å°±æ˜¯Aå’ŒBé›†åˆéƒ½å¯ä»¥åˆ°è¾¾çš„ç‚¹ã€‚ï¼ˆå› ä¸ºæ˜¯å†…å‘æ ‘ï¼Œæ‰€ä»¥å‘æ ¹èŠ‚ç‚¹æ–¹å‘èµ°ï¼‰</p><p>åªéœ€è¦åˆ¤æ–­è¿™äº›æ‰“ä¸ŠAå’ŒBæ ‡è®°çš„ç‚¹èƒ½å¦åˆ°è¾¾CèŠ‚ç‚¹å³å¯ï¼Œæ–¹æ³•ä¹Ÿæ˜¯åŒæ ·çš„ï¼Œå°†Cé›†åˆä¸­çš„æ¯ä¸ªç‚¹å’Œå…¶å­æ ‘ä¸Šçš„ç‚¹éƒ½æ‰“ä¸ŠCæ ‡è®°ï¼Œåªè¦ç»Ÿè®¡æ ‘ä¸­åŒæ—¶è¢«æ‰“ä¸ŠABCæ ‡è®°çš„ç‚¹çš„ä¸ªæ•°å³å¯ï¼ˆæ­¤æ—¶å¯ä»¥ç”¨çº¿æ®µæ ‘ç»´æŠ¤æ ‡è®°ï¼‰ã€‚</p><p><strong>çº¿æ®µæ ‘è®°å½•å˜é‡</strong></p><ul><li>$tr[u].cnt[i]$</li></ul><p>$tr[u].cnt[i]$ä¸­çš„$i$æœ‰ä¸‰ä¸ªå€¼ï¼Œ0ï¼Œ1ï¼Œ2ï¼Œåˆ†åˆ«ä»£è¡¨è¢«æ‰“ä¸ŠAæ ‡è®°çš„ç‚¹ï¼Œè¢«æ‰“ä¸ŠABæ ‡è®°çš„ç‚¹ï¼Œè¢«æ‰“ä¸ŠABCæ ‡è®°çš„ç‚¹ã€‚</p><p>åˆ™$tr[u].cnt[i]$åˆ™å…±å¯ä»¥è¡¨ç¤ºåœ¨å¯¹åº”çš„çº¿æ®µæ ‘èŠ‚ç‚¹è¡¨ç¤ºçš„åŒºé—´ä¸Šè¢«æ‰“ä¸ŠAæ ‡è®°çš„ç‚¹çš„ä¸ªæ•°ï¼ˆ$i = 0$ï¼‰ï¼Œè¢«æ‰“ä¸ŠABæ ‡è®°çš„ç‚¹çš„ä¸ªæ•°ï¼ˆ$i = 1$ï¼‰ï¼Œè¢«æ‰“ä¸ŠABCæ ‡è®°çš„ç‚¹çš„ä¸ªæ•°ï¼ˆ$i = 2$ï¼‰ã€‚</p><ul><li>$tr[u].flag[i]$</li></ul><p>å…±æœ‰ä¸‰ä¸ªå€¼<code>-1</code>ï¼Œ<code>0</code>ï¼Œ <code>1</code></p><p>åˆå§‹å€¼ç­‰äº<code>-1</code>ï¼Œä¸º<code>0</code>ä»£è¡¨å¯¹åº”çš„åŒºé—´ç½®ä¸º0</p><p>æ‡’æ ‡è®°ä¸‹ä¼ æ–¹æ³•ï¼š</p><p>åœ¨ä¸‹ä¼ æ‡’æ ‡è®°Aæ—¶ï¼Œå› ä¸ºAæ˜¯ç¬¬ä¸€æ¬¡æ ‡è®°ï¼Œæ— éœ€å…¶ä»–æ¡ä»¶ï¼Œç›´æ¥ä¸‹ä¼ ï¼Œè®°å½•ä¸€ä¸‹<code>cnt</code>å˜é‡å³å¯ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp">tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>mid <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> mid<span class="token punctuation">)</span><span class="token punctuation">;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä¸‹ä¼ æ‡’æ ‡è®°Bå’ŒCæ—¶ï¼Œå°±éœ€è¦æœ‰é™åˆ¶æ¡ä»¶äº†ï¼Œä¸‹ä¼ æ‡’æ ‡è®°Bæˆ‘ä»¬éœ€è¦æœ‰Aæ ‡è®°æ‰èƒ½æ±‚è¢«æ ‡è®°Aå’ŒBçš„èŠ‚ç‚¹ï¼Œå³è¢«æ ‡è®°ABçš„èŠ‚ç‚¹çš„æ•°é‡ç­‰äºè¢«æ ‡è®°AèŠ‚ç‚¹çš„æ•°é‡ä¹˜å¯¹åº”çš„æ‡’æ ‡è®°ã€‚</p><pre class="line-numbers language-cpp"><code class="language-cpp">tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥å°±æ˜¯æ ‘é“¾å‰–åˆ†çš„æ¿å­äº†ï¼Œå¯ä»¥çœ‹ä¸‹é¢é“¾æ¥</p><p><a href="../shupou1000">æ ‘é“¾å‰–åˆ†æ¨¡æ¿é¢˜</a></p><h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">2e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> N<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> p <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> q<span class="token punctuation">;</span><span class="token keyword">struct</span> Segment<span class="token punctuation">{</span>    <span class="token keyword">int</span> cnt<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> flag<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span>tr<span class="token punctuation">[</span>N <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> dep<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> fa<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> son<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> sz<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> cnt<span class="token punctuation">,</span> nw<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> top<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> id<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> e<span class="token punctuation">[</span>M<span class="token punctuation">]</span><span class="token punctuation">,</span> h<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> ne<span class="token punctuation">[</span>M<span class="token punctuation">]</span><span class="token punctuation">,</span> idx<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{</span>    e<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> b<span class="token punctuation">,</span> ne<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> h<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">,</span> h<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> idx<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">pushup</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">pushdown</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>            <span class="token keyword">continue</span><span class="token punctuation">;</span>        tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>mid <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> mid<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token punctuation">}</span>        <span class="token keyword">else</span>        <span class="token punctuation">{</span>            tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">==</span> r<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token function">build</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> mid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">build</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">,</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pushup</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">modify</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">,</span> <span class="token keyword">int</span> d<span class="token punctuation">,</span> <span class="token keyword">int</span> v<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">>=</span> x <span class="token operator">&amp;&amp;</span> r <span class="token operator">&lt;=</span> y<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>flag<span class="token punctuation">[</span>d<span class="token punctuation">]</span> <span class="token operator">=</span> v<span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>d <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>            tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> v<span class="token punctuation">;</span>        <span class="token keyword">else</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">[</span>d<span class="token punctuation">]</span> <span class="token operator">=</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">[</span>d <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> v<span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">pushdown</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> l<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">&lt;=</span> mid<span class="token punctuation">)</span> <span class="token function">modify</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> mid<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> d<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>y <span class="token operator">></span> mid<span class="token punctuation">)</span> <span class="token function">modify</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">,</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> d<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pushup</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>ll <span class="token function">query</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">>=</span> x <span class="token operator">&amp;&amp;</span> r <span class="token operator">&lt;=</span> y<span class="token punctuation">)</span>        <span class="token keyword">return</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>cnt<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">%</span> p<span class="token punctuation">;</span>    <span class="token function">pushdown</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> l<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>    ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">&lt;=</span> mid<span class="token punctuation">)</span> ans <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> mid<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">%</span> p<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>y <span class="token operator">></span> mid<span class="token punctuation">)</span> ans <span class="token operator">=</span> <span class="token punctuation">(</span>ans <span class="token operator">+</span> <span class="token function">query</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">,</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> p<span class="token punctuation">;</span>    <span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//é¢„å¤„ç†dep[],fa[],sz[],son[](é‡å„¿å­èŠ‚ç‚¹)</span><span class="token keyword">void</span> <span class="token function">dfs1</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> f<span class="token punctuation">,</span> <span class="token keyword">int</span> depth<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//x : å½“å‰èŠ‚ç‚¹, fï¼šçˆ¶äº², depthï¼šæ·±åº¦</span><span class="token punctuation">{</span>    dep<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> depth<span class="token punctuation">;</span>    fa<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> f<span class="token punctuation">;</span>    sz<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> mxson <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">~</span>i<span class="token punctuation">;</span> i <span class="token operator">=</span> ne<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> y <span class="token operator">=</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>y <span class="token operator">==</span> f<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>        <span class="token function">dfs1</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> x<span class="token punctuation">,</span> depth <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        sz<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> sz<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sz<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">></span> mxson<span class="token punctuation">)</span><span class="token comment" spellcheck="true">// è®°å½•é‡å„¿å­ç¼–å·</span>        <span class="token punctuation">{</span>            son<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> y<span class="token punctuation">;</span>            mxson <span class="token operator">=</span> sz<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// æ ‡æ–°åºå· æ±‚id[], nw[], top[] æ–°id-æ–°èŠ‚ç‚¹æƒé‡-é“¾é¡¶ç«¯</span><span class="token keyword">void</span> <span class="token function">dfs2</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> topf<span class="token punctuation">)</span><span class="token punctuation">{</span>    id<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">++</span>cnt<span class="token punctuation">;</span>    nw<span class="token punctuation">[</span>cnt<span class="token punctuation">]</span> <span class="token operator">=</span> w<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>    top<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> topf<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>son<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æ— å„¿å­è¿”å›</span>    <span class="token function">dfs2</span><span class="token punctuation">(</span>son<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span> topf<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">~</span>i<span class="token punctuation">;</span> i <span class="token operator">=</span> ne<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> y <span class="token operator">=</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>y <span class="token operator">==</span> fa<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">||</span> y <span class="token operator">==</span> son<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">continue</span><span class="token punctuation">;</span>        <span class="token function">dfs2</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>ll <span class="token function">queryRange</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">{</span>    ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">!=</span> top<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//ä¸åœ¨åŒä¸€æ¡é“¾ä¸Š</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>dep<span class="token punctuation">[</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> dep<span class="token punctuation">[</span>top<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>        ans <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> id<span class="token punctuation">[</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ans <span class="token operator">%</span><span class="token operator">=</span> p<span class="token punctuation">;</span>        x <span class="token operator">=</span> fa<span class="token punctuation">[</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>dep<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">></span> dep<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>    ans <span class="token operator">=</span> <span class="token punctuation">(</span>ans <span class="token operator">+</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span> id<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> p<span class="token punctuation">;</span>    <span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">modifyRange</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">,</span> <span class="token keyword">int</span> d<span class="token punctuation">,</span> <span class="token keyword">int</span> v<span class="token punctuation">)</span><span class="token punctuation">{</span>    v <span class="token operator">%</span><span class="token operator">=</span> p<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">!=</span> top<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>dep<span class="token punctuation">[</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> dep<span class="token punctuation">[</span>top<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">modify</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> id<span class="token punctuation">[</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>        x <span class="token operator">=</span> fa<span class="token punctuation">[</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>dep<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">></span> dep<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">modify</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span> id<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>ll <span class="token function">querySon</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span> sz<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">modifySon</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> d<span class="token punctuation">,</span> <span class="token keyword">int</span> v<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">modify</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span> sz<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> tot<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> node<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    cin <span class="token operator">>></span> n <span class="token operator">>></span> q<span class="token punctuation">;</span>    <span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> to<span class="token punctuation">;</span>        cin <span class="token operator">>></span> to<span class="token punctuation">;</span>        <span class="token function">add</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">add</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> to<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">dfs1</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">dfs2</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">build</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>q<span class="token operator">--</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            cin <span class="token operator">>></span> tot<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> tot<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                cin <span class="token operator">>></span> node<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">!=</span> <span class="token number">2</span><span class="token punctuation">)</span>                    <span class="token function">modifyRange</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> node<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">else</span>                    <span class="token function">modifySon</span><span class="token punctuation">(</span>node<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        cout <span class="token operator">&lt;&lt;</span> <span class="token function">querySon</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>        <span class="token function">modifySon</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">modifySon</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">modifySon</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// ios::sync_with_stdio(false);</span>    <span class="token comment" spellcheck="true">// cin.tie(0);</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    cin <span class="token operator">>></span> t<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// t = 1;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å›¾è®º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ ‘é“¾å‰–åˆ† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ ‘é“¾å‰–åˆ†|æ¨¡æ¿é¢˜</title>
      <link href="/p/1046407529.html"/>
      <url>/p/1046407529.html</url>
      
        <content type="html"><![CDATA[<h1 id="æ ‘é“¾å‰–åˆ†æ¨¡æ¿é¢˜"><a href="#æ ‘é“¾å‰–åˆ†æ¨¡æ¿é¢˜" class="headerlink" title="æ ‘é“¾å‰–åˆ†æ¨¡æ¿é¢˜"></a>æ ‘é“¾å‰–åˆ†æ¨¡æ¿é¢˜</h1><p>é¢˜ç›®é“¾æ¥ï¼š</p><p><a href="https://www.luogu.com.cn/problem/P3384" target="_blank" rel="noopener">https://www.luogu.com.cn/problem/P3384</a></p><p><img src="1046407529/f09feafcf66f44c0b0e215ff94c1ca40.png" alt="é—®é¢˜æè¿°"></p><h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e5</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> M <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> N<span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">,</span> r<span class="token punctuation">,</span> p<span class="token punctuation">;</span><span class="token keyword">int</span> w<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">struct</span> Segment<span class="token punctuation">{</span>    ll add<span class="token punctuation">,</span> sum<span class="token punctuation">;</span><span class="token punctuation">}</span>tr<span class="token punctuation">[</span>N <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> dep<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> fa<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> son<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> sz<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> cnt<span class="token punctuation">,</span> nw<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> top<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> id<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> e<span class="token punctuation">[</span>M<span class="token punctuation">]</span><span class="token punctuation">,</span> h<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> ne<span class="token punctuation">[</span>M<span class="token punctuation">]</span><span class="token punctuation">,</span> idx<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{</span>    e<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> b<span class="token punctuation">,</span> ne<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> h<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">,</span> h<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> idx<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">pushup</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">)</span><span class="token punctuation">{</span>    tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">=</span> <span class="token punctuation">(</span>tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">+</span> tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sum<span class="token punctuation">)</span> <span class="token operator">%</span> p<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">pushdown</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>add<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>add <span class="token operator">+</span><span class="token operator">=</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>add<span class="token punctuation">;</span>        tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1ll</span> <span class="token operator">*</span> <span class="token punctuation">(</span>mid <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>add<span class="token punctuation">;</span>        tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">%</span><span class="token operator">=</span> p<span class="token punctuation">;</span>        tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>add <span class="token operator">+</span><span class="token operator">=</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>add<span class="token punctuation">;</span>        tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1ll</span> <span class="token operator">*</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> mid<span class="token punctuation">)</span> <span class="token operator">*</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>add<span class="token punctuation">;</span>        tr<span class="token punctuation">[</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">%</span><span class="token operator">=</span> p<span class="token punctuation">;</span>        tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>add <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">==</span> r<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">=</span> nw<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">></span> p<span class="token punctuation">)</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">%</span><span class="token operator">=</span> p<span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token function">build</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> mid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">build</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">,</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pushup</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">modify</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">,</span> <span class="token keyword">int</span> d<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">>=</span> x <span class="token operator">&amp;&amp;</span> r <span class="token operator">&lt;=</span> y<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1ll</span> <span class="token operator">*</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> d<span class="token punctuation">;</span>        tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">%</span><span class="token operator">=</span> p<span class="token punctuation">;</span>        tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>add <span class="token operator">+</span><span class="token operator">=</span> d<span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">pushdown</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> l<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">&lt;=</span> mid<span class="token punctuation">)</span> <span class="token function">modify</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> mid<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>y <span class="token operator">></span> mid<span class="token punctuation">)</span> <span class="token function">modify</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">,</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pushup</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>ll <span class="token function">query</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">>=</span> x <span class="token operator">&amp;&amp;</span> r <span class="token operator">&lt;=</span> y<span class="token punctuation">)</span>        <span class="token keyword">return</span> tr<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">%</span> p<span class="token punctuation">;</span>    <span class="token function">pushdown</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> l<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>    ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">&lt;=</span> mid<span class="token punctuation">)</span> ans <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> l<span class="token punctuation">,</span> mid<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">%</span> p<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>y <span class="token operator">></span> mid<span class="token punctuation">)</span> ans <span class="token operator">=</span> <span class="token punctuation">(</span>ans <span class="token operator">+</span> <span class="token function">query</span><span class="token punctuation">(</span>u <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token punctuation">,</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> p<span class="token punctuation">;</span>    <span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//é¢„å¤„ç†dep[],fa[],sz[],son[](é‡å„¿å­èŠ‚ç‚¹)</span><span class="token keyword">void</span> <span class="token function">dfs1</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> f<span class="token punctuation">,</span> <span class="token keyword">int</span> depth<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//x : å½“å‰èŠ‚ç‚¹, fï¼šçˆ¶äº², depthï¼šæ·±åº¦</span><span class="token punctuation">{</span>    dep<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> depth<span class="token punctuation">;</span>    fa<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> f<span class="token punctuation">;</span>    sz<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> mxson <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">~</span>i<span class="token punctuation">;</span> i <span class="token operator">=</span> ne<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> y <span class="token operator">=</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>y <span class="token operator">==</span> f<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>        <span class="token function">dfs1</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> x<span class="token punctuation">,</span> depth <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        sz<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> sz<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sz<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">></span> mxson<span class="token punctuation">)</span><span class="token comment" spellcheck="true">// è®°å½•é‡å„¿å­ç¼–å·</span>        <span class="token punctuation">{</span>            son<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> y<span class="token punctuation">;</span>            mxson <span class="token operator">=</span> sz<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// æ ‡æ–°åºå· æ±‚id[], nw[], top[] æ–°id-æ–°èŠ‚ç‚¹æƒé‡-é“¾é¡¶ç«¯</span><span class="token keyword">void</span> <span class="token function">dfs2</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> topf<span class="token punctuation">)</span><span class="token punctuation">{</span>    id<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">++</span>cnt<span class="token punctuation">;</span>    nw<span class="token punctuation">[</span>cnt<span class="token punctuation">]</span> <span class="token operator">=</span> w<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>    top<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> topf<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>son<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æ— å„¿å­è¿”å›</span>    <span class="token function">dfs2</span><span class="token punctuation">(</span>son<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span> topf<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> h<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">~</span>i<span class="token punctuation">;</span> i <span class="token operator">=</span> ne<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> y <span class="token operator">=</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>y <span class="token operator">==</span> fa<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">||</span> y <span class="token operator">==</span> son<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">continue</span><span class="token punctuation">;</span>        <span class="token function">dfs2</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>ll <span class="token function">queryRange</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">{</span>    ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">!=</span> top<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//ä¸åœ¨åŒä¸€æ¡é“¾ä¸Š</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>dep<span class="token punctuation">[</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> dep<span class="token punctuation">[</span>top<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>        ans <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> id<span class="token punctuation">[</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ans <span class="token operator">%</span><span class="token operator">=</span> p<span class="token punctuation">;</span>        x <span class="token operator">=</span> fa<span class="token punctuation">[</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>dep<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">></span> dep<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>    ans <span class="token operator">=</span> <span class="token punctuation">(</span>ans <span class="token operator">+</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span> id<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> p<span class="token punctuation">;</span>    <span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">modifyRange</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">,</span> <span class="token keyword">int</span> d<span class="token punctuation">)</span><span class="token punctuation">{</span>    d <span class="token operator">%</span><span class="token operator">=</span> p<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">!=</span> top<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>dep<span class="token punctuation">[</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> dep<span class="token punctuation">[</span>top<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">modify</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> id<span class="token punctuation">[</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>        x <span class="token operator">=</span> fa<span class="token punctuation">[</span>top<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>dep<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">></span> dep<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">modify</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span> id<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>ll <span class="token function">querySon</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span> sz<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">modifySon</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> d<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">modify</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span> id<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span> sz<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    cin <span class="token operator">>></span> n <span class="token operator">>></span> m <span class="token operator">>></span> r <span class="token operator">>></span> p<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        cin <span class="token operator">>></span> w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token function">memset</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> u<span class="token punctuation">,</span> v<span class="token punctuation">;</span>        cin <span class="token operator">>></span> u <span class="token operator">>></span> v<span class="token punctuation">;</span>        <span class="token function">add</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">add</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> u<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">dfs1</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">dfs2</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">build</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>m<span class="token operator">--</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> op<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">;</span>        cin <span class="token operator">>></span> op <span class="token operator">>></span> x<span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>op <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            cin <span class="token operator">>></span> y <span class="token operator">>></span> z<span class="token punctuation">;</span>            <span class="token function">modifyRange</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>op <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            cin <span class="token operator">>></span> y<span class="token punctuation">;</span>            cout <span class="token operator">&lt;&lt;</span> <span class="token function">queryRange</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>op <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            cin <span class="token operator">>></span> z<span class="token punctuation">;</span>            <span class="token function">modifySon</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">else</span>             cout <span class="token operator">&lt;&lt;</span> <span class="token function">querySon</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// cin >> t;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å›¾è®º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ ‘é“¾å‰–åˆ† </tag>
            
            <tag> DFS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker|å¸¸ç”¨å‘½ä»¤</title>
      <link href="/p/1146830909.html"/>
      <url>/p/1146830909.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>å°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ°dockerç”¨æˆ·ç»„</p><p>ä¸ºäº†é¿å…æ¯æ¬¡ä½¿ç”¨dockerå‘½ä»¤éƒ½éœ€è¦åŠ ä¸Šsudoæƒé™ï¼Œå¯ä»¥å°†å½“å‰ç”¨æˆ·åŠ å…¥å®‰è£…ä¸­è‡ªåŠ¨åˆ›å»ºçš„dockerç”¨æˆ·ç»„ï¼ˆå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼‰ï¼š</p><p><code>sudo usermod -aG docker $USER</code></p><p>æ‰§è¡Œå®Œæ­¤æ“ä½œåï¼Œéœ€è¦é€€å‡ºæœåŠ¡å™¨ï¼Œå†é‡æ–°ç™»å½•å›æ¥ï¼Œæ‰å¯ä»¥çœå»sudoæƒé™ã€‚</p></blockquote><h1 id="é•œåƒï¼ˆimagesï¼‰"><a href="#é•œåƒï¼ˆimagesï¼‰" class="headerlink" title="é•œåƒï¼ˆimagesï¼‰"></a>é•œåƒï¼ˆimagesï¼‰</h1><p><code>docker pull ubuntu:20.04</code>ï¼šæ‹‰å–ä¸€ä¸ªé•œåƒ</p><p><code>docker images</code>ï¼šåˆ—å‡ºæœ¬åœ°æ‰€æœ‰é•œåƒ</p><p><code>docker image rm ubuntu:20.04 æˆ– docker rmi ubuntu:20.04</code>ï¼šåˆ é™¤é•œåƒubuntu:20.04</p><p><code>docker [container] commit CONTAINER IMAGE_NAME:TAG</code>ï¼šåˆ›å»ºæŸä¸ªcontainerçš„é•œåƒ</p><p><code>docker save -o ubuntu_20_04.tar ubuntu:20.04</code>ï¼šå°†é•œåƒubuntu:20.04å¯¼å‡ºåˆ°æœ¬åœ°æ–‡ä»¶ubuntu_20_04.tarä¸­</p><p><code>docker load -i ubuntu_20_04.tar</code>ï¼šå°†é•œåƒubuntu:20.04ä»æœ¬åœ°æ–‡ä»¶ubuntu_20_04.tarä¸­åŠ è½½å‡ºæ¥</p><h1 id="å®¹å™¨ï¼ˆcontainerï¼‰"><a href="#å®¹å™¨ï¼ˆcontainerï¼‰" class="headerlink" title="å®¹å™¨ï¼ˆcontainerï¼‰"></a>å®¹å™¨ï¼ˆcontainerï¼‰</h1><p><code>docker [container] create -it ubuntu:20.04</code>ï¼šåˆ©ç”¨é•œåƒubuntu:20.04åˆ›å»ºä¸€ä¸ªå®¹å™¨ã€‚</p><p><code>docker ps -a</code>ï¼šæŸ¥çœ‹æœ¬åœ°çš„æ‰€æœ‰å®¹å™¨</p><p><code>docker [container] start CONTAINER</code>ï¼šå¯åŠ¨å®¹å™¨</p><p><code>docker [container] stop CONTAINER</code>ï¼šåœæ­¢å®¹å™¨</p><p><code>docker [container] restart CONTAINER</code>ï¼šé‡å¯å®¹å™¨</p><p><code>docker [contaienr] run -itd ubuntu:20.04</code>ï¼šåˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªå®¹å™¨</p><p><code>docker [container] attach CONTAINER</code>ï¼šè¿›å…¥å®¹å™¨ï¼Œå…ˆæŒ‰Ctrl-pï¼Œå†æŒ‰Ctrl-qå¯ä»¥æŒ‚èµ·å®¹å™¨</p><p><code>docker [container] exec CONTAINER COMMAND</code>ï¼šåœ¨å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤</p><p><code>docker [container] rm CONTAINER</code>ï¼šåˆ é™¤å®¹å™¨</p><p><code>docker container prune</code>ï¼šåˆ é™¤æ‰€æœ‰å·²åœæ­¢çš„å®¹å™¨</p><p><code>docker export -o xxx.tar CONTAINER</code>ï¼šå°†å®¹å™¨CONTAINERå¯¼å‡ºåˆ°æœ¬åœ°æ–‡ä»¶xxx.tarä¸­</p><p><code>docker import xxx.tar image_name:tag</code>ï¼šå°†æœ¬åœ°æ–‡ä»¶xxx.tarå¯¼å…¥æˆé•œåƒï¼Œå¹¶å°†é•œåƒå‘½åä¸ºimage_name:tag</p><p><code>docker export/import</code>ä¸<code>docker save/load</code>çš„åŒºåˆ«ï¼š</p><ul><li><p>export/importä¼šä¸¢å¼ƒå†å²è®°å½•å’Œå…ƒæ•°æ®ä¿¡æ¯ï¼Œä»…ä¿å­˜å®¹å™¨å½“æ—¶çš„å¿«ç…§çŠ¶æ€</p></li><li><p>save/loadä¼šä¿å­˜å®Œæ•´è®°å½•ï¼Œä½“ç§¯æ›´å¤§</p></li></ul><p><code>docker top CONTAINER</code>ï¼šæŸ¥çœ‹æŸä¸ªå®¹å™¨å†…çš„æ‰€æœ‰è¿›ç¨‹</p><p><code>docker stats</code>ï¼šæŸ¥çœ‹æ‰€æœ‰å®¹å™¨çš„ç»Ÿè®¡ä¿¡æ¯ï¼ŒåŒ…æ‹¬CPUã€å†…å­˜ã€å­˜å‚¨ã€ç½‘ç»œç­‰ä¿¡æ¯</p><p><code>docker cp xxx CONTAINER:xxx</code> æˆ– <code>docker cp CONTAINER:xxx xxx</code>ï¼šåœ¨æœ¬åœ°å’Œå®¹å™¨é—´å¤åˆ¶æ–‡ä»¶</p><p><code>docker rename CONTAINER1 CONTAINER2</code>ï¼šé‡å‘½åå®¹å™¨</p><p><code>docker update CONTAINER --memory 500MB</code>ï¼šä¿®æ”¹å®¹å™¨é™åˆ¶</p><h1 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h1><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">scp</span> docker_1_0.tar server_name  <span class="token comment" spellcheck="true"># å°†é•œåƒä¸Šä¼ åˆ°è‡ªå·±ç§Ÿçš„äº‘ç«¯æœåŠ¡å™¨</span><span class="token function">ssh</span> server_name  <span class="token comment" spellcheck="true"># ç™»å½•è‡ªå·±çš„äº‘ç«¯æœåŠ¡å™¨</span>docker load -i docker_1_0.tar  <span class="token comment" spellcheck="true"># å°†é•œåƒåŠ è½½åˆ°æœ¬åœ°</span>docker run -p 20000:22 --name my_docker_server -itd docker:1.0  <span class="token comment" spellcheck="true"># åˆ›å»ºå¹¶è¿è¡Œdocker:1.0é•œåƒ, 20000ç«¯å£æ˜ å°„åˆ°22</span>docker attach my_docker_server  <span class="token comment" spellcheck="true"># è¿›å…¥åˆ›å»ºçš„dockerå®¹å™¨</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å¸¸ç”¨æ“ä½œ"><a href="#å¸¸ç”¨æ“ä½œ" class="headerlink" title="å¸¸ç”¨æ“ä½œ"></a>å¸¸ç”¨æ“ä½œ</h1><h2 id="æŸ¥è¯¢"><a href="#æŸ¥è¯¢" class="headerlink" title="æŸ¥è¯¢"></a>æŸ¥è¯¢</h2><pre class="line-numbers language-bash"><code class="language-bash">docker images <span class="token comment" spellcheck="true"># åˆ—å‡ºæœ¬åœ°æ‰€æœ‰é•œåƒ</span>docker <span class="token function">ps</span> -a <span class="token comment" spellcheck="true"># åˆ—å‡ºæœ¬åœ°æ‰€æœ‰å®¹å™¨</span>docker <span class="token function">ps</span> <span class="token comment" spellcheck="true"># åˆ—å‡ºè¿è¡Œä¸­çš„å®¹å™¨</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="é•œåƒæ“ä½œ"><a href="#é•œåƒæ“ä½œ" class="headerlink" title="é•œåƒæ“ä½œ"></a>é•œåƒæ“ä½œ</h2><pre class="line-numbers language-bash"><code class="language-bash">docker pull ubuntu:20.04 <span class="token comment" spellcheck="true"># æ‹‰å–ä¸€ä¸ªé•œåƒ</span>docker image <span class="token function">rm</span> ubuntu:20.04 <span class="token comment" spellcheck="true"># åˆ é™¤ä¸€ä¸ªé•œåƒ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="å®¹å™¨æ“ä½œ"><a href="#å®¹å™¨æ“ä½œ" class="headerlink" title="å®¹å™¨æ“ä½œ"></a>å®¹å™¨æ“ä½œ</h2><pre class="line-numbers language-bash"><code class="language-bash">docker container start CONTAINER <span class="token comment" spellcheck="true">#å¯åŠ¨å®¹å™¨</span>docker container stop CONTAINER <span class="token comment" spellcheck="true">#åœæ­¢å®¹å™¨</span>docker container attach CONTAINER <span class="token comment" spellcheck="true">#è¿›å…¥å®¹å™¨ï¼Œå…ˆæŒ‰Ctrl-pï¼Œå†æŒ‰Ctrl-qå¯ä»¥æŒ‚èµ·å®¹å™¨(å®¹å™¨å¿…é¡»å¯åŠ¨æ‰å¯è¿›å…¥)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="é•œåƒä¸å®¹å™¨æ“ä½œ"><a href="#é•œåƒä¸å®¹å™¨æ“ä½œ" class="headerlink" title="é•œåƒä¸å®¹å™¨æ“ä½œ"></a>é•œåƒä¸å®¹å™¨æ“ä½œ</h2><pre class="line-numbers language-bash"><code class="language-bash">docker container create -it ubuntu:20.04 name <span class="token comment" spellcheck="true"># åˆ©ç”¨é•œåƒubuntu:20.04åˆ›å»ºä¸€ä¸ªåä¸ºnameçš„å®¹å™¨</span>docker container commit CONTAINER IMAGE_NAME:TAG <span class="token comment" spellcheck="true">#åˆ›å»ºæŸä¸ªcontainerçš„é•œåƒ</span>docker run -p 20000:22 --name NAME -itd docker:1.0  <span class="token comment" spellcheck="true"># åˆ©ç”¨docker:1.0é•œåƒåˆ›å»ºä¸€ä¸ªåä¸ºNAMEçš„å®¹å™¨å¹¶è¿è¡Œå®¹å™¨, å¹¶å°†ä¸»æœº20000ç«¯å£æ˜ å°„åˆ°å®¹å™¨22</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git|è¯¦è§£|å‘½ä»¤</title>
      <link href="/p/1843856130.html"/>
      <url>/p/1843856130.html</url>
      
        <content type="html"><![CDATA[<h1 id="Gitå‘½ä»¤-è¯¦è§£"><a href="#Gitå‘½ä»¤-è¯¦è§£" class="headerlink" title="Gitå‘½ä»¤ | è¯¦è§£"></a>Gitå‘½ä»¤ | è¯¦è§£</h1><h1 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h1><p>Gitæ˜¯åŸºäºæ ‘è¿›è¡Œç»´æŠ¤çš„ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªå†å²ç‰ˆæœ¬ï¼Œå¯ä»¥è¿›è¡Œä»£ç ç®¡ç†ã€‚</p><p><img src="1843856130/webp.webp" alt="Gitå›¾ç¤º"></p><blockquote><p>å·¥ä½œåŒºï¼ˆWorkspaceï¼‰ </p><p>æš‚å­˜åŒºï¼ˆIndex / Stageï¼‰  </p><p>æœ¬åœ°ä»“åº“ï¼ˆRepositoryï¼‰  </p><p>è¿œç¨‹ä»“åº“ï¼ˆRemoteï¼‰</p></blockquote><h1 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h1><p><code>git config [--global] user.name xxx</code>ï¼šè®¾ç½®å…¨å±€ç”¨æˆ·åï¼Œä¿¡æ¯è®°å½•åœ¨<code>~/.gitconfig</code>æ–‡ä»¶ä¸­</p><p><code>git config [--global] user.email xxx@xxx.com</code>ï¼šè®¾ç½®å…¨å±€é‚®ç®±åœ°å€ï¼Œä¿¡æ¯è®°å½•åœ¨<code>~/.gitconfig</code>æ–‡ä»¶ä¸­</p><p><code>git init</code>ï¼šå°†å½“å‰ç›®å½•é…ç½®æˆgitä»“åº“ï¼Œä¿¡æ¯è®°å½•åœ¨éšè—çš„<code>.git</code>æ–‡ä»¶å¤¹ä¸­</p><p><code>git status</code>ï¼šæ˜¾ç¤ºæœ‰å˜æ›´çš„æ–‡ä»¶</p><p><code>git add .</code>ï¼šå°†å½“å‰å·¥ä½œåŒºçš„æ‰€æœ‰æ–‡ä»¶çš„ä¿®æ”¹ä¿¡æ¯åŠ å…¥<strong>æš‚å­˜åŒº</strong></p><p><code>git log</code>ï¼šæŸ¥çœ‹å½“å‰åˆ†æ”¯çš„æ‰€æœ‰ç‰ˆæœ¬</p><p><code>git remote add origin git@github.com:XXX/XXX.git</code>ï¼šå°†æœ¬åœ°ä»“åº“å…³è”åˆ°è¿œç¨‹ä»“åº“</p><p><code>git clone git@github.com:XXX/XXX.git</code>ï¼šå°†è¿œç¨‹ä»“åº“XXXä¸‹è½½åˆ°å½“å‰ç›®å½•ä¸‹</p><p><code>git branch --set-upstream-to=origin/branch_name1 branch_name2</code>ï¼šå°†è¿œç¨‹çš„branch_name1åˆ†æ”¯ä¸æœ¬åœ°çš„branch_name2åˆ†æ”¯å¯¹åº”</p><p><code>git push -u</code> ï¼ˆç¬¬ä¸€æ¬¡éœ€è¦-uä»¥åä¸éœ€è¦ï¼‰ï¼šå°†å½“å‰åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä»“åº“</p><p><code>git pull</code>ï¼šå°†è¿œç¨‹ä»“åº“çš„å½“å‰åˆ†æ”¯ä¸æœ¬åœ°ä»“åº“çš„å½“å‰åˆ†æ”¯åˆå¹¶</p><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><p>Gitçš„è®¾ç½®æ–‡ä»¶ä¸º<code>.gitconfig</code>ï¼Œå®ƒå¯ä»¥åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼ˆå…¨å±€é…ç½®ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼ˆé¡¹ç›®é…ç½®ï¼‰ã€‚</p><p><code>git init</code>ï¼šå°†å½“å‰ç›®å½•é…ç½®æˆgitä»“åº“ï¼Œä¿¡æ¯è®°å½•åœ¨éšè—çš„<code>.git</code>æ–‡ä»¶å¤¹ä¸­</p><p><code>git config --list</code> : æ˜¾ç¤ºå½“å‰çš„Gité…ç½®</p><p><code>git config -e [--global]</code> : ç¼–è¾‘Gité…ç½®æ–‡ä»¶</p><p><code>git config [--global] user.name xxx</code>ï¼šè®¾ç½®å…¨å±€ç”¨æˆ·åï¼Œä¿¡æ¯è®°å½•åœ¨<code>~/.gitconfig</code>æ–‡ä»¶ä¸­</p><p><code>git config [--global] user.email xxx@xxx.com</code>ï¼šè®¾ç½®å…¨å±€é‚®ç®±åœ°å€ï¼Œä¿¡æ¯è®°å½•åœ¨<code>~/.gitconfig</code>æ–‡ä»¶ä¸­</p><p><code>git config --global init.defaultBranch &lt;defaultBranch&gt;</code>ï¼šé…ç½®åˆå§‹é»˜è®¤çš„åˆ†æ”¯å</p><h1 id="å·¥ä½œåŒº"><a href="#å·¥ä½œåŒº" class="headerlink" title="å·¥ä½œåŒº"></a>å·¥ä½œåŒº</h1><p><code>git status</code>ï¼šæ˜¾ç¤ºæœ‰å˜æ›´çš„æ–‡ä»¶</p><p><code>git restore XXX</code> : å°†å·¥ä½œåŒºçš„XXXæ–‡ä»¶çš„ä¿®æ”¹ï¼ˆè¯¥ä¿®æ”¹æœªæ·»åŠ åˆ°æš‚å­˜åŒºï¼‰æ¢å¤</p><p><code>git add XX</code>ï¼šå°†XXæ–‡ä»¶çš„ <strong>ä¿®æ”¹ä¿¡æ¯</strong> æ·»åŠ åˆ°<strong>æš‚å­˜åŒº</strong></p><p><code>git add .</code>ï¼šå°†å½“å‰å·¥ä½œåŒºçš„æ‰€æœ‰æ–‡ä»¶çš„ä¿®æ”¹ä¿¡æ¯åŠ å…¥<strong>æš‚å­˜åŒº</strong></p><p><code>git rm [file1] [file2] ...</code> : åˆ é™¤å·¥ä½œåŒºæ–‡ä»¶ï¼Œå¹¶æŠŠè¿™æ¬¡åˆ é™¤åŠ å…¥åˆ°æš‚å­˜åŒº</p><p><code>git diff XX</code>ï¼šæŸ¥çœ‹XXæ–‡ä»¶ç›¸å¯¹äºæš‚å­˜åŒºä¿®æ”¹äº†å“ªäº›å†…å®¹</p><p><code>git checkout â€” XX</code>æˆ–<code>git restore XX</code>ï¼šå°†XXæ–‡ä»¶å°šæœªåŠ å…¥æš‚å­˜åŒºçš„ä¿®æ”¹å…¨éƒ¨æ’¤é”€</p><blockquote><p>æ›´å¤šæ’¤é”€æ“ä½œè§ä¸‹æ–‡ ã€æ’¤é”€å›é€€ã€‘</p></blockquote><h1 id="æš‚å­˜åŒº"><a href="#æš‚å­˜åŒº" class="headerlink" title="æš‚å­˜åŒº"></a>æš‚å­˜åŒº</h1><p><code>git rm --cached XX</code>ï¼šå°†æ–‡ä»¶XXä»æš‚å­˜åŒºä¸­åˆ æ‰ï¼Œåœæ­¢è¿½è¸ªæŒ‡å®šæ–‡ä»¶ï¼Œä½†è¯¥æ–‡ä»¶ä¼šä¿ç•™åœ¨å·¥ä½œåŒº</p><p><code>git restore --staged XXX</code> ï¼š å°†<strong>æš‚å­˜åŒº</strong>çš„XXXæ¸…ç©ºï¼Œå·¥ä½œåŒº<strong>ä¸å˜</strong></p><p><code>git commit -m &quot;ç»™è‡ªå·±çœ‹çš„å¤‡æ³¨ä¿¡æ¯&quot;</code>ï¼šå°†<strong>æš‚å­˜åŒº</strong>çš„å†…å®¹æäº¤åˆ°å½“å‰åˆ†æ”¯ï¼ˆå¯æŒä¹…åŒ–ï¼‰</p><p><code>git checkout [file]</code>: æ¢å¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°å·¥ä½œåŒºï¼ˆå·¥ä½œåŒºæ–‡ä»¶å‘ç”Ÿæ”¹å˜ï¼‰</p><p><code>git reset [file]</code> : é‡ç½®æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶ï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´ï¼Œä½†å·¥ä½œåŒºä¸å˜</p><blockquote><p>æ›´å¤šæ’¤é”€æ“ä½œè§ä¸‹æ–‡ ã€æ’¤é”€å›é€€ã€‘</p></blockquote><h1 id="åˆ†æ”¯"><a href="#åˆ†æ”¯" class="headerlink" title="åˆ†æ”¯"></a>åˆ†æ”¯</h1><ul><li>æŸ¥çœ‹åˆ†æ”¯</li></ul><p><code>git branch</code>: æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯</p><p><code>git branch -r</code> : åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯</p><p><code>git branch -a</code> ï¼š åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯</p><ul><li>åˆ é™¤åˆ†æ”¯</li></ul><p><code>git branch -d branch_name</code>ï¼šåˆ é™¤æœ¬åœ°çš„branch_nameåˆ†æ”¯</p><p><code>git push origin --delete [branch-name]</code> ï¼š åˆ é™¤è¿œç¨‹åˆ†æ”¯</p><ul><li>åˆ‡æ¢åˆ†æ”¯</li></ul><p><code>git checkout branch_name</code>ï¼šåˆ‡æ¢åˆ°branch_nameè¿™ä¸ªåˆ†æ”¯</p><p><code>git checkout -b branch_name</code>ï¼šåˆ›å»ºå¹¶åˆ‡æ¢åˆ°branch_nameè¿™ä¸ªåˆ†æ”¯</p><h2 id="æœ¬åœ°åˆ†æ”¯"><a href="#æœ¬åœ°åˆ†æ”¯" class="headerlink" title="æœ¬åœ°åˆ†æ”¯"></a>æœ¬åœ°åˆ†æ”¯</h2><p><code>git branch</code>: åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯</p><p><code>git branch branch_name</code>ï¼šåˆ›å»ºæ–°åˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯</p><p><code>git checkout branch_name</code>ï¼šåˆ‡æ¢åˆ°branch_nameè¿™ä¸ªåˆ†æ”¯ï¼Œå¹¶æ›´æ–°å·¥ä½œåŒº</p><p><code>git checkout -b branch_name</code>ï¼šåˆ›å»ºå¹¶åˆ‡æ¢åˆ°branch_nameè¿™ä¸ªåˆ†æ”¯</p><p><code>git branch -m oldBranchName newBranchName</code> ï¼š ä¿®æ”¹æœ¬åœ°åˆ†æ”¯åå­—</p><p><code>git merge branch_name</code>ï¼šå°†åˆ†æ”¯branch_nameåˆå¹¶åˆ°å½“å‰åˆ†æ”¯ä¸Š</p><p><code>git checkout -</code>ï¼š åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯</p><p><code>git cherry-pick [commit]</code> ï¼š é€‰æ‹©ä¸€ä¸ªcommitï¼Œåˆå¹¶è¿›å½“å‰åˆ†æ”¯</p><p><code>git branch -d branch_name</code>ï¼šåˆ é™¤æœ¬åœ°ä»“åº“çš„branch_nameåˆ†æ”¯</p><h2 id="è¿œç¨‹åˆ†æ”¯"><a href="#è¿œç¨‹åˆ†æ”¯" class="headerlink" title="è¿œç¨‹åˆ†æ”¯"></a>è¿œç¨‹åˆ†æ”¯</h2><p><code>git branch -r</code> : åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯</p><p><code>git branch [branch] [commit]</code>ï¼š æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŒ‡å®šcommit</p><p><code>git push origin --delete [branch-name]</code> ï¼š åˆ é™¤è¿œç¨‹åˆ†æ”¯</p><p><code>git branch -dr [remote/branch]</code> ï¼š åˆ é™¤è¿œç¨‹åˆ†æ”¯</p><h2 id="æœ¬åœ°å’Œè¿œç¨‹"><a href="#æœ¬åœ°å’Œè¿œç¨‹" class="headerlink" title="æœ¬åœ°å’Œè¿œç¨‹"></a>æœ¬åœ°å’Œè¿œç¨‹</h2><p><code>git branch -a</code> ï¼š åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯</p><p><code>git branch --track [branch] [remote-branch]</code> ï¼š æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯å»ºç«‹è¿½è¸ªå…³ç³»</p><p><code>git branch --set-upstream [branch] [remote-branch]</code> ï¼š å»ºç«‹è¿½è¸ªå…³ç³»ï¼Œåœ¨ç°æœ‰åˆ†æ”¯ä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ä¹‹é—´ ï¼ˆç°åœ¨å·²ç»ä¸æ”¯æŒï¼‰</p><p><code>git branch --set-upstream-to=origin/branch_name1 branch_name2</code>ï¼šå°†è¿œç¨‹çš„branch_name1åˆ†æ”¯ä¸æœ¬åœ°çš„branch_name2åˆ†æ”¯å¯¹åº”</p><h1 id="ä¿¡æ¯æŸ¥çœ‹"><a href="#ä¿¡æ¯æŸ¥çœ‹" class="headerlink" title="ä¿¡æ¯æŸ¥çœ‹"></a>ä¿¡æ¯æŸ¥çœ‹</h1><p><code>git log</code>ï¼šæŸ¥çœ‹å½“å‰åˆ†æ”¯çš„æ‰€æœ‰ç‰ˆæœ¬</p><p><code>git reflog</code>ï¼šæŸ¥çœ‹HEADæŒ‡é’ˆçš„ç§»åŠ¨å†å²ï¼ˆåŒ…æ‹¬è¢«å›æ»šçš„ç‰ˆæœ¬ï¼‰</p><p><code>git status</code> : æ˜¾ç¤ºæœ‰å˜æ›´çš„æ–‡ä»¶</p><p><code>git log --stat</code> : æ˜¾ç¤ºcommitå†å²ï¼Œä»¥åŠæ¯æ¬¡commitå‘ç”Ÿå˜æ›´çš„æ–‡ä»¶</p><p><code>git log -S [keyword]</code>: æœç´¢æäº¤å†å²ï¼Œæ ¹æ®å…³é”®è¯</p><p><code>git log [tag] HEAD --pretty=format:%s</code> : æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œæ¯ä¸ªcommitå æ®ä¸€è¡Œ</p><p><code>git log [tag] HEAD --grep feature</code> : æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œå…¶â€æäº¤è¯´æ˜â€å¿…é¡»ç¬¦åˆæœç´¢æ¡ä»¶</p><p><code>git log --follow [file]</code>: æ˜¾ç¤ºæŸä¸ªæ–‡ä»¶çš„ç‰ˆæœ¬å†å²ï¼ŒåŒ…æ‹¬æ–‡ä»¶æ”¹å</p><p><code>git whatchanged [file]</code> : æ˜¾ç¤ºæŸä¸ªæ–‡ä»¶çš„ç‰ˆæœ¬å†å²ï¼ŒåŒ…æ‹¬æ–‡ä»¶æ”¹å</p><p><code>git log -p [file]</code> : æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶ç›¸å…³çš„æ¯ä¸€æ¬¡diff</p><p><code>git log -5 --pretty --oneline</code>: æ˜¾ç¤ºè¿‡å»5æ¬¡æäº¤</p><p><code>git shortlog -sn</code> : æ˜¾ç¤ºæ‰€æœ‰æäº¤è¿‡çš„ç”¨æˆ·ï¼ŒæŒ‰æäº¤æ¬¡æ•°æ’åº</p><p><code>git blame [file]</code> : æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶æ˜¯ä»€ä¹ˆäººåœ¨ä»€ä¹ˆæ—¶é—´ä¿®æ”¹è¿‡</p><p><code>git diff</code> : æ˜¾ç¤ºæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„å·®å¼‚</p><p><code>git diff --cached [file]</code> : æ˜¾ç¤ºæš‚å­˜åŒºå’Œä¸Šä¸€ä¸ªcommitçš„å·®å¼‚</p><p><code>git diff HEAD</code>: æ˜¾ç¤ºå·¥ä½œåŒºä¸å½“å‰åˆ†æ”¯æœ€æ–°commitä¹‹é—´çš„å·®å¼‚</p><p><code>git diff [first-branch]...[second-branch]</code>: æ˜¾ç¤ºä¸¤æ¬¡æäº¤ä¹‹é—´çš„å·®å¼‚</p><p><code>git diff --shortstat &quot;@{0 day ago}&quot;</code> : æ˜¾ç¤ºä»Šå¤©ä½ å†™äº†å¤šå°‘è¡Œä»£ç </p><p><code>git show [commit]</code> : æ˜¾ç¤ºæŸæ¬¡æäº¤çš„å…ƒæ•°æ®å’Œå†…å®¹å˜åŒ–</p><p><code>git show --name-only [commit]</code>: æ˜¾ç¤ºæŸæ¬¡æäº¤å‘ç”Ÿå˜åŒ–çš„æ–‡ä»¶</p><p><code>git show [commit]:[filename]</code> : æ˜¾ç¤ºæŸæ¬¡æäº¤æ—¶ï¼ŒæŸä¸ªæ–‡ä»¶çš„å†…å®¹</p><h1 id="è¿œç¨‹åŒæ­¥"><a href="#è¿œç¨‹åŒæ­¥" class="headerlink" title="è¿œç¨‹åŒæ­¥"></a>è¿œç¨‹åŒæ­¥</h1><p><code>git remote add origin git@github.com:xxx/XXX.git</code>ï¼šå°†æœ¬åœ°ä»“åº“å…³è”åˆ°è¿œç¨‹ä»“åº“</p><p><code>git push -u</code> ï¼ˆç¬¬ä¸€æ¬¡éœ€è¦-uä»¥åä¸éœ€è¦ï¼‰ï¼šå°†å½“å‰åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä»“åº“</p><p><code>git push origin branch_name</code>ï¼šå°†æœ¬åœ°çš„æŸä¸ªåˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä»“åº“</p><p><code>git clone git@github.com:anda522/XXX.git</code>ï¼šå°†è¿œç¨‹ä»“åº“XXXä¸‹è½½åˆ°å½“å‰ç›®å½•ä¸‹</p><p><code>git pull</code>ï¼šå°†è¿œç¨‹ä»“åº“çš„å½“å‰åˆ†æ”¯ä¸æœ¬åœ°ä»“åº“çš„å½“å‰åˆ†æ”¯åˆå¹¶</p><p><code>git pull origin branch_name</code>ï¼šå°†è¿œç¨‹ä»“åº“çš„branch_nameåˆ†æ”¯ä¸æœ¬åœ°ä»“åº“çš„å½“å‰åˆ†æ”¯åˆå¹¶</p><p><code>git push --set-upstream origin branch_name</code>ï¼šè®¾ç½®æœ¬åœ°çš„branch_nameåˆ†æ”¯å¯¹åº”è¿œç¨‹ä»“åº“çš„branch_nameåˆ†æ”¯</p><p><code>git push -d origin branch_name</code>ï¼šåˆ é™¤è¿œç¨‹ä»“åº“çš„branch_nameåˆ†æ”¯</p><p><code>git checkout -t origin/branch_name</code>: å°†è¿œç¨‹çš„branch_nameåˆ†æ”¯æ‹‰å–åˆ°æœ¬åœ°</p><h1 id="æ’¤é”€å›é€€"><a href="#æ’¤é”€å›é€€" class="headerlink" title="æ’¤é”€å›é€€"></a>æ’¤é”€å›é€€</h1><p><code>git reset --hard</code>: é‡ç½®æš‚å­˜åŒºä¸å·¥ä½œåŒºï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´</p><p><code>git reset --hard HEAD^</code> æˆ– <code>git reset --hard HEAD~</code>ï¼šå°†ä»£ç åº“å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬</p><p><code>git reset --hard HEAD^^</code>ï¼šå¾€ä¸Šå›æ»šä¸¤æ¬¡ï¼Œä»¥æ­¤ç±»æ¨</p><p><code>git reset --hard HEAD~100</code>ï¼šå¾€ä¸Šå›æ»š100ä¸ªç‰ˆæœ¬</p><p><code>git reset --hard ç‰ˆæœ¬å·</code>ï¼šå›æ»šåˆ°æŸä¸€ç‰¹å®šç‰ˆæœ¬</p><p><code>git stash</code>ï¼šå°†å·¥ä½œåŒºå’Œæš‚å­˜åŒºä¸­å°šæœªæäº¤çš„ä¿®æ”¹å­˜å…¥æ ˆä¸­</p><p><code>git stash apply</code>ï¼šå°†æ ˆé¡¶å­˜å‚¨çš„ä¿®æ”¹æ¢å¤åˆ°å½“å‰åˆ†æ”¯ï¼Œä½†ä¸åˆ é™¤æ ˆé¡¶å…ƒç´ </p><p><code>git stash drop</code>ï¼šåˆ é™¤æ ˆé¡¶å­˜å‚¨çš„ä¿®æ”¹</p><p><code>git stash pop</code>ï¼šå°†æ ˆé¡¶å­˜å‚¨çš„ä¿®æ”¹æ¢å¤åˆ°å½“å‰åˆ†æ”¯ï¼ŒåŒæ—¶åˆ é™¤æ ˆé¡¶å…ƒç´ </p><p><code>git stash list</code>ï¼šæŸ¥çœ‹æ ˆä¸­æ‰€æœ‰å…ƒç´ </p><p><code>git checkout [file]</code>: æ¢å¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°å·¥ä½œåŒº</p><p><code>git checkout [commit] [file]</code> : æ¢å¤æŸä¸ªcommitçš„æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒºå’Œå·¥ä½œåŒº</p><p><code>git checkout .</code> : æ¢å¤æš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶åˆ°å·¥ä½œåŒº</p><p><code>git reset [file]</code> : é‡ç½®æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶ï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´ï¼Œä½†å·¥ä½œåŒºä¸å˜</p><p><code>git reset [commit]</code>: é‡ç½®å½“å‰åˆ†æ”¯çš„æŒ‡é’ˆä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºï¼Œä½†å·¥ä½œåŒºä¸å˜</p><p><code>git reset --hard [commit]</code> : é‡ç½®å½“å‰åˆ†æ”¯çš„HEADä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºå’Œå·¥ä½œåŒºï¼Œä¸æŒ‡å®šcommitä¸€è‡´</p><p><code>git reset --keep [commit]</code> : é‡ç½®å½“å‰HEADä¸ºæŒ‡å®šcommitï¼Œä½†ä¿æŒæš‚å­˜åŒºå’Œå·¥ä½œåŒºä¸å˜</p><p><code>git revert [commit]</code> : æ–°å»ºä¸€ä¸ªcommitï¼Œç”¨æ¥æ’¤é”€æŒ‡å®šcommitï¼Œåè€…çš„æ‰€æœ‰å˜åŒ–éƒ½å°†è¢«å‰è€…æŠµæ¶ˆï¼Œå¹¶ä¸”åº”ç”¨åˆ°å½“å‰åˆ†æ”¯</p><h1 id="åºåˆ—åŒ–æ“ä½œ"><a href="#åºåˆ—åŒ–æ“ä½œ" class="headerlink" title="åºåˆ—åŒ–æ“ä½œ"></a>åºåˆ—åŒ–æ“ä½œ</h1><h2 id="1-åŸºç¡€ä¸Šä¼ æ“ä½œ"><a href="#1-åŸºç¡€ä¸Šä¼ æ“ä½œ" class="headerlink" title="1 åŸºç¡€ä¸Šä¼ æ“ä½œ"></a>1 åŸºç¡€ä¸Šä¼ æ“ä½œ</h2><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">git</span> add <span class="token keyword">.</span><span class="token function">git</span> commit -m <span class="token string">"å¤‡æ³¨ä¿¡æ¯"</span><span class="token function">git</span> push<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="2-æ–°å»ºä»“åº“çš„åˆå§‹åŒ–æ“ä½œ"><a href="#2-æ–°å»ºä»“åº“çš„åˆå§‹åŒ–æ“ä½œ" class="headerlink" title="2 æ–°å»ºä»“åº“çš„åˆå§‹åŒ–æ“ä½œ"></a>2 æ–°å»ºä»“åº“çš„åˆå§‹åŒ–æ“ä½œ</h2><ol><li>è¿œç¨‹æ–°å»ºä»“åº“ï¼Œé»˜è®¤ä¸æ·»åŠ <code>README.md</code>æ–‡ä»¶</li><li>æ­¤æ—¶è¯·æ³¨æ„è¿œç¨‹ä»“åº“çš„ä¸»åˆ†æ”¯åä¸º<code>main</code>è¿˜æ˜¯<code>master</code></li><li>æœ¬åœ°æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ç”¨æ¥ä½œä¸ºä¸Šä¼ è¯¥è¿œç¨‹ä»“åº“çš„æ–‡ä»¶ï¼ˆæˆ–è€…ç”¨å·²å­˜åœ¨çš„æ–‡ä»¶å¤¹ä¹Ÿè¡Œï¼‰ï¼Œåœ¨è¯¥ç›®å½•ä¸‹ä½¿ç”¨<code>git init</code>å‘½ä»¤åˆå§‹åŒ–ä»“åº“</li><li>å°†æœ¬åœ°ä»“åº“ä¸»åˆ†æ”¯åå­—è®¾ä¸ºå’Œè¿œç«¯ä¸€æ ·ï¼Œä¾‹å¦‚<code>git branch -M main</code></li><li>å…³è”è¿œç¨‹ä»“åº“ï¼Œä¾‹å¦‚<code>git remote add origin https://github.com/anda522/bot.git</code></li><li>ä¸Šä¼ çš„æ“ä½œï¼š</li></ol><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">git</span> add <span class="token keyword">.</span><span class="token function">git</span> commit -m <span class="token string">"æäº¤ä»£ç çš„å¤‡æ³¨ä¿¡æ¯"</span><span class="token function">git</span> push <span class="token comment" spellcheck="true">#ï¼ˆæ­¤ä»£ç ä¸€èˆ¬ä¼šæŠ¥é”™ï¼‰</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>æŠ¥é”™åŸå› ï¼šæ–°å»ºä»“åº“æ—¶é»˜è®¤ä»“åº“ä¸ºç©ºï¼Œæ­¤æ—¶æ²¡æœ‰ä»»ä½•åˆ†æ”¯ï¼Œå¦‚æœæœ¬åœ°æœ‰åˆ†æ”¯éœ€è¦ä¸Šä¼ åˆ°è¿œç¨‹çš„ç›¸åŒçš„åˆ†æ”¯ä¸Šï¼Œéœ€è¦å°†è¿œç¨‹æ–°å»ºä¸€ä¸ªåˆ†æ”¯è¿›è¡Œpushæ“ä½œã€‚</p><p>æ•…ä»£ç å¯æ›´æ–°ä¸ºï¼š<code>git push --set-upstream origin main</code></p></blockquote><h2 id="3-æ–°å»ºdevåˆ†æ”¯å¹¶ä¸Šä¼ "><a href="#3-æ–°å»ºdevåˆ†æ”¯å¹¶ä¸Šä¼ " class="headerlink" title="3 æ–°å»ºdevåˆ†æ”¯å¹¶ä¸Šä¼ "></a>3 æ–°å»ºdevåˆ†æ”¯å¹¶ä¸Šä¼ </h2><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">git</span> checkout -b dev <span class="token comment" spellcheck="true"># æœ¬åœ°æ–°å»ºä¸€ä¸ªdevåˆ†æ”¯ï¼Œå¹¶ä¸”åˆ‡æ¢åˆ°devåˆ†æ”¯</span><span class="token function">git</span> push --set-upstream origin dev <span class="token comment" spellcheck="true"># æœ¬åœ°åœ¨devåˆ†æ”¯ï¼›éœ€è¦ä¸Šä¼ åœ¨devåˆ†æ”¯çš„æ“ä½œï¼›é»˜è®¤è¿œç«¯æ²¡æœ‰devåˆ†æ”¯ï¼Œè¿œç«¯å°†åˆ›å»ºä¸€ä¸ªdevåˆ†æ”¯å¹¶è¿›è¡Œpushæ“ä½œ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="4-åˆ é™¤ä¹…è¿œçš„æœªè¢«è¿½è¸ªçš„åˆ†æ”¯"><a href="#4-åˆ é™¤ä¹…è¿œçš„æœªè¢«è¿½è¸ªçš„åˆ†æ”¯" class="headerlink" title="4 åˆ é™¤ä¹…è¿œçš„æœªè¢«è¿½è¸ªçš„åˆ†æ”¯"></a>4 åˆ é™¤ä¹…è¿œçš„æœªè¢«è¿½è¸ªçš„åˆ†æ”¯</h2><p>æœ‰æ—¶å€™åˆ†æ”¯å·²ç»ä»è¿œç¨‹åˆ†æ”¯ä¸­åˆ é™¤ï¼Œä½†æ˜¯æœ¬åœ°åˆ†æ”¯å¹¶ä¸çŸ¥é“å½“å‰è¿™å‡ ä¸ªè¿œç¨‹åˆ†æ”¯æ˜¯å¦è¢«åˆ é™¤ï¼Œå¯ä»¥ä½¿ç”¨<code>git remote show origin</code>å‘½ä»¤æŸ¥çœ‹</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">git</span> remote show origin <span class="token comment" spellcheck="true">#  ä¼šå‡ºç°stale (use 'git remote prune' to remove)å­—æ ·</span><span class="token comment" spellcheck="true"># git branch -a è¿™ä¸ªå¯ä»¥çœ‹åˆ°è¿œç¨‹ä¸å­˜åœ¨çš„åˆ†æ”¯è¿˜èƒ½æ˜¾ç¤ºå‡ºæ¥</span><span class="token function">git</span> remote prune origin <span class="token comment" spellcheck="true"># åˆ é™¤æœªè¢«è¿½è¸ªçš„åˆ†æ”¯</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="5-æ‰“tag"><a href="#5-æ‰“tag" class="headerlink" title="5 æ‰“tag"></a>5 æ‰“tag</h2><ul><li>ä»¥æœ¬åœ°æœ€åä¸€ä¸ª<code>commit</code>åˆ›å»ºtag</li></ul><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">git</span> tag <span class="token operator">&lt;</span>tagName<span class="token operator">></span> <span class="token comment" spellcheck="true"># åŸºäºæœ¬åœ°æœ€åä¸€ä¸ªcommitåˆ›å»ºä¸€ä¸ªtag</span><span class="token function">git</span> push origin <span class="token operator">&lt;</span>tagName<span class="token operator">></span> <span class="token comment" spellcheck="true"># å°†tagæ¨é€åˆ°è¿œç¨‹ä»“åº“</span><span class="token function">git</span> push origin --tags <span class="token comment" spellcheck="true"># å°†æ‰€æœ‰tagæ¨é€åˆ°è¿œç¨‹ä»“åº“</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>ä»¥ç‰¹å®šçš„æäº¤ä¸ºtag</li></ul><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">git</span> log --pretty<span class="token operator">=</span>oneline <span class="token comment" spellcheck="true"># æŸ¥çœ‹å½“å‰åˆ†æ”¯çš„æäº¤å†å² é‡Œé¢åŒ…å« commit id</span><span class="token function">git</span> tag -a <span class="token operator">&lt;</span>tagName<span class="token operator">></span> <span class="token operator">&lt;</span>commitId<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li>æŸ¥çœ‹ä¿¡æ¯</li></ul><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">git</span> show <span class="token operator">&lt;</span>tagName<span class="token operator">></span> <span class="token comment" spellcheck="true"># æŸ¥çœ‹tagçš„è¯¦ç»†ä¿¡æ¯</span><span class="token function">git</span> tag <span class="token comment" spellcheck="true"># æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰tag</span><span class="token function">git</span> ls-remote --tag origin <span class="token comment" spellcheck="true"># æŸ¥çœ‹è¿œç¨‹tag</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>åˆ é™¤tag</li></ul><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">git</span> tag -d <span class="token operator">&lt;</span>tagName<span class="token operator">></span> <span class="token comment" spellcheck="true"># åˆ é™¤æœ¬åœ°tag</span><span class="token function">git</span> push origin :refs/tags/<span class="token operator">&lt;</span>tagName<span class="token operator">></span> <span class="token comment" spellcheck="true"># åˆ é™¤è¿œç¨‹tag</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li>å…¶ä»–</li></ul><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">git</span> tag -a <span class="token operator">&lt;</span>tagname<span class="token operator">></span> -m <span class="token string">"XXX..."</span> <span class="token comment" spellcheck="true"># æŒ‡å®šæ ‡ç­¾ä¿¡æ¯</span><span class="token function">git</span> tag -a v1.0 -m <span class="token string">"release 0.1.0 version"</span>  <span class="token comment" spellcheck="true"># åˆ›å»ºé™„æ³¨æ ‡ç­¾</span><span class="token function">git</span> checkout <span class="token punctuation">[</span>tagname<span class="token punctuation">]</span> <span class="token comment" spellcheck="true"># åˆ‡æ¢æ ‡ç­¾</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="6-git-fetchå’Œgit-pull"><a href="#6-git-fetchå’Œgit-pull" class="headerlink" title="6 git fetchå’Œgit pull"></a>6 git fetchå’Œgit pull</h2><ul><li><code>git fetch</code>ï¼šå°†è¿œç¨‹æ›´æ–°ä¿¡æ¯å…¨éƒ¨å–å›æœ¬åœ°</li></ul><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">git</span> fetch <span class="token operator">&lt;</span>è¿œç¨‹ä¸»æœºå<span class="token operator">></span> //è¿™ä¸ªå‘½ä»¤å°†æŸä¸ªè¿œç¨‹ä¸»æœºçš„æ›´æ–°å…¨éƒ¨å–å›æœ¬åœ°<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœåªæƒ³å–å›ç‰¹å®šåˆ†æ”¯ï¼Œå¯ä»¥æŒ‡å®šåˆ†æ”¯å</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">git</span> fetch <span class="token operator">&lt;</span>è¿œç¨‹ä¸»æœºå<span class="token operator">></span> <span class="token operator">&lt;</span>åˆ†æ”¯å<span class="token operator">></span> //æ³¨æ„ä¹‹é—´æœ‰ç©ºæ ¼<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¸¸è§å‘½ä»¤ï¼š</p><p>å–å›<code>origin</code> ä¸»æœºçš„<code>master</code> åˆ†æ”¯ï¼š</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">git</span> fetch origin master<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å–å›æ›´æ–°åä¼šè¿”å›ä¸€ä¸ª<code>FETCH_HEAD</code> ï¼ŒæŒ‡çš„æ˜¯æŸä¸ªbranchåœ¨æœåŠ¡å™¨ä¸Šçš„æœ€æ–°çŠ¶æ€ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æœ¬åœ°é€šè¿‡å®ƒæŸ¥çœ‹åˆšå–å›çš„æ›´æ–°ä¿¡æ¯ï¼š</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">git</span> log -p FETCH_HEAD<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°è¿”å›çš„ä¿¡æ¯åŒ…æ‹¬æ›´æ–°çš„æ–‡ä»¶åï¼Œæ›´æ–°çš„ä½œè€…å’Œæ—¶é—´ï¼Œä»¥åŠæ›´æ–°çš„ä»£ç ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™äº›ä¿¡æ¯æ¥åˆ¤æ–­æ˜¯å¦äº§ç”Ÿå†²çªï¼Œä»¥ç¡®å®šæ˜¯å¦å°†æ›´æ–°mergeåˆ°å½“å‰åˆ†æ”¯ã€‚ </p><ul><li><code>git pull</code>ï¼šæ‹‰å–å¹¶åˆå¹¶</li></ul><p>å¯ä»¥ç†è§£ä¸ºä¸¤ä¸ªè¿‡ç¨‹ï¼š</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">git</span> fetch origin master //ä»è¿œç¨‹ä¸»æœºçš„masteråˆ†æ”¯æ‹‰å–æœ€æ–°å†…å®¹ <span class="token function">git</span> merge FETCH_HEAD    //å°†æ‹‰å–ä¸‹æ¥çš„æœ€æ–°å†…å®¹åˆå¹¶åˆ°å½“å‰æ‰€åœ¨çš„åˆ†æ”¯ä¸­<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å®Œæ•´å‘½ä»¤ï¼šå°†è¿œç¨‹ä¸»æœºçš„æŸä¸ªåˆ†æ”¯çš„æ›´æ–°å–å›ï¼Œå¹¶ä¸æœ¬åœ°æŒ‡å®šçš„åˆ†æ”¯åˆå¹¶</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">git</span> pull <span class="token operator">&lt;</span>è¿œç¨‹ä¸»æœºå<span class="token operator">></span> <span class="token operator">&lt;</span>è¿œç¨‹åˆ†æ”¯å<span class="token operator">></span>:<span class="token operator">&lt;</span>æœ¬åœ°åˆ†æ”¯å<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœæ˜¯ä¸å½“å‰åˆ†æ”¯åˆå¹¶ï¼Œåˆ™å†’å·åé¢çš„å¯ä»¥çœç•¥ï¼Œä¾‹å¦‚ï¼š</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">git</span> pull origin master<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2021å¤§äºŒä¸ŠæœŸæœ«é¢˜ç›®å›é¡¾</title>
      <link href="/p/454636061.html"/>
      <url>/p/454636061.html</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡çŸ¥è¯†ç‚¹å‡ä¸ºä»ç½‘ç»œæˆ–å…¶ä»–åœ°æ–¹æœé›†æ•´ç†è€Œæ¥ï¼Œæåˆ°çš„ä¹ é¢˜å‡æ— ç­”æ¡ˆï¼Œå®Œå…¨ä¸å…·å¤‡æƒå¨æ€§è´¨ï¼Œä½œè€…ä¸å¯¹çœ‹æœ¬æ–‡é€ æˆçš„åæœè´Ÿè´£ï¼Œè¯·åˆç†å‚è€ƒã€‚</p><h1 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h1><p>æŒ‡ä»¤åŸºæœ¬éƒ½æ˜¯åŸºæœ¬æŒ‡ä»¤ï¼Œè¾“å…¥è¾“å‡ºæµï¼Œç»Ÿè®¡è¡Œæ•°ï¼Œå¤åˆ¶ï¼Œæ–‡ä»¶æƒé™ä¿®æ”¹ç­‰ç­‰<br>å¤§é¢˜ä¼šè€ƒswapåˆ†åŒºæ„å»ºçš„å…·ä½“æ­¥éª¤<br>è€ƒè½¯ç¡¬é“¾æ¥æ–‡ä»¶å¤åˆ¶æ–‡ä»¶å’Œæºæ–‡ä»¶çš„åŒºåˆ«<br>è„šæœ¬é¢˜æ˜¯å¯¹ä¸¤ä¸ªæ–‡ä»¶åˆ¤å­˜åœ¨ä¸å­˜åœ¨ï¼Œä¸å­˜åœ¨è¯¢é—®å»ºæ–‡ä»¶ä¸å»ºï¼Œåªæœ‰å½“ä¸¤ä¸ªæ–‡ä»¶æ—¶éƒ½å­˜åœ¨åˆå¹¶å¹¶æ’åº</p><h1 id="ç»„åŸ"><a href="#ç»„åŸ" class="headerlink" title="ç»„åŸ"></a>ç»„åŸ</h1><p><strong>å¤§é¢˜è€ƒçš„ä¸»è¦æ˜¯è¯¾åä¹ é¢˜å’Œè¯¾æœ¬ä¾‹é¢˜</strong></p><p><strong>é€‰æ‹©å¡«ç©º</strong><br>å¾®æŒ‡ä»¤å†…å®¹æ„Ÿè§‰æœ‰ç‚¹å¤š<br>å¡«ç©º</p><ul><li>å¸¦å®½è®¡ç®—ï¼Œé€Ÿåº¦è®¡ç®—</li></ul><p>è®¡ç®—</p><ul><li><p>è¡¥ç åŠ å‡æ³•ä»¥åŠåˆ¤æº¢å‡º</p></li><li><p>æ—¶é’Ÿå‘¨æœŸæœºå™¨å‘¨æœŸè®¡ç®—å¸¦å®½</p></li><li><p>å‘½ä¸­ç‡ï¼Œæ•ˆç‡ï¼Œå¹³å‡è®¿å­˜æ—¶é—´</p></li><li><p>è®¡ç®—cacheæ˜ å°„ä¸»å­˜åœ°å€ä½æ•°è®¡ç®—ï¼Œå››è·¯ç»„ç›¸è¿è®¡ç®—</p></li><li><p>ä¸€åœ°å€æŒ‡ä»¤æ ¼å¼è®¾è®¡ï¼Œæ“ä½œæ–¹å¼ç§ç±»æ•°ç»™äº†ï¼Œå¯»å€ç‰¹å¾å‡ ç§æœ‰äº†ï¼Œè®¾è®¡åœ°å€ï¼Œè®¡ç®—ç›´æ¥å¯»å€èŒƒå›´å’Œé—´æ¥å¯»å€èŒƒå›´</p></li></ul><p>ç»¼åˆ</p><ul><li>å±è”½å­—è®¾è®¡ï¼Œç”»å¤šçº§ä¸­æ–­å›¾</li><li>CPUå’Œå­˜å‚¨å™¨è¿æ¥ç”»å›¾</li></ul><h1 id="æ¯›æ¦‚"><a href="#æ¯›æ¦‚" class="headerlink" title="æ¯›æ¦‚"></a>æ¯›æ¦‚</h1><ul><li>æ–°æ°‘ä¸»ä¸»ä¹‰é©å‘½å’Œç¤¾ä¼šä¸»ä¹‰é©å‘½</li><li>å¯¹æ¯›æ³½ä¸œæ€æƒ³æ´»çš„çµé­‚çš„ç†è§£</li><li>å¯¹å»ºå…šç²¾ç¥çš„ç†è§£</li><li>æ–°æ°‘ä¸»ä¸»ä¹‰é©å‘½å’Œç¤¾ä¼šä¸»ä¹‰é©å‘½æ—¶æœŸå…šæ˜¯å¦‚ä½•å»ºè®¾å‘å±•çš„</li></ul><h1 id="è¿‘ä»£å²"><a href="#è¿‘ä»£å²" class="headerlink" title="è¿‘ä»£å²"></a>è¿‘ä»£å²</h1><ul><li>äº‹ä»¶æ˜¯ä»€ä¹ˆï¼šè¾›äº¥é©å‘½ï¼Œæœ¬äº‹ä»¶çš„æ€§è´¨æ˜¯ä»€ä¹ˆ</li><li>æ„ä¹‰</li><li>å¤±è´¥åŸå› åŠæ•™è®­</li><li>ä¸ºä»€ä¹ˆä¸­å›½å…±äº§å…šæ˜¯å­™ä¸­å±±é©å‘½äº‹ä¸šçš„ç»§æ‰¿è€…</li></ul><p>è®ºè¿°</p><ul><li>1.ä¸ºä»€ä¹ˆä¸­å›½å…±äº§å…šåº”è¿è€Œç”Ÿ</li><li>2.ä»¥æ¯›æ³½ä¸œä¸ºä»£è¡¨çš„ä¸­å›½å…±äº§å…šå¦‚ä½•æ¢ç´¢å¼€è¾Ÿä¸­å›½é©å‘½é“è·¯</li><li>3.å»ºå…šç™¾å¹´çš„å–å¾—æˆå°±</li></ul><h1 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h1><p>æœ‰ä¸€ä¸ªè”é€šåˆ†é‡è®¡ç®—ï¼ˆå¡«ç©ºï¼‰<br>æ¶‰åŠäº†äºŒå‰æ ‘èŠ‚ç‚¹ä¸ªæ•°æ€§è´¨<br>ä¸€äº›åŸºç¡€çŸ¥è¯†æ¶‰åŠçš„æ¯”è¾ƒå¤š<br>æ¶‰åŠäº†ä¸€ä¸ªåœ°å€è®¡ç®—ï¼ˆäºŒç»´æ•°ç»„ç›¸å…³ï¼‰<br><strong>å¤§é¢˜ï¼š</strong></p><h2 id="1"><a href="#1" class="headerlink" title="1"></a>1</h2><p>ç¬¬ä¸€ä¸ªç»™äº†ä¸€ä¸ªç¨‹åºï¼Œè¿›è¡Œå¤æ‚åº¦åˆ†æ</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">cal</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>x <span class="token operator">&lt;</span> n <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        x <span class="token operator">*</span><span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>        count <span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> count<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ±‚countçš„å€¼ï¼ˆç”¨nè¡¨ç¤ºï¼‰<br>æ±‚æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦</p><p>ä¸‹ä¸€ä¸ªç»™å‡ºä¸€ä¸ªé˜Ÿåˆ—çš„æè¿°ï¼Œè®©ä½ ç”»é˜Ÿåˆ—çš„å›¾ï¼ŒæŒ‡å‡ºé˜Ÿé¦–é˜Ÿå°¾ï¼Œé˜Ÿåˆ—å¦‚ä½•åˆ¤æ»¡å’Œåˆ¤ç©º</p><p>æœ€åä¸€é¢˜æ˜¯ç¨‹åºè®¾è®¡ï¼Œå…³äºé“¾è¡¨æ“ä½œçš„é¢˜ç›®</p><h2 id="2"><a href="#2" class="headerlink" title="2"></a>2</h2><p>ä¸€ä¸ªé˜Ÿåˆ—ï¼Œç»™äº†åœ¨å…¶ä¸­çš„å…ƒç´ ä¸ªæ•°åŠå†…å®¹å’Œå¤´æŒ‡é’ˆçš„ä½ç½®ï¼Œè®©ç”»å‡ºé˜Ÿåˆ—å›¾ï¼Œåˆè¿›è¡Œå‡ºé˜Ÿå’Œå…¥é˜Ÿæ“ä½œï¼Œå†è®©ç”»ä¸€æ¬¡é˜Ÿåˆ—å›¾ï¼ˆå“ªä¸ªä½ç½®å­˜çš„ä»€ä¹ˆå…ƒç´ ï¼‰</p><h2 id="3"><a href="#3" class="headerlink" title="3"></a>3</h2><p>ç¬¬ä¸‰ä¸ªä¸€ä¸ªå›¾ï¼Œç”»å‡ºä¸´æ¥çŸ©é˜µï¼Œç„¶ådfsåºåˆ—ï¼Œæœ€å°ç”Ÿæˆæ ‘</p><h2 id="4"><a href="#4" class="headerlink" title="4"></a>4</h2><p>ä¸€ä¸ªåºåˆ—ï¼Œå»ºç«‹å“ˆå¤«æ›¼æ ‘ï¼Œæ±‚WPLå’Œå¶å­èŠ‚ç‚¹ç¼–ç </p><h2 id="5"><a href="#5" class="headerlink" title="5"></a>5</h2><p>å“ˆå¸ŒæŸ¥æ‰¾ç”»å“ˆå¸Œè¡¨ï¼Œæ±‚asl</p><h2 id="6"><a href="#6" class="headerlink" title="6"></a>6</h2><p>ä¸€ä¸ªåºåˆ—ï¼Œå¿«æ’ç¬¬ä¸€è¶Ÿä¹‹åæ˜¯å•¥ï¼Œå †æ’åˆå§‹åŒ–å»ºç«‹çš„å¤§æ ¹å †æ˜¯å•¥</p><h2 id="ç¼–ç¨‹"><a href="#ç¼–ç¨‹" class="headerlink" title="ç¼–ç¨‹"></a>ç¼–ç¨‹</h2><p>ç¼–ç¨‹æ˜¯ç¬¬ä¸€é—®ç¼–å†™åˆå§‹åŒ–å¸¦å¤´èŠ‚ç‚¹çš„å•é“¾è¡¨ï¼Œç¬¬äºŒé—®ç¼–å†™åœ¨å•é“¾è¡¨æŸ¥æ‰¾xçš„ç¨‹åº</p><h1 id="æ•°ç”µ"><a href="#æ•°ç”µ" class="headerlink" title="æ•°ç”µ"></a>æ•°ç”µ</h1><p>é€‰æ‹©è§¦å‘å™¨æ¶‰åŠçš„ä¸å¤šï¼Œéƒ½æ˜¯äº›é€»è¾‘è¡¨è¾¾å¼åˆ†æä¹‹ç±»çš„ï¼Œæœ€å°é¡¹åˆ†æï¼Œè§¦å‘å™¨æ¶‰åŠçš„éƒ½æ˜¯åŸºç¡€çŸ¥è¯†ï¼Œä»€ä¹ˆå­˜åœ¨çº¦æŸé¡¹ï¼Œä»€ä¹ˆå¯ä»¥é¿å…ç©ºç¿»ï¼Œä»€ä¹ˆæŠ—å¹²æ‰°ä¸æŠ—ä¹‹ç±»çš„<br><strong>è®¡ç®—åˆ†æ</strong></p><ul><li><p>è¡¥ç åŠ å‡æ³•</p></li><li><p>å†™TTLç”µè·¯é€»è¾‘è¡¨è¾¾å¼</p></li><li><p>å†™cmosç”µè·¯é€»è¾‘è¡¨è¾¾å¼</p><p>ä¸Šé¢å†™è¡¨è¾¾å¼çš„è¯¾æœ¬å‡ºç°è¿‡åŸé¢˜</p></li><li><p>ç”¨å¡è¯ºå›¾åŒ–ç®€æœ€ç®€å¼å­</p></li><li><p>ç”¨74l138å®ç°æŸä¸ªé€»è¾‘è¡¨è¾¾å¼</p></li><li><p>ç”»ä¸»ä»rsè§¦å‘å™¨æ³¢å½¢å›¾<br><strong>ç»¼åˆ</strong></p></li><li><p>æ•°ç ç®¡è®¾è®¡ï¼ŒçœŸå€¼è¡¨</p></li><li><p>8421bcdç ï¼Œå®ç°ç›¸å…³åŠŸèƒ½ï¼Œç”»çœŸå€¼è¡¨ï¼Œè®¾è®¡ç”µè·¯</p></li></ul><p><a href="https://wwm.lanzouv.com/iJoc40h3kqfc" target="_blank" rel="noopener">2020å¹´æ•°ç”µè¯•å·</a> <a href="https://wwm.lanzouv.com/iJoc40h3kqfc" target="_blank" rel="noopener">https://wwm.lanzouv.com/iJoc40h3kqfc</a></p>]]></content>
      
      
      <categories>
          
          <category> è€ƒè¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ æ€»ç»“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2021å¹´åº¦æ€»ç»“</title>
      <link href="/p/3756014507.html"/>
      <url>/p/3756014507.html</url>
      
        <content type="html"><![CDATA[<h1 id="2021å¹´åº¦æ€»ç»“"><a href="#2021å¹´åº¦æ€»ç»“" class="headerlink" title="2021å¹´åº¦æ€»ç»“"></a>2021å¹´åº¦æ€»ç»“</h1><p>è®¸å¤šåº”ç”¨éƒ½æœ‰ä»–ä»¬è‡ªå·±çš„å¹´åº¦æ€»ç»“ï¼Œé‚£æˆ‘æ˜¯ä¸æ˜¯ä¹Ÿè¦æä¸€ä»½æ€»ç»“ã€‚</p><p>ä»Šå¹´çœŸçš„æ˜¯æœ‰å¾ˆå¤šä¸é¡ºï¼Œä¹Ÿæœ‰å¾ˆå¤šæ”¶è·ã€‚</p><p>ä»Šå¹´ä»è€ƒè¯•å‘¨å¼€å§‹ï¼Œåˆ°è€ƒè¯•å‘¨ç»“æŸã€‚</p><p>æ¥ä¸‹æ¥å›é¡¾ä¸€ä¸‹æˆ‘æ™®æ™®é€šé€šçš„2021å¹´ï¼Œåªå¸Œæœ›ä¹‹åçœ‹å›æ¥èƒ½å¤Ÿå¸å–ä¹‹å‰çš„ç›¸å…³æ•™è®­å’Œç»éªŒã€‚</p><blockquote><p>å¾ˆåƒæµæ°´è´¦ï¼Œä½†æ˜¯æˆ‘å–œæ¬¢è¿™æ ·çš„æ—¶é—´è®°å½•ï¼Œä¹‹åå›çœ‹ä¼šå¾ˆå®¹æ˜“çœ‹åˆ°è‡ªå·±æ‰€èµ°çš„å†ç¨‹ã€‚</p></blockquote><h2 id="å¤§ä¸€ä¸Š"><a href="#å¤§ä¸€ä¸Š" class="headerlink" title="å¤§ä¸€ä¸Š"></a>å¤§ä¸€ä¸Š</h2><ul><li>2021å¹´çš„å¼€å§‹æ˜¯å¤§ä¸€ä¸Šå­¦æœŸçš„è€ƒè¯•å‘¨ï¼Œå½“æ—¶å‡ ä¹ä»€ä¹ˆéƒ½ä¸æ‡‚ï¼Œå¾ˆå¤šéƒ½ä¸ä¼šã€‚æ€§æ ¼å†…æ•›ï¼Œå¿ƒç†ä¸Šæ‡µæ‡µæ‡‚æ‡‚ã€‚ä¹‹å‰æ¯”è¾ƒå¹¸è¿æ“¦è¾¹è¿›äº†acmå®éªŒå®¤ï¼Œä¹Ÿæ¯”è¾ƒå¹¸è¿åœ°è¿›äº†ä¸€ä¸ªåŒ—ä¸‰çš„å›¢é˜Ÿã€‚ï¼ˆä¹‹åå‘ç°åœ¨è¿™é‡Œèƒ½å¤Ÿæ”¶è·å¾ˆå¤šä¸œè¥¿ï¼‰</li><li>è®°å¾—è€ƒè¯•å‘¨æ™šä¸Šåœ¨çœ‹ã€Šè¥¿éƒ¨ä¸–ç•Œã€‹ï¼Œç¦»è°±äº†ï¼Œè€ƒè¯•å‘¨æœ‰å¹¸åº¦è¿‡ã€‚</li><li>å¯’å‡å¼€å§‹äº†è‰°éš¾çš„acmå­¦ä¹ ã€‚ä¸€ä¸ªå¯’å‡è·Ÿç€æ ¡acmå®éªŒå®¤å°±å­¦äº†ä¸€ç‚¹ï¼Œä¹‹åå‘ç°å¤ªéš¾éƒ½ä¸ä¼šå°±è‡ªå·±å­¦å»äº†ã€‚è®°å¾—åˆšå¼€å§‹dfså°±ç»™æˆ‘æ•´åäº†ï¼Œä¸€ä¸ªå¯’å‡ï¼Œç»æœ›äº†å¤šå°‘æ¬¡ï¼Œå•¥éƒ½ä¸ä¼šï¼Œçœ‹å•¥çœ‹ä¸æ‡‚ï¼Œè¿˜å¾—ç¡¬çœ‹åˆ«äººçš„ä»£ç ï¼Œä¸ç„¶è¿˜æ˜¯å•¥éƒ½ä¸ä¼šã€‚æˆ‘çœŸæ˜¯ä¸€ä¸ªèœé¸¡ï¼ˆåƒåœ¾ï¼‰ã€‚</li><li>å¯’å‡åº”è¯¥æ˜¯ä¸­åæœŸæˆ‘å¼€å§‹äº†åœ¨CSDNçš„åˆ›ä½œï¼Œå½“æ—¶æ˜¯å†™C++STLæ€»ç»“ï¼Œé‚£æ—¶å‡ ä¹æ²¡æœ‰ä»£ç æ°´å¹³çš„ï¼Œç°åœ¨æƒ³æƒ³ï¼Œè¦æ˜¯æ²¡æœ‰è¿™ç¯‡æ€»ç»“ï¼Œæˆ‘éƒ½ä¸ä¼šå†™åšå®¢äº†ã€‚</li><li>å¤§ä¸€çš„å¯’å‡å»¶é•¿äº†ï¼Œæˆ‘æ˜¯æ²¡æƒ³åˆ°çš„ï¼Œæ²¡æƒ³åˆ°å¤§å­¦çš„å¯’å‡ç«Ÿç„¶æœ‰ä¸¤ä¸ªå¤šæœˆä¹‹å¤šï¼Œç¦»å¤§è°±äº†ã€‚3æœˆ13å·å·®ä¸å¤šæ‰è¿”æ ¡ã€‚</li></ul><h2 id="å¤§ä¸€ä¸‹"><a href="#å¤§ä¸€ä¸‹" class="headerlink" title="å¤§ä¸€ä¸‹"></a>å¤§ä¸€ä¸‹</h2><ul><li><p>ä¹Ÿè®¸æ˜¯ä¸Šå­¦æœŸè€ƒè¯•è€ƒçš„è‡ªæˆ‘æ„Ÿè§‰è‰¯å¥½äº†ï¼Œä¸‹å­¦æœŸæ˜æ˜¾æœ‰ç‚¹é£˜ï¼Œå¹²å•¥å•¥ä¸ä¸­ã€‚</p></li><li><p>å¼€å­¦æˆ‘å°±ç»§ç»­è¿›è¡Œäº†acmçš„è®­ç»ƒï¼Œå½“ç„¶ä»¥æˆ‘å½“æ—¶éå¸¸èœçš„æ°´å¹³ï¼Œåˆ·é¢˜æ˜¯å‡ ä¹ä¸ä¼šæœ‰å¾ˆå¤§çš„æé«˜çš„ï¼Œåˆ·çš„å‡ ä¹éƒ½æ˜¯æ°´é¢˜ï¼Œä¹Ÿæ²¡æœ‰å¾ˆå¤§çš„æ•ˆç‡ã€‚</p></li><li><p>3æœˆåº•ï¼Œå‚åŠ å¤©æ¢¯é€‰æ‹”èµ›ï¼Œç»“æœåªèƒ½è¯´æ˜¯å¾ˆä¸è¡Œï¼Œwaç©¿äº†ï¼Œè‚¯å®šæ˜¯å¾ˆèœçš„ï¼Œè‡ªå·±ç®—ä»€ä¹ˆä¸œè¥¿ï¼Œå½“ç„¶æ˜¯æ²¡æœ‰é€‰ä¸Šäº†ï¼Œè®°å¾—æ’åå¾ˆé åã€‚</p></li><li><p>å››æœˆåˆå¿—æ„¿è€…ç›‘è€ƒacmæ‹›æ–°èµ›ï¼Œçœ‹ç€ä¸€å¤§æ‰¹å¤§ä½¬ä¹±æ€ï¼ŒçœŸçš„å¾ˆå‰å®³ã€‚æºä½¬å’Œç†Šä½¬æ€çš„çœŸçš„å¾ˆçŒ›ï¼Œè‡ªæ„§ä¸å¦‚ã€‚</p></li><li><p>ä¹‹åå‡ å¤©å‚åŠ è“æ¡¥æ¯ï¼Œä¸å‡ºæ‰€æ–™ï¼Œåªèƒ½ç”¨ä¸¤ä¸ªå­—å½¢å®¹ï¼Œâ€œåƒåœ¾â€ï¼Œä¼šçš„å‡ ä¹æ²¡æœ‰ï¼Œé“æ˜¯å¿…ç„¶çš„ã€‚</p></li><li><p>æœŸé—´ç»å†äº†å¾ˆå¤šæ¬¡æ— åŠ©ï¼Œè‡ªå·±çœ‹ä»€ä¹ˆéƒ½çœ‹ä¸æ‡‚ï¼Œå­¦ä»€ä¹ˆéƒ½å­¦ä¸ä¼šã€‚çœ‹ç€nbçš„äººï¼Œä»–ä»¬çœŸçš„éš¾ä»¥è¢«è¶…è¶Šï¼Œå®Œè™ã€‚acmä»€ä¹ˆéƒ½æ²¡æ•™ä¼šæˆ‘ï¼Œå€’æ˜¯æ•™ä¼šæˆ‘äº†å¦‚ä½•å®Œç¾åœ°è¢«è™ã€‚</p></li><li><p>äº”æœˆåˆæœ‰å¹¸å‚ä¸Šä¸€ä¸ªå¤§ä½¬ï¼Œè¿‡äº†ICPCçœèµ›é€‰æ‹”èµ›ï¼Œå¤§æ¦‚æ¥è¿‘äº”æœˆåº•å‚åŠ äº†ICPCçœèµ›ã€‚è¿™æ¬¡æ¯”èµ›æˆ–è®¸æ˜¯æˆ‘å”¯ä¸€ä¸€æ¬¡çº¿ä¸‹çš„æ¯”èµ›ï¼Œå»å†œå¤§å…è´¹æ¸¸ç©äº†ä¸¤å¤©ï¼Œåƒç€å…è´¹çš„é¥­ï¼Œè¿™è½¬è½¬ï¼Œé‚£è½¬è½¬ï¼Œè¿˜æ˜¯å¾ˆçˆ½çš„ã€‚ä½†æ˜¯åˆ°åšé¢˜çš„æ—¶å€™ï¼Œå°±å¾ˆéš¾å—äº†ï¼Œå‡ ä¹ä»€ä¹ˆéƒ½ä¸ä¼šï¼Œè¿˜æ˜¯ä¸€ä¸ªåƒåœ¾ã€‚ä¸è¿‡æœ‰å¹¸åœ¨å¤§ä½¬çš„å¸¦é¢†ä¸‹æ‹¿äº†é“¶ï¼Œè®°å¾—å½“æ—¶å› ä¸ºæ—¶é—´å†²çªè¿˜é¸½äº†å­¦æ ¡çš„ä¸€ä¸ªå¾ªè¿¹å°è½¦æ¯”èµ›ï¼ˆè¿™ä¸ªæ¯”èµ›çš„å°è½¦è¿˜æ˜¯ä¸€ç™¾å—é’±ä¹°çš„ï¼Œå‘œå‘œå‘œï¼‰ã€‚</p></li><li><p>æ¥è¿‘æœŸæœ«å‚åŠ äº†ç¤¾å›¢çš„æ¢å±Šç«é€‰ï¼Œé€‰ä¸Šè®¡ç®—æœºå­¦æœ¯äº¤æµåä¼šçš„ä¼šé•¿æˆ‘æ˜¯æ²¡æƒ³åˆ°çš„ã€‚</p></li><li><p>æ¥ä¸‹æ¥å°±æ˜¯æˆ‘çš„æœŸæœ«äº†ï¼Œè€ƒçš„æ¯”è¾ƒå·®ï¼Œæ¦‚ç‡è®ºæœ‰å¤§é¢˜åŸé¢˜ä¹Ÿä¸€ç‚¹æ²¡æœ‰å†™å‡ºæ¥ï¼Œè€Œä¸”è‡ªå·±è¿˜åšè¿‡ï¼Œç°åœ¨æƒ³æ¥çœŸçš„æ˜¯éå¸¸ä¼¤å•Šï¼ŒæœŸæœ«å¤šç§‘éƒ½è€ƒçš„ä¸è¡Œï¼Œåº”è¯¥æ˜¯è‡ªå·±æ²¡æœ‰è®¤çœŸå¤ä¹ ï¼Œè€ƒå‰è¿˜åœ¨çœ‹ç¾å‰§å§ã€‚</p></li><li><p>è€ƒè¯•åçš„å°å­¦æœŸå®ä¹ è¿˜ç¢°ä¸Šäº†æœ‰å²ä»¥æ¥çš„720å¤§æš´é›¨ï¼Œå½“æ—¶æˆ‘æ–­æ°´æ–­ç”µæˆ‘è®°å¾—è¿˜å‡ºå»è½¬äº†ä¸€åœˆå‘¢ï¼Œæ°´æ˜¯ç›´æ¥æ¼«åˆ°å¤§è…¿å¤„ï¼Œæ–­æ°´æ–­ç”µæ–­ç½‘äº†å‡ å¤©ï¼Œç»ˆäºæ˜¯æŒºè¿‡å»äº†ã€‚</p></li><li><p>æš‘å‡åœ¨å®¶åˆ·äº†å¾ˆå¤šé¢˜ï¼Œè¿›åº¦ç¼“æ…¢çš„è¿›è¡Œï¼Œå‰å‰åååˆ·äº†ä¸¤ä¸‰ç™¾é“å§ï¼ˆå½“æ—¶æš‘å‡åˆå»¶æœŸäº†ï¼Œå»¶æœŸäº†å¤§æ¦‚ä¸€ä¸ªæœˆ10æœˆ10å·å·¦å³æ‰ä¸Šå­¦ï¼‰ï¼Œé¢˜æ•°ä¸Šå»äº†ï¼Œä½†æ˜¯æ„Ÿè§‰å®åŠ›æ²¡æœ‰å¤šå¤§çš„æé«˜ã€‚å‘œå‘œå‘œï¼Œå¥½èœå•Šã€‚</p></li><li><p>æ¥è¿‘8æœˆåº•æˆ‘å¸¦é˜Ÿå‚åŠ ç‰©è”ç½‘è®¾è®¡å¤§èµ›ï¼ˆåä¸ºæ¯ï¼‰ï¼Œåˆæ˜¯å› ä¸ºç–«æƒ…ï¼Œæ¯”èµ›çº¿ä¸Šï¼Œæœ¬æ¥èƒ½å»è¥¿å®‰çº¿ä¸‹æ¯”èµ›çš„ï¼Œå‘œå‘œå‘œã€‚å¯èƒ½å› ä¸ºçº¿ä¸Šæ‰è®©æˆ‘ä»¬è·å¾—äº†ä¸é”™çš„æˆç»©å§ï¼Œè¥¿åŒ—èµ›åŒºä¸€ç­‰å¥–ï¼Œå¯ä»¥æ™‹çº§æ€»å†³èµ›äº†ã€‚8æœˆåº•ï¼Œæˆ‘ä»¬åˆçº¿ä¸Šå‚åŠ äº†æ€»å†³èµ›ï¼ˆæœ¬æ¥çº¿ä¸‹æ˜¯è¦åœ¨æ¹–å—å¤§å­¦æ¯”çš„ï¼‰ï¼Œæœ€åæˆ‘æƒ³åªè¦æ‹¿ä¸ªå¥–éƒ½ä¸é”™äº†ã€‚å½“æ—¶å¿µè·å¥–é˜Ÿä¼çš„æ—¶å€™æƒ³ä¸€ç›´ä¸å¿µæˆ‘ä»¬çš„é˜Ÿï¼Œéš¾é“æ˜¯å¯„äº†å—ã€‚æœ€åçœŸçš„å‡ºä¹æ„æ–™ï¼Œå¾—äº†ä¸€ç­‰å¥–ã€‚æˆ‘çš„ç¬¬ä¸€ä¸ªå›½ä¸€ã€‚</p></li><li><p>é«˜è€ƒå‡ºåˆ†ä¹‹åå‡ ä¹éƒ½å¼€å§‹å¹²ç¤¾å›¢å®£ä¼ çš„æ´»äº†ï¼Œå½“ä¸ªä¼šé•¿ç¡®å®æŒºç´¯çš„ã€‚</p></li></ul><h2 id="å¤§äºŒä¸Š"><a href="#å¤§äºŒä¸Š" class="headerlink" title="å¤§äºŒä¸Š"></a>å¤§äºŒä¸Š</h2><ul><li>è¿™å­¦æœŸçœŸçš„æ˜¯å¿™ï¼Œå¼€å­¦å¼€çš„æ™šï¼Œç¤¾å›¢ä¼šé•¿è¿˜å¾—å¹²æ´»ã€‚åŠæ–°ç”Ÿèµ›ï¼Œæ‰«æ¥¼ï¼Œè¿æ–°ï¼Œå¼€è§é¢ä¼šï¼Œäº¤å„ç§ææ–™ï¼Œç­”è¾©ç­‰ç­‰â€¦â€¦</li><li>10æœˆåº•å’Œé˜Ÿå‹æ‰“äº†çœCCPCï¼Œåœ¨é˜Ÿå‹çš„åŠªåŠ›å¸¦é¢†ä¸‹ï¼Œæœ€åæ‹¿äº†é“¶ï¼Œè¿˜æ˜¯å¾ˆèœã€‚</li><li>11æœˆåˆåœ¨è€ç¤¾é•¿çš„æ€‚æ¿ä¸‹ï¼Œç§Ÿäº†ä¸ªä¸‰å¹´çš„æœåŠ¡å™¨ï¼Œç°åœ¨æƒ³æ¥çœŸçš„æœ‰ç”¨ã€‚ä¸ŠLinuxè¯¾ç›´æ¥æ‹¿å¹³æ¿è¿œç¨‹æ“æ§äº†ï¼Œåœ¨æœåŠ¡å™¨ä¸Šæ­ç½‘ç«™ï¼Œå„ç§ç©ã€‚</li><li>11æœˆ21ï¼ŒICPCæ²ˆé˜³ç«™ï¼Œè¿™ä¸€å¤©æ˜¯ç»æœ›çš„ä¸€å¤©ã€‚äº‹å®è¯æ˜è‡ªå·±å°±æ˜¯ä¸€èœæ¯”ï¼Œäº”ç™¾å¤šé˜Ÿï¼Œå››ç™¾å¤šåï¼Œé¢˜ç›®ç‹ ç£•ï¼Œä½†æ˜¯è¿˜æ˜¯åšä¸å‡ºæ¥ã€‚é“åˆæ¥äº†ã€‚æ¯”è¾ƒéš¾å—ï¼Œä½†ç¡®å®è¯æ˜äº†è‡ªå·±çœŸçš„æ˜¯éå¸¸çš„èœã€‚</li><li>å¿«11æœˆåº•å›½åŠ±åˆ°è´¦ï¼Œçˆ½äº†ã€‚</li><li>11æœˆåº•å­¦äº†ä¸åˆ°ä¸€å¤©ï¼Œåœ¨æœåŠ¡å™¨ä¸ŠæˆåŠŸè¿è¡Œäº†QQæœºå™¨äººï¼Œç°åœ¨åŠŸèƒ½æ…¢æ…¢å˜å¾—å·²ç»æ¯”è¾ƒå®Œå–„äº†ã€‚</li><li>12æœˆåº•è¿˜æ˜¯è€ƒè¯•å‘¨ï¼Œä¸´æ—¶é€šçŸ¥è€ƒè¯•å‘¨æå‰ï¼Œæœ¬æ¥å°±æ¥å¾—æ™šï¼Œç°åœ¨è€ƒçš„å˜æ—©äº†ä¸¤ä¸‰ä¸ªæ˜ŸæœŸï¼Œè¯¾ç¨‹å¾ˆèµ¶ï¼Œå•¥éƒ½å­¦ä¸ä¼šï¼Œè€ƒè¯•å¤ä¹ æ ¹æœ¬æ²¡æ—¶é—´ï¼Œç»“è¯¾åä¸‹ä¸€å¤©å°±è€ƒè¯•ã€‚ä¸è¿‡è€ƒè¯•è¿˜æ˜¯ç»“æŸäº†ï¼Œå¸Œæœ›ç»“æœæ˜¯æ˜¯å¥½çš„å§ã€‚</li></ul><p>2021è¿‡çš„æœ‰å¾ˆå¤šä¸é¡ºåˆ©ï¼Œå‡ºç°äº†å¾ˆå¤šè‹¦éš¾å’ŒæŒ«æŠ˜ï¼Œæœ‰äº›è§£å†³äº†ï¼Œæœ‰äº›çŸ­æ—¶é—´æ— æ³•è§£å†³æˆ–è€…æ— æ³•è§£å†³ï¼ˆæ¯”å¦‚è¯´èœè¿™ä¸ªäº‹æƒ…ï¼‰ï¼Œä½†æ˜¯è¿˜æ˜¯å‡ºç°äº†ä¸€ç‚¹æˆå°±çš„ã€‚ä»Šå¹´è®¸å¤šä¸é¡ºï¼Œå¸Œæœ›ä¹‹åé‡åˆ°èƒ½å¤Ÿå°½é‡è§£å†³å§ã€‚å¸Œæœ›ä¹‹åè¶Šæ¥è¶Šå¥½ï¼</p>]]></content>
      
      
      <categories>
          
          <category> å“²æ€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é˜¶æ®µæ€§æ€»ç»“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CF1181C Flag-å­çŸ©é˜µæ•°é‡ç»Ÿè®¡</title>
      <link href="/p/2396599521.html"/>
      <url>/p/2396599521.html</url>
      
        <content type="html"><![CDATA[<h1 id="CF1181C-Flagå­çŸ©é˜µæ•°é‡ç»Ÿè®¡"><a href="#CF1181C-Flagå­çŸ©é˜µæ•°é‡ç»Ÿè®¡" class="headerlink" title="CF1181C Flagå­çŸ©é˜µæ•°é‡ç»Ÿè®¡"></a>CF1181C Flagå­çŸ©é˜µæ•°é‡ç»Ÿè®¡</h1><h2 id="é¢˜ç›®ä»‹ç»"><a href="#é¢˜ç›®ä»‹ç»" class="headerlink" title="é¢˜ç›®ä»‹ç»"></a>é¢˜ç›®ä»‹ç»</h2><p>é¢˜ç›®é“¾æ¥ï¼š</p><p><a href="https://codeforces.com/problemset/problem/1181/C" target="_blank" rel="noopener">https://codeforces.com/problemset/problem/1181/C</a></p><p><img src="2396599521/image-20220629160509729.png" alt="é¢˜ç›®æè¿°"></p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><h3 id="ç»´æŠ¤å˜é‡"><a href="#ç»´æŠ¤å˜é‡" class="headerlink" title="ç»´æŠ¤å˜é‡"></a>ç»´æŠ¤å˜é‡</h3><p>ç»Ÿè®¡å­çŸ©é˜µä¸€èˆ¬éƒ½éœ€è¦ç»´æŠ¤ä¸€äº›æ•°ç»„ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯çºµå‘ç»´æŠ¤æˆ–è€…æ¨ªå‘ç»´æŠ¤ã€‚</p><p>æœ¬é¢˜ç»´æŠ¤ä¸¤ä¸ªæ•°ç»„ï¼š</p><p>$d[i][j]$ : $(i, j)$ä½ç½®å‘ä¸‹æœ€å¤šå»¶ä¼¸ç›¸åŒé¢œè‰²çš„å—æ•°</p><p>$r[i][j]$ï¼š$(i, j)$ä½ç½®å‘å³æœ€å¤šå»¶ä¼¸ç›¸åŒé¢œè‰²çš„å—æ•°</p><p>æˆ‘ä»¬å…ˆè€ƒè™‘å®½åº¦ä¸º$1$çš„æƒ…å†µï¼Œç»Ÿè®¡è¯¥åˆ—çš„è´¡çŒ®æ—¶å†è€ƒè™‘è¯¥åˆ—æ¨ªå‘å‘å³èƒ½è¾¾åˆ°çš„æœ€å¤§è´¡çŒ®ã€‚</p><p>åŒæ—¶éœ€è¦å†ç»´æŠ¤ä¸¤ä¸ªæ¨ªå‘å»¶ä¼¸çš„æœ€å°å€¼æ•°ç»„ï¼š</p><p>$r[i][j]$ ï¼š<strong>å‰ç¼€</strong>ï¼ˆæ¨ªå‘æ•°ç»„ï¼‰æœ€å°å€¼ï¼Œ$(x, j)$åˆ°$(i, j),x &lt; i$æ¨ªå‘å‘å³çš„å»¶ä¼¸é•¿åº¦çš„æœ€å°å€¼ï¼Œä¿è¯$(x, j)$åˆ°$(i, j)$çš„é¢œè‰²ç›¸åŒï¼Œåªæœ‰åœ¨é¢œè‰²ç›¸åŒæ—¶æ‰ä¼šæ›´æ–°æœ€å°å€¼</p><blockquote><p>$r[i][j]$å’Œå£°æ˜çš„ä¸€æ ·ï¼Œä½†æ˜¯æ­¤$r[i][j]$æ˜¯åˆ©ç”¨ä¸Šè¿°æ•°ç»„æ›´æ–°æ¥çš„ï¼ˆå…·ä½“è§ä»£ç ï¼‰</p></blockquote><p>$lmn[i][j]$ : <strong>åç¼€</strong>ï¼ˆæ¨ªå‘æ•°ç»„ï¼‰æœ€å°å€¼ï¼Œ$(x, j)$åˆ°$(i, j), x &gt; i$æ¨ªå‘å‘å³çš„å»¶ä¼¸é•¿åº¦çš„æœ€å°å€¼ï¼Œä¿è¯$(x, j)$åˆ°$(i, j)$çš„é¢œè‰²ç›¸åŒï¼Œåªæœ‰åœ¨é¢œè‰²ç›¸åŒæ—¶æ‰ä¼šæ›´æ–°æœ€å°å€¼</p><hr><h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><p>å…ˆè€ƒè™‘å®½åº¦ä¸º1æ—¶ï¼Œåœ¨çºµå‘æ–¹å‘ä¸Šèƒ½å¦æ„æˆå›½æ——</p><p>å³ä¸‹é¢çš„æ¡ä»¶ï¼ˆæ»¡è¶³çš„æ——å­å…±ä¸‰è¡Œï¼Œå¦‚é¢˜è¦æ±‚ï¼‰</p><ul><li><p>$i + 3 * d[i][j] - 1 &lt;= n$  ç¬¬ä¸‰è¡Œçš„æ——å­ä¸è¶Šç•Œ</p></li><li><p>$d[i][j] == d[i + d[i][j]][j]$ ç¬¬äºŒè¡Œå’Œç¬¬ä¸€è¡Œçš„é•¿åº¦ç›¸åŒ</p></li><li><p>$d[i + 2 * d[i][j]][j] &gt;= d[i][j]$ ç¬¬ä¸‰è¡Œçš„é•¿åº¦<strong>å¤§äºç­‰äº</strong>ä¸Šé¢çš„è¡Œé•¿åº¦ï¼ˆå¤§äºç­‰äºè¯·æ€è€ƒä¸ºä»€ä¹ˆï¼Œåªè¦å¤§äºç­‰äºå°±èƒ½ç»Ÿè®¡ä¸Šï¼‰</p></li></ul><p>çºµå‘èƒ½å¤Ÿå½¢æˆæ——å­ï¼Œé‚£ä¹ˆè€ƒè™‘æ”¹çºµå‘æ——å­çš„è´¡çŒ®ã€‚</p><blockquote><p>æ±‚è´¡çŒ®ï¼š</p><p>å› ä¸ºæ¯ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„çºµå‘æ——å­éƒ½ä¼šæ±‚è´¡çŒ®ï¼Œæ‰€ä»¥æ¯ä¸ªçºµå‘æ——å­æ±‚è´¡çŒ®åªç”¨å‘å³æ±‚å°±è¡Œã€‚</p><p>ä»¥ä¸‹ä¸ºä¸¾ä¾‹ï¼š</p><p>AAA</p><p>BBB</p><p>CCC</p><p>æœ€å·¦è¾¹ä¸€åˆ—ï¼Œå¯å½¢æˆ3ç§æƒ…å†µ</p><p>ä¸­é—´ä¸€åˆ—ï¼Œå¯å½¢æˆ2ç§æƒ…å†µ</p><p>æœ€å³è¾¹ä¸€åˆ—ï¼Œå¯å½¢æˆ1ç§æƒ…å†µ</p><p>åŒ…å«äº†æ‰€æœ‰çš„æƒ…å†µï¼Œæ€»è´¡çŒ®å°±æ˜¯ 3 + 2 + 1</p><p>å…¶å®å°±æ˜¯$n(n + 1) / 2$ï¼Œäº¦æˆ–æ˜¯é€’æ¨å¼$f[i] = f[i - 1] + i$ï¼Œæ€æƒ³åŸºæœ¬ä¸€æ ·</p></blockquote><p>é‚£ä¹ˆå°±è¦æ±‚è´¡çŒ®äº†</p><p>æˆ‘ä»¬è‚¯å®šéœ€è¦æ‰¾<strong>æœ€å°</strong>çš„å‘å³æ‰©å±•çš„é•¿åº¦æ‰èƒ½ç®—å½“å‰æ•´ä½“çš„è´¡çŒ®ï¼Œæœ€å°å‘å³æ‰©å±•é•¿åº¦éœ€è¦æ˜¯<strong>ä¸Šä¸­ä¸‹</strong>ä¸‰éƒ¨åˆ†çš„æœ€å°å€¼ã€‚</p><p>æ•…éœ€è¦ç”¨åˆ°ä¸Šè¿°æœ€å°å€¼ï¼ˆå‰ç¼€å’Œåç¼€ï¼‰æ•°ç»„ã€‚</p><blockquote><p> ä¸ºä»€ä¹ˆè¦ç”¨åˆ°åç¼€æ•°ç»„?</p><p>ä»¥ä¸‹ä¸ºä¸¾ä¾‹ï¼šæ»¡è¶³æƒ…å†µçš„åˆ—ç”¨ç²—ä½“æ ‡æ˜</p><p>A ï¼ˆæ— å…³ç´§è¦è¡Œï¼‰</p><p><strong>A</strong></p><p><strong>A</strong></p><p><strong>B</strong></p><p><strong>B</strong></p><p><strong>C</strong></p><p><strong>C</strong></p><p>Cï¼ˆæ— å…³ç´§è¦è¡Œï¼‰</p><p>ä½†æ˜¯ä¸Šä¸‹å„å¤šå‡ºä¸€ä¸ªå­—æ¯ï¼Œå¦‚æœç»Ÿè®¡æœ€å°å€¼æ—¶ï¼Œä¸Šé¢éƒ¨åˆ†ç”¨åˆ°å‰ç¼€æœ€å°å€¼æ•°ç»„ï¼Œå°±ä¼šæŠŠç¬¬ä¸€è¡Œå‘å³æ‰©å±•çš„é•¿åº¦ç»Ÿè®¡ä¸Šå»ï¼Œé€ æˆç»Ÿè®¡é”™è¯¯ã€‚ä¸‹é¢éƒ¨åˆ†åŒç†ã€‚</p><p>æ•…ä¸Šé¢éƒ¨åˆ†éœ€è¦ç”¨åˆ°åç¼€æ•°ç»„ï¼Œä¸‹é¢éƒ¨åˆ†éœ€è¦ç”¨åˆ°å‰ç¼€æ•°ç»„ï¼Œä¸­é—´éƒ¨åˆ†æ— æ‰€è°“</p></blockquote><p>åˆ™å½“å‰åˆ—èƒ½å¤Ÿé€ æˆçš„è´¡çŒ®ä¸º $min(lmn[i][j], r[i + 2 * d[i][j] - 1][j], r[i + 3 * d[i][j] - 1][j])$</p><p>å…·ä½“æ•´ä½“å®ç°è§ä»£ç ã€‚</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">using</span> pii <span class="token operator">=</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1005</span><span class="token punctuation">,</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><span class="token keyword">int</span> d<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> r<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> lmn<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">char</span> s<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n <span class="token operator">>></span> m<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        cin <span class="token operator">>></span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> n<span class="token punctuation">;</span> i<span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> m<span class="token punctuation">;</span> j<span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> r<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> r<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> s<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>                d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token keyword">else</span> d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                r<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token keyword">else</span> r<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> n<span class="token punctuation">;</span> i<span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            lmn<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> r<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>                lmn<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>lmn<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> lmn<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> s<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>                r<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>r<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> r<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">3</span> <span class="token operator">*</span> d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">&lt;=</span> n <span class="token operator">&amp;&amp;</span> d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> d<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> d<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">*</span> d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">>=</span> d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>                ans <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">{</span>lmn<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> r<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">*</span> d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> r<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">3</span> <span class="token operator">*</span> d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    cout <span class="token operator">&lt;&lt;</span> ans <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// cin >> t;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/medias/gzh.jpg" alt></p>]]></content>
      
      
      <categories>
          
          <category> DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CF </tag>
            
            <tag> DP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é˜¶ä¹˜é€†å…ƒå’Œçº¿æ€§é€†å…ƒ</title>
      <link href="/p/652576208.html"/>
      <url>/p/652576208.html</url>
      
        <content type="html"><![CDATA[<h1 id="é€†å…ƒç®€ä»‹"><a href="#é€†å…ƒç®€ä»‹" class="headerlink" title="é€†å…ƒç®€ä»‹"></a>é€†å…ƒç®€ä»‹</h1><p>$a \times b \equiv  1 ( mod\,\,p)$,å¯ä»¥ç§°<code>a</code>æ˜¯<code>b</code>åœ¨æ¨¡<code>p</code>æƒ…å†µä¸‹çš„é€†å…ƒ.<br>é€†å…ƒå…¶å®å°±æ˜¯å¯ä»¥çœ‹ä½œå€’æ•°</p><h1 id="é˜¶ä¹˜é€†å…ƒ"><a href="#é˜¶ä¹˜é€†å…ƒ" class="headerlink" title="é˜¶ä¹˜é€†å…ƒ"></a>é˜¶ä¹˜é€†å…ƒ</h1><p><strong>æ–¹å¼ä¸€:</strong><br>é€šè¿‡è´¹é©¬å°å®šç†æ±‚é€†å…ƒï¼š<br>å½“<code>p</code>ä¸ºç´ æ•°ï¼Œå¹¶ä¸”<code>gcd(a,p)=1</code>æ—¶ï¼Œæˆ‘ä»¬æœ‰$a^{pâˆ’1}â‰¡1(mod\ p)$ã€‚é‚£ä¹ˆå°±æœ‰$a^{pâˆ’2}Ã—aâ‰¡1(mod\ p)$ï¼Œåˆ™<code>a</code>çš„é€†å…ƒå°±æ˜¯$a^{pâˆ’2}$<br>ä¸‹é¢<code>ksm</code>å‡½æ•°ä¸ºå¿«é€Ÿå¹‚</p><pre class="line-numbers language-cpp"><code class="language-cpp">fact<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    fact<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> fact<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> i <span class="token operator">%</span> mod<span class="token punctuation">;</span>    inv<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">ksm</span><span class="token punctuation">(</span>fact<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> mod <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><p><strong>æ–¹å¼äºŒï¼š</strong></p><p>é€šè¿‡å¼å­$\frac{1}{(n+1)!}\times (n+1)=\frac{1}{n!}$å€’æ¨æ¥è¿‘çº¿æ€§æ±‚é˜¶ä¹˜é€†å…ƒ</p><p>$\frac{1}{(n+1)!}$å…¶å®å°±å¯ä»¥çœ‹ä½œ${(n+1)!}$çš„é€†å…ƒ</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    fact<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> fact<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> i <span class="token operator">%</span> mod<span class="token punctuation">;</span>inv<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">ksm</span><span class="token punctuation">(</span>fact<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">,</span> mod <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>    inv<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> inv<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> mod<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h1 id="çº¿æ€§æ±‚é€†å…ƒ"><a href="#çº¿æ€§æ±‚é€†å…ƒ" class="headerlink" title="çº¿æ€§æ±‚é€†å…ƒ"></a>çº¿æ€§æ±‚é€†å…ƒ</h1><p>æ±‚$[1,N-1]$å…³äº<code>mod</code>çš„é€†å…ƒæ—¶ï¼Œå¯ä»¥åšåˆ°åœ¨$O(N)$æ—¶é—´å†…è§£å†³</p><p>è®¾æ¨¡æ•°ä¸º<code>p</code><br>å¯¹äºå½“å‰çš„<code>i</code>ï¼Œè®¾$p=kÃ—i+r$,åˆ™</p><p>$\begin{aligned}<br>k \times i + r &amp; \equiv   0  &amp;\,\,(mod \,\, p) \\<br>k \times i \times ( i^{-1} \times r ^{-1}) + r \times (i^{-1} \times r^{-1}) &amp;\equiv 0 &amp;\,\,( mod \,\, p) \\<br>k \times r^{-1} + i ^ {-1} &amp; \equiv 0 &amp;\,\, (mod \,\, p)\\<br>i^{-1} &amp; \equiv -k \times r^{-1} &amp;\,\, (mod \,\, p) \\<br>i^{-1} &amp; \equiv - \left \lfloor \frac{p}{i}\right \rfloor \times r^{-1} &amp;\,\,(mod\,\,p)<br>\end{aligned}$<br>æ³¨æ„ï¼š<br>$inv[1]$ä¸€å®šè¦åˆå§‹åŒ–ä¸º1ï¼Œéœ€è¦ä»2å¼€å§‹é€’æ¨ï¼Œä¸èƒ½ä»1å¼€å§‹é€’æ¨</p><pre class="line-numbers language-cpp"><code class="language-cpp">inv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> inv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    inv<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> inv<span class="token punctuation">[</span>mod <span class="token operator">%</span> i<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>mod <span class="token operator">-</span> mod <span class="token operator">/</span> i<span class="token punctuation">)</span> <span class="token operator">%</span> mod<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>åŒæ—¶å¯ä»¥é€šè¿‡çº¿æ€§æ±‚é€†å…ƒæ±‚<strong>é˜¶ä¹˜é€†å…ƒ</strong>ï¼š<br>åªéœ€è¦å†å°†é€†å…ƒç”¨ç±»ä¼¼é˜¶ä¹˜çš„å½¢å¼ä¹˜èµ·æ¥å³å¯ï¼Œæ±‚å¾—çš„<code>inv[i]</code>å³ä¸º$i!$çš„é€†å…ƒ</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    inv<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> inv<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> inv<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">%</span> mod<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><hr><h1 id="ç»„åˆæ•°è®¡ç®—"><a href="#ç»„åˆæ•°è®¡ç®—" class="headerlink" title="ç»„åˆæ•°è®¡ç®—"></a>ç»„åˆæ•°è®¡ç®—</h1><p>$C_n^m$è®¡ç®—</p><ul><li>æ–¹å¼ä¸€ï¼šå…¬å¼è®¡ç®—<br>è®¡ç®—éƒ½æ˜¯åœ¨é€†å…ƒæˆ–è€…é˜¶ä¹˜åŸºç¡€ä¸Šè®¡ç®—çš„<br>$C_n^m = \frac{n!}{m!*(n-m)!}$</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp">ll <span class="token function">C</span><span class="token punctuation">(</span>ll n<span class="token punctuation">,</span> ll m<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">&lt;</span> m<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> fact<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">*</span> inv<span class="token punctuation">[</span>m<span class="token punctuation">]</span> <span class="token operator">%</span> mod <span class="token operator">*</span> inv<span class="token punctuation">[</span>n <span class="token operator">-</span> m<span class="token punctuation">]</span> <span class="token operator">%</span> mod<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ–¹å¼äºŒï¼šé€’æ¨æ–¹å¼<br>éœ€è¦å»ºè¡¨,æ‰€ä»¥å¦‚æœè®¡ç®—èŒƒå›´æ¯”è¾ƒå¤§æ—¶éœ€è¦çš„ç©ºé—´ä¹Ÿå¤§<br>é€’æ¨å…¬å¼ ï¼š $C_n^m = C_{n-1}^{m} + C_{n-1}^{m-1}$</li></ul><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> j <span class="token operator">||</span> j <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> c<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> c<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> c<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><p>é“¾æ¥ï¼š<br><a href="https://ac.nowcoder.com/acm/contest/23481/J" target="_blank" rel="noopener">https://ac.nowcoder.com/acm/contest/23481/J</a><br><img src="652576208/67dacbcfb1d0428e874f2faff1a0a75a.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><blockquote><p>å°±æ˜¯åœ¨æ•°ç»„ä¸­é€‰ä¸­kä¸ªå€¼ç›¸ä¹˜ï¼Œæœ€åæŠŠç»“æœç›¸åŠ å³å¯</p></blockquote><hr><p>å› ä¸ºæ•°ç»„ä¸­çš„æ•°å¤§å°åªæœ‰ä¸‰ç§æƒ…å†µã€‚æ‰€ä»¥å¯ä»¥æ ¹æ®è¿™ä¸ªè¿›è¡Œåˆ‡å…¥å£ã€‚</p><p>é¦–å…ˆ$0$å¯ä»¥ä¸ç”¨è€ƒè™‘ï¼Œæ¥ä¸‹è€ƒè™‘æœ‰$n$ä¸ª$1$å’Œ$m$ä¸ª$2$ï¼Œå¦‚æœä¸Šè¿°å’Œå¼ä¸­$1$å‡ºç°äº†$i$ä¸ªï¼Œé‚£ä¹ˆ$2$éœ€è¦å‡ºç°$k-i$ä¸ªï¼Œäºæ˜¯ç­”æ¡ˆä¸º</p><p>$\sum \limits_{i=0}^k C_n^i C_m^{k-i}2^{k-i}$</p><hr><p>ä»£ç ä¸­æ³¨æ„å„ç§åˆå§‹åŒ–<br>çº¿æ€§æ±‚é€†å…ƒä¸­åˆå§‹åŒ–ï¼š<code>inv[1] = 1</code><br><code>fac[i]</code>:$2^i$<br><code>fact[i]</code>:$i!$</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">1e7</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> mod <span class="token operator">=</span> <span class="token number">998244353</span><span class="token punctuation">;</span>ll fac<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> fact<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> inv<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>ll <span class="token function">C</span><span class="token punctuation">(</span>ll n<span class="token punctuation">,</span> ll m<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">&lt;</span> m<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> fact<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">*</span> inv<span class="token punctuation">[</span>m<span class="token punctuation">]</span> <span class="token operator">%</span> mod <span class="token operator">*</span> inv<span class="token punctuation">[</span>n <span class="token operator">-</span> m<span class="token punctuation">]</span> <span class="token operator">%</span> mod<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    fac<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>    fac<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> fact<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> fact<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> inv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> inv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        fac<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> fac<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">%</span> mod<span class="token punctuation">;</span>        fact<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> fact<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> i <span class="token operator">%</span> mod<span class="token punctuation">;</span>        inv<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> inv<span class="token punctuation">[</span>mod <span class="token operator">%</span> i<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>mod <span class="token operator">-</span> mod <span class="token operator">/</span> i<span class="token punctuation">)</span> <span class="token operator">%</span> mod<span class="token punctuation">;</span>     <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        inv<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> inv<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> inv<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">%</span> mod<span class="token punctuation">;</span>    <span class="token keyword">int</span> n<span class="token punctuation">,</span> k<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n <span class="token operator">>></span> k<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">a</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> o <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>     <span class="token punctuation">{</span>        cin <span class="token operator">>></span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> o <span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> t <span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        ll res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> k<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        res <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">C</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">C</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> k <span class="token operator">-</span> i<span class="token punctuation">)</span> <span class="token operator">%</span> mod <span class="token operator">*</span> fac<span class="token punctuation">[</span>k <span class="token operator">-</span> i<span class="token punctuation">]</span> <span class="token operator">%</span> mod<span class="token punctuation">;</span>        res <span class="token operator">%</span><span class="token operator">=</span> mod<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    cout <span class="token operator">&lt;&lt;</span> res <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ios<span class="token operator">::</span><span class="token function">sync_with_stdio</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cin<span class="token punctuation">.</span><span class="token function">tie</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//    cin >> t;</span>    t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>t<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token function">solve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°è®º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç»„åˆæ•°å­¦ </tag>
            
            <tag> é€†å…ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®¹æ–¥å®šç†</title>
      <link href="/p/1292892888.html"/>
      <url>/p/1292892888.html</url>
      
        <content type="html"><![CDATA[<p>ï»¿ï»¿# å®¹æ–¥å®šç†</p><h2 id="åŸºæœ¬æè¿°"><a href="#åŸºæœ¬æè¿°" class="headerlink" title="åŸºæœ¬æè¿°"></a>åŸºæœ¬æè¿°</h2><p><img src="1292892888/a188f738744e4afb8c5f7e745640cdd9.png" alt="ç®€å•ç‰ˆæœ¬"><br>å¯¹äºä¸Šè¿°å›¾ç‰‡ï¼Œæ±‚$|A\cup B \cup C|$<br>ç»“æœä¸º$|A\cup B\cup C|=|A|+|B|+|C|-|A\cap B|-|B\cap C|-|C\cap A|+|A\cap B\cap C|$</p><h2 id="ä¸€èˆ¬æè¿°"><a href="#ä¸€èˆ¬æè¿°" class="headerlink" title="ä¸€èˆ¬æè¿°"></a>ä¸€èˆ¬æè¿°</h2><p>å…¬å¼ï¼š$\left|\bigcup_{i=1}^{n}S_i\right|=\sum_{m=1}^n(-1)^{m-1}\sum_{a_i&lt;a_{i+1} }\left|\bigcap_{i=1}^mS_{a_i}\right|$</p><p>å¤§å®¶åº”è¯¥æ˜¯çœ‹ä¸æ‡‚å§ï¼Œåæ­£æˆ‘æ˜¯çœ‹ä¸æ‡‚</p><p>æˆ‘ç†è§£çš„é€šä¿—çš„æ„æ€å°±æ˜¯ï¼š</p><p><code>n</code>ä¸ªé›†åˆçš„å¹¶é›†<strong>ç­‰äº</strong><code>n</code>ä¸ªé›†åˆé€‰æ‹©ä¸€ä¸ªçš„æƒ…å†µä¸­æ‰€æœ‰æƒ…å†µçš„äº¤-<code>n</code>ä¸ªé›†åˆä¸­é€‰æ‹©ä¸¤ä¸ªæ‰€æœ‰æƒ…å†µä¸­ä¸¤ä¸¤çš„äº¤+<code>n</code>ä¸ªé›†åˆä¸­é€‰æ‹©ä¸‰ä¸ªä¸­æ‰€æœ‰æƒ…å†µä¸‰ä¸ªçš„äº¤-é€‰æ‹©å››ç§çš„äº¤+é€‰æ‹©äº”ç§çš„äº¤-â€¦â€¦</p><p>ç¨å¾®ç”¨å…¬å¼è¡¨ç¤ºä¸€ä¸‹ï¼š<br>$|A_1\cupâ€¦\cup A_n| = \<br>|A_1|+|A_2|+â€¦+|A_n|\<br>-(|A_1 \cap A_2|+â€¦+|A_i \cap A_j|)\<br>+(|A_1 \cap A_2 \cap A_3|+â€¦+|A_i \cap A_j \cap A_k|)\<br>-(å››ä¸ªä¹‹é—´çš„äº¤)\<br>+(äº”ä¸ªä¹‹é—´çš„äº¤)\<br>â€¦â€¦$</p><p>å¤§æ¦‚å°±æ˜¯è¿™ä¸ªæ„æ€ã€‚</p><ul><li>é€‰æ‹©çš„ä¸ªæ•°ä¸ºå¶æ•°æ¬¡ï¼Œå‰é¢ç¬¦å·ä¸ºè´Ÿ<ul><li>é€‰æ‹©çš„ä¸ªæ•°ä¸ºå¥‡æ•°æ¬¡ï¼Œå‰é¢ç¬¦å·ä¸ºæ­£</li></ul></li></ul><p>å‚è€ƒé“¾æ¥ï¼š<br><a href="https://oi-wiki.org/math/combinatorics/inclusion-exclusion-principle/" target="_blank" rel="noopener">https://oi-wiki.org/math/combinatorics/inclusion-exclusion-principle/</a></p><h2 id="ä¾‹é¢˜1-èƒ½è¢«æ•´é™¤çš„æ•°"><a href="#ä¾‹é¢˜1-èƒ½è¢«æ•´é™¤çš„æ•°" class="headerlink" title="ä¾‹é¢˜1 èƒ½è¢«æ•´é™¤çš„æ•°"></a>ä¾‹é¢˜1 èƒ½è¢«æ•´é™¤çš„æ•°</h2><p>é¢˜ç›®é“¾æ¥ï¼š<a href="https://www.acwing.com/problem/content/892/" target="_blank" rel="noopener">https://www.acwing.com/problem/content/892/</a></p><blockquote><p>ç»™å®šä¸€ä¸ªæ•´æ•° <code>n</code>å’Œ <code>m</code> ä¸ªä¸åŒçš„è´¨æ•° $p_1,p_2,â€¦,p_m$ã€‚<br>è¯·ä½ æ±‚å‡º 1âˆ¼n ä¸­èƒ½è¢« $p_1,p_2,â€¦,p_m$ä¸­çš„è‡³å°‘ä¸€ä¸ªæ•°æ•´é™¤çš„æ•´æ•°æœ‰å¤šå°‘ä¸ªã€‚</p></blockquote><hr><p><strong>æ€è·¯ï¼š</strong></p><blockquote><p>å…ˆç®€å•çš„ä¸¾ä¸ªä¾‹å­ï¼š<br>è´¨æ•°æœ‰2ï¼Œ3ï¼Œ5ï¼Œ7ï¼Œ11äº”ä¸ª<br>èƒ½è¢«2æ•´é™¤çš„æœ‰2ï¼Œ4ï¼Œ6ï¼Œ8 â€¦.<br>èƒ½è¢«3æ•´é™¤çš„æœ‰3ï¼Œ6ï¼Œ9ï¼Œ12â€¦.<br>â€¦<br>é—®çš„æ˜¯è¢«è‡³å°‘ä¸€ä¸ªæ•´é™¤å°±è¡Œï¼Œé‚£ä¹ˆä¸Šè¿°ä¾‹å­ä¸­6æ˜¯é‡å¤çš„<br>ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¯ä»¥æŠŠèƒ½è¢«<strong>ä¸€ä¸ªè´¨æ•°æ•´é™¤çš„ä¸ªæ•°</strong>å½“ä½œ<strong>ä¸€ä¸ªé›†åˆ</strong>ï¼Œè¿™ä¹ˆå¤šè´¨æ•°ç»„æˆçš„é›†åˆæœ‰é‡åˆçš„ï¼Œæˆ‘ä»¬è¦æ±‚çš„æ˜¯è¿™ä¹ˆå¤šé›†åˆçš„å¹¶é›†ï¼Œæ»¡è¶³å®¹æ–¥å®šç†</p></blockquote><p>åœ¨<code>1-n</code>ä¸­èƒ½è¢«<code>x</code>æ•´é™¤çš„ä¸ªæ•°ï¼š$\lfloor \frac{n}{x}\rfloor$<br>åœ¨<code>1-n</code>ä¸­èƒ½è¢«<code>x,y</code>æ•´é™¤çš„ä¸ªæ•°ï¼š$\lfloor \frac{n}{xy}\rfloor$<br>åœ¨<code>1-n</code>ä¸­èƒ½è¢«<code>x,y,z</code>æ•´é™¤çš„ä¸ªæ•°ï¼š$\lfloor \frac{n}{xyz}\rfloor$<br>â€¦â€¦<br>ç„¶åå°±å¯ä»¥æ ¹æ®å…¬å¼æ±‚ç»“æœï¼Œæœ‰<code>m</code>ä¸ªè´¨æ•°ï¼Œå…±æœ‰<code>m</code>ä¸ªé›†åˆï¼Œæ¯æ¬¡ä¼šé€‰ä¸­è‹¥å¹²ä¸ªé›†åˆï¼Œä»£è¡¨å‡ ä¸ªä¹‹é—´çš„äº¤é›†ï¼ˆå‚ç…§ä¸Šé¢å®¹æ–¥å®šç†å…¬å¼ï¼‰</p><blockquote><p>å‡ ä¸ªé›†åˆä¹‹é—´çš„äº¤é›†ï¼šå°±æ˜¯ä¸€ä¸ªæ•°èƒ½<strong>åŒæ—¶</strong>è¢«è¿™é€‰ä¸­çš„å‡ ä¸ªè´¨æ•°æ•´é™¤</p></blockquote><p>é€‰ä¸­é›†åˆä¸ªæ•°ä¸ºå¶æ•°ï¼Œå‰é¢ç¬¦å·ä¸º<strong>è´Ÿ</strong><br>é€‰ä¸­é›†åˆä¸ªæ•°ä¸ºå¥‡æ•°ï¼Œå‰é¢ç¬¦å·ä¸º<strong>æ­£</strong></p><blockquote><p>æšä¸¾æ‰€æœ‰çš„é›†åˆï¼š<br>æˆ‘ä»¬é‡‡ç”¨äºŒè¿›åˆ¶çš„æ–¹æ³•ï¼Œæšä¸¾$[1,2^{m}-1]$,ç»Ÿè®¡å…¶ä¸­<code>1</code>çš„ä¸ªæ•°å³å¯</p></blockquote><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span><span class="token keyword">int</span> p<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    cin<span class="token operator">>></span>n<span class="token operator">>></span>m<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>m<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> cin<span class="token operator">>></span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    ll res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span> <span class="token number">1</span><span class="token operator">&lt;&lt;</span>m <span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        ll t <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>m<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span> i<span class="token operator">>></span>j <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                cnt <span class="token operator">++</span> <span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ç»Ÿè®¡é€‰ä¸­çš„ä¸ªæ•°</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>t <span class="token operator">*</span> p<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> n<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//ä¸æ»¡è¶³æ¡ä»¶ï¼Œå› ä¸ºå¤§äºnäº†</span>                <span class="token punctuation">{</span>                    t <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                t <span class="token operator">*</span><span class="token operator">=</span> p<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>cnt<span class="token operator">%</span><span class="token number">2</span><span class="token punctuation">)</span> res <span class="token operator">+</span><span class="token operator">=</span> n<span class="token operator">/</span>t<span class="token punctuation">;</span>            <span class="token keyword">else</span> res <span class="token operator">-</span><span class="token operator">=</span> n<span class="token operator">/</span>t<span class="token punctuation">;</span>         <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    cout <span class="token operator">&lt;&lt;</span> res <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="ä¾‹é¢˜2"><a href="#ä¾‹é¢˜2" class="headerlink" title="ä¾‹é¢˜2"></a>ä¾‹é¢˜2</h2><p>é¢˜ç›®é“¾æ¥ï¼š<a href="https://www.acwing.com/problem/content/216/" target="_blank" rel="noopener">https://www.acwing.com/problem/content/216/</a></p><blockquote><p>Devu æœ‰ <code>N</code> ä¸ªç›’å­ï¼Œç¬¬ <code>i</code> ä¸ªç›’å­ä¸­æœ‰ $A_i$ æèŠ±ã€‚åŒä¸€ä¸ªç›’å­å†…çš„èŠ±é¢œè‰²ç›¸åŒï¼Œä¸åŒç›’å­å†…çš„èŠ±é¢œè‰²ä¸åŒã€‚Devu è¦ä»è¿™äº›ç›’å­ä¸­é€‰å‡º <code>m</code> æèŠ±ç»„æˆä¸€æŸï¼Œæ±‚å…±æœ‰å¤šå°‘ç§æ–¹æ¡ˆã€‚è‹¥ä¸¤æŸèŠ±æ¯ç§é¢œè‰²çš„èŠ±çš„æ•°é‡éƒ½ç›¸åŒï¼Œåˆ™è®¤ä¸ºè¿™ä¸¤æŸèŠ±æ˜¯ç›¸åŒçš„æ–¹æ¡ˆã€‚ç»“æœéœ€å¯¹ $10^9+7$ å–æ¨¡ä¹‹åæ–¹å¯è¾“å‡º</p></blockquote><hr><p><strong>æ€è·¯</strong></p><ul><li>ç†æƒ³æƒ…å†µ</li></ul><p>é¦–å…ˆå»æ‰é™åˆ¶è€ƒè™‘ç†æƒ³æƒ…å†µï¼Œå³æ¯ä¸ªç›’å­çš„èŠ±çš„ä¸ªæ•°æœ‰æ— é™ä¸ªï¼Œè®¾ç¬¬$i$ä¸ªç›’å­å–å‡º$x_i$æœµèŠ±</p><p>åˆ™$x_1+x_2+x_3+â€¦+x_n=  m,x_i \geq 0$,æ€»æ–¹æ¡ˆæ•°ä¸º$C_{n+m-1}^{n-1}$ç§</p><p>å¯ä»¥å‚è€ƒé“¾æ¥æŸ¥çœ‹å¦‚ä½•è®¡ç®— :<br><a href="https://oi-wiki.org/math/combinatorics/inclusion-exclusion-principle/" target="_blank" rel="noopener">https://oi-wiki.org/math/combinatorics/inclusion-exclusion-principle/</a></p><hr><ul><li>æœ‰é™åˆ¶çš„æƒ…å†µ</li></ul><p>é™åˆ¶æ¡ä»¶ä¸‹ï¼š<br>$x_1+x_2+x_3+â€¦+x_n=  m,x_1&lt;=A_1,x_2&lt;=A_2,x_3&lt;=A_3â€¦â€¦x_n&lt;=A_n$</p><p>$x_1,x_2,â€¦,x_n$åŒæ—¶æ»¡è¶³é™åˆ¶æ¡ä»¶æ‰å¯ï¼Œæˆ‘ä»¬è€ƒè™‘ä»è¡¥é›†å»æ±‚ï¼ˆæ€»æƒ…å†µæ•°å‡å»ç›¸åçš„æƒ…å†µï¼‰</p><p>è¡¥é›†æƒ…å†µä¸‹ï¼š</p><p>$x_1+x_2+x_3+â€¦+x_n=  m,x_1&gt;A_1,x_2&gt;A_2,x_3&gt;A_3â€¦â€¦x_n&gt;A_n$<br>ç¬¬<code>i</code>ä¸ªé™åˆ¶ï¼ˆ$x_i&gt;A_i$ï¼‰çš„æƒ…å†µæ»¡è¶³ä¸ªæ•°æˆ‘ä»¬å½“ä½œä¸€ä¸ªé›†åˆ$s_i$</p><ul><li>æ€»æ•°ï¼š$C_{n+m-1}^{n-1}$</li><li>é¢˜ç›®çš„è¡¥é›†ï¼š$|s_1\bigcup s_2\bigcup s_3â€¦â€¦\bigcup s_n|$</li><li>ç»“æœä¸ºï¼š$C_{m+n-1}^{n-1}-|s_1\bigcup s_2\bigcup s_3â€¦â€¦\bigcup s_n|$</li></ul><p>è€ƒè™‘æ±‚æ»¡è¶³$s_1$çš„æƒ…å†µæ•°<br>å³ç¬¬ä¸€ä¸ªå¿…é¡»å–è‡³å°‘$A_i+1$æ”¯èŠ±ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±åŒ–ä¸ºä»<code>n</code>ç»„é‡Œé¢é€‰èŠ±ï¼Œ$x_1&gt;=A_1+1,x_2&gt;=0,x_3&gt;=0,â€¦,x_n&gt;=0$çš„æƒ…å†µï¼Œå¯ä»¥ç›´æ¥å–å‡º$A_i+1$æ”¯èŠ±æ”¾åœ¨ç¬¬ä¸€ç»„ï¼Œé‚£ä¹ˆæ€»æ•°å°±å˜æˆ$m-(A_1+1)$æ”¯èŠ±ï¼Œå°±åŒ–ä¸º<strong>ç†æƒ³æƒ…å†µ</strong>(è§ä¸Šæ–‡)ä¸‹çš„é—®é¢˜äº†ï¼Œæ€»æ•°ä¸º$C_{m+n-1-(A_1+1)}^{n-1}$</p><p>$s_1\cap s_2$åŒç†<br>ç­”æ¡ˆä¸º$C_{m+n-1-(A_1+1)-(A_2+1)}^{n-1}$</p><p>æœ€åæšä¸¾æ‰€æœ‰çš„æƒ…å†µæ•°ï¼Œä½¿ç”¨äºŒè¿›åˆ¶æ–¹æ³•è¿›è¡Œæšä¸¾ï¼Œæšä¸¾$[0,2^n-1]$,ç»Ÿè®¡äºŒè¿›åˆ¶ä½<code>1</code>çš„ä¸ªæ•°</p><p>å¥‡æ•°ä¸ª<code>1</code>ç¬¦å·ä¸ºè´Ÿ<br>å¶æ•°ä¸ª<code>1</code>ç¬¦å·ä½æ­£</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">,</span>mod <span class="token operator">=</span> <span class="token number">1e9</span><span class="token operator">+</span><span class="token number">7</span><span class="token punctuation">;</span>ll a<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>ll d <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>ll <span class="token function">fast</span><span class="token punctuation">(</span>ll a<span class="token punctuation">,</span>ll b<span class="token punctuation">)</span><span class="token punctuation">{</span>    ll res <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>b<span class="token operator">&amp;</span><span class="token number">1</span><span class="token punctuation">)</span> res <span class="token operator">=</span> res <span class="token operator">*</span> a <span class="token operator">%</span> mod<span class="token punctuation">;</span>        a <span class="token operator">=</span> a <span class="token operator">*</span> a <span class="token operator">%</span> mod<span class="token punctuation">;</span>        b <span class="token operator">>>=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">}</span>ll <span class="token function">C</span><span class="token punctuation">(</span>ll x<span class="token punctuation">,</span>ll y<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">&lt;</span> y<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    ll u <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>ll i <span class="token operator">=</span> x<span class="token punctuation">;</span>i<span class="token operator">></span>x<span class="token operator">-</span>y<span class="token punctuation">;</span>i<span class="token operator">--</span><span class="token punctuation">)</span> u <span class="token operator">=</span> i <span class="token operator">%</span> mod <span class="token operator">*</span> u <span class="token operator">%</span> mod<span class="token punctuation">;</span>    <span class="token keyword">return</span> u <span class="token operator">*</span> d <span class="token operator">%</span> mod<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ll n<span class="token punctuation">,</span>m<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n <span class="token operator">>></span> m<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> cin<span class="token operator">>></span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>ll i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token number">-1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> d <span class="token operator">=</span> d <span class="token operator">*</span> i <span class="token operator">%</span> mod<span class="token punctuation">;</span>    d <span class="token operator">=</span> <span class="token function">fast</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span>mod<span class="token number">-2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ll res <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> <span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//ç»„åˆæ•°çš„ä¸‹è§’æ ‡   ä¸Šè§’æ ‡</span>        ll down <span class="token operator">=</span> n <span class="token operator">+</span> m <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>up <span class="token operator">=</span> n<span class="token number">-1</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> sign <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æ ‡è®°çš„ç¬¦å·ä½</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">>></span>j<span class="token operator">&amp;</span><span class="token number">1</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                down <span class="token operator">-</span><span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ä¸‹è§’æ ‡å‡å»å¯¹åº”çš„ä¸ªæ•°</span>                sign <span class="token operator">*</span><span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        res <span class="token operator">=</span> <span class="token punctuation">(</span>res <span class="token operator">+</span> <span class="token function">C</span><span class="token punctuation">(</span>down<span class="token punctuation">,</span>up<span class="token punctuation">)</span> <span class="token operator">*</span> sign<span class="token punctuation">)</span><span class="token operator">%</span>mod<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//è®¡ç®—ç»„åˆæ•°ï¼Œç»Ÿè®¡ç­”æ¡ˆ</span>    <span class="token punctuation">}</span>    cout<span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>res <span class="token operator">+</span> mod<span class="token punctuation">)</span> <span class="token operator">%</span> mod<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>     <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¾‹é¢˜3-ABC-297-F-Minimum-Bounding-Box-2"><a href="#ä¾‹é¢˜3-ABC-297-F-Minimum-Bounding-Box-2" class="headerlink" title="ä¾‹é¢˜3 ABC 297 F Minimum Bounding Box 2"></a>ä¾‹é¢˜3 ABC 297 F Minimum Bounding Box 2</h2><p><a href="https://atcoder.jp/contests/abc297/tasks/abc297_f" target="_blank" rel="noopener">AtCoder Beginner Contest 297 F Minimum Bounding Box 2</a></p><p><img src="https://img-blog.csdnimg.cn/5f1ff6e83b1140129786c6cbf187c9e3.png" alt="æ–¹æ³•æè¿°"></p><p>æšä¸¾çŸ©å½¢çš„é•¿hå’Œå®½wï¼Œé•¿hå®½wçš„çŸ©å½¢çš„æƒ…å†µæ•°æ€»å…±æœ‰ $(H - h + 1) \times (W - w + 1)$ ä¸ªï¼Œæ¯ä¸ªçŸ©å½¢æ¡†å¯¹åº”çš„åˆ†æ•°ä¸º $h \times w$</p><p>å®¹æ–¥æ—¶ï¼Œå…±æœ‰å››ä¸ªå˜é‡ï¼Œå¯¹åº”4ä¸ªäºŒè¿›åˆ¶ä½ï¼Œ å¯¹åº”ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘æ˜¯å¦æ”¶ç¼©1ä¸ªå•ä½ï¼Œæ”¶ç¼©çš„æ€»æ•°ä¸ºå¥‡æ•°æ—¶ï¼Œç¬¦å·ä¸ºè´Ÿï¼Œä¸ºå¶æ•°æ—¶ï¼Œç¬¦å·ä¸ºæ­£ã€‚</p><blockquote><p>æ³¨æ„å®¹æ–¥å˜é‡sæ˜¯ä»0å¼€å§‹ï¼Œ0åˆšå¥½å¯¹åº”æ€»çš„æƒ…å†µæ•°ï¼Œæ‰€ä»¥ä¸ç”¨é¢å¤–è®¡ç®—æ€»çš„æƒ…å†µæ•°</p></blockquote><p>æœ€åå†é™¤ä»¥æ€»çš„æƒ…å†µæ•° $C_{h * w} ^ k$ å³å¯</p><pre class="line-numbers language-c++"><code class="language-c++">#include<bits/stdc++.h>using namespace std;using ll = long long;const int mod = 998244353;const int N = 1e6;ll ksm(ll a, ll b) {    ll res = 1;    a %= mod;    while(b) {        if(b & 1) res = res * a % mod;        b >>= 1;        a = a * a % mod;    }    return res;}int main() {    ios::sync_with_stdio(false);    cin.tie(0);    int h, w, k;    cin >> h >> w >> k;    vector<ll> fac(N + 1), inv(N + 1);    fac[0] = 1;    for(int i = 1; i <= N; i++) {        fac[i] = fac[i - 1] * i % mod;    }    inv[N] = ksm(fac[N], mod - 2);    inv[0] = 1;    for(int i = N - 1; i >= 1; i--) {        inv[i] = inv[i + 1] * (i + 1) % mod;    }    auto C = [&](ll n, ll m) -> ll {        if(n < m || m < 0) return 0;        return fac[n] * inv[m] % mod * inv[n - m] % mod;    };    ll ans = 0;    for(int i = 1; i <= h; i++) {        for(int j = 1; j <= w; j++) {            ll res = 0;            for(int s = 0; s < 16; s++) {                int u = __builtin_popcount(s & 3);                int v = __builtin_popcount(s & 12);                res += ((u + v) & 1 ? -1 : 1) * C(max(0, i - u) * max(0, j - v), k) % mod;                res %= mod;            }            ans += res * (h - i + 1) % mod * (w - j + 1) % mod * i % mod * j % mod;            ans %= mod;        }    }    ans *= ksm(C(h * w, k), mod - 2);    ans %= mod;    cout << (ans + mod) % mod << "\n";    return 0;}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°è®º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ STLè¶…å…¨æ€»ç»“</title>
      <link href="/p/16970766.html"/>
      <url>/p/16970766.html</url>
      
        <content type="html"><![CDATA[<h1 id="C-STLå¸¸ç”¨å†…å®¹æ€»ç»“"><a href="#C-STLå¸¸ç”¨å†…å®¹æ€»ç»“" class="headerlink" title="C++ STLå¸¸ç”¨å†…å®¹æ€»ç»“"></a>C++ STLå¸¸ç”¨å†…å®¹æ€»ç»“</h1><p>æˆ‘æ˜¯ä»¥æ‰“ç®—æ³•ç«èµ›çš„è§’åº¦æ•´ç†çš„STLçŸ¥è¯†ç‚¹ï¼Œ<strong>å¼ºè°ƒä½¿ç”¨æ–¹æ³•</strong>ï¼Œå¹¶ä¸å¼ºè°ƒåŸç†ã€‚</p><p>ä¸‹é¢ä¼šä»‹ç»å¾ˆå¤šC++ STLåº“é‡Œé¢çš„æ¨¡æ¿ï¼Œåœ¨ç¼–ç¨‹ä¸­STLçŠ¹å¦‚ç¥å™¨ï¼Œå®ç”¨ç®€æ´å¥½ç”¨ã€‚<br>STLç»å¯¹è®©ä½ å—ç›Šæ— ç©·ï¼</p><h2 id="ğŸ‘‰1-vectoråŠ¨æ€æ•°ç»„ğŸ‘ˆ"><a href="#ğŸ‘‰1-vectoråŠ¨æ€æ•°ç»„ğŸ‘ˆ" class="headerlink" title="ğŸ‘‰1.vectoråŠ¨æ€æ•°ç»„ğŸ‘ˆ"></a>ğŸ‘‰<a href="https://blog.csdn.net/qq_50285142/article/details/122303529" target="_blank" rel="noopener">1.vectoråŠ¨æ€æ•°ç»„</a>ğŸ‘ˆ</h2><h2 id="ğŸ‘‰2-stackæ ˆğŸ‘ˆ"><a href="#ğŸ‘‰2-stackæ ˆğŸ‘ˆ" class="headerlink" title="ğŸ‘‰2.stackæ ˆğŸ‘ˆ"></a>ğŸ‘‰<a href="https://blog.csdn.net/qq_50285142/article/details/122303786" target="_blank" rel="noopener">2.stackæ ˆ</a>ğŸ‘ˆ</h2><h2 id="ğŸ‘‰3-queueé˜Ÿåˆ—ğŸ‘ˆ"><a href="#ğŸ‘‰3-queueé˜Ÿåˆ—ğŸ‘ˆ" class="headerlink" title="ğŸ‘‰3.queueé˜Ÿåˆ—ğŸ‘ˆ"></a>ğŸ‘‰<a href="https://blog.csdn.net/qq_50285142/article/details/122304056" target="_blank" rel="noopener">3.queueé˜Ÿåˆ—</a>ğŸ‘ˆ</h2><h2 id="ğŸ‘‰4-dequeåŒç«¯é˜Ÿåˆ—ğŸ‘ˆ"><a href="#ğŸ‘‰4-dequeåŒç«¯é˜Ÿåˆ—ğŸ‘ˆ" class="headerlink" title="ğŸ‘‰4.dequeåŒç«¯é˜Ÿåˆ—ğŸ‘ˆ"></a>ğŸ‘‰<a href="https://blog.csdn.net/qq_50285142/article/details/114079022" target="_blank" rel="noopener">4.dequeåŒç«¯é˜Ÿåˆ—</a>ğŸ‘ˆ</h2><h2 id="ğŸ‘‰5-priority-queueä¼˜å…ˆé˜Ÿåˆ—ğŸ‘ˆ"><a href="#ğŸ‘‰5-priority-queueä¼˜å…ˆé˜Ÿåˆ—ğŸ‘ˆ" class="headerlink" title="ğŸ‘‰5.priority_queueä¼˜å…ˆé˜Ÿåˆ—ğŸ‘ˆ"></a>ğŸ‘‰<a href="https://blog.csdn.net/qq_50285142/article/details/114078695" target="_blank" rel="noopener">5.priority_queueä¼˜å…ˆé˜Ÿåˆ—</a>ğŸ‘ˆ</h2><h2 id="ğŸ‘‰6-mapæ˜ å°„ğŸ‘ˆ"><a href="#ğŸ‘‰6-mapæ˜ å°„ğŸ‘ˆ" class="headerlink" title="ğŸ‘‰6.mapæ˜ å°„ğŸ‘ˆ"></a>ğŸ‘‰<a href="https://blog.csdn.net/qq_50285142/article/details/120368977" target="_blank" rel="noopener">6.mapæ˜ å°„</a>ğŸ‘ˆ</h2><h2 id="ğŸ‘‰7-seté›†åˆğŸ‘ˆ"><a href="#ğŸ‘‰7-seté›†åˆğŸ‘ˆ" class="headerlink" title="ğŸ‘‰7.seté›†åˆğŸ‘ˆ"></a>ğŸ‘‰<a href="https://blog.csdn.net/qq_50285142/article/details/122304728" target="_blank" rel="noopener">7.seté›†åˆ</a>ğŸ‘ˆ</h2><h2 id="ğŸ‘‰8-pairäºŒå…ƒç»„ğŸ‘ˆ"><a href="#ğŸ‘‰8-pairäºŒå…ƒç»„ğŸ‘ˆ" class="headerlink" title="ğŸ‘‰8.pairäºŒå…ƒç»„ğŸ‘ˆ"></a>ğŸ‘‰<a href="https://blog.csdn.net/qq_50285142/article/details/122304842" target="_blank" rel="noopener">8.pairäºŒå…ƒç»„</a>ğŸ‘ˆ</h2><h2 id="ğŸ‘‰9-stringå­—ç¬¦ä¸²ğŸ‘ˆ"><a href="#ğŸ‘‰9-stringå­—ç¬¦ä¸²ğŸ‘ˆ" class="headerlink" title="ğŸ‘‰9.stringå­—ç¬¦ä¸²ğŸ‘ˆ"></a>ğŸ‘‰<a href="https://blog.csdn.net/qq_50285142/article/details/114156051" target="_blank" rel="noopener">9.stringå­—ç¬¦ä¸²</a>ğŸ‘ˆ</h2><h2 id="ğŸ‘‰10-bitsetğŸ‘ˆ"><a href="#ğŸ‘‰10-bitsetğŸ‘ˆ" class="headerlink" title="ğŸ‘‰10.bitsetğŸ‘ˆ"></a>ğŸ‘‰<a href="https://blog.csdn.net/qq_50285142/article/details/114186789" target="_blank" rel="noopener">10.bitset</a>ğŸ‘ˆ</h2><h2 id="ğŸ‘‰11-arrayæ•°ç»„ğŸ‘ˆ"><a href="#ğŸ‘‰11-arrayæ•°ç»„ğŸ‘ˆ" class="headerlink" title="ğŸ‘‰11.arrayæ•°ç»„ğŸ‘ˆ"></a>ğŸ‘‰<a href="https://blog.csdn.net/qq_50285142/article/details/122932215" target="_blank" rel="noopener">11.arrayæ•°ç»„</a>ğŸ‘ˆ</h2><h2 id="ğŸ‘‰12-tupleå…ƒç»„ğŸ‘ˆ"><a href="#ğŸ‘‰12-tupleå…ƒç»„ğŸ‘ˆ" class="headerlink" title="ğŸ‘‰12.tupleå…ƒç»„ğŸ‘ˆ"></a>ğŸ‘‰<a href="https://blog.csdn.net/qq_50285142/article/details/123000835" target="_blank" rel="noopener">12.tupleå…ƒç»„</a>ğŸ‘ˆ</h2><h1 id="STLç›¸å…³å†…å®¹"><a href="#STLç›¸å…³å†…å®¹" class="headerlink" title="STLç›¸å…³å†…å®¹"></a>STLç›¸å…³å†…å®¹</h1><h2 id="C-STLå‡½æ•°æ€»ç»“"><a href="#C-STLå‡½æ•°æ€»ç»“" class="headerlink" title="C++ STLå‡½æ•°æ€»ç»“"></a><a href="https://wyq666.blog.csdn.net/article/details/120632337" target="_blank" rel="noopener">C++ STLå‡½æ•°æ€»ç»“</a></h2><hr><p>ç”±äºä½œè€…æ°´å¹³æœ‰é™ï¼Œå†…å®¹çº¯æ‰‹æ•²ï¼Œæ•´ç†å¯èƒ½æœ‰è¯¯ã€‚<br>å¦‚æœæœ‰å“ªäº›ä¸è¶³æˆ–è€…é”™è¯¯çš„åœ°æ–¹ï¼Œä¹Ÿå¸Œæœ›å¤§å®¶ç£ä¿ƒæˆ‘å°½å¿«æ”¹æ­£å“¦ï¼Œæˆ‘ä¼šåŠæ—¶å›å¤çš„ã€‚</p><p>å¦‚æœ‰ç–‘é—®ï¼Œè¯·åŠ QQäº¤æµç¾¤</p><p>ç‚¹å‡»é“¾æ¥åŠ å…¥ç¾¤èŠï¼š <a href="https://jq.qq.com/?_wv=1027&k=tcepNzVd" target="_blank" rel="noopener">https://jq.qq.com/?_wv=1027&amp;k=tcepNzVd</a></p>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ æ€»ç»“ </tag>
            
            <tag> C++ </tag>
            
            <tag> STL </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
